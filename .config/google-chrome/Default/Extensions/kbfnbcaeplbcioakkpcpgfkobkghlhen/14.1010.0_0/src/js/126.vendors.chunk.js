/*! For license information please see 126.vendors.chunk.js.LICENSE.txt */
(window.webpackChunk=window.webpackChunk||[]).push([[126],{12738:(e,t,n)=>{var r;n.d(t,{$:()=>r}),function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(r||(r={}))},59443:(e,t,n)=>{n.d(t,{Y1:()=>r,uq:()=>l});var r,i,a,s,o,l,c,u,d=n(73975),p=n(22232),m=n(8125),h=n(51996);!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return h.SV.create(e.index,e.index+e.length)},e.eq=(0,d.f7)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(r||(r={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,p.vE)(n)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,p.vE)(n)}}}}(e.Y||(e.Y={}))}(s||(s={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(o||(o={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(l||(l={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,m.CI)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},41046:(e,t,n)=>{n.d(t,{u:()=>r});var r,i=n(27378),a=n(40327),s=n(5114),o=n(83078),l=n(98403),c=n(19751),u=n(85255),d=n(2844),p=n(85089),m=n(2834),h=n(9223);!function(e){e.Manager=({children:t,remSize:n})=>{const r=l.Dx(n).pipe(c.d({refCount:!0,bufferSize:1}));return u.P.useSingleton("RemSize.Manager"),u.P.useSubscriptionTo(r),i.createElement(e.Context.Provider,{value:r},t)},e.DefaultManager=({children:t})=>(u.P.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},t)),e.defaultSizeObserver=d.aj(p.Lw("(max-width: 1359px)"),p.Lw("(min-width: 1600px)"),((e,t)=>e?14:t?18:16)),e.withRemSizeEffect=(t,n=e.defaultFontSizeSetter)=>t.pipe(m.b((e=>n(s.some(e)))),h.x(n.bind(null,s.none)),c.d({refCount:!0,bufferSize:1})),e.defaultFontSizeSetter=t=>{e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=(e,t)=>{e.style.setProperty("--rem",(0,a.pipe)(t,s.map(String),o.QP))},e.setRootFontSize=e=>{document.documentElement.style.fontSize=(0,a.pipe)(e,s.map((e=>e+"px")),o.QP)}}(r||(r={}))},30763:(e,t,n)=>{n.d(t,{m:()=>d});var r,i=n(27378),a=n(88056),s=n(18208),o=n(19429);!function(e){e.ClarityAICard="clarityAiCard",e.CardMute="cardMute",e.MuteQuotedAdvice="muteQuotedAdvice",e.SeenPremiumPreviewUnderlines="seenPremiumPreviewUnderlines",e.BulkAccept="bulkAccept",e.PassiveVoiceCard="passiveVoiceCard"}(r||(r={}));var l=n(26653);const c=o.VF((e=>({hideAssistant:"Hide Assistant",textRemoved:`If you didn’t mean to delete that text, press ${e.commandKeyLabel("Z")} to undo.`,hotkeyLabelR:e.commandKeyLabel("R"),hotkeyLabelC:e.commandKeyLabel("C"),tour:{welcomeNewUserTitle:"Ready to write something brilliant?",welcomeNewUserContent:"The Grammarly Editor helps you turn your\nideas into clear, compelling writing.",welcomeOldUserTitle:"Welcome to the new Grammarly Editor",welcomeOldUserContent:"All the features you love, plus a few new ones, wrapped up in a fresh new look.",startTour:"Start a quick tour",skipTour:"Skip the tour",fastApplyHeader:"Editing made easy",fastApplyDescription:"Get detailed feedback on your\nwriting and apply suggestions\nwith just one click.",assistantHeader:"Become a better writer",assistantDescription:"See your feedback organized into categories that help you identify where your writing is strong and where you can make it stronger.",checkTypesHeader:"Go beyond grammar",checkTypesDescription:"Make your writing clear, compelling, and concise with suggestions customized to your writing goals.",goalsHeader:"Set your goals",goalsDescription:"Adjust Grammarly’s feedback based on your objectives, your target audience, your writing style, and more.",finalTitle:"Enjoy\nthe Grammarly Editor",finalContent:"You’re ready to start writing! You can also copy and paste or upload some existing text to the Grammarly Editor.",startWriting:"Start writing",notReady:e=>i.createElement("span",null,"Not ready? You can return to Grammarly Classic anytime via the ",e," icon")},dunningNotification:{title:e=>`Don’t lose your ${e?"Grammarly Business":"Premium"} features!`,description:e=>`Please update your billing information to avoid losing access to Grammarly ${e?"Business":"Premium"}.`,cta:"Update payment information",secondaryCta:"Later"},confirmUpgradeModal:{title:"Welcome to Premium",content:"Want to learn more about advanced features?",continueWritingCta:e=>e?"Not now, close tab":"Continue writing",learnPremiumCta:"Learn about Premium",closeCta:"Close"},survey:{oldUser:{title:"Share a feedback",content:"Hi! I'm Igor, a product designer at Grammarly.\nPlease, help me find out how the last update of\nthe interface affected your editing experience.",takeSurvey:"Take a survey",remindLater:"Remind me later"},newUser:{title:"Share your feedback",content:"Hi! I’m Igor, a product designer at Grammarly.\nPlease, let me know what you think of Grammarly and how we can improve.",takeSurvey:"Take a survey",remindLater:"Remind me later"},satisfaction:{veryUnsatisfied:"Very dissatisfied",unsatisfied:"Somewhat dissatisfied",neutral:"Neither satisfied nor dissatisfied",satisfied:"Somewhat satisfied",verySatisfied:"Very satisfied"},shareFeedback:"Share feedback",tellUs:i.createElement(i.Fragment,null,"Would you take a moment to tell us"," ",i.createElement("b",null,"how satisfied or dissatisfied you are with the Grammarly Editor?")),thankYou:"Thank you!",more:"We take your responses very seriously. Please, tell us a bit more:",whatsBad:"What do you find frustrating or annoying?",whatsGood:"What do you find most helpful?",proofitPromo:{title:"Thorough Human Proofreading",content:"If you need extra confidence that your text is mistake-free, send it to our team of experienced proofreaders.",actions:{view:"Get Started",close:"Close"}},docx:{didYouKnow:"Did you know?",title:"You can use Grammarly in Microsoft Word!",content:"Get Grammarly’s suggestions while you write\nin Word or Outlook with our free add-in.",download:"Download Grammarly for MS Office",remindLater:"Remind me later"}},performance:{title:"Performance",scoreUnder100:e=>`Text score: ${e} out of 100. This score represents the quality of writing in this document. You can increase it by addressing Grammarly's suggestions.`,score100:"Great job! Your text scores 100 out of 100. This score represents the quality of writing in this document.",notEnoughTextToCalculateStats:"Write away! Grammarly needs at least 30 words to calculate document statistics.",wordCount:"Word count",characters:"Characters",words:"Words",sentence:"Sentence",sentences:"Sentences",readingTime:"Reading time",speakingTime:"Speaking time",readability:"Readability",readabilityScore:"Readability score",vocabulary:"Vocabulary",sectionTitleDescription:"Metrics compared to other Grammarly users",uniqueWords:"Measures vocabulary diversity by calculating\nthe number of unique words.",rareWords:"Measures depth of vocabulary by identifying words that are\nnot among the 5,000 most common English words.",readabilityDescription:"In the Flesch reading-ease test, higher scores\nindicate material that is easier to read.",uniqueWordsTitle:"Unique words",rareWordsTitle:"Rare words",wordLengthTitle:"Word length",sentenceLengthTitle:"Sentence length",notEnoughTextToGenerateReport:"We need at least 30 words to calculate document statistics and generate your report.",belowAverage:"Below average",average:"Average",aboveAverage:"Above average",report:{plagiarismDescription:(e,t)=>`${e}% of your text matches ${t} sources on the web\nor in archives of academic publications`,downloadPdfReport:"Download PDF report",preparingPdfReport:"Preparing PDF report...",readingEase:"reading ease",readingEaseDescription:"Rates the text by the number of years of\neducation needed to understand it",readingEaseMeasure:"grade level",uniqueWordsDescription:"Measures vocabulary diversity by calculating\nthe percentage of words used only once in your\ndocument",wordLengthDescription:"Measures average word length",wordLengthMeasure:"characters per word",sentenceLengthDescription:"Measures average sentence length",sentenceLengthMeasure:"words per sentence"},button:{score:"Overall score",score100:"Great job!",statuses:{calculating:"Calculating...",unavailable:"Text is too short",available:"See performance"}}},sidebar:{content:{premiumIssues:{advancedAlerts:"Advanced issues",foundTitleSingular:{description1:"There is",description2:"advanced issue available only for Premium users."},foundTitlePlural:{description1:"There are",description2:"advanced issues available only for Premium users."}}},openLabel:"start assistant",fixErrorsLabel:"Correct with Assistant",checkingLabel:"Checking…",advancedAlerts:"Advanced suggestions",criticalIssue:e=>s._6(e,"Critical issue","Critical issues"),critical:e=>s._6(e,"Critical","Critical"),advanced:e=>s._6(e,"Advanced","Advanced"),advancedIssue:e=>s._6(e,"Advanced issue","Advanced\nissues"),premium:e=>s._6(e,"Premium","Premium"),free:e=>s._6(e,"Suggestion","Suggestions"),premiumAlertsTitle:"Premium\nsuggestions",allAlerts:"All suggestions",backToAllAlerts:"Back to all suggestions ",seeAlerts:e=>`${e} more ${s._6(e,"suggestion","suggestions")}`,sendToProofreaders:i.createElement(i.Fragment,null,"Get Expert",i.createElement("br",null),"Writing Help")},successLens:{goPremium:"Go Premium",paidView:{title:"No critical issues"},emptyText:{title:"Nothing to check yet",firstLine:"Start writing or upload a document\nto see Grammarly’s feedback."},smallText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues.",secondLine:"Check back in when you’re ready to write some more."},largeText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues."},mutedSuggestions:e=>1===e?`${e} suggestion has been turned off.`:`${e} suggestions have been turned off.`,fixedText:{titles:["You made that look easy!","That’s quite an improvement!","Nothing can stop you now!","You must have been practicing!","Looking good!","Give yourself a pat on the back!","Great job!","Everything’s clear and polished.","To err is human; to edit, divine."]},fixedTextDemoPremium:{title:"Great job!",firstLine:"You’ve got the hang of it now.",secondLine:"Time to write your own masterpiece!"},priorityFirstCheck:{title:"Great job!",firstLine:"No relevant suggestions."}},uploadDropZone:"Drag a text file here to upload",uploadDropZoneTypes:"Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF are welcome",rtfCompatibilityModeNotificationTitle:"Your document’s formatting will be restored upon download.",notificationUploadFileText:"Upload a file in one of the following formats",denaliDocumentUploadNotification:{title:"The document was uploaded successfully",text:"Don’t worry! The previous document has been saved to",link:"My documents"},goals:{title:"Set goals",header:"Get tailored writing suggestions based on your goals and audience.",sections:{audience:{general:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"General",e?" (default)":"",":")," Easy for anyone to read with minimal effort."),knowledgeable:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"Knowledgeable",e?" (default)":"",":")," Requires focus to read and understand."),expert:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"Expert",e?" (default)":"",":")," May require rereading to understand.")},formality:{formal:i.createElement(i.Fragment,null,i.createElement("b",null,"Formal:")," Restricts slang and colloquialisms."),informal:i.createElement(i.Fragment,null,i.createElement("b",null,"Informal:")," Allows slang and other more casual usages."),neutral:i.createElement(i.Fragment,null,i.createElement("b",null,"Neutral (default):")," Restricts slang but allows standard casual expressions.")},domain:{free:"Get customized suggestions for business writing, academic assignments, and more.",academic:i.createElement(i.Fragment,null,i.createElement("b",null,"Academic:")," Strictly applies all rules and formal writing conventions."),business:i.createElement(i.Fragment,null,i.createElement("b",null,"Business:")," Applies almost all rules but allows some informal expressions."),general:i.createElement(i.Fragment,null,i.createElement("b",null,"General (default):")," Applies most rules and conventions with medium strictness."),mail:i.createElement(i.Fragment,null,i.createElement("b",null,"Email: ")," Applies almost all rules, plus email writing conventions."),casual:i.createElement(i.Fragment,null,i.createElement("b",null,"Casual:")," Applies most rules but allows stylistic flexibility."),creative:i.createElement(i.Fragment,null,i.createElement("b",null,"Creative:")," Allows some intentional bending of rules and conventions.")},tone:{experimental:i.createElement(i.Fragment,null,i.createElement("b",null,"Experimental.")," How do you want to sound? This helps us build new suggestions and won't affect your feedback today."),options:{neutral:"😐 Neutral",confident:"🤝 Confident",joyful:"🙂 Joyful",optimistic:"✌️‌Optimistic",friendly:"🤗 Friendly",urgent:"⏰ Urgent",analytical:"📊 Analytical",respectful:"🙌 Respectful"}},intent:{experimental:i.createElement(i.Fragment,null,i.createElement("b",null,"Experimental.")," What are you trying to do? This helps us build new suggestions and won't affect your feedback today."),options:{inform:"Inform",describe:"Describe",convince:"Convince",tellStory:"Tell a Story"}}},footer:{showModalOnStart:i.createElement(i.Fragment,null,"Show ",i.createElement("b",null,"Set Goals")," when I start a new document"),reset:"Reset to defaults"},button:{title:"Goals",subtitle:(e,t,n)=>0===e?"Adjust goals":`${Math.max(e,n)} of ${t} set`}},plagiarism:{webReferenceDescription:"Click to copy reference",publicationReferenceDescription:e=>i.createElement(i.Fragment,null,"Click to copy reference (",e,")"),lensDescription:(e,t,n,r)=>i.createElement("span",null,i.createElement("em",null,e,"%")," of your text matches"," ",i.createElement("em",null,t," ",s._6(t,"fragment","fragments"))," ","from"," ",i.createElement("em",null,n," ",s._6(n,"source","sources"))," ","on the web or in academic databases. Cite them in ",i.createElement(r,{type:"MLA"}),","," ",i.createElement(r,{type:"APA"}),", or ",i.createElement(r,{type:"Chicago"})," format, or in another style you prefer."),percentileDescription:e=>i.createElement(i.Fragment,null,e," of your text matches this source:"),cardDescription:e=>i.createElement("span",null,"Regardless of what subject you're writing for, make a reference using"," ",i.createElement(e,{type:"MLA"}),", ",i.createElement(e,{type:"APA"}),", or"," ",i.createElement(e,{type:"Chicago"})," format, or another style you prefer."),helpIconDescription:(e,t,n)=>`${e}% of your text ${s._6(l.g.prism.reverseGet(e),"matches","match")}  ${t} ${s._6(t,"fragment","fragments")} from\n${n} ${s._6(n,"source","sources")} on the web or in academic databases.`,loadingDescription:"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations.",title:"Plagiarism",description:"Finds unoriginal text by checking against academic databases and over 16 billion web pages.",originalText:i.createElement("span",null,"Looks like your text is 100% original. ",i.createElement("br",null),"We found no matching text in our databases or on the Internet.")},documentActions:{plagiarism:{tooltip:{available:"Plagiarism Check",emptyDocument:"Add text first to check for plagiarism"}},proofit:{tooltip:{available:"Save time with human expertise.",emptyDocument:"Add text first to get expert writing help"}}},documentPerformanceRankText:e=>i.createElement("span",null,"Great job! Your text is expected to ",i.createElement("br",null),"perform ",i.createElement("b",null,"better than ",e,"%")," of comparable ",i.createElement("br",null),"texts written by other Grammarly users."),proofitTitle:"Get Expert Writing Help",proofitDescription:"Our writing experts are ready to check your document right now.",proofitOrderModal:{promo:{stepsNavigation:{howItWorks:"How it works",editingOptions:"Editing options",provideDetails:"Provide details"},step1:{title:"Save Time\nwith Human Expertise",description:"No time to polish your text?\nSend it to our team of writing experts."},step2:{title:"How it works",li1:"Select how fast you’d like your document\nreturned and place your order.",li2:i.createElement(i.Fragment,null,"Our writing experts will fix writing mechanics",i.createElement("br",null),"(like spelling, grammar, and punctuation).",i.createElement("br",null),"If you choose the ",i.createElement("b",null,"Correctness and Clarity"),i.createElement("br",null),"option, they’ll also revise sentences that are",i.createElement("br",null),"unclear or hard to follow."),li3:"We will email you a link to the edited version\nin a DOCX file with all changes marked.",back:"got it"},step3:{header:{correctness:{h1:"Correctness",h2:"Fix errors only"},correctnessClarity:{h1:"Correctness\n& Clarity",h2:"Fix errors and\nimprove clarity"}},spelling:{h1:"Spelling"},grammar:{h1:"Grammar"},punctuation:{h1:"Punctuation"},conciseness:{h1:"Conciseness",h2:"Streamline wordy\nsentences"},preciseness:{h1:"Preciseness",h2:"Clarify vague sentences"},readability:{h1:"Readability",h2:"Make sentences easier\nto follow"}},step4:{title:"Optional: Get better feedback by providing some extra information",nativeLanguage:"Your native language",nativeLanguageDescription:"We‘ll pay special attention to issues that are common among writers with your language background",dialect:"Preferred English dialect",quotationType:"Default quotation marks",quotationTypeSingle:"‘Single’",quotationTypeDouble:"“Double”",spaceType:"Spaces after end punctuation",spaceTypeSingle:"One space",spaceTypeDouble:"Two spaces",choose:"Choose from the list"}},order:{title:"How fast do you need your document returned?",tierBase:"Correctness only",tierClarity:"Correctness and Clarity",tierTitle:"Which option would you like?",helpMeChoose:"Help me choose",warningConfirm:"We won’t charge you until you confirm\nby clicking “Place Order.”",placeOrder:"Place Order",chooseOptions:"Choose from turnaround options to continue",recommended:"recommended",perWord:"per word",paymentWarnings:{payPal:e=>i.createElement("span",null,"By placing an order you authorize a charge of"," ",i.createElement("b",{"data-name":"payment-warning-price"},"$",s.T4(e)),i.createElement("br",null),"to your PayPal account"),creditCard:e=>i.createElement("span",null,"By placing an order you agree that your card ",i.createElement("br",null),"will be charged"," ",i.createElement("b",{"data-name":"payment-warning-price"},"$",s.T4(e))),updateBilling:"Update billing information"}},card:{toProtect:"To protect your security, we ask you to authorize\nthis charge by re-entering payment details\nfor Grammarly.",paymentSuccess:{title:"Success",message:"Your billing information has been updated successfully"},paymentError:{title:"Error",message:e=>i.createElement("span",null,"There is an issue with the payment method you provided. Please review your payment  information and try again or select a different payment method",i.createElement("br",null),"If you need further assistance, please contact our ",i.createElement("a",{href:e,target:"_blank",style:{color:"#fff"}},"Support Team"))}}},proofitSuccessModal:{title:"Your document will be ready by…",description:e=>i.createElement("span",null,"We will email you at ",i.createElement("span",{"data-name":"useremail"},e)," with a link to the corrected version in a DOCX file with all changes marked.")},proofitPayment:{creditCard:"Your card has been declined.",payPal:"Your PayPal account has been declined"},resolve:i.createElement("span",null,"Mark as resolved and",i.createElement("br",null),"hide suggestion"),dismiss:"Dismiss",back:"Back",new:"New",done:"Done",on:"On",off:"Off",card:{less:"Less",more:"Learn more",addToDict:"Add to dictionary",disabledForAnonymous:"Sign in to use this feature",like:"I'll address this",dislike:"Not helpful",wrong:"Incorrect suggestion",mute:"Turn off suggestions like this",offensive:"Offensive content",updatingSuggestion:"Updating suggestion…",or:"or",onboarding:{[r.ClarityAICard]:{title:"Grammarly just got smarter",content:"Grammarly now helps rewrite sentences to make your point clearer."},[r.PassiveVoiceCard]:{title:"Improved passive voice suggestions",content:"Grammarly now helps you rewrite passive voice sentences in the active voice."}},progressBarLabels:{readability:{min:"Hard to read",max:"Easy to read"},sentenceVariety:{min:"Monotonous",max:"Lively"},conciseness:{min:"Cluttered",max:"Concise"}},matchesNavigation:{next:"Next match",prev:"Previous match",currentMatchPosition:(e,t)=>`${e} of ${t}`,numberOfMatches:e=>`${e} ${s._6(e,"match","matches")}`},todoAction:e=>`Click to ${e}`,checking:"Checking...",actionDescription:{setGoals:"Set goals to get tailored writing suggestions",openPreferences:"Open settings"},fluency:{tooltip:"This suggestion is based on your language settings.",cardTitle:"Fluency improvements",cardFooter:(e="multilingual")=>`Common issue for ${e} speakers`},takeaway:{defaultTitle:"Is this your text's main point?",feedback:"Is this your text’s main point?",yes:"Yes",no:"No"},shortenIt:{selectorTooltip:e=>`See ${e} version`,expandEdits:e=>(e?"Expand":"Hide")+" Edits",compressionHint:e=>`${Math.max(l.g.prism.reverseGet(e),1)}% shorter`},smartPhrases:{showMoreIdeas:"Show more ideas",intentDetectedFeedbackYes:"Yes",intentDetectedFeedbackNo:"No",openFeedbackFormQuestion:"Anything we can improve?"},sentenceLevelBrandTones:{helpfulFeedbackQuestion:e=>`Does this sound ${e}?`,helpfulFeedbackYes:"Yes",helpfulFeedbackNo:"No",offBrandBadge:"OFF-BRAND",offBrandCardTitle:"Off-brand",detected:"instance detected"},showChangesToggle:"Highlight changes",muteCitedText:e=>i.createElement(i.Fragment,null,"Don't want Grammarly to check quotes?",i.createElement("br",null),i.createElement("span",null,"Change this in ",e,".")),feedbackForm:{dismissReason:"Why did you dismiss this suggestion?",submit:"Submit",skip:"Skip",error:"Select one of the reasons first"},gapCard:{placeholder:"Who or what…"},mutedAlertCard:{description:e=>i.createElement(i.Fragment,null,"You’ve turned off suggestions related to ",i.createElement("b",null,e),". They won’t appear in any Grammarly apps and extensions until you you turn them back on."),successButtonLabel:"Got it",undoButtonLabel:"Turn back on",settingsLabel:"Manage optional suggestions"}},placeholderRTF:{typeOrPasteText:`Type or paste (${e.commandKeyLabel("V")}) your text here or `,upload:"upload",ending:" a document."},placeholder:{typeOrPasteText:`Type or paste (${e.commandKeyLabel("V")}) your text here. `,upload:"Upload",ending:" a document to save original formatting."},toolbar:{loading:"Loading...",processing:"Processing your document...",backToMyGrammarly:"Back to My Grammarly",signOut:"Sign out",title:{rename:"Rename",untitledDocument:"Untitled document",onboarding:{title:"Add a title",message:"Give your document a name so you can find it later."}},formatting:{head:"Text formatting",bold:"Bold",italic:"Italic",underline:"Underline",header1:"Heading 1",header2:"Heading 2",link:"Link",orderedList:"Numbered list",bulletList:"Bullet list",clear:"Clear formatting",tooltips:{head:"Text formatting",bold:"Bold",italic:"Italic",underline:"Underline",header1:"Heading 1",header2:"Heading 2",link:"Link",orderedList:"Numbered list",bulletList:"Bullet list",clear:"Clear formatting"},links:{apply:"Apply",change:"Change",remove:"Remove",placeholder:"Enter link URL"}}},footer:{word:"word",words:"words",character:"character",characters:"characters",readingTime:"reading time",speakingTime:"speaking time",readabilityScore:"readability score",disabledReadabilityScore:"Readability score — not enough text",rtfCompatibilityInfo:{message:{plainText:"⚠️ Formatting tools are ",textWithTooltip:"disabled"},tooltip:"Your document’s formatting will be restored upon download. To preserve your document’s original formatting, Grammarly’s formatting tools are temporarily disabled.",officeAddinPromo:{part1:"Try ",part2:"Grammarly for MS Office."}}},emogenie:{popup:{title:"Here’s how your text sounds",subtitle:"Which tones did we get right?",actions:{like:"Tone is detected correctly",dislike:"Tone is detected incorrectly"},intensities:{slight:"Slight intensity",moderate:"Moderate intensity",strong:"Strong intensity",veryStrong:"Very strong intensity"},textIsTooShortMessage:"Write away! Grammarly needs at least 30 words to detect your tone."}},vox:{styleGuide:"style guide"},mutedAlerts:{dialogue:{openBtnTooltip:"Manage deactivated suggestions",header:"Deactivated Suggestions",subHeader:"You’ve chosen to turn off the following types of suggestions:",on:"Turn on",off:"Turn back off",suggestions:e=>`${e} ${s._6(e,"suggestion","suggestions")} in this document`,footerSuggestions:e=>`${e} ${s._6(e,"suggestion","suggestions")}  will be turned back on`},onboarding:{cardMute:{description:"You can now deactivate certain types of suggestions (including Oxford commas and passive voice.)",buttonText:"Got it"},dialogue:{description:"Click this icon to manage deactivated suggestions."}}},preferences:{autoJumpToNextAlert:"Auto-jump to the next suggestion",autoScrollToNextAlert:"Auto-scroll to the next suggestion",autoJumpToNextAlertDescription:"When a suggestion is applied or rejected, automatically scroll the text to the next suggestion.",increaseFontSize:"Increase text font size",muteQuotedAlerts:"Don’t check text inside quotes",suggestionManagementDescription:"You can deactivate certain types of suggestions (including Oxford commas and passive voice) or activate them back.",suggestionManagementLink:"Suggestions management"},actions:{select:"Select",close:"Close",gotIt:"Got it"},statuses:{disabled:"Disabled",selected:"Selected",unavailable:"Unavailable"},subscription:{paypal:{description:"You can subscribe to Grammarly with PayPal. Click on the button below to sign in to your Paypal account.",descriptionWhenConnected:"You're already subscribed to Grammarly with PayPal. Click the button below to change your Paypal information."},apple:"Since you purchased your Grammarly Premium subscription through the App Store, please open the Grammarly app on your iOS device to manage your subscription.\nWe're working on a way to bring this functionality to you in our desktop products, but it's not quite ready yet."},desktopUpdate:{softTitle:"New version is available",hardTitle:"Please update to the latest version",soft:"The new version of the Grammarly Editor contains bug fixes and provides a better experience.",hard:"Your current version of the Grammarly Editor is outdated and will not work properly.",reload:"Update",download:"Download the latest version"},undo:"Undo",switchToDenali:"You switched to the new Grammarly Editor for this document.",feedbackSend:"Your feedback has been sent. Thank you!",statisticsError:"Error on requesting document statistics. Please try again later.",referenceCopied:"Reference copied to clipboard",documentCopied:"Document copied to clipboard",downloadDocumentNotFoundError:"Requested document was not found.",isTemporaryDownloadError:"Document wasn't downloaded.\nPlease try again.",freemiumNotifications:{engagement:"Grammarly Premium suggests ways to make your writing more specific, vivid, and interesting to keep your readers engaged.",delivery:"Grammarly’s AI adjusts the level of formality, confidence, friendliness, and more in your writing so you can make the best impression.",plagiarism:"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations."},whatsNew:{title:"What's New?"},fileSizeExceededNotification:{title:"Maximum document size exceeded",body:"Currently, Grammarly can support documents up to 4 MB and 100,000 characters (about 60 pages).\n    Try uploading your file in multiple parts or copying and pasting your text into the editor.",link:"Alternatively, you can install Grammarly for Microsoft Office"},documentSettings:{close:"Close",myGrammarly:"My Grammarly",documentHeader:"DOCUMENT",newDocument:"New document",uploadFile:"Upload file",download:"Download",downloadLabel:"as .docx",print:"Print",template:"Insert Template",editHeader:"EDIT",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",selectAll:"Select all",editorSettings:"Editor settings",accountHeader:"ACCOUNT",eduLabel:"EDU",upgradeToPremium:"Upgrade to premium",language:"Language preference",subscription:"Subscription",logout:"Log out",support:"Support",whatsNew:"What's new",feedback:"Send product feedback",switchToClassicEditor:"Back to Classic Editor",privacyPolicy:"Privacy policy",termsOfService:"Terms of service",tooltips:{close:"Close",myGrammarly:"My Grammarly",newDocument:"Create a new document",uploadFile:"Upload a file",download:"Download",print:"Print",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",selectAll:"Select all",editorSettings:"Editor settings",upgradeToPremium:"Upgrade to premium",language:"Personal dictionary and dialect",subscription:"Manage your subscription",logout:"Log out",support:"Support",whatsNew:"What's new",feedback:"Send product feedback",switchToClassicEditor:"Back to Classic Editor",privacyPolicy:"Privacy policy",termsOfService:"Terms of service"},onboarding:{title:"Shortcuts and settings",message:"Click to adjust your settings"},supportTitle:"Support and feedback"},hotkeyUnsupported:"This action is unavailable using the menu, but you can still use ",goPremium:"Go Premium",editorSettingsModalHeader:"Editor settings",documentUploaded:{message:"Document successfully uploaded. ",link:"Open document for editing"},documentUploadGeneralError:"Document wasn't uploaded. Please try again.",documentIsEmpty:"The submitted file is empty.",noFileToUpload:"No files to upload!",oneDocumentIsAllowed:"Only one document upload at a time is allowed",tooltipUploadElementInput:"Click here to upload document",goBackToAllAlerts:"Go back to All Suggestions",beta:"Beta",premiumAlertLabel:{tooltip:{includedWithPaid:i.createElement(i.Fragment,null,i.createElement("div",null,"This suggestion is included"),i.createElement("div",null,"with your paid subscription."))},new:"new"},premiumFreeTrial:e=>i.createElement(i.Fragment,null,"This advanced suggestion is included in your"," ",i.createElement("span",{style:{whiteSpace:"nowrap"}},"1-week")," Premium Trial."," ",i.createElement("a",{onClick:e},"Learn More"),"."),freePremiumAlertFooter:{beforeIcon:"Your free",afterIcon:"Premium suggestion"},anonymousUserGenericSignInPrompt:e=>i.createElement(i.Fragment,null,i.createElement("a",{onClick:e},"Sign in")," to get key Grammarly features"),anonymousUserAddToDictionarySignInPrompt:e=>i.createElement(i.Fragment,null,i.createElement("a",{onClick:e},"Sign in")," to start your personalized dictionary"),inlineUpgradeHook:{suggestionIsPartOfPremium:"This suggestion is part of Grammarly Premium.",upgradeToPremium:"UPGRADE TO PREMIUM"},inlineCard:{addToDictionary:"Add to dictionary",dismiss:"Dismiss",seeMore:"See more"},changePlan:{title:e=>`Switch and save over ${e}`,confirmationDescription:(e,t,n,r,a)=>i.createElement(i.Fragment,null,"Your current plan ",e," Plan will update to Annual on"," ",t.toLocaleDateString(),", at which time you will be charged one payment of"," ",n,". Your subscription will automatically renew every ",a," months. You will be charged ",r," on each renewal."),cancelButton:"cancel",confirmationButton:e=>`Switch to ${e} Plan`,promoBadge:e=>`${e} PROMO`,savedBadge:e=>`${e} SAVED`,perYear:"year",perMonth:"mo",successfulNotificationCopy:e=>`You were switched to ${e} Plan`,hook:{title:"Your writing looks great with Grammarly Premium! Keep up the great work!",button:{switchTo:"Switch to Annual Plan ",price:e=>`Save ${e}`,cancel:"Later"}}},review:"Review",news:{bulkAccept:{title:"Accept multiple suggestions at once",body:"Save time by accepting all high-confidence suggestions at once. This will automatically apply any suggestions that other Grammarly users almost always accept."},mutedAlerts:{title:"Turn certain suggestions off",body:"You can now deactivate certain types of suggestions (including Oxford commas and passive voice.)"},proofitClarity:{title:"Expanded options from our expert writing service",body:'Our writing experts now offer a "Correctness and Clarity" option. Select this option when submitting a text and our experts will make sure your writing is concise, precise, and easy to read.'},pdf:{title:"Expanded PDF report now available",body:"Each document’s PDF report now contains the document text and shows Grammarly’s suggestions for all detected writing issues. "},rtf:{title:"Rich text formatting has arrived!",body:"The Grammarly Editor now supports bold, italics, bullet points, and more. The editor can now also preserve rich text formatting in pasted text."},clarity:{title:"Go Beyond Grammar",body:"Streamline your sentences with Grammarly's new clarity suggestions. Blue underlines appear with suggested edits for hard-to-read phrases and sentences."}},priorityLens:{prioritySuggestion:"Top suggestions",allSuggestion:"All suggestions",disabledAllSuggestion:"No additional suggestions",description:"Grammarly prioritizes suggestions based on the context of your writing.",descriptionLink:"goals"},feedModeSelector:{priority:"Top suggestions",priorityDescription:i.createElement(i.Fragment,null,"Prioritize suggestions based on the context ",i.createElement("br",null)," of your writing and your editing history."),all:"All"},waysToUseGrammarly:(e,t,n,r,a,s)=>i.createElement("ul",null,i.createElement("li",null,"In your browser (",i.createElement("a",{href:e,target:"_blank"},"Chrome"),","," ",i.createElement("a",{href:t,target:"_blank"},"Edge"),","," ",i.createElement("a",{href:n,target:"_blank"},"Firefox"),","," ",i.createElement("a",{href:r,target:"_blank"},"Safari"),")"),i.createElement("li",null,i.createElement("a",{href:a,target:"_blank"},"On your phone")," ","(iOS and Android)"),i.createElement("li",null,i.createElement("a",{href:s,target:"_blank"},"On your desktop")),i.createElement("li",null,"In the Grammarly Editor")),premiumOnboardingSurvey:{firstQuestion:{question:"How has your experience with Grammarly been?",answers:{verySatisfied:"Very satisfying",somewhatSatisfied:"Somewhat satisfying",neutral:"Neither satisfying nor dissatisfying",somewhatDissatisfied:"Somewhat dissatisfying",veryDissatisfied:"Very dissatisfying"}},secondSatisfactionQuestion:{question:"Great! Is there anything in particular that you’ve enjoyed?",answers:{plagiarismChecker:"Plagiarism checker",claritySuggestions:"Clarity suggestions",engagementSuggestions:"Engagement suggestions",toneSuggestions:"Delivery suggestions",usingMultipleDevices:"Using Grammarly Premium across devices"},learnMoreLink:"Learn more"},secondDissatisfactionQuestion:{question:"We’re sorry to hear that. What did you have trouble with?",answers:{lowQualitySuggestions:"Low-quality suggestions",poorPlagiarismSuggestions:"Can’t see plagiarism suggestions",noSupportForDesirableApp:"It doesn’t integrate with an app I use",aggressivePremiumPromotion:"It keeps asking me to upgrade",noPremiumSuggestions:"I can’t access Premium suggestions",premiumAndFreeAreIdentical:"The Premium and Free plans feel identical"}},completion:{enjoyment:{header:"Thank you so much for your feedback.",sub:"We hope you continue enjoying Grammarly!"},badExperience:{lowQuality:"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate.",noPlagiarism:i.createElement(i.Fragment,null,"The plagiarism checker is turned off by default. To check your document for plagiarism, open a document in the Grammarly Editor and then click the Plagiarism button in the"," ",i.createElement("b",null,"lower right corner"),"."),noSupportForDesirableApp:(t,n,r,a,s,o)=>i.createElement(i.Fragment,null,"We’re working hard to be wherever you write, but there are some applications that we don’t yet support. Still, we may have what you’re looking for. Here are a few different ways to access Grammarly:",c(e).waysToUseGrammarly(t,n,r,a,s,o)),possibleMultipleAccounts:"We recommend double-checking to make sure you’re logged into your Premium account. Try visiting app.grammarly.com and look for the Premium label in the upper left corner. If you don’t see it, you may have unintentionally created a second free account."}}},gbSatisfactionSurvey:{firstQuestion:{question:"How has your experience with Grammarly been?",answers:{verySatisfied:"Very satisfying",somewhatSatisfied:"Somewhat satisfying",neutral:"Neither satisfying nor dissatisfying",somewhatDissatisfied:"Somewhat dissatisfying",veryDissatisfied:"Very dissatisfying"}},secondSatisfactionQuestion:{question:"Great! Is there anything in particular that you’ve enjoyed?",answers:{admin:{CreatingStrongCompanyBrand:"Creating a strong company brand",SavingTimeWritingAndEditing:"Saving time writing and editing",CentrallyManagingGrammarlyAccount:"Centrally managing team accounts and billing",FeelingConfidentTheTeamWillSoundPolishedAndProfessional:"Feeling confident the team will sound polished and professional",EnablingTeamToCommunicateWithCustomersEffectively:"Enabling the team to communicate effectively",ImprovingTeamsOverallWritingSkills:"Improving the team's overall writing skills",Other:"Other"},teamMember:{SavingTimeWritingAndEditing:"Saving time writing and editing",SoundingFluentInEnglish:"Sounding fluent in English",SoundingMoreProfessionalAndPolished:"Sounding more professional and polished",ImprovingOverallWritingSkills:"Improving overall writing skills",FeelingConfidentWhenCommunicating:"Feeling confident when communicating",CommunicatingWithCustomersEffectively:"Communicating with customers effectively",Other:"Other"}},learnMoreLink:"Learn more"},secondDissatisfactionQuestion:{question:"We’re sorry to hear that. What did you have trouble with?",answers:{admin:{DoesntIntegrateWithAnAppIUse:"It doesn't integrate with an app the team uses",LowQualitySuggestions:"Low-quality suggestions",FeaturesAreMissing:"The features I expected were missing",TechnicalDifficulties:"Technical difficulties",NotSureWhatGrammarlyBusinessDoes:"I'm still not sure what Grammarly Business does",Other:"Other",DidntFindItValuable:"I didn't find it valuable"},teamMember:{DoesntIntegrateWithAnAppIUse:"It doesn't integrate with an app I use",LowQualitySuggestions:"Low-quality suggestions",FeaturesAreMissing:"The features I expected were missing",TechnicalDifficulties:"Technical difficulties",NotSureWhatGrammarlyBusinessDoes:"I'm still not sure what Grammarly Business does",Other:"Other",DidntFindItValuable:"I didn't find it valuable"}}},thirdSatisfactionQuestion:{title:"Thank you.",question:i.createElement(i.Fragment,null,i.createElement("p",null,"We hope you continue enjoying Grammarly!"),i.createElement("p",null,"Is there anything else you'd like to share about your experience?"))},thirdDissatisfactionQuestion:{admin:{DoesntIntegrateWithAnAppIUse:(t,n,r,a,s,o)=>i.createElement(i.Fragment,null,i.createElement("p",null,"We’re working hard to be wherever you write, but there are some applications that we don’t yet support."),i.createElement("p",null,"Still, we may have what you’re looking for. Here are a few different ways to access Grammarly:"),c(e).waysToUseGrammarly(t,n,r,a,s,o),i.createElement("p",null,"Is there another app you need Grammarly in?")),LowQualitySuggestions:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate."),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),FeaturesAreMissing:"Thanks for letting us know. Which features did you expect to see?",TechnicalDifficulties:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We're here to help!"),i.createElement("p",null,"Please let our support team know about the difficulties you're having here")),NotSureWhatGrammarlyBusinessDoes:"Thanks for letting us know. Grammarly Business can deliver real-time writing suggestions to help everyone on your team compose mistake-free and on-brand writing. Is there anything you need help with?",Other:"Is there anything in particular you found frustrating or annoying?",DidntFindItValuable:{title:"Is there anything in particular you need help with?",answers:{CreatingAStrongCompanyBrand:"Creating a strong company brand",SavingTimeWritingAndEditing:"Saving time writing and editing",CentrallyManagingGrammarlyAccount:"Centrally managing Grammarly account settings, security, and billing",FeelingConfidentTheTeamWillSoundPolished:"Feeling confident the team will sound polished and professional",EnablingTheTeamToCommunicateWithCustomers:"Enabling the team to communicate with customers effectively",ImprovingTheTeamsOverallWritingSkills:"Improving the team's overall writing skills",Other:"Other"}}},teamMember:{DoesntIntegrateWithAnAppIUse:(t,n,r,a,s,o)=>i.createElement(i.Fragment,null,i.createElement("p",null,"We’re working hard to be wherever you write, but there are some applications that we don’t yet support."),i.createElement("p",null,"Still, we may have what you’re looking for. Here are a few different ways to access Grammarly:"),c(e).waysToUseGrammarly(t,n,r,a,s,o),i.createElement("p",null,"Is there another app you need Grammarly in?")),LowQualitySuggestions:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate."),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),FeaturesAreMissing:"Thanks for letting us know. Which features did you expect to see?",TechnicalDifficulties:i.createElement(i.Fragment,null,"Thanks for letting us know. Can you tell us more about what happened? We'll try to help."),NotSureWhatGrammarlyBusinessDoes:(t,n,r,a,s,o)=>i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. Grammarly helps compose polished, mistake-free writing wherever you write. Here are a few different ways to use Grammarly:"),c(e).waysToUseGrammarly(t,n,r,a,s,o),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),Other:"Is there anything in particular you found frustrating or annoying?",DidntFindItValuable:{title:"Is there anything in particular you need help with?",answers:{SavingTimeWritingAndEditing:"Saving time writing and editing",SoundingFluentInEnglish:"Sounding fluent in English",SoundingMoreProfessionalAndPolished:"Sounding more professional and polished",ImprovingOverallWritingSkills:"Improving overall writing skills",FeelingConfidentWhenCommunicating:"Feeling confident when communicating",CommunicatingWithCustomersEffectively:"Communicating with customers effectively",Other:"Other"}}}},thankYou:"Thank you so much for your feedback."},bulkAccept:{title:e=>`Accept ${e} suggestions at once`,appliedTitle:e=>`You’ve made ${e} instant corrections`,apply:e=>`Accept all ${e}`,confirm:"Looks good",undoAll:"Undo all"},premiumSuggestions:"Premium suggestions",gbUpHook:{proTipBadge:"Pro Tip",dontShowAgain:"Don't Show Again",dismiss:"Dismiss",smbSpecificProfessionalism:{title:"Give your business a professional edge",description:"Help your team impress customers with clear, professional, and compelling communication.",cta:"Try Grammarly Business for free"},styleGuides:{title:"A strong business needs consistent writing",description:"Grammarly Business helps your team use a consistent voice and style everywhere they write.",cta:"Create a Grammarly Business style guide for free"}},gbVoxLensUpHook:{title:"Style guide",description:"Grammarly Business helps your whole team consistently match your company’s voice and style. Create a style guide with rules specific to your business.",cta:"Try Grammarly Business for free",maybeLater:"Maybe later"},gbEnableVoxLensHook:{title:"Create a company style guide",description:"Let Grammarly Business deliver customized writing feedback to help your team stay on-brand and in your company's voice.",cta:"Create a style guide",maybeLater:"Maybe later"},gbBillingMigration:{title:"Action required: Update your subscription",description:e=>`Your team’s subscription will expire on ${e}. Please add your billing information for uninterrupted access to Grammarly Business.`,cta:"Add Billing Information"},premiumUngatingRenewalNotification:{title:"Your Grammarly Business subscription is about to renew",message:e=>`On ${e}, your free trial of Grammarly Business will end and you'll be charged for a subscription renewal.`,cta:"Manage Your Subscription"},safariExtActivationNotification:{title:"Re-activate Grammarly Today",description:"Due to a recent update, Grammarly for Safari was turned off in your browser. Re-activate it today to enhance your writing across the web!",cta:"Re-activate"},undoCard:{title:"Instantly corrected",confirm:"Looks good",revert:e=>i.createElement(i.Fragment,null,"Revert to ",e)},priorityList:{expand:"More",collapse:"Less",toggleButtonTooltip:e=>(e?"Show":"Hide")+" de-prioritized suggestion (less relevant for this text or those you often dismiss)",hint:"Grammarly de-prioritizes suggestions that are less relevant for this text or those you often dismiss.",successState:{allAlertsHint:"No more relevant suggestions.",outcomesHint:"You’ve addressed the most relevant suggestions.",firstCheckText:"No relevant suggestions."}},synfony:{back:"Back",applyTooltip:"Replace with this word",drilldownTooltip:e=>i.createElement(i.Fragment,null,"Explore alternatives related to"," ",i.createElement("b",null,i.createElement("i",null,e))),onboardingTooltip:"Click the arrow to explore related words"}})));function u(e){return t=>("mac"===e||"ios"===e?"⌘+":"Ctrl+")+t}var d;!function(e){e.holder=c,e.getConfig=function(e){return{commandKeyLabel:u(e)}},e.Context=i.createContext(a.Y.invariantContent("PlatformTextResources"))}(d||(d={}))},62310:(e,t,n)=>{n.d(t,{C:()=>r});var r,i=n(27378),a=n(12187),s=n(90351),o=n(63969),l=n(40219),c=n(94793);!function(e){e.Regular=e=>i.createElement("span",Object.assign({},(0,a.Sh)(h.badge,e.className)),e.children),e.New=({className:t})=>i.createElement(e.Regular,{className:t},"New"),e.NewWrapper=({children:t})=>i.createElement("div",null,i.createElement(e.New,null),t),e.Premium=({className:t})=>i.createElement(e.Regular,Object.assign({},(0,a.Sh)(h.premiumBadge,t)),i.createElement(c.JO.PaidLink,{className:h.premiumBadgeIcon,width:12}),"PREMIUM"),e.Business=({className:t})=>i.createElement(e.Regular,Object.assign({},(0,a.Sh)(t)),"BUSINESS")}(r||(r={}));const u={display:"inline-block",padding:`${o.u.rem(s.Zh.BadgeY)} ${o.u.rem(s.Zh.BadgeX)}`,height:o.u.rem(s.L3.Badge),borderRadius:o.u.rem(l.mA),background:s.Il.CoreGreen10,color:s.Il.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:s._5.Badge,letterSpacing:s.LK.Badge,fontWeight:s.U9.Badge,fontSize:o.u.rem(s.Bf.Badge),lineHeight:o.u.rem(s.L3.Badge)},d={marginRight:s.Zh.BadgeX,maxWidth:o.u.rem(s.L3.Badge),maxHeight:o.u.rem(s.L3.Badge),minWidth:o.u.rem(s.L3.Badge),minHeight:o.u.rem(s.L3.Badge),verticalAlign:"top"},p={background:s.Il.CoreYellow20,color:s.Il.CoreYellow80},m={fill:s.Il.CoreYellow80},h=o.u.stylesheet({badge:[u],badgeIcon:[d],premiumBadge:[u,p],premiumBadgeIcon:[d,m]})},24811:(e,t,n)=>{n.d(t,{B:()=>w,N:()=>C});var r=n(27378),i=n(5739),a=n(12187),s=n(38983),o=n(8125),l=n(90351),c=n(63969),u=n(24588),d=n(40219),p=n(26653),m=n(76974),h=n(2844),f=n(98403),g=n(77176),y=n(93508),v=n(66310),b=n(19751);function w({value:e,initValue:t=p.g.MIN,wrapperClass:n,progressClass:s,isLoading:o=m.of(!1)}){const l=C(e,t);return r.createElement(i.F.div,Object.assign({},(0,a.Sh)(O.wrapper,n)),r.createElement(S,{width:l,progressClass:s,isLoading:o}))}function C(e,t=p.g.MIN){const n=s.h.create(!1);return requestAnimationFrame((()=>requestAnimationFrame((()=>n.set(!0))))),h.aj(f.Dx(e),n,((e,n)=>n?e:t))}function S({width:e,progressClass:t,isLoading:n}){const s=e.pipe(g.U((e=>`${e}%`))),l=e.pipe(g.U(p.g.prism.reverseGet),g.U((e=>e>0?`${e+.75}%`:0)),y.O(0)),c=n.pipe(v.w((e=>e?s:"0"))),u=e.pipe(g.U(p.g.isMin),b.d({bufferSize:1,refCount:!0}));return r.createElement(r.Fragment,null,r.createElement(i.F.div,Object.assign({},(0,a.Sh)(O.borderContainer,u.pipe(g.U((0,o.RN)(O.borderContainerZeroWidth,O.borderContainerWithMinWidth)))),{style:{width:l}})),r.createElement(i.F.div,Object.assign({},(0,a.Sh)(t||O.defaultProgress,O.progressBar,u.pipe(g.U((0,o.RN)(O.progressBarZeroWidth,O.progressBarWithMinWidth)))),{style:{width:s}})),r.createElement(i.F.div,{className:O.loading,style:{width:c}}))}const I=c.u.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),x={position:"relative",width:c.u.percent(100),height:c.u.rem(.25),borderRadius:c.u.rem(d.Jr),backgroundColor:u.xO},k={position:"relative",top:0,height:c.u.percent(100),borderRadius:c.u.rem(d.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},E={minWidth:c.u.px(4)},A={position:"absolute",backgroundColor:l.Il.CoreNeutral0},T={minWidth:c.u.px(6)},_={position:"absolute",minWidth:0,backgroundImage:u.b6,backgroundSize:"20px 20px",transition:"none",animation:`${I} 1s linear infinite`},L={backgroundImage:u.Xd},O=c.u.stylesheet({wrapper:[x,x],progressBar:[k],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[E],borderContainer:[k,A],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[T],loading:[k,_],defaultProgress:[L]})},77797:(e,t,n)=>{n.d(t,{Ys:()=>u});var r=n(27378),i=n(5739),a=n(12187),s=n(90351),o=n(63969),l=n(40219);const c=()=>r.createElement("svg",{className:f.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"})),u=({checked:e,className:t,children:n,name:i})=>r.createElement(d,{checked:e,name:i,className:t,checkedComponent:e=>r.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?f.rectangleFilledBlue:f.rectangle},e&&r.createElement(c,null))},n),d=({checked:e,checkedComponent:t,className:n,children:s,name:o})=>r.createElement(i.F.label,Object.assign({},(0,a.Sh)(f.wrapper,n),{onClick:e=>e.stopPropagation()},o?{"data-name":`${o}-checkbox`}:{}),r.createElement(i.F.input,{type:"checkbox",checked:e,onChange:t=>e.modify((e=>!e)),className:f.inputCheckbox}),e.view(t),r.createElement("div",null,s)),p={display:"flex",marginRight:o.u.rem(.5),paddingTop:o.u.rem(.18),width:o.u.rem(1),height:o.u.rem(1),border:`2px solid ${s.Il.CoreNeutral30}`,borderRadius:o.u.rem(l.mA),backgroundColor:"transparent",alignItems:"center"},m={paddingTop:o.u.rem(.1),borderColor:s.Il.CoreBlue50,borderRadius:o.u.rem(l.mA),backgroundColor:s.Il.CoreBlue50},h={width:o.u.percent(100),height:o.u.percent(100)},f=o.u.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[p],rectangleFilledBlue:[p,m],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[h],svg2:[{margin:"auto"}]})},87380:(e,t,n)=>{n.d(t,{x:()=>r});var r,i=n(27378),a=n(5739),s=n(12187),o=n(19962),l=n(90351),c=n(63969),u=n(24588),d=n(71284),p=n(94793),m=n(42329),h=n(43743),f=n(77176),g=n(98403),y=n(57091),v=n(93508),b=n(26653);!function(e){function t(e){return 0===e?"":e>=1e3?`${Math.min(Math.trunc(e/1e3),9)}k+`:String(e)}const n=({className:e,isChecking:t,type:n,animateFade:r=!0})=>{const{state:o,complete:l}=h.f.fadeOutState(t),c="checking-complete";return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(z.loader,e),{role:"loader"}),r?o.pipe(f.U((e=>"end"===e?i.createElement("div",{key:"checking-complete",className:c}):i.createElement(m.$,{key:"spinner",variation:n,size:"100%",className:"fadeOut"===e?z.fadeOut:void 0,onTransitionEnd:l})))):t.pipe(f.U((e=>e?i.createElement(m.$,{variation:n,size:"100%"}):i.createElement("div",{className:c})))))},r=({name:e,theme:n={},count:r,type:l="white",suffix:c=""})=>{const u=i.useContext(d.a.Context);return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(z.roundCounter,g.ab(l,m.$.getClassName(z)),n.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 32",className:z.circular},i.createElement("g",null,i.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),i.createElement("text",Object.assign({x:"16",y:"17"},o.h5(u.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:r>=100?14:18,"data-name":e},(0,s.Sh)(T,n.counterContent)),t(r),c))))},l=({name:e,theme:n={},count:r,type:l="white",suffix:c=""})=>{const u=i.useContext(d.a.Context);return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(z.ovalCounter,g.ab(l,m.$.getClassName(z)),n.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 20",className:z.circular},i.createElement("rect",{width:"32",height:"20",rx:"10"}),i.createElement("text",Object.assign({x:"16",y:"10.5"},o.h5(u.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":e},(0,s.Sh)(T,n.counterContent)),t(r),c)))};e.Counter=({theme:e={},count:t,type:n="white"})=>{const a=t>=100?l:r;return i.createElement(a,{theme:Object.assign(Object.assign({},e),{counterWrapper:(0,s.Sh)(e.counterWrapper,z.flexCounter).className}),count:t,type:n})},e.OutcomeCounter=({name:e,theme:n={},count:r,type:l="white",suffix:c,fontSize:u=12})=>{const p=i.useContext(d.a.Context);return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(z.outcomeCounter,g.ab(l,m.$.getClassName(z)),n.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 18",className:z.circular},i.createElement("rect",Object.assign({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(r,!!c),{height:18,rx:9})),i.createElement("text",Object.assign({x:"50%",y:"10px"},o.h5(p.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":e},(0,s.Sh)(T,n.counterContent)),t(r),c)))},e.MainMeter=({count:e,isChecking:t,className:a})=>{const o=0===e;return i.createElement("div",Object.assign({},(0,s.Sh)(z.meter,a)),i.createElement(n,{isChecking:t,type:o?"green":"red"}),0===e?i.createElement(p.JO.Grammarly,null):i.createElement(r,{count:e,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=({count:e,isChecking:t})=>i.createElement("div",{className:z.lensNavMeter},i.createElement(n,{isChecking:t,type:"red"}),i.createElement(r,{count:e,type:"white",name:"toolbar-mistakes"})),e.PlagiarismMeter=({count:e,isChecking:t,className:r})=>i.createElement("div",Object.assign({},(0,s.Sh)(z.plagiarismMeter,r)),i.createElement(n,{isChecking:t,type:"violet",animateFade:!1}),i.createElement(a.F.div,{className:z.wrapper},e.pipe(y.a(t),f.U((([e,t])=>0===e?i.createElement(p.JO.NotificationInfo,{className:z.plagiarismIcon,key:"icon",width:20}):!t&&i.createElement(l,{count:e,type:"violet",key:"value",suffix:i.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")}))),v.O(null)))),e.PlagiarismOutcomesMeter=({count:t,isChecking:r,className:o})=>i.createElement("div",Object.assign({},(0,s.Sh)(z.plagiarismMeter,o)),i.createElement(n,{isChecking:r,type:"cyan",animateFade:!1}),i.createElement(a.F.div,{className:z.wrapper},t.pipe(y.a(r),f.U((([t,n])=>b.g.isMin(t)?i.createElement(p.JO.CheckmarkOutcomes,{className:z.plagiarismOutcomeIcon,key:"icon",width:20}):!n&&i.createElement(e.OutcomeCounter,{count:b.g.prism.reverseGet(t),type:"cyan",key:"value",suffix:i.createElement("tspan",{fontSize:11},"%")}))),v.O(null))))}(r||(r={}));const w=1.25,C={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:c.u.percent(100),height:c.u.percent(100)},S={position:"absolute",width:c.u.percent(150),height:c.u.percent(150),transform:"translate(-17%, -17%)"},I={position:"relative",display:"inline-flex"},x={width:c.u.percent(100),height:c.u.percent(100)},k={minWidth:c.u.rem(2),width:c.u.percent(100),height:c.u.rem(w)},E={maxWidth:c.u.rem(2),height:c.u.rem(w)},A="counterText",T=c.u.joinClasses([A,c.u.style({fontWeight:"bold",textAnchor:"middle",fill:l.Il.CoreNeutral0})]),_={fill:u.zh,$nest:{"& .counterText":{fill:u.FW}}},L={fill:l.Il.CoreRed50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},O={fill:l.Il.CoreGreen50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},R={fill:l.Il.CoreBlue50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},P={fill:"transparent",$nest:{"& .counterText":{fill:u.FW}}},M={fill:u.lh,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},F={fill:u.AX,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},N={fill:l.Il.CoreYellow20,$nest:{"& .counterText":{fill:l.Il.CoreYellow80}}},D={fill:l.Il.CoreYellow60,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},$={fill:l.Il.CoreCyan50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},B={width:c.u.rem(1.5),height:c.u.rem(1.5)},U={margin:`0 ${c.u.rem(.25)}`},j={width:c.u.rem(2),height:c.u.rem(w)},W={margin:`${c.u.rem(-1)} 0`},G={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:l.Il.CoreCyan50}}},H={width:c.u.rem(2),height:c.u.rem(1.125),position:"relative"},z=c.u.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[C],loader:[S],wrapper:[I],roundCounter:[I,x],ovalCounter:[I,k],flexCounter:[I,E],gray:[_],red:[L],green:[O],blue:[R],white:[P],violet:[M],yellow:[F],yellowPremium:[N],orange:[D],cyan:[$],meter:[I,B],lensNavMeter:[I,B,U],plagiarismMeter:[I,j],plagiarismIcon:[W],plagiarismOutcomeIcon:[W,G],outcomeCounter:[I,{position:"absolute",left:0},H]})},29245:(e,t,n)=>{n.d(t,{d:()=>l});var r=n(27378),i=n(34685),a=n(63969);const s=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function o(e,t=c.emoji){return`<img alt="${e}" class="${t}" src="${function(e){return i.gK+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}(e)}" onerror="this.replaceWith(this.alt)" draggable="false" />`}const l=({children:e,emojiClassName:t,className:n})=>{const i=r.useCallback((e=>{null!==e&&(e.innerHTML=e.innerHTML.replace(s,(e=>o(e,t))))}),[e]);return r.createElement("span",{ref:i,className:n},e)},c=a.u.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}]})},49313:(e,t,n)=>{n.d(t,{u_:()=>ne,aV:()=>ee,ay:()=>te});var r=n(27378),i=n(57050),a=n(38983),s=n(5739),o=n(12187),l=n(25781),c=n(22232),u=n(90351),d=n(63969),p=n(24588),m=n(40219),h=n(7046),f=n(94793),g=n(29909),y=n(84347),v=n(81531),b=n(46680),w=n(85089),C=n(98403),S=n(10061),I=n(66081),x=n(66310),k=n(77176),E=n(67434),A=n(24209),T=n(49708),_=n(17343),L=n(28043),O=n(93508),R=n(95300),P=n(85985),M=n(2834),F=n(12126),N=n(2844),D=n(76974),$=n(13444),B=n(55935),U=n(55721);const j=(e,t)=>({transition:`background-color ${d.u.seconds(e)} linear ${d.u.seconds(t)}, opacity ${e} linear ${t}`}),W=()=>Object.assign(Object.assign({},j(.1,0)),{position:"absolute",display:"none",opacity:0}),G=(e,t)=>({transition:`background-color ${d.u.seconds(e)} linear ${d.u.seconds(t)}, height ${d.u.seconds(e)} linear ${d.u.seconds(t)}, width ${d.u.seconds(e)} ease-in-out ${d.u.seconds(t)}, border-radius ${d.u.seconds(e)} ease-in-out ${d.u.seconds(t)}`}),H=()=>Object.assign(Object.assign({},G(.1,0)),{position:"absolute",borderRadius:d.u.px(6),backgroundColor:"#3a3a3a"}),z=()=>({$nest:{"&.ps--in-scrolling":{$nest:{"&.ps--x > .ps__scrollbar-x-rail":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),{$nest:{"& > .ps__scrollbar-x":Object.assign(Object.assign({},{backgroundColor:"#7d7c7c"}),{height:d.u.px(11)})}}),"&.ps--y > .ps__scrollbar-y-rail":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),{$nest:{"& > .ps__scrollbar-y":Object.assign(Object.assign({},{backgroundColor:"#7d7c7c"}),{width:d.u.px(11)})}})}}}});d.u.cssRule(".ps",{overflow:d.u.important("hidden"),"-ms-touch-action":"auto",touchAction:"auto","-ms-overflow-style":"none",$nest:Object.assign(Object.assign({},z().$nest),{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{overflow:d.u.important("auto")},"@supports (-ms-overflow-style: none)":{overflow:d.u.important("auto")},"&.ps--active-x > .ps__scrollbar-x-rail, &.ps--active-y > .ps__scrollbar-y-rail":{display:"block",backgroundColor:"transparent"},"& > .ps__scrollbar-x-rail":Object.assign(Object.assign({},W()),{bottom:d.u.px(0),height:d.u.px(15),$nest:{"& > .ps__scrollbar-x":Object.assign(Object.assign({},H()),{bottom:d.u.px(2),height:d.u.px(6)}),"&:hover, &:active":{$nest:{"& > .ps__scrollbar-x":{height:d.u.px(11)}}}}}),"& > .ps__scrollbar-y-rail":Object.assign(Object.assign({},W()),{right:d.u.px(0),width:d.u.px(15),$nest:{"& > .ps__scrollbar-y":Object.assign(Object.assign({},H()),{right:d.u.px(2),width:d.u.px(7)}),"&:hover, &:active":{$nest:{"& > .ps__scrollbar-y":{width:d.u.px(11)}}}}})})},{$nest:{"& .ps__scrollbar-x-rail, & .ps__scrollbar-y-rail":{zIndex:m.$n,pointerEvents:"all"},"& .ps__scrollbar-x-rail":{display:d.u.important("none")},"&.ps-hidden":{$nest:{"&.ps--active-x > .ps__scrollbar-x-rail":{display:"none"},"&.ps--active-y > .ps__scrollbar-y-rail":{display:"none"}}},"&.ps-visible > .ps__scrollbar-y-rail":{opacity:.6},"&.ps-hovered":{$nest:Object.assign(Object.assign({},z().$nest),{"& > .ps__scrollbar-x-rail":{opacity:.6},"& > .ps__scrollbar-y-rail":{opacity:.6},"& > .ps__scrollbar-x-rail:hover":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),j(.2,.2)),"& > .ps__scrollbar-x":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),G(.2,.2)),"& > .ps__scrollbar-y-rail:hover":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),j(.2,.2)),"& > .ps__scrollbar-y":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),G(.2,.2))})},"&.ps-fast-transition":{$nest:{"& > .ps__scrollbar-x-rail, & > .ps__scrollbar-y-rail":Object.assign(Object.assign({},j(.05,0)),{$nest:{"& > .ps__scrollbar-x":Object.assign({},G(.05,0)),"& > .ps__scrollbar-y":Object.assign({},G(.05,0))}})}}}});class Y extends r.Component{constructor(){super(...arguments),this._subs=[],this._classes={hidden:"ps-hidden",visible:"ps-hovered",fastTransition:"ps-fast-transition"},this._mount=e=>{this._el=e,this.props.onMount&&e&&this.props.onMount(e)},this._update=()=>{requestAnimationFrame((()=>{this._el&&y.update(this._el)}))}}componentDidMount(){const{name:e,update:t,showWhenScrollable:n,scrollTo:r,className:i}=this.props,a=this._el;y.initialize(a,{suppressScrollX:!0,minScrollbarLength:40,handlers:["click-rail","drag-scrollbar","keyboard","passiveWheel","touch"]}),this._update(),this._subs.push(...V.customize(a,{name:e,showWhenScrollable:n||!1,classes:this._classes})),this._subs.push(w.YC(this._el).pipe(I.e(200)).subscribe(this._update)),t&&this._subs.push(t.subscribe(this._update)),r&&this._subs.push(r.pipe(x.w(C.b2.rafScheduler)).subscribe((e=>{a.scrollTop=e,this._update()}))),i&&this._subs.push(C.Dx(i).pipe(k.U((e=>e?e.split(" "):[])),E.R(((e,t)=>(e&&a.classList.remove(...e),t&&a.classList.add(...t),t)),[])).subscribe())}componentWillUnmount(){y.destroy(this._el),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}shouldComponentUpdate(){return!1}render(){const{children:e,onScroll:t,name:n,showWhenScrollable:i}=this.props;return r.createElement(s.F.div,Object.assign({},(0,o.Sh)(i&&this._classes.visible),{onScroll:t?()=>t.next():void 0,mount:this._mount,role:`scrollbar-${n}`}),e)}}var V,q;!function(e){const t=["mousewheel","DOMMouseScroll","wheel","touchmove"];e.customize=(e,{name:n,showWhenScrollable:r,classes:i})=>{const a=v.C8.Logging.getLogger(`scrollBarY.${n}`,b.i.DEBUG),s=e.querySelector(".ps__scrollbar-y"),o=e.querySelector(".ps__scrollbar-y-rail"),l=A.T(T.R(e,"mouseenter",{passive:!0}).pipe(_.h(!0)),T.R(e,"mouseleave",{passive:!0}).pipe(_.h(!1))).pipe(L.x(),O.O(!1)),u=A.T(T.R(o,"mouseenter",{passive:!0}).pipe(_.h(!0)),T.R(o,"mouseleave",{passive:!0}).pipe(_.h(!1))).pipe(L.x(),O.O(!1)),d=A.T(T.R(s,"mousedown",{passive:!0}).pipe(_.h(!0)),T.R(document,"mouseup",{passive:!0}).pipe(_.h(!1))).pipe(O.O(!1)),p=new R.X(!1),m=A.T(T.R(document,"paste",{passive:!0}),T.R(document,"mousedown",{passive:!0}).pipe(P.h((e=>{const t=e.target;return t!==s&&t!==o})),M.b((e=>a.trace("force hide event",e))))).pipe(x.w((()=>F.D([!0,!1]))),O.O(!1));return[A.T(...t.map((t=>T.R(e,t).pipe(k.U((e=>(e.preventDefault(),e.stopPropagation(),!0))))))).subscribe(p),N.aj(l,d,u,m).pipe(P.h((()=>!r)),x.w((([e,t,n,r])=>r?D.of("forceHide"):t||n?n&&!t?D.of("show").pipe($.g(600)):D.of("show"):e?A.T(p.pipe(B.T(1),U.p(100),_.h("show")),p.pipe(_.h("hide"),U.p(100),x.w((()=>D.of("hide").pipe($.g(600)))))):D.of("hide").pipe($.g(600)))),L.x()).subscribe((t=>{switch(S.c.emit(t),a.trace("new scroll action",{action:t}),t){case"show":e.classList.remove(i.hidden,i.fastTransition),e.classList.add(i.visible);break;case"hide":e.classList.remove(i.visible);break;case"forceHide":e.classList.remove(i.visible),e.classList.add(i.fastTransition);break;default:(0,c.vE)(t)}return t}))]}}(V||(V={})),function(e){function t(e){let t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.deltaX/6,n=e.deltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.deltaY),[t,n]}e.verticalScrollByWhellEvent=e=>T.R(e,"wheel",{passive:!0}).pipe(k.U(t),k.U(g.Yg),M.b((t=>e.scrollTop-=t)))}(q||(q={}));var Z=n(43743),X=n(28706),J=n(85255),K=n(60797),Q=n(40151);class ee extends r.Component{constructor(){super(...arguments),this._overlayIndex=ee._index++,this._subs=[],this._visibilityState=a.h.create("hidden")}componentDidMount(){this._visibilityState.set(this.props.visible.get()?"visible":"hidden"),this._subs.push(this._visibilityState.pipe(k.U((e=>"visible"===e)),L.x()).subscribe((e=>ee._activeOverlays.modify((t=>{const n=new Set(t);return e?n.add(this._overlayIndex):n.delete(this._overlayIndex),n})))),this.props.visible.pipe(B.T(1)).subscribe((e=>{const t=this.props.animate?"fadeOut":"hidden";this._visibilityState.set(e?"visible":t)}))),this._subs.push(this._visibilityState.pipe(x.w((e=>"visible"===e?T.R(document,"keydown"):Q.E)),P.h((e=>e.keyCode===l.R.ESC_CODE))).subscribe((()=>{this.props.preventClose||this.props.visible.set(!1),this.props.onClose&&this.props.onClose()})))}componentWillUnmount(){ee._activeOverlays.modify((e=>{const t=new Set(e);return t.delete(this._overlayIndex),t})),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}render(){return r.createElement(s.F.Fragment,null,this._visibilityState.view((e=>{switch(e){case"visible":case"fadeOut":return r.createElement(s.F.div,Object.assign({role:"overlay-wrapper"},(0,o.Sh)(this.props.animate?this._getAnimatedTypeClass(e):this._getTypeClass(e),this._getPositionType(this.props.positionType)),{onClick:()=>{this.props.preventClose||this.props.visible.set(!1),this.props.onClose&&this.props.onClose()},onTransitionEnd:()=>{"fadeOut"===e&&this._visibilityState.set("hidden")}}),r.createElement(s.F.div,Object.assign({},(0,o.Sh)(this.props.animate&&this._getContentClass(e))),r.createElement("div",{className:ve.scroll,role:"scrollbar-modal"},r.createElement(s.F.div,Object.assign({},(0,o.Sh)(this._getAlignmentClass(),this._getSmallResolutionClass())),this.props.children))));case"hidden":return null;default:return(0,c.vE)(e)}})))}_getSmallResolutionClass(){switch(this.props.smallResolution){case"resize":return ve.wrapperResize;case"cut":default:return""}}_getAlignmentClass(){switch(this.props.alignment){case"top-center":return ve.wrapperTopCenter;case"bottom-right":return ve.wrapperBottomRight;case"none":return"";case"center":default:return ve.wrapperCenter}}_getTypeClass(e){if("visible"!==e)return ve.wrapperTransparent;switch(this.props.overlayType){case"light":return ve.wrapperLight;case"transparent":return ve.wrapperTransparent;case"dark":default:return ve.wrapperDark}}_getPositionType(e){switch(e){case"absolute":return ve.wrapperAbsolute;case"fixed":return ve.wrapperFixed;default:return(0,c.vE)(e)}}_getAnimatedTypeClass(e){const t="visible"===e;switch(this.props.overlayType){case"light":return Z.f.rafSequence(t?[ve.wrapperTransparent,ve.wrapperLight]:[ve.wrapperLight,ve.wrapperTransparent],!0);case"transparent":return D.of(ve.wrapperTransparent);case"dark":default:return Z.f.rafSequence(t?[ve.wrapperTransparent,ve.wrapperDark]:[ve.wrapperDark,ve.wrapperTransparent],!0)}}_getContentClass(e){const{contentFaded:t,content:n}=this.props.theme||ve,r="visible"===e?[t,n]:[n,t];return Z.f.rafSequence(r,!0)}}ee.defaultProps={visible:a.h.create(!0)},ee._activeOverlays=a.h.create(new Set),ee.activeCount=ee._activeOverlays.view((e=>e.size)),ee._index=0;const te=e=>r.createElement(ee,Object.assign({},e,{visible:a.h.create(!0),preventClose:!1}),e.children);function ne({children:e,className:t,close:n}){return r.createElement(s.F.div,Object.assign({},(0,o.Sh)(ve.modal,t),{onClick:X.UW(i.Q1)}),e,n?r.createElement("div",{className:ve.closeIconButtonContainer},r.createElement(h.zx,{name:"modal-close",onClick:n},r.createElement(f.JO.Close,{className:ve.closeIcon,width:13}))):null)}!function(e){e.Header=({children:e,className:t})=>r.createElement(s.F.header,Object.assign({},(0,o.Sh)(ve.header,t)),e),e.Body=({children:e,className:t,wrapperClassName:n,name:i})=>{const{ref:a,onMount:l}=J.P.useElWatcher();return r.createElement(Y,Object.assign({name:i},(0,o.Sh)(ve.scrollBody,n),{showWhenScrollable:!0,update:a.pipe(K.oA,x.w(w.YC),_.h(C.PU))}),r.createElement(s.F.div,Object.assign({},(0,o.Sh)(ve.body,t),{mount:l}),e))},e.Footer=({children:e,className:t})=>r.createElement(s.F.div,Object.assign({},(0,o.Sh)(ve.footer,t))," ",e," ")}(ne||(ne={}));const re={top:0,left:0,display:"flex",flexDirection:"column",overflow:"hidden",width:d.u.percent(100),height:d.u.percent(100),transition:`background ${d.u.seconds(.2)}`,pointerEvents:"auto"},ie={position:"fixed",zIndex:m.DY},ae={margin:`${d.u.rem(-.5)} auto auto`},se={background:"rgba(255, 255, 255, .7)"},oe={background:"rgba(100, 107, 131, .4)"},le={position:"absolute",top:d.u.rem(.5),right:d.u.rem(.5)},ce={stroke:p.FW},ue={position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:"90vh",borderRadius:d.u.rem(m.Jr),boxShadow:p.Re},de={position:"relative",overflow:"hidden",padding:`${d.u.rem(2.5)} ${d.u.rem(2)} ${d.u.rem(1)}`,borderTopLeftRadius:d.u.rem(m.Jr),borderTopRightRadius:d.u.rem(m.Jr),backgroundColor:u.Il.CoreNeutral1},pe={position:"absolute",top:d.u.px(10),right:"@top"},me={padding:d.u.rem(2),backgroundColor:u.Il.CoreNeutral0},he={display:"flex",padding:`0 ${d.u.rem(2)}`,height:d.u.rem(4),border:"0 solid transparent",borderWidth:"0 1px",borderBottomRightRadius:d.u.rem(m.Jr),borderBottomLeftRadius:d.u.rem(m.Jr),backgroundColor:u.Il.CoreNeutral1,alignItems:"center",justifyContent:"flex-end",$nest:{"& > *:not(:last-child)":{marginRight:d.u.rem(.5)}}},fe={transitionDuration:d.u.seconds(.2),transitionProperty:"opacity, transform",transformOrigin:"center"},ge={position:"relative",display:"flex",padding:`${d.u.rem(.5)} 0`,width:"100vw",height:"100vh"},ye={$nest:{[`@media (${m.pZ})`]:{margin:`${d.u.rem(2)} auto auto`}}},ve=d.u.prefixedStylesheet("modal",{wrapper:[re],wrapperFixed:[ie],wrapperAbsolute:[{position:"absolute"}],wrapperTopCenter:[ae],wrapperBottomRight:[{margin:"auto 0 0 auto"}],wrapperCenter:[{margin:"auto"}],wrapperLight:[re,se],wrapperDark:[re,oe],wrapperTransparent:[re,{overflow:"hidden",background:"transparent"}],closeIconButtonContainer:[le],closeIcon:[ce],modal:[ue],header:[de],closeBtn:[pe],body:[me],scrollBody:[{position:"relative",flexGrow:1}],footer:[he],contentBase:[fe],contentFaded:[fe,{opacity:0,transform:"scale(.8)"}],content:[fe,{opacity:1,transform:"none"}],scroll:[ge],wrapperResize:[ye]})},81301:(e,t,n)=>{n.d(t,{dC:()=>r,Iy:()=>i,EQ:()=>f});var r,i,a,s=n(57050),o=n(38983),l=n(5114),c=n(66310),u=n(18625),d=n(95300),p=n(76974),m=n(2834),h=n(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(r||(r={})),function(e){e.setGoals=e=>({type:r.SetGoals,source:e}),e.performance={type:r.Performance}}(i||(i={}));class f{constructor(e){this._modalViews=e,this.state=o.h.create(l.none),this._modalFactoryCache=new Map}show(e){return this.preload(e).pipe(c.w((e=>this.showPreloaded(e))))}showPreloaded(e){return u.P((()=>{const t=new d.X("opened");return this.state.set(l.some(e({onClose:()=>{this.state.set(l.none),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return p.of(e)}return u.P((()=>this._modalViews.load(e))).pipe(m.b((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(l.none)}}!function(e){e.Mock=class{constructor(){this.state=o.h.create(l.none),this.hideAll=s.Q1}show(e){return h.E}showPreloaded(e){return h.E}preload(e){return h.E}}}(a||(a={}))},47861:(e,t,n)=>{n.d(t,{i:()=>f});var r=n(27378);if(75==n.j)var i=n(5739);if(75==n.j)var a=n(8125);var s=n(63969),o=n(40219);if(75==n.j)var l=n(49313);if(75==n.j)var c=n(2844);if(75==n.j)var u=n(28043);if(75==n.j)var d=n(77176);if(75==n.j)var p=n(14522);if(75==n.j)var m=n(5802);if(75==n.j)var h=n(50790);const f=({manager:e,views:t,onNotificationClose:n=a.ZT,theme:s={}})=>{const o=function(e,t,n={}){return i=>{const a=e[i.type],s=e=>()=>{i.actions.next(e)};return i.metadata.viewType===m.P.ViewType.standard?r.createElement(h.DI.Wrapper,{key:i.id,notification:i,onClose:()=>{i.actions.next("closedByUser"),t(i)},theme:n},a(i,s)):r.createElement(r.Fragment,{key:i.id},a(i,s))}}(t,n,s.view),f=void 0!==s.grid?Object.assign({},I,s.grid):I,y=e.state.view((e=>e.filter(g(m.P.Position.bottomLeft)))),v=e.state.view((e=>e.filter(g(m.P.Position.bottomRight)))),b=e.state.view((e=>e.filter(g(m.P.Position.top))));return r.createElement(i.F.div,{className:f.container},c.aj(b,v,b,(e=>e.some(p._.isHighPriority))).pipe(u.x(),d.U((e=>e&&r.createElement("div",{className:f.overlay},r.createElement(l.aV,{positionType:"absolute",key:"notificationOverlay",preventClose:!0,overlayType:"light",alignment:"top-center",animate:!0,theme:{content:S.overlayContent,contentFaded:S.overlayContentFaded}}))))),r.createElement(i.F.div,{className:f.bottomLeft},y.view((e=>e.map(o)))),r.createElement(i.F.div,{className:f.bottomRight},v.view((e=>e.map(o)))),r.createElement(i.F.div,{className:f.top},b.view((e=>e.map(o)))))};function g(e){return t=>t.metadata.position===e}const y={position:"fixed",top:0,left:0,zIndex:o.nt,width:s.u.percent(100),height:s.u.percent(100),pointerEvents:"none"},v={position:"absolute",zIndex:o.nt,display:"flex",flexDirection:"column",width:s.u.rem(27),pointerEvents:"auto",alignItems:"flex-end"},b={right:s.u.rem(o.Ig),bottom:s.u.rem(1.5)},w={bottom:s.u.rem(1.5),left:s.u.rem(2)},C={transition:"transform .1s",transformOrigin:"center"},S=s.u.stylesheet({notificationContainer:[y],notificationWrapper:[v],bottomRightNotificationWrapper:[v,b],bottomLeftNotificationWrapper:[v,w],topNotificationWrapper:[v,{top:0,right:0,left:0,margin:"0 auto"}],overlayContentBase:[C],overlayContent:[C,{transform:"none"}],overlayContentFaded:[C,{transform:"scale(.95)"}]}),I={container:S.notificationContainer,bottomLeft:S.bottomLeftNotificationWrapper,bottomRight:S.bottomRightNotificationWrapper,top:S.topNotificationWrapper}},41966:(e,t,n)=>{n.d(t,{r:()=>r});var r,i=n(32952);!function(e){e.createBuilder=function(){return{build:(e,n)=>{const r=t();return{make:(t,a)=>({metadata:e,data:n,args:a,id:r,type:t,actions:new i.xQ})}}}};const t=(()=>{let e=1;return()=>e++})()}(r||(r={}))},14522:(e,t,n)=>{n.d(t,{_:()=>r});var r,i=n(5802);!function(e){e.isHighPriority=function(e){return e.metadata.priority>i.P.Priority.average},e.isCloseAction=function(e){return"timeout"===e||"closedByUser"===e||"closedByNotificationWithMorePriority"===e||"closedByMaxNotificationOnScreen"===e}}(r||(r={}))},61813:(e,t,n)=>{if(n.d(t,{y:()=>w}),75==n.j)var r=n(8125);if(75==n.j)var i=n(81531);if(75==n.j)var a=n(46680);if(75==n.j)var s=n(18625);if(75==n.j)var o=n(80900);if(75==n.j)var l=n(17343);if(75==n.j)var c=n(40151);if(75==n.j)var u=n(95093);if(75==n.j)var d=n(2768);if(75==n.j)var p=n(85985);if(75==n.j)var m=n(8473);if(75==n.j)var h=n(50628);if(75==n.j)var f=n(2834);if(75==n.j)var g=n(9223);if(75==n.j)var y=n(38194);if(75==n.j)var v=n(14522);if(75==n.j)var b=n(5802);class w{constructor(e,t,n,r){this.state=e,this._factory=t,this._maxNotificationsOnScreen=n,this._defaultTimeout=r,this._log=i.C8.Logging.getLogger("notificationsManager")}enqueue(e,t){const n=this._factory[e].make(e,t);return s.P((()=>{const t=n.metadata.timeout!==b.P.TimeoutDisabled?o.H(n.metadata.timeout===b.P.DefaultTimeout?this._defaultTimeout:n.metadata.timeout).pipe(l.h("timeout")):c.E;this.state.modify((e=>{const t=e.filter(((t,r)=>t.metadata.priority<n.metadata.priority?(this._log.debug(`closing ${t.type} notification, ${n.type} have higher priority`),t.actions.next("closedByNotificationWithMorePriority"),!1):t.id!==n.id&&(!(0===r&&e.length>=this._maxNotificationsOnScreen)||(this._log.debug(`closing ${t.type} notification, more than ${this._maxNotificationsOnScreen} notification on the screen`),t.actions.next("closedByMaxNotificationOnScreen"),!1))));return t.push(n),t}));const i=n.actions.pipe(u.T(t.pipe(d.R(n.actions.pipe(p.h(v._.isCloseAction))))));return i.pipe(m.o((0,r.ff)(v._.isCloseAction)),u.T(i.pipe(h.P(v._.isCloseAction))),f.b((t=>{this._log.log(v._.isHighPriority(n)?a.i.WARN:a.i.INFO,`Notification ${e} is ${t}`)})),g.x((()=>{this.state.modify((e=>e.filter((e=>e.id!==n.id))))})),y.B())}))}}},5802:(e,t,n)=>{var r;n.d(t,{P:()=>r}),function(e){let t,n,r,i;!function(e){e.sparkles="sparkles",e.priority="priority"}(t=e.Icon||(e.Icon={})),function(e){e[e.lowest=0]="lowest",e[e.low=1]="low",e[e.average=2]="average",e[e.high=3]="high",e[e.highest=4]="highest"}(n=e.Priority||(e.Priority={})),function(e){e.top="top",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight"}(r=e.Position||(e.Position={})),function(e){e.standard="standard",e.custom="custom"}(i=e.ViewType||(e.ViewType={})),e.DefaultTimeout="DefaultTimeout",e.TimeoutDisabled="TimeoutDisabled"}(r||(r={}))},50790:(e,t,n)=>{n.d(t,{DI:()=>k,SJ:()=>E});var r=n(27378),i=n(12187),a=n(22232),s=n(90351),o=n(63969),l=n(24588),c=n(40219),u=n(7046),d=n(94793),p=n(3656),m=n(5802);const h={position:"relative",width:o.u.percent(100)},f={position:"relative",margin:`0 0 ${o.u.rem(.5)}`},g={display:"flex",boxSizing:"border-box",padding:`${o.u.rem(1)} ${o.u.rem(2)} ${o.u.rem(1)} ${o.u.rem(.75)}`,width:o.u.percent(100),borderRadius:o.u.rem(c.fx),background:s.Il.BackgroundNotification,color:s.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},y={width:o.u.percent(100)},v={display:"inline-block",width:o.u.percent(100)},b={margin:`${o.u.rem(-.5)} ${o.u.rem(.75)} ${o.u.rem(-.5)} 0`},w={position:"absolute",top:0,right:0,marginTop:o.u.rem(.5),marginRight:o.u.rem(.4),marginLeft:o.u.rem(.5)},C={stroke:l.FW},S={margin:`0 0 ${o.u.rem(.5)}`,color:s.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:o.u.rem(s.xv.BodySize),lineHeight:o.u.rem(1.25)},I={marginTop:o.u.rem(-.1),marginBottom:o.u.rem(-.25),color:s.Il.CoreNeutral0,fontSize:o.u.rem(s.xv.BodySize),lineHeight:o.u.rem(1.25)},x=o.u.prefixedStylesheet("notifications",{wrapper:[h],notification:[f],flexibleNotification:[f,{display:"flex",width:"auto"}],contentWrapper:[g],miniContentWrapper:[g,{position:"relative",width:"auto"}],fullWidthNotification:[f,g,y],content:[v],miniContent:[{flex:1}],alertIcon:[b],closeIconWrapper:[w],closeIcon:[C],header:[S],description:[I]});var k,E;!function(e){e.Wrapper=({notification:t,onClose:i,children:a,theme:s={}})=>{r.useEffect((()=>t.actions.next("shown")),[]);const o={wrapper:s.wrapper||n.wrapper,content:void 0!==s.content?Object.assign({},n.content,s.content):n.content};return r.createElement("div",{className:o.wrapper},r.createElement(e.Base,{metadata:t.metadata,onClose:i,theme:o.content},a))},e.Base=({metadata:n,onClose:i,theme:a,children:s})=>r.createElement("div",{className:a.wrapper},t(n,a.icon),r.createElement("div",{className:a.content},s),!function(e){return e.priority===m.P.Priority.high||e.priority===m.P.Priority.highest}(n)&&r.createElement(e.CloseButton,{onClick:i,className:a.close}));const t=(t,n)=>{switch(t.icon){case m.P.Icon.sparkles:return r.createElement(d.JO.Sparkles,{className:n});case void 0:case m.P.Icon.priority:return r.createElement(e.PriorityIcon,{priority:t.priority,className:n});default:return(0,a.vE)(t.icon)}};e.AdHoc=({title:t,children:a,className:s,onClose:o})=>r.createElement("div",Object.assign({},(0,i.Sh)(n.content.wrapper,s)),r.createElement("div",{className:n.content.content},r.createElement(e.TitledContent,{title:t},a)),r.createElement(e.CloseButton,{onClick:o,className:n.content.close})),e.PriorityIcon=({priority:e,className:t})=>{switch(e){case m.P.Priority.lowest:case m.P.Priority.low:return r.createElement(d.JO.NotificationInfo,{className:t});case m.P.Priority.average:return r.createElement(d.JO.NotificationWarning,{className:t});case m.P.Priority.high:case m.P.Priority.highest:return r.createElement(d.JO.NotificationError,{className:t});default:return(0,a.vE)(e)}},e.CloseButton=({onClick:e,className:t})=>r.createElement(u.zx,{name:"closeNotification",className:t,onClick:e},r.createElement(d.JO.Close,{className:x.closeIcon,width:12})),e.TitledContent=({title:t,children:n})=>n?r.createElement(r.Fragment,null,r.createElement(p.P1,{className:x.header},t),r.createElement(e.Content,null,n)):r.createElement(p.P1,{className:x.description},t),e.Content=({children:e})=>r.createElement(p.XY,{className:x.description},e);const n={wrapper:x.wrapper,content:{wrapper:x.fullWidthNotification,icon:x.alertIcon,content:x.content,close:x.closeIconWrapper}}}(k||(k={})),function(e){e.Wrapper=({notification:e,onClose:t,children:n})=>(r.useEffect((()=>e.actions.next("shown")),[]),r.createElement("div",{className:x.flexibleNotification},r.createElement(k.Base,{metadata:e.metadata,onClose:t,theme:{wrapper:x.miniContentWrapper,icon:x.alertIcon,content:x.miniContent,close:x.closeIconWrapper}},n)))}(E||(E={}))},70920:(e,t,n)=>{n.d(t,{t:()=>C});var r,i=n(59312),a=n(27378),s=n(57050),o=n(40327),l=n(5739),c=n(12187),u=n(77176),d=n(2844),p=n(28043),m=n(71249),h=n(45614),f=n(32426),g=n(19962),y=n(22232),v=n(95574),b=n(5114),w=n(95195);!function(e){var t,n,r;function a(e,n){var r=n.position,a=n.point,s={width:Math.trunc(e.width),height:Math.trunc(e.height)};return g.UL.validate(t.match((function(){return(0,i.pi)({top:a.y,right:a.x,bottom:a.y+s.height,left:a.x-s.width},s)}),(function(){return(0,i.pi)({top:a.y-s.height,right:a.x,bottom:a.y,left:a.x-s.width},s)}),(function(){return(0,i.pi)({top:a.y-s.height,right:a.x+s.width,bottom:a.y,left:a.x},s)}),(function(){return(0,i.pi)({top:a.y,right:a.x+s.width,bottom:a.y+s.height,left:a.x},s)}))(r))}function s(t){return e.topLeft(g.UL.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,n,r,i){return function(a){switch(a){case e.topRight:return t();case e.bottomRight:return n();case e.bottomLeft:return r();case e.topLeft:return i();default:return(0,y.vE)(a)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:g.UL.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:g.UL.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:g.UL.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:g.UL.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:g.UL.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(g.UL.Point.empty),e.toRect=a,e.fromRect=s,e.inRect=function(e,t){var n=t.point;return g.UL.hasPoint(e,n)},e.toCss=function(e){var n=e.position,r=e.point;return t.match((function(){return{top:r.y,right:r.x}}),(function(){return{right:r.x,bottom:r.y}}),(function(){return{bottom:r.y,left:r.x}}),(function(){return{top:r.y,left:r.x}}))(n)},function(t){t.create=function(e,t){return(0,y.kG)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(n,r){return g.UL.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.floor(r.right),y:Math.ceil(r.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(r.right),y:Math.ceil(r.top)}),e.bottomLeft({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(r.left),y:Math.floor(r.bottom)}),e.topRight({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.ceil(r.left),y:Math.floor(r.bottom)}))}))(n)}}(n=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return h.sQ((0,f.getFirstSemigroup)(),m.IX)(g.UL.Axis.toSides(e).map((function(e){return[e,n.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function n(e,t){return(0,o.pipe)(g.UL.intersection(e,t),b.map((function(e){var n=e.width/t.width,r=e.height/t.height,i=(Number.isNaN(n)?0:n/2)+(Number.isNaN(r)?0:r/2);return(0,y.kG)(i>=0,"quality can not be negavite: "+i),(0,y.kG)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=n,t.byViewport=function(e,t){return{quality:(0,o.pipe)(n(e,t),b.getOrElse((function(){return 0})))+(0,o.pipe)(g.UL.scale(2,t),w.tS(g.UL.normalize),b.fromEither,b.chain((function(t){return n(e,t)})),b.getOrElse((function(){return 0}))),point:s(t)}},t.fromZone=function(e,n,r){return(0,o.pipe)(m.IX.traverse(w.wE)(r,(function(e){return a(n,e)})),w.tS((function(e){var t=e[0],n=e[1];return g.UL.join(t,n)})),w.tS((function(e){return g.xu.placeIntoRect(n,e)})),w.UI((function(n){return n.map((function(n){return t.byViewport(e,n)}))})))}}(r=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,n){return(0,o.pipe)(n,h.UI((function(n){return r.fromZone(e,t,n)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(n){return(0,o.pipe)(n,h.To({point:r.empty,side:e},(function(n,r,i){return(0,o.pipe)(i,w.UI((function(i){return i.filter((function(r,i){return t.toString().includes(i.toString())&&e===n})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:n}:e}),r)})),v.MH)}))).point}},e.preferBy=function(e,t){return function(n){return(0,o.pipe)(n,h.To({point:r.empty,side:e},(function(n,r,i){return(0,o.pipe)(i,w.UI((function(i){return i.reduce((function(r,i,a){return i.quality>r.point.quality||i.quality===r.point.quality&&t.toString().includes(a.toString())&&e===n?{point:i,side:n}:r}),r)})),v.MH)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(r||(r={}));var C,S=n(83078),I=n(8125),x=n(90351),k=n(63969),E=n(41488),A=n(85255),T=n(98403);!function(e){let t;!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};case"topRight":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.right)};case"topLeft":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.left)};case"left":return{align:"left",selector:r.Selector.preferBy("left",r.Selector.Placement.middle)};case"right":return{align:"right",selector:r.Selector.preferBy("right",r.Selector.Placement.middle)};case"auto":case"center":return{align:g.UL.Axis.vertical,selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};default:return(0,y.vE)(e)}}}(t=e.Alignment||(e.Alignment={})),e.ByPoint=e=>{var{point:t,className:n}=e,s=(0,i._T)(e,["point","className"]);return a.createElement(l.F.div,Object.assign({role:"positioned-container",style:t.pipe(u.U(S.dH(r.toCss,{})))},(0,c.Sh)(F.wrapper,n,t.pipe(u.U((e=>b.isNone(e)?F.hidden:"")))),s))};const n=t=>{const{rect:n,onMount:i}=A.P.useRectWatcher(),o=T.Dx(t.rect),l=T.Dx(t.pinTargetRect),c=h(t.align),d=m(o,n,c,t.selector||r.Selector.preferTopMiddle,l,"relative"===t.position);return a.createElement(e.ByPoint,{mount:i,className:t.className,point:d.pipe(u.U(b.map((e=>e.tangentialPoint))))},t.withPin&&d.pipe(u.U((0,s.ls)(b.chain((e=>e.median)),b.map((t=>a.createElement(e.Pin,{point:t,key:"pin"}))),b.toNullable))),t.children)};e.ByAbsoluteRect=e=>a.createElement(n,Object.assign({},e,{position:"absolute"})),e.ByRelativeRect=e=>a.createElement(n,Object.assign({},e,{position:"relative"})),e.Pin=e=>{const t=T.Dx(e.point).pipe(u.U((e=>e.side)),u.U((e=>M[e]))),n=T.Dx(e.point).pipe(u.U((e=>e.point)),u.U((({x:e,y:t})=>({top:t,left:e}))));return a.createElement(l.F.i,Object.assign({role:"pin",style:n},(0,c.Sh)(t,M.wrapper)))};const m=(e,t,n,i,s,l)=>d.aj(e,a.useContext(E.l.Context).pipe(u.U((e=>e.rect))),t.pipe(p.x(b.getEq(g.xu.eq).equals)),s).pipe(u.U((([e,t,a,s])=>(0,o.pipe)(a,b.map((a=>{const c=r.QualifiedVariants.build(t,a,n(e));let u=i(c).point;const d=(0,o.pipe)(r.toRect(a,u),b.fromEither,b.chain((t=>(0,o.pipe)(g.UL.getMedian(e,t),b.map((e=>({anchorMedian:e,bodyRect:t})))))),b.chain((({anchorMedian:e,bodyRect:t})=>{if(s){const n=g.UL.stickToSide(g.UL.Side.invert(e.side),s)(t);return u=r.fromRect(n),(0,o.pipe)(g.UL.getMedian(s,n),b.map((({side:e,point:t})=>({side:e,point:g.UL.Point.relativeTo(t,n)}))))}return(0,o.pipe)(b.some(e),b.map((({side:e,point:n})=>({side:e,point:g.UL.Point.relativeTo(n,t)}))))})));return{tangentialPoint:r.relativeTo(u,l?e:t),median:d}})))))),h=(e=g.UL.Axis.both)=>(0,I.CI)(g.UL.Axis,e)?t=>r.Variants.byAxis(e,t):t=>({[e]:r.Zone.bySide(e,t)})}(C||(C={}));const _={position:"absolute",border:`${k.u.px(7)} solid ${x.Il.BackgroundTooltip}`,transform:`translate(${k.u.px(-7)}, ${k.u.px(-7)})`},L={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${k.u.px(7)})`}}},O={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:`translateX(${k.u.px(-7)})`}}},R={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${k.u.px(-7)})`}}},P={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateX(${k.u.px(7)})`}}},M=k.u.stylesheet({wrapper:[_],top:[L],right:[O],bottom:[R],left:[P]}),F=k.u.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},63847:(e,t,n)=>{n.d(t,{P:()=>v});var r=n(27378),i=n(12187),a=n(22232),s=n(19962),o=n(90351),l=n(63969),c=n(24588),u=n(71284),d=n(94793);const p=2*Math.PI*32,m=36,h="#f1f2fa",f="#fff",g=(e,t,n)=>e<t?t:e>n?n:e,y=e=>{switch(e){case v.IconSize.pdf:return 110;case v.IconSize.normal:return 52;case v.IconSize.outcome:return 32;case v.IconSize.small:return 24;case v.IconSize.extraSmall:return 16;default:return(0,a.vE)(e)}};class v extends r.Component{render(){const{percentage:e,aimValue:t=100,colorType:n=v.ColorType.logan,fontSize:o=v.FontSize.normal,iconSize:l=v.IconSize.normal,description:c,theme:b=S}=this.props,w=[r.createElement("circle",{key:"circle",id:"circle",cx:m,cy:m,r:32,fill:"none"})],C=(e=>{switch(e){case v.FontSize.normal:return 32;case v.FontSize.small:return 24;default:return(0,a.vE)(e)}})(o),I=(e=>{switch(e){case v.IconSize.pdf:case v.IconSize.normal:case v.IconSize.outcome:return 5;case v.IconSize.small:return 3;case v.IconSize.extraSmall:return 10;default:return(0,a.vE)(e)}})(l),x=g(e,0,100),k=g(t,x,100),E=x*p/100,A=k*p/100,T=360*I/p,_=x?p-E-2*I:p;let L,O,R,P,M;const F=(e=>{switch(e){case v.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:h,outline:f};case v.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:h,outline:f};case v.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:h,outline:f};case v.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:h,outline:f};case v.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:h,outline:f};case v.ColorType.logan:return{type:"plain",value:"#a6adc9",background:h,outline:f};case v.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case v.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case v.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case v.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case v.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case v.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case v.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case v.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,a.vE)(e)}})(n);if("plain"===F.type)L=F.value,O=L,R=F.outline,P=F.background,M=void 0===F.backgroundOpacity?1:F.backgroundOpacity;else{const e=F.value;this._gradientId=this._gradientId||"pb-gradient-"+v._nextGradientId++,w.push(r.createElement("linearGradient",Object.assign({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},e.coordinates),r.createElement("stop",{stopColor:e.start,offset:"0%"}),r.createElement("stop",{stopColor:e.end,offset:"100%"}))),L=`url(#${this._gradientId})`,O="#2b2d38",R=F.outline,P=F.background,M=void 0===F.backgroundOpacity?1:F.backgroundOpacity}return r.createElement(u.a.Context.Consumer,null,(e=>r.createElement(d.a1,Object.assign({},(0,i.Sh)(S.iconWrapper,b.radialProgressBar),{width:y(l),viewBox:"0 0 72 72"}),r.createElement("defs",null,w),r.createElement("g",null,r.createElement("use",{className:S.valueCircle,stroke:x>=94&&R?R:P,strokeOpacity:M,strokeWidth:I,strokeDasharray:p,strokeDashoffset:p-A,transform:"rotate(-90 36 36)",strokeLinecap:"round",xlinkHref:"#circle"}),R&&r.createElement("use",{className:S.valueCircle,stroke:R,strokeWidth:I,strokeDasharray:p,strokeDashoffset:_,transform:`rotate(${-90-T} 36 36)`,strokeLinecap:"round",xlinkHref:"#circle"}),r.createElement("use",{className:S.valueCircle,stroke:L,strokeDasharray:p,strokeDashoffset:p-E,strokeLinecap:"round",transform:"rotate(-90 36 36)",strokeWidth:I,xlinkHref:"#circle"}),r.createElement("text",Object.assign({className:b.radialProgressText,y:"38",x:"36",fill:O,fontSize:C,fontStyle:"normal",textAnchor:"middle"},s.h5(e.has(u.a.Flag.supportsSVGDominantBaseline))),x),c&&r.createElement("text",{className:b.radialProgressDescription,fill:O,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},c)))))}}v._nextGradientId=0,function(e){let t,n,r;!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(t=e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(n=e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(r=e.IconSize||(e.IconSize={}))}(v||(v={}));const b={width:l.u.percent(100),height:l.u.percent(100),fontWeight:"bold",fill:o.Il.CoreNeutral90},w={fontSize:l.u.rem(2),fill:o.Il.CoreNeutral90},C={fontWeight:"normal",fontSize:l.u.px(11),fill:c.UE},S=l.u.stylesheet({radialProgressBar:[b],radialProgressText:[w],radialProgressDescription:[C],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},42329:(e,t,n)=>{n.d(t,{$:()=>p});var r=n(59312),i=n(27378),a=n(5739),s=n(12187),o=n(22232),l=n(90351),c=n(63969),u=n(24588),d=n(98403);function p(e){var{wrapperClassName:t,variation:n,isIdle:s,ref:o}=e,l=(0,r._T)(e,["wrapperClassName","variation","isIdle","ref"]);return i.createElement(a.F.span,{role:"spinner",className:t},d.ab(n,(e=>i.createElement(p.Svg,Object.assign({},l,{type:e,isIdle:s})))))}!function(e){e.getClassName=e=>t=>{switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"yellowPremium":return e.yellowPremium;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,o.vE)(t)}},e.Svg=t=>{const{className:n,size:a=64,strokeWidth:l=2,type:c,name:u,isIdle:d}=t,p=(0,r._T)(t,["className","size","strokeWidth","type","name","isIdle"]),m=i.useRef(null),h=i.useRef(null);return i.useEffect((()=>((0,o.kG)(null!==m.current,"groupEl should be already created"),h.current=m.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),()=>h.current.cancel())),[]),i.useEffect((()=>{(0,o.kG)(null!==h.current,"groupAnimation should be already created");const e=h.current;e.play&&(d?e.pause():"running"!==e.playState&&e.play())})),i.createElement("svg",Object.assign({"data-role":u},(0,s.Sh)(n),{viewBox:"25 25 50 50",width:a,height:a},p),i.createElement("g",{transform:"translate(50 50)"},i.createElement("g",{ref:m},i.createElement("circle",Object.assign({},(0,s.Sh)(E.path,d&&f,e.getClassName(E)(c)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:l,strokeMiterlimit:"10"})))))}}(p||(p={}));const m=200,h=c.u.keyframes({"0%":{strokeDasharray:`1px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(1)},"50%":{strokeDasharray:`89px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(-35)},"100%":{strokeDasharray:`89px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(-124)}}),f="spinnerIdle",g={animation:`${h} 2s ease-in-out infinite`,strokeDasharray:`1px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(1),strokeLinecap:"round",$nest:{[`&.${f}`]:{animationIterationCount:0}}},y={stroke:l.Il.CoreRed50},v={stroke:l.Il.CoreGreen50},b={stroke:l.Il.CoreBlue50},w={stroke:l.Il.CoreNeutral0},C={stroke:u.lh},S={stroke:u.AX},I={stroke:l.Il.CoreYellow60},x={stroke:u.FW},k={stroke:l.Il.CoreCyan50},E=c.u.stylesheet({path:[g],red:[y],green:[v],blue:[b],white:[w],violet:[C],yellow:[S],orange:[I],gray:[x],cyan:[k]})},53187:(e,t,n)=>{n.d(t,{X:()=>A});var r=n(27378),i=n(57050),a=n(19962),s=n(5114),o=n(90351),l=n(63969),c=n(40219),u=n(70920),d=n(40327),p=n(5739),m=n(25781),h=n(83078),f=n(10061),g=n(98403),y=n(49708),v=n(85985),b=n(41398),w=n(24209),C=n(17343),S=n(38194),I=n(598),x=n(50628),k=n(97528);class E extends r.Component{constructor(){super(...arguments),this._subs=[],this._outOfTarget=e=>t=>!a.UL.hasPoint(t.getBoundingClientRect(),e)}componentDidMount(){this._listenTooltipAppearance()}componentWillUnmount(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[],this.context.hide()}render(){return r.createElement(p.F.div,{role:"tooltip"},this.context.state.view(this.props.children))}_listenTooltipAppearance(){const e=y.R(document,"keydown").pipe(v.h((e=>e.keyCode===m.R.ESC_CODE))),t=y.R(document,"mousedown").pipe(b.M(this.context.state),v.h((([e,t])=>(0,d.pipe)(t,s.map((e=>e.target)),s.filter((()=>a.pK(e.target))),h.wo(this._outOfTarget({x:e.clientX,y:e.clientY})))))),n=w.T(e,t,y.R(document,"scroll"),f.c.observe.pipe(v.h((e=>"show"===e.detail)))).pipe(C.h(g.PU),S.B());this._subs=[this.context.hasContent.pipe(v.h(Boolean),I.c(n.pipe(x.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(v.h(Boolean),I.c(w.T(g.gw(!0,500),n.pipe(C.h(!1))).pipe(x.P())),v.h(Boolean)).subscribe(this.context.show)]}}E.contextType=k.G.Context;const A=()=>r.createElement(E,null,(0,i.ls)(s.map((e=>r.createElement(u.t.ByAbsoluteRect,Object.assign({rect:a.UL.fromEl(e.target),className:L.container},u.t.Alignment.toSelector(e.alignment),{withPin:!0}),r.createElement("div",{className:L.content},e.content)))),s.toNullable)),T={position:"fixed",zIndex:c.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},_={padding:`${l.u.rem(.25)} ${l.u.rem(1)}`,borderRadius:l.u.rem(c.fx),background:o.Il.BackgroundTooltip,color:o.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:l.u.px(.25),fontSize:l.u.rem(.75),lineHeight:l.u.rem(1)},L=l.u.stylesheet({container:[T],content:[_]})},6782:(e,t,n)=>{var r;n.d(t,{Q:()=>r}),function(e){e.group=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:i})=>(void 0===e[n]&&(e[n]={group:t,category:n,categoryHuman:r,count:0}),e[n].count+=i,e)),{})).sort(((e,t)=>t.count-e.count))}}(r||(r={}))},20869:(e,t,n)=>{n.d(t,{S:()=>Oe});var r,i=n(29909),a=n(57050),s=n(40327),o=n(38983),l=n(80358),c=n(84966),u=n(67394),d=n(89943),p=n(81670),m=n(8125),h=n(22232),f=n(5114),g=n(95195),y=n(19429),v=n(81531),b=n(46680),w=n(4390),C=n(20321),S=n(88570),I=n(92843),x=n(68983),k=n(51653),E=n(21729),A=n(67434),T=n(2834),_=n(77176);!function(e){function t(t){return a=>(0,s.pipe)(t,I.v.foldMap(e.group)(r,i,n),(0,x.W)(e.group.concat)(a))}e.group=E.dM.group,e.eq=E.dM.eq,e.applyDiff=t,e.fromAlerts=function(e){const n=v.C8.Logging.getLogger("DocumentCounters");return e.pipe(A.R(((e,n)=>({alerts:n,counters:t(w.p.Diff.toRegistered(w.p.diff(e.alerts,n)))(e.counters)})),{alerts:w.p.empty,counters:E.dM.group.empty}),T.b((({counters:e})=>{E.dM.isValid(e)||n.error("Counters can not be below zero",E.dM.show.show(e))})),_.U((({counters:e})=>e)))};const n=e=>k.R.toUnmutedOnly(e.counters),r=(0,a.ls)(n,e.group.inverse),i=(t,i)=>e.group.concat(n(i),r(t))}(r||(r={}));var L,O=n(17771),R=n(45614),P=n(93756),M=n(90329),F=n(66896),N=n(26653),D=n(85985);!function(e){function t(e){const{left:t,right:n}=(0,s.pipe)(e,R.DZ(f.fromNullable),R.z7((e=>"GeneralScore"!==e)),R.Su(((e,t)=>{return{lensId:(n=e,n===F.R.SpecialId.Plagiarism?g.F2(F.R.SpecialId.Plagiarism):F.R.OutcomeId.toOutcomeId(n)),score:N.T.fromNumber(t)};var n})),R.tV((0,O.Y)(g.wE))),r=(0,s.pipe)(n,R.UI((({lensId:e,score:t})=>(0,a.bc)(e,t))),(e=>new Map(Object.values(e))));return(0,s.pipe)(P.Qp(f.fromPredicate((0,a.ff)(R.xb))(t),f.fromPredicate((0,a.ff)(M.xb))(r)),f.getOrElse((()=>P.F2(new Map))))}e.empty=new Map,e.eq=M.Eh(F.R.Id.ord,N.T.ord),e.fromCapi=function(e){return e.pipe(D.h((0,m.Kg)(l.h.is("finish"),l.h.is("async_check_finished"),l.h.is("feedback_ack"))),_.U((e=>e.outcomeScores)),D.h(m.$K),_.U(t),T.b(P.Vn((e=>{R.xb(e)||v.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),D.h((0,m.Kg)(P.WP,P.tO)),_.U((e=>e.right)))}}(L||(L={}));var $,B=n(95983),U=n(98403),j=n(32952),W=n(38194),G=n(77843),H=n(93508),z=n(95093),Y=n(598),V=n(24209),q=n(50628),Z=n(17343),X=n(36919),J=n(51374),K=n(11064),Q=n(23330),ee=n(64015),te=n(25938),ne=n(64450),re=n(37492),ie=n(51072),ae=n(71249),se=n(26328),oe=n(70996),le=n(32426),ce=n(36991),ue=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){(0,h.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return f.none;for(var n=ce.s.operationLength(this._delta.ops[t]),r=e-(n-this._cursor.operationOffset);r>0&&t<this._delta.ops.length-1;)t++,r-=n=ce.s.operationLength(this._delta.ops[t]);return r>0?(this._cursor={index:t+1,operationOffset:0},f.none):(this._cursor={index:t,operationOffset:n+r},f.some(this._delta.ops[t]))},e}();!function(e){const t=f.getMonoid((0,le.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=e=>n=>{const r=new ue(e);return n.ops.reduce((([e,n],i)=>{const a=r.next(n);return ce.s.isInsert(i)?[e.insert(i.insert,f.toUndefined(t.concat(f.chain(ce.s.getAttrs)(a),ce.s.getAttrs(i)))),0]:[e.push(i),ce.s.operationLength(i)]}),[new ne.i,1])[0]}}($||($={}));var de=n(40018);function pe(e){switch(e._raw.point){case"AllCapsBoldification":return u.JJ.fromAlternativeBoldified;case"Lists":return u.JJ.fromAlternativeListified;default:return u.JJ.fromAlternative}}const me=(0,m.HP)(v.C8.Logging.getLogger),he=(0,a.ls)(ee.UI((({beingAppliedAlert:e,undo:t,reversedAlternative:n})=>Q.Y3((()=>{const r={action:c.PZ.ACCEPTED,commit:()=>me("AlertManager.ops").debug(`_applyTransformJson(${e.toLiteString()}):commit()`),undo:t,reversedAlternative:e.registerReversedAlternative(n)},i=e.switchToApplied(r),a=de.xS.create(i.state.from,oe.h.create(e));return[i.id,a]}),g.KC))),Q.mg);function fe(e){const t=u.r3.compose(e.alternatives.map(i.UI((e=>e.alternative))),e.currentFullText);return(0,s.pipe)(ce.s.nonEmpty(t.composedDelta)?f.some(t):f.none,f.map((({composedDelta:t,reversedAlternatives:n})=>({changeWithFormatting:(0,s.pipe)(t,$.getEnrichedWithFormattingDelta(e.currentFullText),(t=>te.RI.delta(t,e.originalTextLength))),correctRevAlternatives:(0,s.pipe)(n,p.T.tapFailure((({rejected:e})=>v.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",e))),p.T.foldSuccess(ae.UI((t=>({reversedAlternative:t.reversedAlternative,alternative:i.li(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert})))))}))))}var ge;!function(e){const t=(0,a.ls)(((e,t)=>g.Y3((()=>de.xS.create(e,t)),g.KC)),g.UI((e=>(0,a.bc)(e[0].id,e))),K.of);e.prepare=K.tS((0,a.og)(t)),e.prepareFromAlert=Q.tS((e=>t(e.state.from,oe.h.create(e))))}(ge||(ge={}));function ye(e,t){return g.DT(e,(e=>{const n=new h.ej(t,e.toString());return v.C8.Logging.getLogger("AlertManager.ops").error(t,n),n}))}const ve=e=>ye(de.bZ.isNotDisposed,e);function be(e){return Q.tS(f.fold((0,a.a9)(Q.F2(void 0)),e))}class we{constructor(e,t,n,r){this._positionManager=e,this._getContent=t,this._capiClient=n,this._alertsRepo=r,this._log=v.C8.Logging.getLogger("AlertManager.ops"),this._sendUpdate=e=>Q.Y3((()=>this.events.next({updated:new Map(e)})),g.KC),this._sendSingleUpdate=Q.tS((e=>this._sendUpdate([e]))),this._flushChanges=Q.Y3((()=>this.changes.next(te.RI.flush())),g.KC),this.changes=new j.xQ,this.events=new j.xQ,this.undoApplied=(e,t)=>{return(0,s.pipe)((()=>this._positionManager.getTextLength()),K.tS((t=>{const r={alertsToUpdate:[],reversedDelta:new ne.i,undo:a.Q1},i=e.filter(de.bZ.isApplied).reduce(((e,t)=>{const r=t.state.undoable;return de.VD.isWithAlternative(r)?(0,s.pipe)(r.reversedAlternative,f.fold((()=>{c.wQ.withTransformJson(t._raw)&&this._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),n(e,t)}),(0,a.ls)((e=>e()),g.UI((e=>e.delta)),g.g_((e=>{this._log.error("Could not retrieve reversed delta",{e:e,alert:t.toLiteString()})}),(r=>{n(e,t),(0,s.pipe)(r,u.r3.fromRawDelta,(t=>t.rebase(e.reversedDelta)),f.fold((()=>{e.reversedDelta=e.reversedDelta.compose(r)}),(({delta:t})=>{e.reversedDelta=e.reversedDelta.compose(t)})))}))))):n(e,t),e}),r);return i.alertsToUpdate.length>0?(0,s.pipe)(Q.Y3((()=>{const e=(0,s.pipe)(i.reversedDelta,$.getEnrichedWithFormattingDelta(this._getContent()));this.changes.next(te.RI.delta(e,t))}),g.KC),Q.N(this._flushChanges),Q.N((0,s.pipe)(i.undo,K.UI(g.F2))),Q.a1((0,s.pipe)(i.alertsToUpdate,Q.mg,Q.tS(this._sendUpdate)))):Q.F2(void 0)})));function n(e,n){e.undo=(0,a.ls)(e.undo,n.state.undoable.undo),e.alertsToUpdate.push(ge.prepare((()=>[oe.h.create(n),oe.h.create(n.changeState(t===de.bZ.State.Applied.Method.ByCard?de.bZ.State.init:de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))}},this._dismissBatch=(e,t)=>(0,s.pipe)(this._flushChanges,Q.a1((0,s.pipe)(e,ae.UI((0,a.ls)(K.of,K.UI(ve("Cannot send feedback for already disposed")),Q.tS((e=>this._applyFeedbackToAlert(e,c.PZ.IGNORE,de.l$.sidebar,this._commitFeedbackToCapi(e,{kind:c.PZ.IGNORE,subtype:t})))),ge.prepareFromAlert)),Q.mg,Q.tS(this._sendUpdate)))),this._applyAlert=({alert:e,replacementText:t,source:n,method:r,feedbackSubtype:i})=>(0,s.pipe)(e,ye(de.bZ.isRegistered,"can not apply alert in non registered state"),K.of,Q.N(this._flushChanges),Q.tS((e=>this._switchToBeingApplied(e,n,r))),Q.tS((({beingAppliedAlert:e,undo:n})=>(0,s.pipe)(e.getReplaceEither.bind(e),Q.LF,Q.Pd((()=>new Error("Cannot apply alert with tJSON")),(r=>{this._log.debug(`_applyAlert(${e.toLiteString()}, rrange: ${r})`);const a=r.start,s=r.end-r.start,o=(new ne.i).retain(a).delete(t.length).insert(e.replaceText);return{alert:e,undo:n,reverseDelta:o,replacementText:t,removeLen:s,feedbackSubtype:i,pos:a}}))))),Q.tS(this._applyAlertData)),this._applySmartPhrasesAlert=({alerts:e,feedbackSubtype:t})=>(0,s.pipe)(this._flushChanges,Q.a1((0,s.pipe)(e,Q.pE((e=>(0,s.pipe)(e.alternative,Q.UI((t=>(0,a.bc)(t,pe(e.alert))))))))),Q.tS((t=>Q.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),g.KC))),Q.UI(fe),be((e=>(0,s.pipe)(e.correctRevAlternatives,ae.UI((({alert:e,alternative:n})=>(0,s.pipe)(Q.dk((()=>e)),Q.mU((e=>Q.dk(this._sendApplySmartPhrasesFeedback(e,n.alternativeIndex,t))))))),Q.mg,Q.tS((t=>(0,s.pipe)(Q.Y3((()=>this.changes.next(e.changeWithFormatting)),g.KC),Q.N(this._flushChanges),K.a1((0,s.pipe)((0,a.ls)(ee.UI((e=>Q.Y3((()=>{const t=oe.h.create(e);e.bumpVersion();const n=de.xS.create(t,oe.h.create(e));return[e.id,n]}),g.KC))),Q.mg)(t),Q.tS(this._sendUpdate)))))))))),this._applyTransformJson=({alerts:e,source:t,method:n,feedbackSubtype:r,drilldownSuggestionIds:i})=>(0,s.pipe)(this._flushChanges,Q.a1((0,s.pipe)(e,Q.pE((e=>(0,s.pipe)(e.alternative,Q.UI((t=>(0,a.bc)(t,pe(e.alert))))))))),Q.tS((t=>Q.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),g.KC))),Q.UI(fe),be((e=>(0,s.pipe)(e.correctRevAlternatives,ae.UI((({alert:e,alternative:a,reversedAlternative:o})=>(0,s.pipe)(this._switchToBeingApplied(e,t,n),Q.mU((e=>Q.dk(this._sendApplyTransformJsonFeedback(e.beingAppliedAlert,a.alternativeIndex,r,i)))),Q.UI((e=>Object.assign(Object.assign({},e),{reversedAlternative:o})))))),Q.mg,Q.tS((t=>(0,s.pipe)(Q.Y3((()=>this.changes.next(e.changeWithFormatting)),g.KC),Q.N(this._flushChanges),K.a1((0,s.pipe)(he(t),Q.tS(this._sendUpdate)))))))))),this._alertFeedback=(e,t,n)=>{this._log.debug(`_alertFeedback(${e.toLiteString()}, feedbackType: ${t.kind}, source: ${n})`),de.bZ.isHidden(e)&&this._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});const r=this._commitFeedbackToCapi(e,t);return(0,s.pipe)(e,ve("Cannot send feedback for already disposed"),K.of,Q.tS((e=>t.kind!==c.PZ.LOOKED||e.isRead?c.nw.willRemoveAlert(t.kind)?(0,s.pipe)(this._flushChanges,Q.a1(this._applyFeedbackToAlert(e,t.kind,n,r)),ge.prepareFromAlert,this._sendSingleUpdate):(0,s.pipe)(r,Q.dk):(0,s.pipe)(ge.prepare((()=>[oe.h.create(e),(e.isRead=!0,oe.h.create(e))])),this._sendSingleUpdate,K.N(r)))))},this._alertBatchFeedback=(e,t,n)=>(0,s.pipe)(e,ae.DZ((e=>e.rawId)),se.nI,f.fold((0,a.a9)(a.Q1),(e=>this._sendFeedback({kind:t,alertIds:e,subtype:n})))),this._notifyAlertUpdated=(0,a.ls)((e=>[[e[0].id,e]]),this._sendUpdate),this._releaseRef=(e,t)=>(0,s.pipe)(Q.Y3((()=>{this._log.debug(`_releaseRef ${e} on (${t.toLiteString()}) refs: ${t._refNames}`,{shouldBeRemoved:de.bZ.shouldBeRemoved(t)}),de.bZ.shouldBeRemoved(t)&&this.events.next({removed:new Map([[t.id,oe.h.create(t)]])})}),g.KC)),this._changeMuteState=(e,t)=>{const n=(0,s.pipe)(e,p.T.fromArray((0,a.ls)(ve("Cannot send Mute feedback for already disposed"),g.tS(ye((e=>f.isSome(e.muteCategory)||de.bZ.belongsToAnySpecialCategory(e)),"Alert is not muting")))));return(0,s.pipe)(n,p.T.foldSuccess(ae.UI((e=>ge.prepare((()=>[oe.h.create(e),(e.mute=t,oe.h.create(e))]))))),Q.mg,Q.UI(se.nI),be(this._sendUpdate),Q.UI((0,a.a9)(n)))},this._changeGapValue=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isOneGap,"can not change gap value for a non one gap alert"),K.of,Q.tS((e=>ge.prepare((()=>[oe.h.create(e),oe.h.create(e.changeGapValue(t))])))),this._sendSingleUpdate),this._confirmApplied=(0,a.ls)(ae.UI((e=>ge.prepare((()=>[oe.h.create(e),oe.h.create(e.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))),Q.mg,Q.tS(this._sendUpdate)),this._changeTakeawayFeedback=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isTakeaway,"can not change feedback for non-takeaway alert"),K.of,Q.tS((e=>{const n=oe.h.create(e),r=e.setFeedback(t),i=oe.h.create(r);return(0,s.pipe)(ge.prepare((()=>[n,i])),this._sendSingleUpdate,Q.UI((()=>r)))}))),this._requestShortenItReplacements=e=>(0,s.pipe)(e,ve("Cannot send shorten_it_submit message for already disposed"),g.tS(ye(de.bZ.isShortenIt,"can not send shorten_it_submit for a non shorten-it alert")),K.of,Q.tS((e=>{const t=oe.h.create(e),n=e.setSummariesRequestState(de.vQ.SummariesRequestState.requested),r=oe.h.create(n);return(0,s.pipe)(ge.prepare((()=>[t,r])),this._sendSingleUpdate,Q.UI((()=>n)),K.N(this._commitShortenItSubmitToCapi(e)))}))),this._changeSmartPhrasesFeedback=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot change feedback for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const n=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.setFeedback(t))))];return this.events.next({updated:new Map(n)}),e}),g.KC)))),this._rotateSmartPhrasesReplacements=e=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot rotate replacements for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const t=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.rotateReplacements())))];return this.events.next({updated:new Map(t)}),e}),g.KC)))),this._discardSmartPhrasesReplacement=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot discard replacement for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const n=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.discardReplacement(t))))];return this.events.next({updated:new Map(n)}),e}),g.KC)))),this._changeSentenceLevelBrandTonesFeedback=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isSentenceLevelBrandTones,"Cannot change feedback for a non-Sentence Level Brand Tones alert."),K.of,Q.tS((e=>Q.Y3((()=>{const n=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.setFeedback(t))))];return this.events.next({updated:new Map(n)}),e}),g.KC)))),this._handleCapiError=e=>t=>{re.EP.isDroppedError(t)?this._log.debug(`Stopped listening for ${e} message acknowledge`,t):re.YG.isNotConnectedError(t)?this._log.warn(`Failed to send ${e} as CAPI was not connected`,t):this._log.error(`Failed to send ${e}`,t)},this._applyAlertData=({pos:e,removeLen:t,reverseDelta:n,undo:r,replacementText:i,alert:a,feedbackSubtype:o})=>(0,s.pipe)(Q.Y3((()=>{let s=this._positionManager.getTextLength(),l=!1;const u={action:c.PZ.ACCEPTED,replacement:i,commit:()=>{l||this._log.debug(`_applyAlert(${a.toLiteString()}):commit()`)},reversedAlternative:f.none,undo:()=>{l=!0,this._log.debug(`_applyAlert(${a.toLiteString()}):undo()`);const e=this._positionManager.getTextLength();e!==s&&this._log.error(`Text has changed while uncommitted apply is present. Expected: ${s}, actual: ${e}`);const t=te.RI.delta(n,e);this.changes.next(t),this.changes.next(te.RI.flush()),r()}};return this._sendApplyTextFeedback(a,i,o)(),this.changes.next(te.RI.delta((new ne.i).retain(e).delete(t).insert(i),s)),this.changes.next(te.RI.flush()),s=this._positionManager.getTextLength(),u}),g.KC),Q.tS((e=>Q.Y3((()=>a.switchToApplied(e)),g.KC))),ge.prepareFromAlert,this._sendSingleUpdate),this._sendApplyFeedback=(e,t)=>e.state.method===de.bZ.State.Applied.Method.ByCard?this._commitFeedbackToCapi(e,t):a.Q1,this._sendApplyTextFeedback=(e,t,n)=>this._sendApplyFeedback(e,{kind:c.PZ.ACCEPTED,replacementText:t,subtype:n}),this._sendApplyTransformJsonFeedback=(e,t,n,r)=>{const i={kind:c.PZ.ACCEPTED,alternativeIndex:t,subtype:n,drilldownSuggestionIds:r},a=de.bZ.isOneGap(e)?Object.assign(Object.assign({},i),{gapValue:e.gapValue}):i;return this._sendApplyFeedback(e,a)},this._sendApplySmartPhrasesFeedback=(e,t,n)=>{const r={kind:c.PZ.ACCEPTED,alternativeIndex:t,subtype:n};return this._commitFeedbackToCapi(e,r)}}_applyFeedbackToAlert(e,t,n,r){return Q.Y3((()=>{this._alertsRepo.removeFromCapiMapping(e);const i=this._createFeedbackUndoable(e,t,r);return e.changeState(de.bZ.State.Applied.create(i,n,de.bZ.State.Applied.Method.ByCard,oe.h.create(e)))}),g.KC)}_createFeedbackUndoable(e,t,n){return{action:t,replacement:e.replaceText,commit:n,undo:()=>this._alertsRepo.addToCapiMapping(e)}}_commitFeedbackToCapi(e,t){return(0,s.pipe)(e.rawId,f.fold((0,a.a9)((()=>this._log.debug("skip feedback for local alert",e))),(e=>this._sendFeedback(Object.assign({id:e},t)))))}_sendFeedback(e){return()=>{ie.Vi(this._capiClient.sendFeedback(e)).catch(this._handleCapiError("alert feedback"))}}_commitShortenItSubmitToCapi(e){return(0,s.pipe)(e.rawId,f.fold((0,a.a9)((()=>this._log.debug("skip shorten-it-submit for local alert",e))),(e=>this._shortenItSubmit(e))))}_shortenItSubmit(e){return()=>{ie.Vi(this._capiClient.shortenItSubmit(e)).catch(this._handleCapiError("shorten-it-submit"))}}_switchToBeingApplied(e,t,n){return Q.Y3((()=>(this._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,n))),g.KC)}}var Ce,Se,Ie,xe,ke,Ee=n(83078);!function(e){e.toString=g.g_((({id:e})=>`rid:${e}`),(e=>`aid:${e.toString()}`))}(Ce||(Ce={})),function(e){e.match=function(e){return t=>t instanceof de.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}(Se||(Se={})),function(e){e.defaultValidator=de.bZ.isDuplicatedBy}(Ie||(Ie={}));class Ae{constructor(e,t,n){this._positionManager=e,this._alertsRepo=t,this._alertDuplicateValidator=n,this._log=v.C8.Logging.getLogger("AlertManager.pipeline",b.i.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=e=>(this._log.trace(`process, to process = ${e.length}`),this._collectChanges(this._processAlertsBatch(e))),this.reset=e=>(this._cleanupPendingAlerts(e),this._finishAlertsChecking()),this._processAlertsBatch=e=>{const{toAdd:t,toUpdate:n,toAddOrUpdate:r,toRemoveUnfiltered:i,toChangeUnfiltered:o,toDispose:c,rangeChanges:u}=this._processBatch(e),d=e=>(0,s.pipe)(this._alertsRepo.getByAlertId(e),f.getOrElse((()=>t.get(e)||n.get(e)||c.get(e))));o.forEach((e=>(0,s.pipe)(f.fromNullable(r.get(e.id)),f.fold((()=>(0,s.pipe)(this._alertsRepo.getByRawAlertId(e.id),f.map((t=>{const i=t.copy();i.patchWithRawAlert(Ae._prepareUpdate(i,e)),n.set(i.id,i),r.set(e.id,i)})),f.getOrElse((()=>this._log.info("Change from CAPI: Cannot find internal AlertId."))))),(t=>{const r=Ae._prepareUpdate(t,e);n.has(t.id)?t.patchWithRawAlert(r):t.updateAlertWithManagedData(r)})))));const p=i.reduce(((e,i)=>{const a=(0,s.pipe)(i,g.g_((({id:e})=>(0,s.pipe)(this._alertsRepo.getByRawAlertId(e),f.map((e=>de.bZ.isRegistered(e)?e:void 0)),f.getOrElse((()=>this._heuristicallyRemovedAlerts.has(e)?void this._heuristicallyRemovedAlerts.delete(e):r.get(e))))),d));return void 0===a?(g.nM(i)?this._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(i.left)):this._log.error("Cannot find existing alert by id",i.right),e):((0,s.pipe)(this._getMergeTarget(i,r),f.filter(Te((e=>e.lensId!==a.lensId?(this._log.warn("Trying to merge alerts from different lenses",{source:a,target:e}),!1):f.isNone(a.rawId)?(this._log.warn("Trying to merge into local alert",{source:a,target:e}),!1):a.references>e.references))),f.fold((()=>{e.set(a.id,{alert:a,reason:(0,s.pipe)(i,g.LF,f.fromEither,f.chain((e=>e.hint)),f.chain((e=>e===l.A.NotFixed?f.some(de.bZ.State.Removed.Reason.capiDismiss):f.none)),f.getOrElse((()=>de.bZ.State.Removed.Reason.capiDone)))})}),g.g_((e=>{this._log.debug("swap raw alerts with new alert",{source:a.toString(),newTarget:e.toString()}),this._alertsRepo.swapRaw(a,e);const i=Ee.MH(a.rawId);(0,h.kG)(void 0===n.get(e.id),"Added alert should not be present in the updated alerts map",(()=>n.get(e.id).toString()));const s=a.copy();n.set(s.id,s),r.set(i,s),t.delete(e.id),c.set(e.id,e)}),(t=>{this._log.debug("swap raw alerts with existing alert",{source:a.toString(),existingTarget:t.toString()}),this._alertsRepo.swapRaw(a,t),e.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),m=new Map;return u&&u.forEach(((e,t)=>{(0,s.pipe)(t,d,f.fromPredicate((r=>r?de.bZ.isInteractable(r)?!n.has(r.id)||(this._log.debug("skip range change on updateHolder alert",r.toLiteString()),!1):(this._log.debug("skip range change on non-interactable alert",r.toLiteString()),!1):(this._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1))),f.chain((n=>(0,s.pipe)(n.onRangeChange(e),f.map((e=>{switch(e.state){case de.bZ.Transition.State.Pending:return m.set(n.id,[n,e.removedRanges]);case de.bZ.Transition.State.Dispose:return(0,s.pipe)(n.rawId,f.fold((()=>this._log.debug("dispose by range change on unknown rid",n.id)),(e=>this._heuristicallyRemovedAlerts.set(e,n)))),p.set(t,{alert:n,reason:de.bZ.State.Removed.Reason.textChange});default:return(0,h.vE)(e)}}))))))})),p.forEach((({alert:e})=>{this._log.trace("check cancellations from toRemove: "+e.toLiteString()),(0,s.pipe)(e.rawId,f.fold((()=>{t.get(e.id)&&(this._log.debug("cancel add local alert for: "+e.toLiteString()),t.delete(e.id),p.delete(e.id),c.set(e.id,e)),(0,h.kG)(!1===n.has(e.id),"Added local alert should not be present in the updated alerts map",(()=>n.get(e.id).toString()))}),(i=>{const a=r.get(i);a&&(r.delete(i),t.delete(a.id)?(this._log.debug("cancel add for: "+a.toLiteString()),this._log.debug("cancel remove for: "+e.toLiteString()),p.delete(e.id),c.set(e.id,e),c.set(a.id,a)):n.delete(a.id)?(this._log.debug("cancel update for: "+a.toLiteString()),a.id!==e.id&&(this._log.debug("marking update to dispose: "+a.toLiteString()),c.set(a.id,a))):this._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",a))}))),this._log.trace("check if local orphan toRemove: "+e.toLiteString()),(0,s.pipe)(this._alertsRepo.getByAlertId(e.id),f.fold((()=>{this._log.debug("cancel delete for: "+e.toLiteString()),p.delete(e.id)}),a.Q1))})),c.size>0&&this._log.debug(`_cancelAlerts, to cancel = ${c.size}`,{alerts:Array.from(c.values()).map((e=>e.toLiteString()))}),c.forEach((e=>{m.delete(e.id)&&this._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){this._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:t,toUpdate:n,toRemove:p,toStartChecking:m}},this._collectChanges=({toAdd:e,toUpdate:t,toRemove:n,toStartChecking:r})=>{const{alertsToAdd:i,alertsToUpdate:a,alertsToRemove:s}=this._addAlerts(Array.from(e.values()),n);return t.size>0&&this._updateAlerts(Array.from(t.values()),a),r.size>0&&this._startAlertsChecking(Array.from(r.values()),a,i),s.size>0&&this._removeAlerts(s,a),{added:i,updated:a}},this._validateAlertAdd=e=>{try{const t=!de.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==c.wQ.Impact.Critical&&e._raw.impact!==c.wQ.Impact.Advanced&&f.isSome(e.rawId)&&this._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),t||(this._log.error("CAPI provides corrupted alert",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,s.pipe)(e.rawId,f.exists((e=>f.isSome(this._alertsRepo.getByRawAlertId(e)))))?(this._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===F.R.Type.Plagiarism&&N.T.isMax(e.progress)?(this._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){this._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){this._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=({id:e})=>{this._recheckedAlerts.delete(e)&&this._log.debug("Stopped watching checking state for alert",e)},this._applyRemoveToAlert=({alert:e,reason:t})=>(this._alertsRepo.removeFromCapiMapping(e),t!==de.bZ.State.Removed.Reason.textChange&&e.clearCapiId(),e.changeState(de.bZ.State.Removed.create(t))),this._finishAlertChecking=e=>{(0,h.kG)(this._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),this._log.debug("Stopped watching checking state for alert",e.id);const t=oe.h.create(e);return de.xS.create(t,oe.h.create(e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.IDLE))))}}static _prepareUpdate(e,t){const n=Object.assign(Object.assign({},e.toRawAlert()),{rev:t.rev});return c.wQ.withTransformJson(n)&&(0,s.pipe)(t.transformJson,Ee.bw((e=>n.transformJson=e))),(0,s.pipe)(t.extraProperties,Ee.bw((e=>n.extra_properties=e))),(0,s.pipe)(t.muted,Ee.bw((e=>n.muted=e))),n}_processBatch(e){return e.reduce(((e,t)=>(Se.match({alertAddOrUpdate:t=>{(0,s.pipe)(t.rawId,f.fold((()=>{e.toAdd.set(t.id,t)}),(n=>{(0,s.pipe)(this._alertsRepo.getByRawAlertId(n),f.filter((e=>e.allowUpdate)),f.map((()=>{(0,s.pipe)(f.fromNullable(e.toAddOrUpdate.get(n)),f.map((t=>{this._log.debug("got overlap in batch on update"),e.toUpdate.delete(t.id),e.toDispose.set(t.id,t)}))),e.toUpdate.set(t.id,t)})),f.getOrElse((()=>{(0,s.pipe)(f.fromNullable(e.toAddOrUpdate.get(n)),f.map((t=>{this._log.info("got overlap in batch on add"),e.toAdd.delete(t.id),e.toDispose.set(t.id,t)}))),e.toAdd.set(t.id,t)}))),e.toAddOrUpdate.set(n,t)})))},rangeChange:t=>{(0,h.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:t=>{e.toRemoveUnfiltered.push(t)},alertChange:t=>{e.toChangeUnfiltered.push(t)}})(t),e)),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})}_getMergeTarget(e,t){return(0,s.pipe)(e,g.LF,f.fromEither,f.chain((e=>e.mergedIn)),f.chain((e=>{const n=(0,s.pipe)(this._alertsRepo.getByRawAlertId(e),f.map((e=>g.F2(e))),f.alt((()=>(0,s.pipe)(f.fromNullable(t.get(e)),f.map((e=>g.t$(e)))))));return f.isNone(n)&&this._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),n})),f.filter(Te((e=>!!e.allowUpdate||(this._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)))))}_addAlerts(e,t){return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((e=>e.toLiteString()))}),(0,s.pipe)(e,ae.hX(this._validateAlertAdd),ae.u4({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},((e,t)=>{this._log.trace("Adding alert: "+t.toLiteString());const n=this._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),r=this._tryToMatchInvalid(t,n);switch(this._log.trace("Adding alert match result",{inc:t.id,match:r}),r.type){case xe.Type.Merged:{const n=r.result[1];de.bZ.isNotRegistered(n.alert)?de.bZ.isRemoved(n.alert)&&this._log.warn("unexpected merge into removed alert",{alert:n,newAlert:t}):this._alertsRepo.addToCapiMapping(n.alert),e.alertsToUpdate.set(n.id,r.result);break}case xe.Type.Restored:{const t=r.result[1];(0,h.kG)(!e.alertsToRemove.has(t.id),"can't update alert which we wanted to remove earlier"),this._alertsRepo.addToCapiMapping(t.alert),e.alertsToUpdate.set(t.id,r.result);break}case xe.Type.Unmatched:{const i=r.result,a=n.filter((t=>de.bZ.isDuplicateCandidate(t)&&this._alertDuplicateValidator(i,t)&&!e.alertsToRemove.has(t.id)));(0,h.kG)(i.allowDuplicates||de.bZ.isApplicableAlert(i),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),a.length>0&&this._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:a.map((e=>e.toString()))});const o=i.allowDuplicates?{result:ke.Add,toRemove:f.none}:this._tryAddAlert(i,a);switch(o.result){case ke.Add:case ke.OverwriteExisting:this._log.debug("AllAlerts: Append alert to all alerts",i.toLiteString()),this._alertsRepo.addToCapiMapping(i),(0,h.kG)(!e.alertsToRemove.has(i.id),"can't add alert which we wanted to remove earlier",(()=>i.toLiteString())),this._alertsRepo.add(i),e.alertsToAdd.set(i.id,oe.h.create(i)),(0,s.pipe)(o.toRemove,Ee.bw((t=>{if(e.alertsToAdd.has(t.id)){this._alertsRepo.removeFromCapiMapping(t);const e=t.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.canceled));this._terminateAlertChecking(e),this._alertsRepo.remove(e)}else this._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case ke.Skip:this._log.debug("Skip alert with low priority",i.id);break;default:(0,h.vE)(o.result)}break}default:(0,h.vE)(r)}return e})))}_updateAlerts(e,t){this._log.debug(`_updateAlerts, to update = ${e.length}`,{alerts:e.map((e=>e.toLiteString()))}),(0,s.pipe)(e,ae.u4(t,((e,t)=>(this._log.trace("Updating alert: "+t.toLiteString()),(0,s.pipe)(this._alertsRepo.getByRawAlertId(Ee.MH(t.rawId)),f.fold((()=>this._log.warn("tried to update unknown alert",t)),(n=>{const r=t._raw;t.dispose();const i=e.has(n.id)?e.get(n.id)[0]:oe.h.create(n);n.enqueueRawAlertForUpdate(r),e.set(n.id,de.xS.create(i,oe.h.create(n)))}))),e))))}_startAlertsChecking(e,t,n){this._log.debug(`_startAlertsChecking, to update = ${e.length}`,{alerts:e.map((([e,t])=>[e.toLiteString(),t]))});const r=(e,t)=>{const n=e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.CHECKING));return this._recheckedAlerts.add(e.id),oe.h.create(t.size>0?n.enqueueRangesRemove(t):n)};(0,s.pipe)(e,ae.u4({updatedAlerts:t,addedAlerts:n},((e,[t,n])=>((0,s.pipe)(this._alertsRepo.getByAlertId(t.id),f.fold((()=>{this._log.warn("tried to start checking unknown alert",{alert:t,ranges:n})}),(()=>{if(e.addedAlerts.has(t.id))e.addedAlerts.set(t.id,r(t,n));else{const i=e.updatedAlerts.has(t.id)?e.updatedAlerts.get(t.id)[0]:oe.h.create(t);e.updatedAlerts.set(t.id,de.xS.create(i,r(t,n)))}}))),e))))}_removeAlerts(e,t){e.forEach(((e,n)=>{(0,s.pipe)(this._alertsRepo.getByAlertId(n),f.fold((()=>{this._log.warn("tried to remove unknown alert",e)}),(()=>{const r=t.has(n)?t.get(n)[0]:oe.h.create(e.alert),i=this._applyRemoveToAlert(e);this._terminateAlertChecking(i),t.set(n,de.xS.create(r,oe.h.create(i)))})))}))}_getAlertsWithMatchingRanges(e){return(0,s.pipe)(this._positionManager.findIntersections(e),ae.hX((0,m.W9)(J.P.is,J.x.isVisible)),ae.DZ((e=>this._alertsRepo.getByAlertId(e.meta.alertId))),ae.hX((e=>!(de.bZ.isApplied(e)&&e.getAppliedRanges().length>0))))}_tryToMatchInvalid(e,t){return(0,h.kG)(!e.isValid,"added alert should be invalid"),(0,h.kG)(de.bZ.isRegistered(e),"added alert should be in registered state",(()=>e.toString())),(0,s.pipe)(f.fromNullable(t.find((t=>!t.isValid&&t.canBeMergedWith(e)))),f.fold((()=>({result:e,type:xe.Type.Unmatched})),(t=>{(0,h.kG)((0,s.pipe)(t.rawId,Ee.wo((0,a.ls)(this._alertsRepo.getByRawAlertId,f.isNone))),"CAPI mapping should not contain invalid alerts"),this._log.debug(`Merging new alert (${e}) into the existing one aid(${t})`);const n=oe.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&de.bZ.isCapiDone(t)?{result:de.xS.create(n,oe.h.create(t.changeState(de.bZ.State.init))),type:xe.Type.Restored}:{result:de.xS.create(n,oe.h.create(t)),type:xe.Type.Merged}})))}_tryAddAlert(e,t){return(0,s.pipe)(se.nI(t),f.map((t=>{(0,h.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert",`got ${t.map((e=>e.toString()))} with input (${e.toString()})`);const n=t[0];return n.extraProperties.priority<=e.extraProperties.priority?{result:ke.OverwriteExisting,toRemove:f.some(n)}:(e.dispose(),{result:ke.Skip,toRemove:f.none})})),f.getOrElse((()=>({result:ke.Add,toRemove:f.none}))))}_cleanupPendingAlerts(e){e.removed.forEach((e=>{this._heuristicallyRemovedAlerts.delete(e)&&this._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()}_finishAlertsChecking(){return(0,s.pipe)(Array.from(this._recheckedAlerts.values()),ae.DZ((e=>{const t=this._alertsRepo.getByAlertId(e);f.isNone(t)&&(this._log.error("tried to finish checking on missing alert",e),this._recheckedAlerts.delete(e));const n=(0,s.pipe)(t,f.filter((e=>de.bZ.isRegistered(e))),f.map((e=>(0,a.bc)(e.id,this._finishAlertChecking(e)))));return f.isNone(n)&&this._log.error("tried to update checking state on non-registered alert",e),n})),(e=>({updated:new Map(e)})))}}function Te(e){return g.g_(e,e)}!function(e){let t;!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(t=e.Type||(e.Type={}))}(xe||(xe={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(ke||(ke={}));class _e{constructor(){this._log=v.C8.Logging.getLogger("AlertManager.repository",b.i.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=e=>{this._allAlerts.set(e.id,e)},this.remove=e=>{this._log.trace("AllAlerts: Clean alert from all alerts",e.toLiteString()),(0,h.kG)(0===e.references,"can not dispose alert in use",(()=>e.toString())),(0,h.kG)(!1===e.isValid,"can not dispose valid alert",(()=>e.toString())),(0,h.kG)(this._allAlerts.delete(e.id),"alert should exist in alerts list",(()=>e.toString())),e.dispose()},this.addToCapiMapping=e=>{e.isValid||(0,s.pipe)(e.rawId,f.fold((()=>this._log.debug("skip register of local alert in capi mapping",e)),(t=>{this._log.trace("register alert in capi mapping",e.toLiteString()),(0,h.kG)(void 0===this._capiAlertsIdMapping.get(t),"unexpected overlap of rawid alert",(()=>e.toString())),e.validate(),this._capiAlertsIdMapping.set(t,e.id)})))},this.removeFromCapiMapping=e=>{e.isValid&&((0,s.pipe)(e.rawId,Ee.bw((t=>{this._log.trace("clean valid alert capi mapping for: "+e.toLiteString()),(0,h.kG)(this._capiAlertsIdMapping.delete(t),"valid alert should had valid raw id",(()=>e.toString()))}))),e.invalidate())},this.getByAlertId=e=>f.fromNullable(this._allAlerts.get(e)),this.getByRawAlertId=e=>(0,s.pipe)(f.fromNullable(this._capiAlertsIdMapping.get(e)),f.chain(this.getByAlertId)),this.swapRaw=(e,t)=>{const n=(0,s.pipe)(e.rawId,f.exists((e=>this._capiAlertsIdMapping.has(e)))),r=(0,s.pipe)(e.rawId,f.exists((e=>this._capiAlertsIdMapping.has(e))));(0,h.kG)(n||r,"At least one of the swapped alerts should be registered in the system");const i=e._raw;e.silentPatchWithRawAlert(t._raw),t.silentPatchWithRawAlert(i),n&&this._capiAlertsIdMapping.set(Ee.MH(e.rawId),e.id),r&&this._capiAlertsIdMapping.set(Ee.MH(t.rawId),t.id)},this.toArray=()=>Array.from(this._allAlerts.values()),this.toMap=()=>this._allAlerts,this.toJSON=()=>({allAlerts:Array.from(this._allAlerts.entries()),idMapping:Array.from(this._capiAlertsIdMapping.entries())})}}var Le=n(96021);class Oe{constructor(e,t,n,c,u,h,I,x=Ie.defaultValidator){this._positionManager=e,this._alternativeManager=t,this._getContent=n,this._capiEvents=c,this._capiClient=u,this._documentCounters=h,this._transformRawAlert=I,this._alertDuplicateValidator=x,this._state=o.h.create(S.r.empty),this.state=this._state.view(S.r.toCheckingResult),this.lensesScores=o.h.create(L.empty),this._log=v.C8.Logging.getLogger("AlertManager",b.i.TRACE),this._subs=[],this._addAlerts=new j.xQ,this._removeAlerts=new j.xQ,this._changeAlerts=new j.xQ,this._flush=new j.xQ,this._alertsPerRevision=0,this._alertsRepository=new _e,this._pipeline=new Ae(this._positionManager,this._alertsRepository,this._alertDuplicateValidator),this._invalidateAlerts=()=>{this.flushAlerts();const[e,t]=d.uK(this._getAllAlertsAsArray(),(e=>e.isValid));this._log.debug("Invalidate alerts...",{valid:e.length,invalid:t.length}),e.forEach((e=>{this._alertsRepository.removeFromCapiMapping(e),e.clearCapiId()})),t.forEach((e=>e.clearCapiId()))},this._removeInvalidAlerts=e=>{this._log.debug(`Removing invalid alerts by type '${e}'...`);const t=this._getTypeFilter(e),n=this._getAllAlertsAsArray().filter((e=>!e.isValid&&de.bZ.isRegistered(e)&&t(e)));n.forEach((e=>this._removeAlertBuffered(g.F2(e.id)))),this._log.debug(`${n.length} invalid alerts removed`),this.flushAlerts(),this._log.isEnabled(b.i.TRACE)&&this._log.trace("Removed alerts",n.map((e=>e.toString())))},this._onCapiEvent=e=>{try{switch("alert_received"===e.kind&&this._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void this._log.warn("got alert with empty mapping",{pname:e.alert.pname});this._addAlertBuffered(de.bZ.create(this._transformRawAlert(e.alert),this._ops,this._positionManager,this._alternativeManager));break;case"alert_removed":this._log.debug(`Remove from capi #${e.alertId}, merged in #${f.getOrElse((()=>"None"))(e.mergedIn)}, hint: ${f.getOrElse((()=>"None"))(e.hint)}`);(0,s.pipe)(this._alertsRepository.getByRawAlertId(e.alertId),f.exists(de.bZ.isBulkApplied))||this._removeAlertBuffered(g.t$({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":this._log.debug("Alert change from capi #"+e.alertId),this._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:f.fromNullable(e.extraProperties),transformJson:f.fromNullable(e.transformJson),muted:f.fromNullable(e.muted)});break;case"finish":this._log.debug(`Alerts per revision (#${e.revision}): ${this._alertsPerRevision}`),this._alertsPerRevision=0,"idle"===this._capiClient.checkingState&&this._emitDomainEvent(this._pipeline.reset(e))}}catch(t){this._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=e=>{(0,s.pipe)(e,this._prepareDiff,C.v.createDiff,p.T.recover((e=>this._log.error("conflicts on diff creating",e))),(e=>(this._log.debug("_emitDomainEvent",w.p.Diff.show.show(e)),e)),S.r.applyDiff,y.UI(p.T.recover((e=>this._log.error("conflicts on diff apply",e)))),(e=>this._state.modify(e)))},this._prepareDiff=({added:e,updated:t=new Map,removed:n=new Map})=>(t.forEach(((e,r)=>{(0,s.pipe)(e,i.Yg,de.bZ.fromAlertModel,de.bZ.shouldBeRemoved)&&(t.delete(r),n.set(r,e[0]))})),n.forEach((0,a.ls)(de.bZ.fromAlertModel,this._disposeAlert)),{added:e,updated:t,removed:n}),this._disposeAlert=e=>{if(de.bZ.isApplied(e)&&e.state.undoable.commit(),de.bZ.isNotRegistered(e))try{this._alertsRepository.remove(e)}catch(t){this._log.error("can not remove alert",t),de.bZ.isNotDisposed(e)&&e.dispose()}else this._log.error("unexpected remove of registered alert",e.toString())},this._ops=new we(this._positionManager,this._getContent,this._capiClient,this._alertsRepository),this.loadScores=e=>{this.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;const k=e.rangeChanged.pipe(_.U((({affected:e})=>e)),D.h((e=>e.length>0)),_.U((e=>B.vM((e=>e.meta.alertId),e.filter(J.P.is)))),D.h((e=>e.size>0)),T.b((e=>this._log.debug("Range[s] changed",e))),W.B()),E=G.F(250).pipe(H.O(0),z.T(this._flush)),A=U.RX(this._log);this._subs.push(A("_alertsInvalidation",this._capiEvents.pipe(D.h(l.h.is("session_started")),T.b(this._invalidateAlerts),Y.c(V.T(this._capiEvents.pipe(D.h(l.h.is("finish")),q.P(),Z.h("alert")),this._capiEvents.pipe(D.h(l.h.is("async_check_finished")),q.P(),Z.h("plagiarism")))),T.b(this._removeInvalidAlerts))),A("_capiEvents",this._capiEvents.pipe(T.b(this._onCapiEvent))),A("_alertsProccesing",this._addAlerts.pipe(z.T(this._removeAlerts),z.T(this._changeAlerts),z.T(k),X.f(E),D.h(m.Dw),_.U(this._pipeline.process),T.b(this._emitDomainEvent))),A("_alertsBuffer",k.pipe(z.T(this._capiEvents.pipe(D.h(l.h.is("before_finish","before_async_check_finish","async_check_finished")))),Z.h(U.PU),T.b(this._flush))),A("_alertOpsAlertChanges",this._ops.events.pipe(T.b(this._emitDomainEvent))),A("_lensesScoresChanges",L.fromCapi(this._capiEvents).pipe(T.b(U.wW(this.lensesScores)))),A("documentCountersChanges",r.fromAlerts(this._state.view(C.v.iso.wrap)).pipe(T.b(U.wW(this._documentCounters))))),(0,m.iR)("alerts",(()=>this.toString())),(0,m.iR)("triggerRemove",(e=>{this._removeAlertBuffered(g.F2(e))}))}flushAlerts(){this._flush.next()}loadAlerts(e){const t=new Map;return(0,m.Dw)(e)&&(this._log.debug(`${e.length} external alert(s) where loaded`),e.map(Le.I.splitById).map((({id:e,local:t})=>({id:e,alert:de.bZ.create((0,s.pipe)(t,c.wQ.matchBy(a.yR,(e=>Object.assign(Object.assign({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,s.pipe)(e.transformJson.alternatives,f.map(u.r3.Group.fromSerialized))}})),a.yR),this._transformRawAlert),this._ops,this._positionManager,this._alternativeManager)}))).forEach((({id:e,alert:n})=>{this._addAlertBuffered(n),e&&t.set(e,n.id)}))),t}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{repo:this._alertsRepository}}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_getTypeFilter(e){switch(e){case"alert":return e=>!de.bZ.isPlagiarism(e);case"plagiarism":return e=>de.bZ.isPlagiarism(e);default:return(0,h.vE)(e)}}_addAlertBuffered(e){this._log.trace(`_addAlert(${e.toLiteString()})`),this._addAlerts.next(e)}_changeAlertBuffered(e){this._log.trace(`_changeAlert(${e.id})`),this._changeAlerts.next(e)}_removeAlertBuffered(e){this._log.trace(`_removeAlert(${Ce.toString(e)})`),this._removeAlerts.next(e)}_getAllAlertsAsArray(){return this._alertsRepository.toArray().filter(de.bZ.isNotRemoved)}}},6488:(e,t,n)=>{n.d(t,{e:()=>r});var r,i=n(40327),a=n(5114),s=n(4390),o=n(40018);!function(e){e.create=function(e){const t=t=>(0,i.pipe)(e.get(),s.p.get(t),a.map(o.bZ.fromAlertModel)),n=e=>(0,i.pipe)(t(e),a.filter(o.bZ.isInteractable)),r=e=>(0,i.pipe)(t(e),a.filter(o.bZ.isRegistered));return{getById:t,getRegistered:r,getInteractable:n,isRegistered:e=>(0,i.pipe)(r(e),a.isSome),isInteractable:e=>(0,i.pipe)(n(e),a.isSome)}}}(r||(r={}))},79227:(e,t,n)=>{n.d(t,{J:()=>r,k:()=>v});var r,i=n(71249),a=n(95195),s=n(23330),o=n(35214),l=n(64015),c=n(57050),u=n(40327),d=n(84966),p=n(5114),m=n(95574),h=n(81670),f=n(81531),g=n(40018),y=n(66896);!function(e){e.getSubTypeFromLens=e=>y.R.isPriority(e)||y.R.isPriorityOutcomeId(e)?d.e3.SidebarPriority:d.e3.Sidebar}(r||(r={}));class v{constructor(e,t){this._alertsReader=e,this._ops=t,this._log=f.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=e=>(0,u.pipe)(e,this._alertsReader.getById,a.Yo((()=>new Error(`alert ${e} not found in the repo`)))),this.undoBulk=(0,c.ls)(l.DZ((0,c.ls)(this._alertsReader.getById,p.filter(g.bZ.isBulkApplied))),(e=>this._ops.undoApplied(e,g.bZ.State.Applied.Method.Bulk)()),a.fS((e=>{throw this._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,c.ls)(this._findAlert,a.UI((e=>e.getHighlightRanges()))),this.hasNewRangesForUpdate=(0,c.ls)(this._findAlert,a.UI((e=>e.hasNewRangesForUpdate))),this.applyPendingRangesUpdate=(0,c.ls)(this._findAlert,a.UI((e=>e.applyPendingRangesUpdate()))),this.getAppliedRanges=(0,c.ls)(this._alertsReader.getById,a.Yo((()=>new Error("alert not found in the repo"))),a.Y$(g.bZ.isApplicableAlert,(e=>new Error(`alert is not applicable: ${e.alertType}`))),a.UI((e=>e.getAppliedRanges())))}apply(e,t){const{alternativeIndex:n,source:r}=t;return this._log.trace("apply",e),(0,u.pipe)(this._findAlert(e),a.tS(a.DT(g.bZ.isApplicableAlert,(()=>new Error("cannot apply not applicable alert")))),a.tS((e=>(0,u.pipe)(m.vM((()=>e.apply(t))),a.Vn((t=>(this._log.error("apply single alert error",{error:t,alert:e.toLiteAlert(),alternativeIndex:n,source:r}),t)))))))}applyBulk(e,t){this._log.trace("applyBulk",e),this.sendBatchFeedback(e,d.DI.BULK_ACCEPTED,t);const n=(0,u.pipe)(e,h.T.fromArray((e=>(0,u.pipe)(this._findAlert(e),a.Vn((t=>(0,c.bc)(t,{id:e}))),a.tS(a.DT(g.bZ.isRegisteredApplicableAlert,(e=>(0,c.bc)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())))),a.tS(a.DT((e=>d.wQ.withTransformJson(e._raw)),(e=>(0,c.bc)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())))),a.Vn((([e,t])=>(this._log.error(e.message,t),e)))))));return(0,u.pipe)(n,h.T.flatMap(i.uZ(),(e=>(0,u.pipe)(this._ops._applyTransformJson({alerts:e.map((e=>({alert:e,alternative:g.bZ.getApplicableAlternative(e,0)}))),source:g.l$.api,method:g.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),s.g_((t=>()=>(this._log.error("applyBulk error",t),h.T.of([],e.map((e=>e.id))))),(()=>()=>h.T.of(e.map((e=>e.id))))))())))}confirmApplied(e){return this._log.trace("commitApplied",e),(0,u.pipe)(e,h.T.fromArray((0,c.ls)(this._findAlert,a.UI(g.Ev.castApplied))),a.Vn((e=>new Error(`Error on trying to confirm applied alerts: ${e.rejected.join(",")}`))),a.tS((e=>this._ops._confirmApplied(e)())))}dismissBatch(e,t){return this._log.trace("dismissBatch",e),(0,u.pipe)(e.map((0,c.ls)(this._findAlert,a.UI((e=>[e])))),(0,o.fold)(w),a.tS((e=>this._ops._dismissBatch(e,t)())))}applyFeedback(e,t,n){return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._alertFeedback(e,t,n)())))}sendBatchFeedback(e,t,n){return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,u.pipe)(e,h.T.fromArray(this._findAlert),h.T.tapFailure((e=>this._log.error("Cannot send batch feedback for alerts",e.rejected))),h.T.foldSuccess((e=>a.F2(this._ops._alertBatchFeedback(e,t,n)()))))}takeReference(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,u.pipe)(this._findAlert(e.id),a.tS((e=>e.takeReference(t))))}changeMuteState(e,t){return this._log.trace("changeMuteState",e),(0,u.pipe)(e,h.T.fromArray((e=>this._findAlert(e.id))),h.T.flatMap(i.uZ(),(e=>(0,u.pipe)(this._ops._changeMuteState(e,t)(),a.Vn((e=>(this._log.error("Can not change mute state",e),e))),m.MH))))}changeGapValue(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeGapValue(e,t)())))}changeSmartPhrasesFeedback(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeSmartPhrasesFeedback(e,t)())))}rotateSmartPhrasesReplacements(e){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._rotateSmartPhrasesReplacements(e)())))}discardSmartPhrasesReplacement(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._discardSmartPhrasesReplacement(e,t)())))}changeTakeawayFeedback(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeTakeawayFeedback(e,t)())))}changeSentenceLevelBrandTonesFeedback(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeSentenceLevelBrandTonesFeedback(e,t)())))}requestShortenItReplacements(e){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._requestShortenItReplacements(e)())))}}const b=i.uZ(),w=(0,a.$4)(b)},43320:(e,t,n)=>{n.d(t,{R:()=>s});var r=n(12738),i=n(51072),a=n(32952);class s{constructor(e,t,n,i,a,o,l,c){const u=s.NamedChangesSink.factory(c),d={pm:u(s.Receiver.PM,a),dm:u(s.Receiver.PM,o),capi:u(s.Receiver.CAPI,i),dox:u(s.Receiver.DOX,n),userTextSilent:u(s.Receiver.UserText,s._duplexToSync(e,r.$.Mode.silent)),userTextEcho:u(s.Receiver.UserText,s._duplexToSync(e,r.$.Mode.echo))};s.Producer.create(s.Producer.UserText,{changes:e.changes})(d.dm,d.pm,d.capi,d.dox),s.Producer.create(s.Producer.ALERT_APPLY,l)(d.userTextEcho),s.Producer.create(s.Producer.DOX,n)(d.dm,d.pm,d.userTextSilent,d.capi),t.subscribe((t=>{"before_alert"===t.kind&&e.flushChanges()}))}static init(e,t,n,r,i,o,l){const c=new a.xQ;return new s(e,t,n,r,i,o,l,c),c}}s._duplexToSync=(e,t)=>({pushChanges:n=>{e.pushChanges(n,t)}}),function(e){let t,n,r;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...n)=>t.changes.subscribe((t=>{n.forEach((n=>n.pushChanges(e,t)))}))}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(n=e.Receiver||(e.Receiver={})),function(e){function t(e,t,n){return{pushChanges:(r,a)=>{try{let s=t.pushChanges(a);"function"==typeof s&&(s=i.Vi(s)),void 0!==s&&s.catch((t=>n.next({exception:t,details:{from:r,to:e}})))}catch(t){n.next({exception:t,details:{from:r,to:e}})}}}}e.factory=function(e){return(n,r)=>t(n,r,e)},e.create=t}(r=e.NamedChangesSink||(e.NamedChangesSink={}))}(s||(s={}))},6956:(e,t,n)=>{n.d(t,{$:()=>F});var r,i,a=n(40327),s=n(49524),o=n(59312),l=n(99950),c=n(25938),u=n(64450),d=n(83078),p=n(36991),m=n(5114),h=n(32952),f=n(95300),g=n(66310),y=n(24209),v=n(50628),b=n(77176),w=n(76974),C=n(2834),S=n(85985),I=n(95093),x=n(62962),k=n(95343),E=n(25656),A=n(18625),T=n(13444),_=n(22232),L=n(95195),O=n(81531),R=n(46680),P=n(12738),M=function(){function e(e){var t=this;this._primarySourceChangeProcessor=e,this._log=O.C8.Logging.getLogger("DuplexImpl",R.i.DEBUG),this._maybePrimarySourceContent=m.none,this._secondarySourceContent=c.RI.unsafeRes(new u.i),this._syncFlash=new h.xQ,this._syncTimer=i.getImmediateTimer(),this.state=new f.X("idle"),this._changesToSecondarySource=new h.xQ,this._changesToSecondarySourceSync=new h.xQ,this.changesToPrimarySource=new h.xQ,this.changesToSecondarySource=this._changesToSecondarySource.pipe(g.w((function(e){switch(e.kind){case"reset":return t._maybePrimarySourceContent=m.some(e.reset),y.T(t._syncTimer.timer,t._syncFlash).pipe(v.P(),b.U((function(){var n=t._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:c.RI.delta(n,t._secondarySourceContent.length)}})));case"change":return t._syncTimer.reset(),w.of({fullText:e.fullText,change:e.change});default:return(0,_.vE)(e)}})),C.b((function(e){var n=e.fullText;"syncing"===t.state.getValue()&&(t._log.debug("Back to consistent state"),t.state.next("idle")),t._maybePrimarySourceContent=m.none,t._secondarySourceContent=n})),b.U((function(e){return e.change})),S.h((function(e){return e.delta.ops.length>0})),I.T(this._changesToSecondarySourceSync),C.b((function(){t._log.debug("Emit change to secondary source")})),x.n(),k.x())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),l.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return(0,a.pipe)(this._maybePrimarySourceContent,m.getOrElse((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:(0,_.vE)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),(0,a.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),L.UI((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(c.RI.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var n=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return m.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=m.some(this._secondarySourceContent)),(0,a.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?(0,a.pipe)(c.RI.res(t.delta.compose(e.delta)),L.g_((function(){return L.t$(new Error("Got non-document delta after apply"))}),(function(t){return L.F2([e,t])}))):L.t$(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),L.g_((function(e){return n._changesToSecondarySourceSync.next(n._secondarySourceContent),L.t$(e)}),(function(e){var r=e[0],i=e[1];return n._secondarySourceContent=i,t===P.$.Mode.echo&&n._changesToSecondarySourceSync.next(r),n.changesToPrimarySource.next(r),L.F2(void 0)})));case"reset":return m.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=m.some(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),L.F2(void 0);case"flush":return this.changesToPrimarySource.next(e),L.F2(void 0);default:(0,_.vE)(e)}},e}();!function(e){var t;!function(e){e.reset=function(e){return L.F2({kind:"reset",reset:e})},e.change=function(e){return L.F2((0,o.pi)({kind:"change"},e))},e.error=function(e){return L.t$(new Error(e))}}(t||(t={})),e.deltaChangeProcessor=function(e,n,r){if(c.RI.isFlush(r))return L.F2(r);if(0===e.length)return c.RI.isReset(r)?t.change({fullText:r,change:r}):0===r.prevLen?(0,a.pipe)(c.RI.res(r.delta),L.g_((function(){return t.error("Cannot apply non-document delta to an empty text")}),(function(e){return t.change({fullText:e,change:r})}))):t.error("Cannot apply delta to text. Expected change for len 0, but got "+r.prevLen);if(m.isNone(n))return c.RI.isDelta(r)&&e.length!==r.prevLen?t.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+r.prevLen):(0,a.pipe)(c.RI.res(e.delta.compose(r.delta)),L.g_((function(){return t.error("Cannot apply invalid delta")}),(function(e){return t.change({fullText:e,change:r})})));if(c.RI.isDelta(r)&&d.MH(n).length!==r.prevLen)return t.error("Cannot apply delta for wrong text length");var i=c.RI.isReset(r)?r.delta:d.MH(n).delta.compose(r.delta);return p.s.deltaEq.equals(i,e.delta)?t.change({fullText:e,change:c.RI.delta(new u.i,e.length)}):(0,a.pipe)(c.RI.res(i),L.g_((function(){return t.error("Cannot apply invalid delta")}),t.reset))},e.fullTextProcessor=function(e,n,r){var i=c.RI.unsafeRes((new u.i).insert(r));if(0===e.length)return t.change({fullText:i,change:i});if(m.isNone(n)){var a=e.delta.diff(i.delta);return t.change({fullText:i,change:c.RI.delta(a,e.length+p.s.calcDiffLength(a))})}return p.s.deltaEq.equals(i.delta,e.delta)?t.change({fullText:i,change:c.RI.delta(new u.i,e.length)}):t.reset(i)}}(r||(r={})),function(e){e.getImmediateTimer=function(){return{timer:w.of(void 0),reset:E.Z}},e.getAuditTimer=function(e){var t=m.none;return{timer:A.P((function(){var n=(0,a.pipe)(t,m.fold((function(){return e}),(function(t){var n=Date.now()-t;return n>e?0:n})));return t=(0,a.pipe)(t,d.vx(m.some(Date.now()))),w.of(void 0).pipe(T.g(n),C.b((function(){t=m.none})))})),reset:function(){return t=m.none}}}}(i||(i={}));var F,N=n(95574),D=n(8125),$=n(43320);!function(e){e.connectAsPrimarySourceToDuplex=e=>{const t=new h.xQ,n=O.C8.Logging.getLogger("DenaliEditorToDuplexConnector",R.i.DEBUG),i=new M(r.deltaChangeProcessor),o=$.R.NamedChangesSink.factory(t),l=$.R.Producer.create($.R.Producer.UserText,{changes:i.changesToPrimarySource})(o($.R.Receiver.DEd,{pushChanges:t=>{e.pushChanges(t,"user")}})),c=$.R.Producer.create($.R.Producer.DEd,e)(o($.R.Receiver.UserText,{pushChanges:t=>{const r=i.pushChanges({from:"primary",change:t});(0,a.pipe)(r,N.L9((r=>(n.error("Cannot pass invalid change from master",r,t),i.pushChanges({from:"primary",change:e.getContents()})))),L.g_((e=>{n.fatal("Cannot reset duplex with full context",e)}),s.y))}}));return{duplex:i,fails:t,dispose:()=>{l.unsubscribe(),c.unsubscribe()}}},e.duplexAsUserSource=e=>({changes:e.changesToSecondarySource,pushChanges:(t,n)=>e.pushChanges({from:"secondary",change:t,mode:n}),flushChanges:D.ZT,getContents:()=>e.getSecondarySourceContents()}),e.connectAsPrimarySourceWithoutDuplex=e=>({changes:e.changes,pushChanges(t,n){e.pushChanges(t,n===P.$.Mode.echo?"user":"api")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()})}(F||(F={}))},5008:(e,t,n)=>{n.d(t,{n:()=>r,A:()=>i});var r,i,a=n(57050),s=n(25938),o=n(36991),l=n(8125),c=n(62965),u=n(24209);!function(e){e.noopSync={pushChanges:l.ZT},e.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,a.ls)(e.pushChanges,c.UI(l.ZT))}},e.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(s.RI.isDelta(t)?s.RI.fromArrayOfDeltas(o.s.splitToDeleteThenInsert(t.delta).filter(o.s.nonEmpty),t.prevLen):[t]).forEach((t=>e.pushChanges(t)))}}}}(r||(r={})),function(e){e.merge=function(e){return{changes:u.T(...e.map((e=>e.changes)))}}}(i||(i={}))},4390:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(22690),a=n(57050),s=n(40327),o=n(64681),l=n(92843),c=n(93756),u=n(81670),d=n(19429),p=n(70996),m=n(20321),h=n(88570);!function(e){let t;!function(e){e.show=l.v.getShow(i._3,p.h.show),e.eq=l.v.getEq(p.h.Id.ord,p.h.ord),e.empty=()=>l.v.empty(),e.toRegistered=function(e){return l.v.fromMutation((t=>{(0,s.pipe)(e,l.v.forEach(((e,n)=>p.h.isRegistered(e)&&t.set(n,c.t$(e))),((e,n,r)=>{p.h.isRegistered(e)?p.h.isRegistered(n)?t.set(r,c.Hk(e,n)):t.set(r,c.t$(e)):p.h.isRegistered(n)&&t.set(r,c.F2(n))}),((e,n)=>p.h.isRegistered(e)&&t.set(n,c.F2(e)))))}))},e.filter=function(e){return l.v.filter(e,((t,n)=>e(t)&&e(n)),e)}}(t=e.Diff||(e.Diff={})),e.empty=m.v.iso.wrap(m.v.empty),e.eq=o.Eh(m.v.eqShow),e.get=function(e){return(0,a.ls)(m.v.iso.unwrap,m.v.get(e))},e.reduce=function(e,t){return(0,a.ls)(m.v.iso.unwrap,m.v.reduce(e,t))},e.diff=function(e,t){return m.v.diff(m.v.iso.unwrap(e),m.v.iso.unwrap(t))},e.isEmpty=function(e){return 0===m.v.iso.unwrap(e).entries.size},e.find=function(e){return(0,a.ls)(m.v.iso.unwrap,m.v.find(e))},e.size=function(){return(0,a.ls)(m.v.iso.unwrap,m.v.size)},e.from=function(e){return(0,s.pipe)(m.v.createDiff({added:e.reduce(((e,t)=>e.set(t.id,p.h.create(t))),new Map)}),u.T.recover(a.Q1),h.r.applyDiff,d.UI((0,a.ls)(u.T.recover(a.Q1),m.v.iso.wrap)))(m.v.empty)}}(r||(r={}))},20321:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(71249),i=n(22690),a=n(40327),s=n(64681);var o,l={equals:function(){return!0}},c=n(92843),u=n(22232),d=n(95574),p=n(43675),m=n(5114),h=n(93756),f=n(95195),g=n(73975),y=n(90329),v=n(70996);!function(e){function t(e,t){return n=>n.order.reduce(((e,r)=>((0,u.kG)(n.entries.has(r),"got corrupted state"),t(e,n.entries.get(r)))),e)}function n({added:e=new Map,updated:t=new Map,removed:n=new Map}){const r=new Map,i=c.v.fromMutation((i=>{n.forEach(((e,t)=>{i.set(t,h.t$(e))})),e.forEach(((e,t)=>{i.has(t)?r.set(t,`alert add overlaps with alert remove: toAdd(${v.h.show.show(e)} overlapWith(${h.ZN(v.h.show,v.h.show).show(i.get(t))}))`):i.set(t,h.F2(e))})),t.forEach((([e,t],n)=>{i.has(n)?r.set(n,`alert update overlaps with unexpected alert add/remove: toUpdate(${v.h.show.show(t)}) overlapWith(${h.ZN(v.h.show,v.h.show).show(i.get(n))}))`):i.set(n,h.Hk(e,t))}))}));return r.size>0?f.t$({recovered:i,rejected:r}):f.F2(i)}e.iso=s.k4(),e.empty={entries:new Map,order:[],latestChangeDiff:c.v.empty(),diffVersion:0},e.get=function(e){return t=>m.fromNullable(t.entries.get(e))},e.find=function(e){return t(m.none,((t,n)=>(0,a.pipe)(t,m.alt((()=>m.fromPredicate(e)(n))))))},e.reduce=t,e.size=e=>e.entries.size,e.diff=function(e,t){return 0===e.diffVersion?d.MH(n({added:t.entries})):e.diffVersion+1===t.diffVersion?t.latestChangeDiff:p.yi(v.h.ord)(e.entries,t.entries)},e.applyDiff=function(e){return t=>{const n=p.QT(p.kH.createStrict(v.h.ordShow),t.entries,e);return(0,a.pipe)(n,f.Pd((n=>{const r=c.v.fromMutation((t=>{(0,a.pipe)(e,c.v.forEach(((e,r)=>!n.rejected.has(r)&&t.set(r,h.t$(e))),((e,r,i)=>!n.rejected.has(i)&&t.set(i,h.Hk(e,r))),((e,r)=>!n.rejected.has(r)&&t.set(r,h.F2(e)))))}));return{recovered:w(n.recovered,r,t.diffVersion),rejected:n.rejected}}),(n=>w(n,e,t.diffVersion))))}},e.applyDiffLoose=function(e){return t=>{const n=p.QT(p.kH.createLoose(v.h.ordShow),t.entries,e);return(0,a.pipe)(n,f.Pd((n=>({recovered:w(n.recovered,e,t.diffVersion),rejected:n.rejected})),(n=>w(n,e,t.diffVersion))))}},e.createDiff=n,e.toJSON=function(e){return{entries:Array.from(e.entries),order:e.order,latestChangeDiff:c.v.toJSON(e.latestChangeDiff),diffVersion:e.diffVersion}},e.diffEqShow=Object.assign(Object.assign({},c.v.getEq(v.h.Id.ord,v.h.ord)),c.v.getShow(v.h.Id.show,v.h.show));const o=Object.assign(Object.assign({},y.Eh(v.h.Id.ord,v.h.ord)),y.ZN(v.h.Id.show,v.h.show)),b=Object.assign(Object.assign({},r.Eh(v.h.Id.ord)),r.ZN(v.h.Id.show));function w(e,t,n){return{entries:e,order:(0,a.pipe)(e,y.VO(v.h.ord),r.UI((e=>e.id))),latestChangeDiff:t,diffVersion:n+1}}e.contentEqShow=Object.assign(Object.assign({},g.MW({entries:o,order:b,latestChangeDiff:l,diffVersion:l})),i.aM({entries:o,order:b,latestChangeDiff:e.diffEqShow,diffVersion:i.yt})),e.eqShow=Object.assign(Object.assign({},g.MW({entries:o,order:b,latestChangeDiff:e.diffEqShow,diffVersion:g.lr})),i.aM({entries:o,order:b,latestChangeDiff:e.diffEqShow,diffVersion:i.yt}))}(o||(o={}))},88570:(e,t,n)=>{n.d(t,{r:()=>r});var r,i=n(57050),a=n(95195),s=n(20321);!function(e){e.empty=s.v.empty,e.applyDiff=function(e){return(0,i.ls)(s.v.applyDiffLoose(e),a.Vn((e=>({recovered:e.recovered,rejected:e.rejected}))))},e.toCheckingResult=function(e){return s.v.iso.wrap(e)}}(r||(r={}))},89772:(e,t,n)=>{n.d(t,{w:()=>i});var r,i,a=n(57050),s=n(40327),o=n(92843),l=n(68983),c=n(5114),u=n(90329),d=n(66896),p=n(51653),m=n(70996);!function(e){e.modelToCounters=function(e){return m.h.isRegistered(e)?e.counters:p.R.empty}}(r||(r={})),function(e){e.monoid=u.uZ(d.R.Id.ord,d.R.Meta.group),e.eq=u.Eh(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=u.xb,e.lookup=u.P5(d.R.Id.ord),e.applyDiff=t=>r=>c=>(0,s.pipe)(r,o.v.foldMap(e.monoid)(i(t),p(t),n(t)),(0,l.W)(e.monoid.concat)(c),u.hX((0,a.ff)(d.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let n=t;return e.forEach(((e,t)=>{n=(0,s.pipe)(n,u.cq(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),c.fold((()=>(0,s.pipe)(n,u.ZQ(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))),a.yR))})),n};const t=(0,a.ls)(r.modelToCounters,d.R.Meta.fromAlertCounters),n=e=>n=>m(e)(n,t),i=e=>n=>m(e)(n,(0,a.ls)(t,d.R.Meta.group.inverse)),p=t=>(r,a)=>e.monoid.concat(n(t)(a),i(t)(r)),m=e=>(t,n)=>(0,s.pipe)(e,u.hX((e=>e(t.alert))),u.UI((()=>n(t))))}(i||(i={}))},13313:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(38983),a=n(4390),s=n(54216),o=n(93508),l=n(57091),c=n(67434),u=n(98403),d=n(89772);!function(e){e.defaultState={alerts:a.p.empty,lenses:d.w.monoid.empty},e.get=(r,i,s)=>i.pipe(o.O(new Map),l.a(r.pipe(o.O(a.p.empty),c.R(((e,n)=>t(n,s.lensFilters)(e)),e.defaultState)),n)),e.getMock=(t,n)=>{const r=i.h.create(e.defaultState);return e.get(t,n,s.t.create(s.t.defaultLensFilters,s.t.defaultTextFilters)).subscribe(u.wW(r)),r};const t=(e,t)=>n=>{const r=a.p.Diff.toRegistered(a.p.diff(n.alerts,e));return{alerts:e,lenses:d.w.applyDiff(t)(r)(n.lenses)}},n=(e,t)=>Object.assign(Object.assign({},t),{lenses:d.w.updatePercentiles(e)(t.lenses)})}(r||(r={}))},35301:(e,t,n)=>{n.d(t,{J:()=>r});var r,i=n(71249),a=n(22690),s=n(57050),o=n(40327),l=n(38983),c=n(84966),u=n(80358),d=n(45701),p=n(90329),m=n(5114),h=n(43675),f=n(62965),g=n(95195),y=n(8125),v=n(81531),b=n(40018),w=n(32952),C=n(45586),S=n(85985),I=n(77176),x=n(2834),k=n(98403),E=n(16118),A=n(40151),T=n(85654);!function(e){let t,n,r;!function(e){let t;!function(e){e.ord=d.ordString,e.show=a._3,e.create=e=>e}(t=e.Id||(e.Id={})),e.isSpecial=e=>Object.values(c.JW.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>p.hX((t=>e(t.id))),e.filterWithCount=(e,t)=>n=>{const r=Array.from(n.keys()),i=T.k.getAlerts(t,r).byCategory;return(0,o.pipe)(n,p.DZ((t=>e(t.id)?m.some(Object.assign(Object.assign({},t),{alertsCount:i.get(t.id).filter(b.bZ.isRegistered).length})):m.none)))}}(n=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let r,a;!function(e){let t;!function(e){e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(r=e.Events||(e.Events={})),e.create=function(e,a,d,p,y){const A=v.C8.Logging.getLogger("MutedAlertsModel"),_=l.h.create(new Map),L=new w.xQ,O=new C.w.Keeper;return O.push(e.pipe(S.h(u.h.is("session_started")),I.U((e=>function(e){const t=e.map((e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]));return new Map(t)}(e.userMutedCategories))),x.b(k.wW(_)),x.b((()=>L.next({type:r.Type.CategoriesChanged})))).subscribe(),_.pipe(E.G(),I.U((([e,n])=>function(e,n){return{muted:h.uz(t.Id.ord)(e,n),unmuted:h.uz(t.Id.ord)(n,e)}}(e,n))),I.U(function(e){return({muted:t,unmuted:n})=>({toMute:T.k.getAlerts(e,t).all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted)),toUnmute:T.k.getAlerts(e,n).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted))})}(d)),x.b((({toMute:e,toUnmute:t})=>{e.length>0&&p.changeMuteState(e,b.bZ.MuteStateType.Muted),t.length>0&&p.changeMuteState(t,b.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:L,mutedCategories:_,muteCategories:e=>{(0,o.pipe)(a.sendFeedback({kind:c.Mw.MUTE,userMuteScope:y,userMuteCategories:e}),f.Vn((e=>{A.warn("Alerts could not be muted on CAPI",e)})))();const n=T.k.getAlerts(d,e);0===n.all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted)).length&&A.warn("No alerts were muted on category mute",{categoryIds:e});const s=function(e,n,r){return a=>{const s=new Map(a);return e.forEach(((e,a)=>{t.isSpecial(a)?s.set(a,{id:a,scope:n,description:t.specialCategoryDescription}):(0,o.pipe)(i.P5(0,e),m.chain((e=>e.muteCategory)),m.fold((()=>r.error("No alerts to mute",a)),(e=>s.set(a,{id:e.id,description:e.description,scope:n}))))})),s}}(n.byCategory,y,A)(_.get());return _.set(s),L.next({type:r.Type.CategoriesChanged}),g.F2(void 0)},unmuteCategories:e=>{(0,o.pipe)(a.sendFeedback({kind:c.Mw.UNMUTE,userMuteScope:y,userMuteCategories:e}),f.Vn((e=>{A.warn("Alerts could not be un-muted on CAPI",e)})))();return 0===T.k.getAlerts(d,e).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted)).length&&A.warn("No alerts were unmuted on category unmute",{categoryIds:e}),_.modify(function(e,t){return n=>{const r=new Map(n);return e.forEach((e=>{n.has(e)?r.delete(e):t.error("Tried to unmute a category which is not muted",e)})),r}}(e,A)),L.next({type:r.Type.CategoriesChanged}),g.F2(void 0)},getMutedCategories:()=>(0,o.pipe)(_.get(),n.filterWithCount((0,s.ff)(t.isSpecial),d)),getMutedSpecialCategories:()=>(0,o.pipe)(_.get(),n.filter(t.isSpecial)),loadCachedMutedCategories:e=>{_.set(e)},dispose:()=>O.dispose()}},function(e){e.create=function(){return{events:A.E,mutedCategories:l.h.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:e=>g.F2(void 0),unmuteCategories:e=>g.F2(void 0),loadCachedMutedCategories:y.ZT,dispose:y.ZT}}}(a=e.Mock||(e.Mock={}))}(r=e.CategoriesModel||(e.CategoriesModel={}))}(r||(r={}))},85654:(e,t,n)=>{n.d(t,{k:()=>r});var r,i=n(40327),a=n(5114),s=n(40018),o=n(4390);!function(e){e.create=e=>({getAlertMuteCategory:t=>(0,i.pipe)(e.getById(t),a.chain((e=>e.muteCategory)))}),e.getAlerts=function(e,t){const n={byCategory:new Map(t.map((e=>[e,[]]))),all:[]};return(0,i.pipe)(e.get(),o.p.reduce(n,((e,{alert:n})=>(0,i.pipe)(n.muteCategory,a.filter((e=>t.includes(e.id))),a.map((e=>e.id)),a.alt((()=>a.fromNullable(t.find(s.bZ.belongsToSpecialCategory(n))))),a.fold((()=>e),(t=>(e.byCategory.get(t).push(n),e.all.push(n),e)))))))}}(r||(r={}))},21729:(e,t,n)=>{n.d(t,{dM:()=>r,j:()=>i});var r,i,a,s,o=n(73975),l=n(22690),c=n(40327),u=n(38983),d=n(73353),p=n(48837),m=n(5114),h=n(83078);!function(e){e.group=p.kT({critical:p.Kh,advanced:p.Kh,free:p.Kh,paid:p.Kh,criticalPriority:p.Kh,advancedPriority:p.Kh,freePriority:p.Kh,paidPriority:p.Kh,unread:p.Kh,muted:p.Kh}),e.eq=o.MW({critical:o.lr,advanced:o.lr,free:o.lr,paid:o.lr,unread:o.lr,criticalPriority:o.lr,advancedPriority:o.lr,freePriority:o.lr,paidPriority:o.lr,muted:o.lr}),e.show=l.aM({critical:l.yt,advanced:l.yt,free:l.yt,paid:l.yt,criticalPriority:l.yt,advancedPriority:l.yt,freePriority:l.yt,paidPriority:l.yt,unread:l.yt,muted:l.yt}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(r||(r={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){const n=(0,c.pipe)(t.goals,m.exists((e=>e.size>0))),r=(0,c.pipe)(t.emotions,m.exists((e=>e.size>0)));return d.R$.equals(t,d.R$.unset)||(0,c.pipe)(t.domain,h.wo((e=>"general"===e)))&&!(m.isSome(t.audience)||m.isSome(t.style)||n||r)?0:Number(n||0)+Number(r||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(a||(a={})),function(e){let t;!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(t=e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:()=>u.h.create({kind:e.CheckingKind.Document,type:"idle"})}}(s||(s={}))},51006:(e,t,n)=>{var r;n.d(t,{X:()=>r}),function(e){let t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12",e.Step13="step13",e.Step14="step14",e.Step15="step15",e.Step16="step16",e.DocumentTitle="documentTitle",e.Synfony="synfony"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){return!(e===t.Step2||e===t.Step3||e===t.Step5||e===t.Step6||e===t.Step7)}}(r||(r={}))},54286:(e,t,n)=>{n.d(t,{_:()=>i});var r,i,a=n(38983),s=n(73353),o=n(5114),l=n(20817);!function(e){e.unwrap=function(e){return l.Ri.create(o.getOrElse((()=>e)),o.some)}}(r||(r={})),function(e){e.create=function(e,t,n,i){const l=r.unwrap(t.style),c=r.unwrap(t.audience),u=r.unwrap(t.domain),d=a.h.create(e),p=d.lens("style").lens(l),m=d.lens("domain").lens(u),h={audience:{items:s.R$.audiences,current:d.lens("audience").lens(c),default:o.some(t.audience)},formality:{items:s.R$.formalityLevels,current:p,default:o.some(t.style),shouldDisable:e=>m.view((t=>!!t&&!s.R$.isStyleValidWithDomain(t,e)))},domain:{items:s.R$.domains,current:m,default:o.some(t.domain),shouldDisable:e=>p.view((t=>n.isFree?"general"!==e:!s.R$.isStyleValidWithDomain(e,t)))},intent:{items:s.R$.goals,current:d.lens("goals")},tone:{items:s.R$.tone,current:d.lens("emotions")}};return{localContext:d,blocks:h,showSetGoalsLoader:a.h.create(!n.demoMode&&i)}}}(i||(i={}))},7910:(e,t,n)=>{n.d(t,{sJ:()=>y,Pv:()=>v});var r=n(57050),i=n(40327),a=n(5114),s=n(86474),o=n(34442),l=n(26027),c=n(48521),u=n(35416),d=n(93494),p=n(2844),m=n(77176),h=n(93508),f=n(28043),g=n(57091);function y(e){return(t,n,r,i,a,o)=>s.Z.composeKnot({content:s.Z.fromSideEffect((n=>{b(t)(n);const r=n.action.action;"item"===r.key&&e(r.action)}),C(n,a,o)),root:w(n,r,i)})}function v(e,t){return{viewState:(n,r,s)=>l=>{const u=(0,i.pipe)(n,a.exists((e=>e===l.id)));return{cell:{item:t(r)(l),root:{height:{value:l.positionState.height,watched:l.positionState.watched&&!e.isScheduledToDispose(l),isValid:l.positionState.isHeightValid},position:{top:l.positionState.absTop,animationInProgress:l.positionState.animationInProgress},layer:u||c.o.isAnimatable(l)&&l.visualState.incomplete&&!(0,i.pipe)(l.visualState.from,a.exists((e=>"focused"===e)))?o.H.Layer.front:o.H.Layer.back}},root:l.id,hashCode:l.hashCode.bind(l),equals:e=>l.equals(e.cell.item.view),compare:e=>s.compare(l,e.cell.item.view)}}}}function b(e){return t=>{switch(t.action.action.action.kind){case o.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case o.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const w=(e,t,n)=>s.Z.fromSideEffect((e=>{t.next(e.element)}),p.aj(n,e.view("cardsHeight")).pipe(m.U((([e,t])=>({disableUserActions:e,height:t}))),h.O({disableUserActions:!1,height:0}))),C=(e,t,n)=>{const s=e.view(d.v.Prism.items),o=e.pipe(m.U((e=>e.itemsOrd))),c=e.pipe(m.U((0,r.ls)(u.In.getActiveItem,a.map(l.X.getId)),f.x())),p=e.view(t.getActiveAlertsCount).view((e=>0===e));return s.pipe(g.a(c,p,o),m.U((([e,r,s,o])=>{const l=e.getAt(0);return e.filter((e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!(0,i.pipe)(t,a.exists((t=>t.id===e.id)))||(0,i.pipe)(t,a.exists((e=>e.positionState.isHeightValid))))(e,l))).map(t.viewState(r,s,o),n(o))})))}},68579:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),a=n(5739),s=n(12187),o=n(8125),l=n(5114),c=n(86474),u=n(63969),d=n(34442),p=n(95983),m=n(77176);!function(e){let t;function n(e){return c.UI.List.make(p.aW.getFoldableWithIndex(),r(e))}function r(t){return c.UI.Knot.make(e.IdProvider,{cell:c.UI.Knot.make(d.H.Cell,{item:c.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=n,e.cardList=function(t){return c.UI.Knot.make(e.ScrollableBox,{content:n(t)})},e.ScrollableBox=c.UI.Grid.make((({notify:e,view:n,slots:r})=>i.createElement(a.F.div,Object.assign({},(0,s.Sh)(n("disableUserActions").pipe(m.U((0,o.RN)(f.disableUserActions,void 0))),f.scrollContent),{"data-purpose":"scrollable-box",style:{height:n("height")},mount:n=>e({kind:t.onMount,element:l.fromNullable(n)})()}),r.content))),e.cell=r,e.CardStyleProvider=c.UI.Grid.make((({slots:e})=>i.createElement("div",{className:f.cardWrapper},e.children))),e.IdProvider=c.UI.Grid.make((({slots:e,state:t})=>i.createElement(a.F.div,{"data-id":t},e.cell)))}(r||(r={}));const h={margin:`${u.u.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:u.u.rem(-.5),width:u.u.rem(.5),height:u.u.percent(100),background:"none",content:"''"}}},f=u.u.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[h]})},84246:(e,t,n)=>{n.d(t,{Q:()=>h});var r,i=n(27378),a=n(5739),s=n(86474),o=n(77610),l=n(18031),c=n(50225),u=n(35108),d=n(40111),p=n(77176),m=n(19157);!function(e){e.Mini=({card:e,actions:t,useBundleContainer:n=!1,twoLined:r=!1})=>i.createElement(a.F.Fragment,null,e.pipe(p.U((e=>i.createElement(m.P.SmartPhrases,{card:e,actions:t,useBundleContainer:n,twoLined:r})))))}(r||(r={}));var h,f=n(28043);!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const n=t("view");return i.createElement(a.F.Fragment,null,n.pipe(f.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),p.U((a=>i.createElement(c.b.Card,{miniCard:o.C.isSmartPhrasesItem(a)?i.createElement(r.Mini,{card:n,actions:e,useBundleContainer:!0}):i.createElement(d.A.Mini,{card:n,actions:e}),fullCard:o.C.isSmartPhrasesItem(a)?i.createElement(l.A.Full,{card:n,actions:e}):i.createElement(d.A.Full,{card:n,actions:e}),successCard:i.createElement(l.A.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(l.A.FeedbackForm,{cardData:a,actions:e}),mutedCard:i.createElement(l.A.MutedAlert,{cardData:a,actions:e}),actions:e,card:a,transitionClassMapper:u.a})))))}))}(h||(h={}))},22373:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(27378),a=n(5739),s=n(86474),o=n(18031),l=n(50225),c=n(28043),u=n(77176);!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const n=t("view");return i.createElement(a.F.Fragment,null,n.pipe(c.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),u.U((r=>i.createElement(l.b.Card,{miniCard:i.createElement(o.A.Mini,{card:n,actions:e}),fullCard:i.createElement(o.A.Full,{card:n,actions:e}),successCard:i.createElement(o.A.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(o.A.FeedbackForm,{cardData:r,actions:e}),actions:e,card:r,mutedCard:i.createElement(o.A.MutedAlert,{cardData:r,actions:e})})))))}))}(r||(r={}))},84974:(e,t,n)=>{n.d(t,{z:()=>R});var r=n(27378),i=n(5739),a=n(86474),s=n(57050),o=n(5114),l=n(63969),c=n(30763),u=n(26027),d=n(15646),p=n(86718),m=n(4890),h=n(74754),f=n(66346),g=n(1883),y=n(55636),v=n(7046),b=n(94793),w=n(3656),C=n(28706),S=n(77176),I=n(30522),x=n(54126);const k=({item:e,layoutDensity:t})=>{const n=(0,s.zG)(t,m.j.Density.matchOrDefault(m.j.Density.minimal)((()=>O.minimalDescription),(()=>O.description)));return(0,s.zG)(e.cardMeta.details,o.fold((()=>null),(t=>r.createElement(f.G3,{key:"card-actions-details",visualState:e.visualState,className:O.more},r.createElement(w.XY,Object.assign({className:n},h.y.renderToHtml(t)))))))},E=({wordCount:e,checked:t})=>r.createElement(w.H3,{className:t?O.wordCountChecked:O.wordCountUnchecked},e," ",r.createElement(w.XY,{className:O.words},"words")),A=({item:e,layoutDensity:t,actions:n})=>{const i=p.f.isTextLengthCard(e.cardMeta)?e.cardMeta.wordCount:null;return r.createElement(r.Fragment,null,null!==i?r.createElement(E,{wordCount:i,checked:e.itemMeta.checked}):null,r.createElement(y.dk,{className:null!==i?O.descriptionWithHeader:void 0,description:e.cardMeta.explanation,actions:n,layoutDensity:t}))},T=({item:e,actions:t})=>(0,s.zG)(e.cardMeta.details,o.fold((()=>null),(()=>r.createElement(_,{key:"card-actions-button",actions:t,item:e})))),_=({item:{id:e,visualState:t},actions:n,className:i})=>{const a=r.useContext(c.m.Context);return r.createElement(v.zx.Tertiary,{key:"toggle-more",name:(0,f.hC)(t,a),title:(0,f.hC)(t,a),className:i,onClick:C.hz((()=>{n.next({type:d.eI.Kind.startTransitionTo,id:e,transition:{type:u.X.isCardOpen(t)?"focused":"expanded",clockwise:!0}})}))},u.X.isCardOpen(t)?r.createElement(b.JO.Arrow,{key:"more",className:O.lessIcon}):r.createElement(b.JO.QuestionMark,{key:"expand"}),(0,f.hC)(t,a))},L=e=>a.UI.Knot.make((e=>a.UI.Grid.make((({state:t,slots:n})=>r.createElement(i.F.div,{className:O.expanded},t.pipe(S.U((t=>{return r.createElement(g.Z,{header:r.createElement(i.F.Fragment,null,n.header),visualState:t.visualState,onFocus:s.Q1,theme:(a=t.renderOptions.layoutDensity,{wrapper:(0,s.zG)(a,m.j.Density.matchOrDefault(m.j.Density.minimal)((()=>O.wrapper),(()=>{})))}),body:r.createElement(A,{item:t,actions:e,layoutDensity:t.renderOptions.layoutDensity}),mainActions:null,footer:r.createElement(k,{item:t,layoutDensity:t.renderOptions.layoutDensity}),subActions:r.createElement(T,{item:t,actions:e})});var a})))))))(e),{header:I.r}),O=l.u.stylesheet({wrapper:[x.kX],lessIcon:[x.A2],more:[y.IH],description:[y.LM],minimalDescription:[y.LM,y.Gq],descriptionWithHeader:[x.H4],wordCountChecked:[x.NR],wordCountUnchecked:[x.Lp],words:[x.ht],expanded:[x.TX]});var R,P=n(34190),M=n(3303),F=n(70100),N=n(50225),D=n(19751);!function(e){e.Card=e=>a.UI.Node.make((({view:t})=>{const n=t("view"),s=(0,P.cp)(n,e),o=(0,P.Hu)(n,e);return r.createElement(i.F.Fragment,null,n.pipe(D.$f(F.X.eq),S.U((t=>r.createElement(N.b.Card,{miniCard:a.UI.mount(M.m,s),fullCard:a.UI.mount(L(e),o),actions:e,card:t})))))}))}(R||(R={}))},98752:(e,t,n)=>{n.d(t,{fw:()=>r});var r,i=n(27378),a=n(57050),s=n(5739),o=n(5114),l=n(95195),c=n(8125),u=n(86474),d=n(81531),p=n(34190),m=n(30522),h=n(3303),f=n(26027),g=n(77610),y=n(47306),v=n(18031),b=n(50225),w=n(85287),C=n(22800),S=n(35108),I=n(40111),x=n(25819),k=n(76720),E=n(28043),A=n(77176),T=n(85985);function _(e){return e.incomplete?(0,a.zG)(e.from,o.filter((e=>"expanded"===e||"focused"===e)),o.filter((()=>"removed"===e.transition.type)),o.map((()=>({main:w.$4.focused2renderedMain,shade:e.transition.clockwise?w.$4.focused2renderedShadeClockwise:w.$4.focused2renderedShade}))),o.getOrElse((()=>(0,S.SA)(e)))):{}}function L(e){return e.incomplete?(0,a.zG)(e.from,o.filter((e=>"expanded"===e||"focused"===e)),o.filter((()=>"removed"===e.transition.type)),o.map((()=>({main:C.S.focused2renderedBundleMain,shade:e.transition.clockwise?C.S.focused2renderedBundleShadeClockwise:C.S.focused2renderedBundleShade}))),o.getOrElse((()=>(0,S.a)(e)))):{}}!function(e){const t=e=>g.C.isTakeawayItem(e.card)?i.createElement(k.o.Full,{card:e.card,actions:e.actions,isChecklistItem:!0,isChecklistBundleItem:!!e.isBundle,cardHeader:e.cardHeader}):i.createElement(x.J,{card:e.card,actions:e.actions,isChecking:e.isChecking,transform:e.transform,isCheckingGlobal:e.isCheckingGlobal}),n=e=>(0,a.zG)(e.card,g.C.match({super:(0,a.a9)(o.none),smartPhrases:(0,a.a9)(o.none),sentenceLevelBrandTones:(0,a.a9)(o.none),takeaway:o.some,synfony:o.some,shortenIt:o.some,default:o.some}),o.fromEither,o.chain(a.yR),o.fold((()=>(r("ChecklistBundleCard").error("rendering fallback for card",e.card),i.createElement(i.Fragment,null))),(n=>i.createElement(t,Object.assign({},e,{card:n,isBundle:!0})))));e.Card=e=>u.UI.Node.make((({view:o})=>{const c=o("view"),d=(0,p.cp)(c,e),g=(0,p.Mt)(c,e),w=e=>(r("ChecklistAlertCard").error("rendering fallback for card",e),null),{isChecking:C,isCheckingGlobal:S,transform:x}=f.X.useCardStates(c),k=n=>i.createElement(t,{card:n,actions:e,isChecking:C,isCheckingGlobal:S,transform:x,cardHeader:u.UI.mount(m.r,g),isBundle:!1});return i.createElement(s.F.Fragment,null,c.pipe(E.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type&&e.viewKind===t.viewKind)),A.U((t=>i.createElement(b.b.Card,{miniCard:u.UI.mount(h.m,d),fullCard:y.J.isBundle(t)?i.createElement(I.A.Full,{card:c.pipe(T.h(y.J.isBundle)),actions:e,renderCard:n}):(0,a.zG)(t,f.X.match({super:w,smartPhrases:w,sentenceLevelBrandTones:w,synfony:k,shortenIt:k,takeaway:k,default:k}),l.fS((e=>(r("ChecklistAlertCard").error("Got an unexpected card type",e),i.createElement(i.Fragment,null))))),feedbackForm:i.createElement(v.A.FeedbackForm,{cardData:t,actions:e}),mutedCard:i.createElement(v.A.MutedAlert,{cardData:t,actions:e}),actions:e,card:t,transitionClassMapper:"bundle"===t.viewKind?L:_,removedCard:u.UI.mount(h.m,d)})))))}));const r=(0,c.HP)(d.C8.Logging.getLogger)}(r||(r={}))},34190:(e,t,n)=>{n.d(t,{Hu:()=>o,cp:()=>l,Mt:()=>u});var r=n(57050),i=n(86474),a=n(24713),s=n(77176);const o=(e,t)=>i.Z.composeKnot({root:i.Z.fromSideEffect(r.Q1,e),header:u(e,t)}),l=(e,t)=>i.Z.composeKnot({root:i.Z.fromSideEffect((e=>t.next(e)),e.pipe(a.j("id"))),header:c(e)}),c=e=>i.Z.composeKnot({title:i.Z.fromSideEffect(r.Q1,e.pipe(s.U((e=>Object.assign(Object.assign({},e.itemMeta),{isMinimized:!0}))))),label:i.Z.fromSideEffect(r.Q1,e)}),u=(e,t)=>i.Z.composeKnot({title:i.Z.fromSideEffect(r.Q1,e.pipe(a.j("itemMeta"),s.U((e=>Object.assign(Object.assign({},e),{isMinimized:!1}))))),controls:i.Z.fromSideEffect((e=>t.next(e)),e.pipe(s.U((e=>e.id))))})},30522:(e,t,n)=>{n.d(t,{y:()=>w,r:()=>C});var r=n(27378),i=n(57050),a=n(5739),s=n(77176),o=n(5114),l=n(86474),c=n(63969),u=n(15215),d=n(39210),p=n(7046),m=n(94793),h=n(3656),f=n(54126);const g=({checked:e})=>r.createElement(a.F.Fragment,null,e.pipe(s.U((e=>e?r.createElement(m.JO.ValidationOk,{width:16}):r.createElement(m.JO.ValidationWarning,{width:16}))))),y=l.UI.Node.make((({state:e})=>r.createElement(r.Fragment,null,r.createElement(g,{checked:e.pipe(s.U((({miniChecked:e,checked:t})=>(0,i.zG)(e,o.getOrElse((()=>t))))))}),r.createElement(a.F.div,{className:S.titleContainer},e.pipe(s.U((e=>e.isMinimized?r.createElement(h.XY,{className:S.title},(0,i.zG)(e.miniTitle,o.getOrElse((()=>e.title)))):r.createElement(h.H4,{className:S.title},e.title)))))))),v=l.UI.Node.make((({state:e})=>r.createElement(a.F.Fragment,null,e.pipe(s.U((e=>(0,i.zG)(e.itemMeta.miniLabel,o.fold((()=>(0,i.zG)(u.d.getAlertsCount(e),o.fold(i.gn,(e=>r.createElement(h.x4,{className:S.counter,"data-name":"checklist-item/count"},e))))),(t=>r.createElement(h.x4,{className:(0,i.zG)(e.itemMeta.miniChecked,o.getOrElse((()=>e.itemMeta.checked)))?S.labelChecked:S.labelUnchecked},t)))))))))),b=({left:e,right:t,showActivateButton:n})=>r.createElement(a.F.div,{className:S.headerContainer},e,r.createElement(a.F.div,{className:f.Sc},t),n?r.createElement("div",{className:f.Tu},r.createElement(m.JO.Arrow,{className:S.activeTopIcon}),r.createElement(m.JO.Arrow,{className:S.activeBottomIcon})):null),w=l.UI.Knot.make(l.UI.Grid.make((({slots:e})=>r.createElement(b,{left:e.title,right:e.label,showActivateButton:!0}))),{title:y,label:v}),C=l.UI.Knot.make(l.UI.Grid.make((({slots:e})=>r.createElement(b,{left:e.title,right:e.controls,showActivateButton:!1}))),{title:y,controls:l.UI.Node.make((({notify:e,state:t})=>r.createElement(a.F.Fragment,null,t.pipe(s.U((t=>r.createElement(p.zx.Ghost,{name:"collapse",onClick:e({type:d.C.Type.collapseButtonClick,id:t})},r.createElement(m.JO.Arrow,{direction:m.n4.up}))))))))}),S=c.u.stylesheet({headerContainer:[f.lZ],titleContainer:[f.XE],title:[f.Cx],labelChecked:[f.i0],labelUnchecked:[f.D],counter:[f.e],activeTopIcon:[f.Lf],activeBottomIcon:[f.rx]})},3303:(e,t,n)=>{n.d(t,{m:()=>d});var r=n(27378),i=n(5739),a=n(86474),s=n(63969),o=n(15646),l=n(77176),c=n(30522),u=n(54126);const d=a.UI.Knot.make(a.UI.Grid.make((({slots:e,notify:t,state:n})=>r.createElement(i.F.div,{className:p.mini,onClick:n.pipe(l.U((e=>t({type:o.lY.Type.miniItemClick,id:e}))))},e.header))),{header:c.y}),p=s.u.stylesheet({mini:[u.oH]})},54126:(e,t,n)=>{n.d(t,{TX:()=>o,kX:()=>l,A2:()=>c,NR:()=>u,Lp:()=>d,ht:()=>p,H4:()=>m,lZ:()=>h,Sc:()=>g,XE:()=>y,Cx:()=>v,i0:()=>b,D:()=>w,e:()=>C,Tu:()=>I,Lf:()=>x,rx:()=>k,oH:()=>E});var r=n(90351),i=n(63969),a=n(40219);const s={display:"flex",boxSizing:"border-box",borderRadius:i.u.rem(a.Jr),boxShadow:r.uc.Z100,userSelect:"none",transform:"translateY(0)",background:r.Il.CoreNeutral0,overflow:"hidden"},o=Object.assign(Object.assign({},s),{flexDirection:"column"}),l={padding:`0 ${i.u.rem(.5)} ${i.u.rem(.5)} ${i.u.rem(1)}`},c={transform:"rotate(180deg)"},u={color:r.Il.CoreGreen60},d={color:r.Il.CoreRed50},p={display:"inline-block"},m={marginTop:i.u.rem(.5)},h={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:i.u.rem(2.5),width:i.u.percent(100),padding:`0 ${i.u.rem(.5)} 0 0`,boxSizing:"border-box",position:"relative"},f="checklistMiniRight",g=i.u.joinClasses([f,i.u.style({display:"flex",alignItems:"center",flexShrink:0,flexGrow:1,alignSelf:"stretch",justifyContent:"flex-end"})]),y={minWidth:0},v={fontSize:i.u.rem(r.xv.BodySize),whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginRight:i.u.rem(.5)},b={color:r.Il.CoreGreen70},w={color:r.Il.CoreRed50},C={color:r.Il.CoreNeutral40,display:"flex",alignItems:"center",justifyContent:"center",width:i.u.rem(1)},S="checklistMiniActivateBtn",I=i.u.joinClasses([S,i.u.style({position:"absolute",right:i.u.rem(.5),width:i.u.rem(1),transform:`translate(${i.u.rem(-.5)})`,opacity:0})]),x={display:"flex",margin:`${i.u.rem(.05)} 0 ${i.u.rem(-1.25)}`,transform:"rotate(180deg)"},k={display:"flex",height:"auto"},E=Object.assign(Object.assign({},s),{cursor:"pointer",$nest:{"&:hover":{background:r.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:i.u.seconds(.2)},[`&:hover .${S}`]:{opacity:1},"&:hover .checklistMiniRight":{opacity:0}}})},92569:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),a=n(5739),s=n(8125),o=n(86474),l=n(90351),c=n(63969),u=n(66896),d=n(87380),p=n(94793),m=n(77176),h=n(57091),f=n(85985);!function(e){e.DefaultCounter=o.UI.Node.make((({state:e})=>i.createElement(a.F.Fragment,null,e.pipe(m.U((({count:e,fontSize:t,lensId:n})=>i.createElement(d.x.OutcomeCounter,{count:e,theme:{counterWrapper:x.get(n),counterContent:I.counterContent},type:"gray",fontSize:t}))))))),e.ZeroCounter=o.UI.Node.make((()=>i.createElement(p.JO.CheckmarkOutcomes,{className:I.zeroCounter}))),e.PlagiarismCounter=o.UI.Node.make((({state:e})=>i.createElement(a.F.Fragment,null,e.pipe(m.U((({count:e,fontSize:t})=>i.createElement(d.x.OutcomeCounter,{count:e,theme:{counterWrapper:I.plagiarismCounterWrapper,counterContent:I.plagiarismCounterContent},suffix:"%",type:"gray",fontSize:t}))))))),e.Component=o.UI.Union.make("kind",{plagiarism:e.PlagiarismCounter,default:e.DefaultCounter,zero:e.ZeroCounter});const t=e=>!u.R.isPlagiarismId(e);e.createLensCounterFlow=(e,n,r)=>o.Z.composeUnion({plagiarism:o.Z.fromSideEffect(s.ZT,n.pipe(m.U((e=>({count:e,fontSize:r}))))),default:o.Z.fromSideEffect(s.ZT,n.pipe(h.a(e.pipe(f.h(t))),m.U((([e,t])=>({count:e,lensId:t,fontSize:r}))))),zero:o.Z.fromSideEffect(s.ZT,null)},(()=>e.pipe(h.a(n),m.U((([e,t])=>({kind:0===t?"zero":e===u.R.SpecialId.Plagiarism?"plagiarism":"default"}))))));const n={fill:c.u.important(l.Il.CoreNeutral0)},r={fill:c.u.important(l.Il.CoreNeutral50)},g={fill:c.u.important(l.Il.CoreRed50)},y={fill:c.u.important(l.Il.CoreBlue50)},v={fill:c.u.important(l.Il.CoreGreen50)},b={fill:c.u.important(l.Il.CorePurple50)},w={fill:c.u.important(l.Il.CoreNeutral50)},C={fill:c.u.important(l.Il.CoreCyan50)},S={fill:l.Il.CoreGreen50,minHeight:0,minWidth:c.u.rem(1)},I=c.u.stylesheet({counterWrapper:[],counterContent:[n],zeroCounter:[S],allAlertsCounter:[r],priorityAlertsCounter:[r],correctnessCounter:[g],clarityCounter:[y],engagementCounter:[v],deliveryCounter:[b],voxCounter:[w],plagiarismCounterWrapper:[C],plagiarismCounterContent:[n,{}]}),x=new Map([[u.R.SpecialId.AllAlerts,I.allAlertsCounter],[u.R.SpecialId.Priority,I.priorityAlertsCounter],[u.R.SpecialId.Correctness,I.correctnessCounter],[u.R.SpecialId.Clarity,I.clarityCounter],[u.R.SpecialId.Engagement,I.engagementCounter],[u.R.SpecialId.Delivery,I.deliveryCounter],[u.R.SpecialId.Vox,I.voxCounter],[u.R.SpecialId.CorrectnessPriority,I.correctnessCounter],[u.R.SpecialId.ClarityPriority,I.clarityCounter],[u.R.SpecialId.EngagementPriority,I.engagementCounter],[u.R.SpecialId.DeliveryPriority,I.deliveryCounter],[u.R.SpecialId.VoxPriority,I.voxCounter]])}(r||(r={}))},40743:(e,t,n)=>{n.d(t,{C:()=>g});var r=n(27378),i=n(40327),a=n(5739),s=n(5114),o=n(86474),l=n(90351),c=n(63969),u=n(40219),d=n(66896),p=n(7046),m=n(24811),h=n(3656),f=n(77176);const g=o.UI.Node.make((({state:e,notify:t})=>r.createElement(a.F.Fragment,null,e.pipe(f.U((({previews:e,disabled:n,activeLensId:o})=>r.createElement(a.F.div,{className:A.lensNavigation},e.map((e=>r.createElement(p.zx.Flat,{name:e.id,key:e.id,className:A.lensButton,active:(0,i.pipe)(o,s.exists((t=>t===e.id))),disabled:n,title:e.description,titleAlign:"bottomCenter",onClick:t({kind:"lensClicked",lens:e})},r.createElement(m.B,{value:e.progress,wrapperClass:A.progressBarWrapper,progressClass:y(e.id)}),r.createElement(h.XY,{className:A.lensButtonText},e.title)))))))))));function y(e){switch(e){case d.R.SpecialId.Correctness:return A.correctnessProgressBar;case d.R.SpecialId.Clarity:return A.clarityProgressBar;case d.R.SpecialId.Engagement:return A.engagementProgressBar;case d.R.SpecialId.Delivery:return A.deliveryProgressBar;case d.R.SpecialId.Vox:return A.voxProgressBar;default:return}}const v={display:"flex",height:c.u.percent(100),justifyContent:"space-between",alignItems:"center"},b={display:"flex",flexDirection:"column",marginRight:c.u.rem(.3125),padding:`${c.u.rem(.375)} ${c.u.rem(.25)} 0`,borderRadius:c.u.rem(u.fx),$nest:{"&:last-child":{marginRight:0},"&:hover:not([data-disabled='true'])":{backgroundColor:l.Il.CoreNeutral10},"&[data-active='true']":{backgroundColor:l.Il.CoreNeutral10,color:l.Il.CoreNeutral90}}},w={textTransform:"uppercase",fontSize:c.u.px(8)},C={width:c.u.rem(2),backgroundColor:l.Il.CoreNeutral20},S={backgroundColor:l.Il.CoreRed50},I={backgroundColor:l.Il.CoreBlue50},x={backgroundColor:l.Il.CoreGreen50},k={backgroundColor:l.Il.CorePurple50},E={backgroundColor:l.Il.CoreNeutral50},A=c.u.stylesheet({lensNavigation:[v],lensButton:[b],lensButtonText:[w],progressBarWrapper:[C],correctnessProgressBar:[S],clarityProgressBar:[I],engagementProgressBar:[x],deliveryProgressBar:[k],voxProgressBar:[E]})},34442:(e,t,n)=>{n.d(t,{H:()=>A});var r=n(27378),i=n(5739),a=n(12187),s=n(19962),o=n(86474),l=n(63969),c=n(40219),u=n(16782),d=n(41398),p=n(66310),m=n(24209),h=n(49708),f=n(85985),g=n(17343),y=n(76974),v=n(13444),b=n(50628),w=n(40151),C=n(2834),S=n(85089),I=n(28043),x=n(85255),k=n(77176),E=n(93508);var A;!function(e){let t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={})),e.Cell=o.UI.Grid.make((({slots:e,state:o,notify:l})=>{const c=new u.t,A=o.pipe(d.M(c),p.w((([e,t])=>e.position.animationInProgress?m.T(h.R(t,"transitionend").pipe(f.h((e=>e.target===t&&"transform"===e.propertyName)),g.h(void 0)),y.of(void 0).pipe(v.g(200))).pipe(b.P()):w.E)),C.b(l({kind:n.completePositionAnimation}))),T=o.pipe(d.M(c),p.w((([e,t])=>e.height.watched?S.YC(t).pipe(f.h((t=>e.height.value!==t.height||!e.height.isValid||t.height>0))):w.E)),I.x(),C.b((({height:e})=>l({kind:n.changePosition,height:e})())));x.P.useSubscriptionTo(m.T(A,T));const _=o.pipe(k.U((e=>e.position.top)),k.U((e=>s.ux.translateY(e))),I.x()),O=o.pipe(k.U((e=>e.layer===t.front?1:0)),I.x()),R=o.pipe(k.U((({position:e})=>e)),I.x(((e,t)=>e.top===t.top)),k.U((({animationInProgress:e})=>e?L.animate:void 0)),E.O(void 0));return r.createElement(i.F.div,Object.assign({},(0,a.Sh)(L.item,R),{style:{transform:_,zIndex:O},mount:e=>{null!==e&&c.next(e)}}),e.item)}))}(A||(A={}));const T={position:"absolute",boxSizing:"border-box",width:l.u.percent(100),contain:"layout"},_={transition:`transform ${l.u.seconds(c.v4/1e3)} linear`},L=l.u.stylesheet({item:[T],animate:[_]})},52249:(e,t,n)=>{if(n.d(t,{A:()=>d}),75==n.j)var r=n(22232);var i=n(86474);if(75==n.j)var a=n(66896);if(75==n.j)var s=n(40018);if(75==n.j)var o=n(85985);if(75==n.j)var l=n(77176);if(75==n.j)var c=n(28043);if(75==n.j)var u=n(15774);function d(e,t,n,d){const p=t.pipe(o.h((e=>e!==a.R.SpecialId.Premium)),l.U((e=>e===a.R.SpecialId.Priority?u.H.LensMode.priority:u.H.LensMode.all)),c.x());return i.Z.fromSideEffect((t=>{switch(t.kind){case u.H.Action.Kind.select:e.events.next({type:"switchToLens",id:t.selected===u.H.LensMode.priority?a.R.SpecialId.Priority:a.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.l$.sidebar});break;default:(0,r.vE)(t.kind)}}),p.pipe(l.U((e=>({ord:"priority"===n?u.H.Order.priorityFirst:u.H.Order.allFirst,layoutMode:d,lensMode:e})))))}},15774:(e,t,n)=>{n.d(t,{H:()=>A});var r=n(27378),i=n(5739),a=n(12187),s=n(22232),o=n(45701),l=n(86474),c=n(30763),u=n(7046),d=n(94793),p=n(16951),m=n(77176),h=n(90351),f=n(63969),g=n(40219),y=n(2040);const v=f.u.style({display:"inline-flex",overflow:"visible",border:`2px solid ${h.Il.CoreNeutral10}`,borderRadius:f.u.rem(g.fx),backgroundColor:h.Il.CoreNeutral10}),b=f.u.joinClasses([f.u.style({padding:`0 ${f.u.rem(.5)} 0 ${f.u.rem(.5)}`,display:"inline-flex",justifyContent:"space-around",textAlign:"center",$nest:{"&:first-child":{marginRight:f.u.px(2)}}}),y.base]),w=f.u.style({fontSize:f.u.rem(h.xv.SmallSize)}),C=f.u.style({width:f.u.rem(2.5)}),S=f.u.style({width:f.u.rem(9.5)}),I=f.u.joinClasses([f.u.style({width:f.u.rem(2.25)}),w]),x=f.u.joinClasses([f.u.style({width:f.u.rem(8.75)}),w]),k=f.u.joinClasses([f.u.style({borderRadius:f.u.rem(g.fx),backgroundColor:h.Il.CoreNeutral0,boxShadow:h.uc.Z100,fontWeight:600,$nest:{"&[data-disabled='true']":{backgroundColor:h.Il.CoreNeutral0}}}),b]),E=f.u.style({display:"inline-flex",width:f.u.rem(1.25),minWidth:0,minHeight:0,fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50,$nest:{"&[data-disabled='true']":{fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50}}});var A;!function(e){let t,n,h;!function(e){e.priority="priority",e.all="all"}(t=e.LensMode||(e.LensMode={})),function(e){let t;!function(e){e.select="select"}(t=e.Kind||(e.Kind={}))}(n=e.Action||(e.Action={})),function(t){t.priorityFirst=o.fromCompare((t=>t===e.LensMode.priority?-1:1)),t.allFirst=o.fromCompare((t=>t===e.LensMode.all?-1:1))}(h=e.Order||(e.Order={})),e.Component=l.UI.Node.make((({state:e,notify:s})=>r.createElement(i.F.div,{key:"feedModeSelector",className:v},e.pipe(m.U((({lensMode:e,layoutMode:i,ord:o})=>[t.all,t.priority].sort(o.compare).map((t=>r.createElement(u.zx,Object.assign({name:`${t}-lens`,key:`${t}-lens`,disabled:e===t,onClick:()=>s({kind:n.Kind.select,selected:t})()},(0,a.Sh)(e===t?k:b,g(t,i))),r.createElement(f,{selected:t}))))))))));const f=({selected:e})=>{const n=r.useContext(c.m.Context).feedModeSelector;switch(e){case t.all:return r.createElement(r.Fragment,null,n.all);case t.priority:return r.createElement(r.Fragment,null,n.priority,r.createElement(p.u,{align:"bottomCenter",title:n.priorityDescription},r.createElement(d.JO.Info,{width:10,className:E})));default:(0,s.vE)(e)}},g=(e,n)=>{switch(e){case t.all:return"compact"===n?I:C;case t.priority:return"compact"===n?x:S;default:(0,s.vE)(e)}}}(A||(A={}))},84317:(e,t,n)=>{n.d(t,{HP:()=>o});var r=n(86474);if(75==n.j)var i=n(92569);if(75==n.j)var a=n(66310);if(75==n.j)var s=n(52249);function o(e,t,n,o,l,c){return r.Z.composeKnot({info:i.A.createLensCounterFlow(t,t.pipe(a.w((e=>l.getLens(e).view("count")))),c),switcher:(0,s.A)(e,t,n,o)})}},89186:(e,t,n)=>{n.d(t,{B:()=>b});var r=n(27378),i=n(5739),a=n(86474),s=n(92569),o=n(7046),l=n(94793),c=n(77176),u=n(15774),d=n(63969),p=n(2040);const m=d.u.style({display:"inline-flex",verticalAlign:"middle",marginRight:d.u.rem(.75),alignItems:"center"}),h=d.u.joinClasses([d.u.style({fontWeight:"bold"}),p.base]),f=d.u.style({minHeight:d.u.rem(1.5)}),g=d.u.style({$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:"transparent"}}}),y=d.u.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),v=d.u.style({marginTop:d.u.rem(.35)});var b;!function(e){let t,n;e.Grid=a.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:m},e.info),e.switcher))),e.GridWithBulkAccept=a.UI.Grid.make((({slots:e})=>r.createElement("div",{className:y},r.createElement("span",{className:v},e.headerContent),e.bulkAccept))),function(e){let t;!function(e){let t;!function(e){e.switchBack="switchBack"}(t=e.Kind||(e.Kind={}))}(t=e.Action||(e.Action={})),e.Component=a.UI.Node.make((({state:e,notify:n})=>r.createElement(i.F.Fragment,null,e.pipe(c.U((({lensTitle:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:h},e),r.createElement(o.zx.Flat,{name:"switch-back",title:"Back to all suggestions",className:g,onClick:()=>n({kind:t.Kind.switchBack})()},r.createElement(l.JO.Close,{className:f})))))))))}(t=e.LensFilter||(e.LensFilter={})),function(e){e.Component=a.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:m},e.counter),e.filter)))}(n||(n={})),e.DefaultHeader=a.UI.Knot.make(e.Grid,{info:s.A.Component,switcher:u.H.Component}),e.LensInfoComponent=a.UI.Knot.make(n.Component,{counter:s.A.Component,filter:t.Component}),e.WithFilterHeader=a.UI.Knot.make(e.Grid,{info:e.LensInfoComponent,switcher:u.H.Component}),e.Component=a.UI.Union.make("kind",{withFilter:e.WithFilterHeader,withoutFilter:e.DefaultHeader})}(b||(b={}))},92644:(e,t,n)=>{if(n.d(t,{i:()=>m}),75==n.j)var r=n(22232);var i=n(86474);if(75==n.j)var a=n(66896);if(75==n.j)var s=n(40018);if(75==n.j)var o=n(24713);if(75==n.j)var l=n(28043);if(75==n.j)var c=n(85985);if(75==n.j)var u=n(77176);if(75==n.j)var d=n(57091);if(75==n.j)var p=n(87667);function m(e,t,n){const m=e.getLens(a.R.SpecialId.AllAlerts).pipe(o.j("count"),l.x()),h=e.getLens(a.R.SpecialId.Priority).pipe(o.j("count"),l.x()),f=n.pipe(c.h((e=>e!==a.R.SpecialId.Premium)),u.U((e=>e===a.R.SpecialId.Priority?"priority":"all")),l.x());return i.Z.fromSideEffect((e=>{switch(e){case p.n.Actions.switchToAll:t.events.next({type:"switchToLens",id:a.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.l$.sidebar});break;case p.n.Actions.switchToPriority:t.events.next({type:"switchToLens",id:a.R.SpecialId.Priority,focusFirst:!1,actionSource:s.l$.sidebar});break;case p.n.Actions.openSetGoals:t.events.next({type:"setGoals"});break;default:(0,r.vE)(e)}}),f.pipe(d.a(m,h,((e,t,n)=>({allAlertsCount:t,priorityAlertsCount:n,selectedLens:e})))))}},87667:(e,t,n)=>{n.d(t,{n:()=>r});var r,i=n(27378),a=n(38983),s=n(5739),o=n(86474),l=n(90351),c=n(63969),u=n(40219),d=n(30763),p=n(7046),m=n(95286),h=n(94793),f=n(77176);!function(e){let t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=o.UI.Node.make((({state:e,notify:n})=>{const r=i.useContext(d.m.Context).priorityLens,o=a.h.create(!1);return i.createElement(s.F.Fragment,null,e.pipe(f.U((({allAlertsCount:e,priorityAlertsCount:a,selectedLens:l})=>{const c="priority"===l,u=c?a:e;return i.createElement(m.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:T.dropdownContainer,dropdownList:T.dropdownContent},onVisibilityChange:e=>o.set(e),label:i.createElement(s.F.Fragment,null,o.pipe(f.U((e=>i.createElement("div",{className:e?T.labelOpened:T.labelClosed},c?r.prioritySuggestion:r.allSuggestion,u>0&&i.createElement("span",{className:T.alertCount}," ","· ",u," "),i.createElement(h.JO.Arrow,{direction:e?h.n4.up:h.n4.down,className:T.labelArrow}))))))},i.createElement(p.zx.Flat,{name:"priorityAlerts",className:c?T.boldLensButton:T.lensButton,onClick:n(t.switchToPriority)},i.createElement(h.JO.Star,{width:12}),r.prioritySuggestion,c?i.createElement(h.JO.Yes,{className:T.checkMarkIcon}):null),c&&a===e?i.createElement("div",{className:T.disabledLensButton},i.createElement(h.JO.Formatting.BulletList,{width:21}),r.disabledAllSuggestion):i.createElement(p.zx.Flat,{name:"allAlerts",className:c?T.lensButton:T.boldLensButton,onClick:n(t.switchToAll)},i.createElement(h.JO.Formatting.BulletList,{width:21}),r.allSuggestion,c?null:i.createElement(h.JO.Yes,{className:T.checkMarkIcon})),i.createElement("div",{className:T.separator}),i.createElement("div",{className:T.description},i.createElement(h.JO.Info,{className:T.descriptionIcon}),i.createElement("div",null,r.description)))}))))}))}(r||(r={}));const g={display:"flex",width:c.u.rem(16)},y={zIndex:u.FY,marginTop:0,fontSize:c.u.rem(.875),lineHeight:c.u.rem(1.3125)},v={display:"flex",boxSizing:"border-box",padding:`${c.u.rem(.1875)} ${c.u.rem(.25)} ${c.u.rem(.1875)} ${c.u.rem(.25)}`,height:c.u.rem(1.5),borderRadius:c.u.rem(u.fx),color:l.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:c.u.rem(.025),fontSize:c.u.rem(.625),lineHeight:c.u.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:l.Il.CoreNeutral20}}},b={backgroundColor:l.Il.CoreNeutral10},w={color:l.Il.CoreNeutral50,whiteSpace:"pre"},C={minWidth:c.u.rem(1),minHeight:c.u.rem(1),marginLeft:c.u.rem(.5625)},S={padding:`0 ${c.u.rem(.5)}`,color:l.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},I={display:"flex",padding:`0 ${c.u.rem(.5)}`,height:c.u.rem(2),color:l.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},x={margin:`${c.u.rem(.5)} ${c.u.rem(1)}`,width:`calc(100% - ${c.u.rem(2)})`,height:c.u.px(1),backgroundColor:l.Il.CoreNeutral20},k={display:"flex",padding:`0 ${c.u.rem(.5)} ${c.u.rem(.5)} ${c.u.rem(.5)}`,fontSize:c.u.rem(.75),lineHeight:c.u.rem(1.125),alignItems:"center"},E={marginBottom:"auto",minHeight:c.u.rem(1.25)},A={color:l.Il.CoreBlue60,cursor:"pointer"},T=c.u.stylesheet({dropdownContainer:[g],dropdownContent:[y],labelClosed:[v],labelOpened:[v,b],alertCount:[w],labelArrow:[C],lensButton:[S],disabledLensButton:[I],boldLensButton:[S,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[x],description:[k],descriptionIcon:[E],descriptionLink:[A]})},22621:(e,t,n)=>{n.d(t,{R:()=>ce});var r=n(27378),i=n(5739),a=n(86474),s=n(49313),o=n(40327),l=n(38983),c=n(12187),u=n(5114),d=n(71284),p=n(30763),m=n(7046),h=n(77797),f=n(29245),g=n(3656),y=n(90351),v=n(63969),b=n(24588),w=n(40219),C=n(94793);const S=({upgradeAction:e,size:t,title:n,className:i})=>{const a=r.useContext(p.m.Context).goPremium,s=n||a;return r.createElement(m.zx,Object.assign({name:"upgrade"},(0,c.Sh)(i,"big"===t?F.baseBig:"link"===t?F.link:F.baseSmall),{onClick:e}),"link"===t?r.createElement(C.JO.PaidLink,{width:14,className:F.linkIcon}):r.createElement(C.JO.Paid,{className:"big"===t?F.bigIcon:F.icon}),s)},I={background:y.Il.CoreGreen60,borderRadius:v.u.rem(w.fx),boxShadow:`0 2px 5px ${v.u.color(b.UE).fade(.35).toRGBA().toString()}`,color:y.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:v.u.rem(w.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},x={padding:`0 ${v.u.rem(3)} 0 ${v.u.rem(2)}`,fontSize:v.u.rem(.8125),lineHeight:v.u.rem(3)},k={padding:`0 ${v.u.rem(2)} 0 ${v.u.rem(.5)}`,fontSize:v.u.rem(.6875),lineHeight:v.u.rem(2)},E={background:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},A={padding:`0 ${v.u.rem(3)} 0 ${v.u.rem(2)}`,fontSize:v.u.rem(.8125),lineHeight:v.u.rem(3)},T={padding:`0 ${v.u.rem(2)} 0 ${v.u.rem(.5)}`,fontSize:v.u.rem(.6875),lineHeight:v.u.rem(2)},_={fill:y.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:y.Il.CoreNeutral0}}},L={marginRight:v.u.rem(.2)},O={color:y.Il.CoreGreen60,fontSize:v.u.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},R={color:y.Il.CoreGreen60},P={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},M={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},F=v.u.stylesheet({base:[I],baseBig:[I,x],baseSmall:[I,k],baseUpHookRedesign:[I,E],baseBigUpHookRedesign:[x,E,A],baseSmallUpHookRedesign:[k,E,T],icon:[_],bigIcon:[_,L],link:[O],linkUpHookRedesign:[O,R],linkIconUpHookRedesign:[P],linkIcon:[M]});var N=n(85255),D=n(2834),$=n(57050);const B=.8125,U={display:"flex",flexDirection:"column",maxHeight:"90vh",width:v.u.rem(41.5),backgroundColor:y.Il.CoreNeutral0,textAlign:"left"},j={padding:`${v.u.rem(1.125)} ${v.u.rem(2)} ${v.u.rem(1)}`,paddingBottom:v.u.rem(1)},W={paddingBottom:0,backgroundColor:y.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${v.u.rem(4)})`,height:v.u.px(1),background:y.Il.CoreNeutral20,content:"''"}}},G={display:"block",margin:`${v.u.rem(B)} 0`,color:y.Il.CoreNeutral90,fontWeight:y.xv.SmallLightWeight,lineHeight:v.u.rem(1.5)},H={minHeight:v.u.rem(4)},z={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:v.u.rem(1.25),borderBottom:`1px solid ${y.Il.CoreNeutral20}`}}},Y="setGoalsToneButton",V={marginBottom:v.u.rem(-.5),maxWidth:v.u.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{[`& > .${Y}`]:{margin:`0 0 ${v.u.rem(.5)}`,marginLeft:v.u.important(0),$nest:{"&:not(:last-child)":{marginRight:v.u.rem(.5)}}}}},q={width:v.u.rem(7),textTransform:"capitalize",lineHeight:v.u.rem(2)},Z={marginTop:v.u.rem(B)},X={margin:`0 0 ${v.u.rem(1.5)} ${v.u.rem(7)}`},J={margin:`0 0 ${v.u.rem(1.5)} ${v.u.rem(7)}`},K={display:"flex",width:v.u.percent(100),justifyContent:"space-between"},Q={color:y.Il.CoreNeutral90,fontWeight:300,fontSize:v.u.rem(.8125)},ee=v.u.stylesheet({wrapper:[U],modalBody:[j],modalHeader:[W],itemDescription:[G],modalFooter:[H],row:[z],toneButtons:[V],rowHeader:[q],extraContent:[Z],title:[X],description:[J],image:[{position:"absolute"}],footerWrapper:[K],checkboxText:[Q]}),te=({name:e,items:t,sticky:n,theme:i={},extraContent:a,children:s})=>r.createElement("div",{className:ee.row},r.createElement("div",null,r.createElement(g.H3,{className:ee.rowHeader},e),a),r.createElement("div",null,r.createElement(m.zx.Group,{sticky:n,className:i.buttonsGroup},t.map((t=>r.createElement(m.zx.White,Object.assign({className:i.button,name:`context-${e}-${t.key}`},t))))),r.createElement(g.x4,{className:ee.itemDescription},s))),ne=({items:e,current:t,shouldDisable:n,itemTitle:r=$.yR})=>({sticky:!0,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>t.set(e),disabled:n&&n(e),children:r(e)})))}),re=({items:e,current:t},n)=>({items:e.map((e=>({key:e,active:t.view((t=>(0,o.pipe)(t,u.exists((t=>t.has(e)))))),onClick:()=>t.modify((t=>{const n=(0,o.pipe)(t,u.fold((()=>new Set),(e=>new Set(e))));return n.has(e)?n.delete(e):n.add(e),u.some(n)})),children:n(e)})))}),ie=({blocks:e,features:t,showOnLoad:n,close:i,upgrade:a,reset:o,showOnLoadChanged:l})=>{const c=r.useContext(d.a.Context);return r.createElement(s.u_,{className:ee.wrapper},r.createElement(s.u_.Header,{className:ee.modalHeader},r.createElement(se,null)),r.createElement(s.u_.Body,{name:"goalsBody",className:ee.modalBody},r.createElement(ae,{features:t,upgradeAction:a,blocks:e})),r.createElement(s.u_.Footer,{className:ee.modalFooter},r.createElement(oe,{supportsSetGoalsLoader:!t.demoMode&&c.has(d.a.Flag.supportsSetGoalsLoader),onDone:i,reset:o,showOnLoad:n,showOnLoadChanged:l})))},ae=({blocks:e,features:t,upgradeAction:n})=>{const a=r.useContext(p.m.Context).goals,{audience:s,formality:l,domain:c,tone:d,intent:m}=e;return r.createElement(r.Fragment,null,r.createElement(te,Object.assign({name:"audience"},ne(s)),s.current.view((t=>t&&a.sections.audience[t]((0,o.pipe)(e.audience.default,u.exists((e=>e===t))))))),r.createElement(te,Object.assign({name:"formality"},ne(l)),l.current.view((e=>e?a.sections.formality[e]:""))),r.createElement(te,Object.assign({name:"domain"},ne(Object.assign(Object.assign({},c),{itemTitle:e=>"mail"===e?"email":e})),{extraContent:r.createElement(i.F.div,{className:ee.extraContent},t.isFree?r.createElement(S,{size:"link",upgradeAction:n}):null)}),c.current.view((e=>t.isFree?a.sections.domain.free:e?a.sections.domain[e]:""))),r.createElement(te,Object.assign({name:"tone",theme:{buttonsGroup:ee.toneButtons,button:Y}},re(d,(e=>r.createElement(f.d,{key:e},a.sections.tone.options[e])))),a.sections.tone.experimental),r.createElement(te,Object.assign({name:"intent"},re(m,(e=>a.sections.intent.options[e]))),a.sections.intent.experimental))},se=()=>{const e=r.useContext(p.m.Context).goals;return r.createElement(r.Fragment,null,r.createElement(le,null),r.createElement(g.H1,{className:ee.title},e.title),r.createElement(g.XY,{className:ee.description},e.header))},oe=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:n,reset:i,onDone:a})=>{const s=r.useContext(p.m.Context),o=l.h.create(t);return N.P.useSubscriptionTo(o.pipe(D.b(n))),r.createElement("div",Object.assign({},(0,c.Sh)(e&&ee.footerWrapper)),e&&r.createElement(h.Ys,{checked:o,name:"set-goals"},r.createElement(g.x4,{className:ee.checkboxText},s.goals.footer.showModalOnStart)),r.createElement(m.zx.Group,null,r.createElement(m.zx.Ghost,{name:"reset",onClick:i},s.goals.footer.reset),r.createElement(m.zx.Primary,{name:"closeSetContext",onClick:a},s.done)))},le=()=>r.createElement("svg",{className:ee.image,width:"69",height:"80",viewBox:"0 0 69 80"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),r.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),r.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),r.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),r.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),r.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})));var ce,ue=n(50628),de=n(77176);!function(e){let t;e.Modal=a.UI.Node.make((({state:e,notify:n})=>(N.P.useSubscriptionTo(e.pipe(ue.P(),D.b((e=>n({kind:t.open,source:e.source})())))),r.createElement(i.F.Fragment,null,e.pipe(de.U((e=>{const i=n({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return r.createElement(s.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:i},r.createElement(ie,{blocks:e.blocks,features:e.features,close:i,upgrade:n({kind:t.upgrade}),reset:n({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:e=>n({kind:t.showOnLoadChanged,value:e})()}))}))))))),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(ce||(ce={}))},39321:(e,t,n)=>{n.d(t,{q:()=>Te});var r=n(27378),i=n(5739),a=n(22232),s=n(86474),o=n(30763),l=n(25970),c=n(7046),u=n(49313);const d=()=>r.createElement("svg",{width:"128",height:"177"},r.createElement("defs",null,r.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),r.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),r.createElement("mask",{id:"b",fill:"#fff"},r.createElement("use",{xlinkHref:"#a"})),r.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),r.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),r.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),r.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),r.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})));var p,m=n(42329),h=n(3656),f=n(77176),g=n(12187),y=n(76024);!function(e){function t(e,t){var n=t/60,r=y.nH(e/n);return r.s=r.h>0&&r.m>10?0:Math.floor(r.s),r}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(p||(p={}));var v=n(18208),b=n(5114),w=n(90351),C=n(63969),S=n(24588),I=n(40219),x=n(94793),k=n(40327),E=n(38983),A=n(2844),T=n(66310),_=n(93508),L=n(16118),O=n(76974),R=n(13444);const P=e=>{const{score:t,documentIsEmpty:n,sidebarOpen:a=E.h.create(!0),successIcon:s,progressIcon:o,zeroIcon:l=null}=e,c=t.pipe(f.U(b.map((e=>e.rank)))),u=A.aj(t,n,((e,t)=>(0,k.pipe)(e,b.fold((()=>!1),(({rank:e})=>100===e&&!t))))),d=a.pipe(T.w((e=>e?c.pipe(_.O(b.none),L.G(),T.w((([e,t])=>(0,k.pipe)(t,b.fold((()=>O.of(l)),(t=>u.pipe(_.O(!1),L.G(),T.w((([n,r])=>r?O.of(s):(0,k.pipe)(e,b.filter((()=>!n)),b.fold((()=>O.of(o(t)).pipe(R.g(1),_.O(o(0)))),(()=>O.of(o(t)))))))))))))):O.of(null))),_.O(null));return r.createElement(i.F.Fragment,null,d)};var M=n(98403);function F({value:e,className:t,leftCustomClass:n,rightCustomClass:a}){const s=E.h.create(!1);requestAnimationFrame((()=>requestAnimationFrame((()=>s.set(!0)))));const o=A.aj(M.Dx(e),s,((e,t)=>t?`${Math.max(5,Math.abs(e-50))}%`:0)),l=(e,t,n)=>M.Dx(e).pipe(f.U((e=>e<50?t:n)));return r.createElement(i.F.div,Object.assign({},(0,g.Sh)((e=>M.Dx(e).pipe(f.U((e=>e<50?U.leftSideWrapper:U.rightSideWrapper))))(e),t)),r.createElement(i.F.div,Object.assign({},(0,g.Sh)(l(e,U.leftSideProgress,U.rightSideProgress),n&&a&&l(e,n,a)),{style:{width:o}})))}!function(e){e.Label=({value:e,className:t})=>{const n=r.useContext(o.m.Context).performance,i=e>66?n.aboveAverage:e>50?n.average:n.belowAverage;return r.createElement(h.x4,{className:t},i)}}(F||(F={}));const N={position:"relative",zIndex:1,display:"flex",width:C.u.percent(100),height:C.u.rem(.25),borderRadius:C.u.rem(I.fx)},D={height:C.u.percent(100),backgroundColor:S.FW,transition:"width .8s ease-in-out 0s"},$={marginRight:C.u.percent(50),borderTopLeftRadius:C.u.rem(.25),borderBottomLeftRadius:C.u.rem(.25)},B={marginLeft:C.u.percent(50),borderTopRightRadius:C.u.rem(.25),borderBottomRightRadius:C.u.rem(.25)},U=C.u.stylesheet({wrapper:[N],leftSideWrapper:[N,{justifyContent:"flex-end"}],rightSideWrapper:[N,{justifyContent:"flex-start"}],progress:[D],leftSideProgress:[D,$],rightSideProgress:[D,B]});var j=n(63847);const W={display:"flex",flexDirection:"column",maxHeight:"90vh",width:C.u.rem(32),height:C.u.rem(41),background:w.Il.CoreNeutral0},G={padding:`${C.u.rem(2.75)} ${C.u.rem(1)} 0 ${C.u.rem(2)}`,minHeight:C.u.rem(5.1),height:C.u.rem(5.1),backgroundColor:w.Il.CoreNeutral0},H={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.3),borderBottom:`1px solid ${S.xO}`},z={padding:`0 ${C.u.rem(1)} ${C.u.rem(1)} ${C.u.rem(2)}`},Y={padding:`0 ${C.u.rem(1.9)}`,minHeight:C.u.rem(4),height:C.u.rem(4)},V={position:"absolute",top:C.u.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},q={display:"flex",flexDirection:"column",marginTop:C.u.rem(7.15),marginBottom:C.u.rem(2),paddingRight:C.u.rem(1),alignItems:"center"},Z={wordSpacing:C.u.rem(.05),fontSize:C.u.rem(.875),lineHeight:C.u.rem(1.5)},X={padding:`${C.u.rem(1.3)} ${C.u.rem(2.6)}`,textAlign:"center"},J=C.u.prefixedStylesheet("statistics",{wrapper:[W],modalHeader:[G],modalHeaderUnderline:[H],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[z],modalFooter:[Y],loader:[V],zeroStateContainer:[q],performanceText:[Z],zeroStateText:[Z,X]});var K;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(K||(K={}));const Q=e=>{switch(e){case K.number:case K.percentage:return Ee.numberRowData;case K.time:return Ee.timeRowData;default:return(0,a.vE)(e)}},ee=({type:e,value:t,info:n,children:i,dataName:s})=>r.createElement("div",{className:Ee.row,"data-name":s},r.createElement("div",{className:Q(e)},r.createElement("div",{className:Ee.metricTitle},i),r.createElement("div",{className:Ee.metric},((e,t)=>{switch(e){case K.number:return(Math.round(10*t)/10).toLocaleString();case K.time:return y.g2(t);case K.percentage:return Math.round(t)+"%";default:return(0,a.vE)(e)}})(e,t))),n&&r.createElement(c.RZ,{title:n})),te=({state:e})=>{const t=r.useContext(o.m.Context).performance,{stats:n,score:a,documentIsEmpty:s}=e;return r.createElement(r.Fragment,null,r.createElement("section",{className:Ee.titleSection},r.createElement("div",{className:Ee.titleColumns},r.createElement(i.F.div,Object.assign({},(0,g.Sh)(J.performanceText,Ee.headerDescription)),100===a.rank?t.score100:t.scoreUnder100(a.rank)),r.createElement(P,{score:O.of(b.some(a)),documentIsEmpty:O.of(s),successIcon:r.createElement(x.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:Ee.checkmark}),progressIcon:e=>r.createElement(j.P,{key:"modal-performance-progress",colorType:j.P.ColorType.royalBlue,fontSize:j.P.FontSize.small,percentage:e,theme:Ae})}))),r.createElement("section",{className:Ee.wordCountSection},r.createElement(h.H2,{className:Ee.sectionHeaderUnderline},t.wordCount),r.createElement("div",{className:Ee.wordCountColumns},r.createElement("div",{className:Ee.firstColumn},r.createElement(ee,{type:K.number,value:Math.max(n.chars-1,0)},t.characters),r.createElement(ee,{type:K.number,value:n.words},t.words),r.createElement(ee,{type:K.number,value:n.sentences},v._6(n.sentences,t.sentence,t.sentences))),r.createElement("div",{className:Ee.secondColumn},r.createElement(ee,{type:K.time,value:p.calculateReadingTime(n.words)},t.readingTime),r.createElement(ee,{type:K.time,value:p.calculateSpeakingTime(n.words)},t.speakingTime)))),r.createElement("section",{className:Ee.readabilitySection},r.createElement("div",{className:Ee.sectionHeaderWrapper},r.createElement(h.H2,null,t.readability),r.createElement(h.CL,null,t.sectionTitleDescription)),r.createElement("div",{className:Ee.readabilityColumns},r.createElement("div",{className:Ee.firstColumn},r.createElement(ee,{type:K.number,value:n.wordLength},t.wordLengthTitle),r.createElement(ee,{type:K.number,value:n.sentenceLength},t.sentenceLengthTitle),r.createElement(ee,{type:K.number,value:n.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore)),r.createElement("div",{className:Ee.secondColumn},r.createElement("div",{className:Ee.row},r.createElement(F,{value:n.wordLengthIndex,className:Ee.progressBar,leftCustomClass:Ee.leftProgress,rightCustomClass:Ee.rightProgress}),r.createElement(F.Label,{value:n.wordLengthIndex,className:Ee.progressLabel})),r.createElement("div",{className:Ee.row},r.createElement(F,{value:n.sentenceLengthIndex,className:Ee.progressBar,leftCustomClass:Ee.leftProgress,rightCustomClass:Ee.rightProgress}),r.createElement(F.Label,{value:n.sentenceLengthIndex,className:Ee.progressLabel})),r.createElement("div",{className:Ee.verticalPillar}))),r.createElement(h.CL,{className:Ee.readabilityDescr},n.readabilityDescription)),r.createElement("section",null,r.createElement("div",{className:Ee.sectionHeaderWrapper},r.createElement(h.H2,null,t.vocabulary),r.createElement(h.CL,null,t.sectionTitleDescription)),r.createElement("div",{className:Ee.vocabularyColumns},r.createElement("div",{className:Ee.firstColumn},r.createElement(ee,{type:K.percentage,value:n.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle),r.createElement(ee,{type:K.percentage,value:n.rareWords,info:t.rareWords},t.rareWordsTitle)),r.createElement("div",{className:Ee.secondColumn},r.createElement("div",{className:Ee.row},r.createElement(F,{value:n.uniqueWords,className:Ee.progressBar,leftCustomClass:Ee.leftProgress,rightCustomClass:Ee.rightProgress}),r.createElement(F.Label,{value:n.uniqueWords,className:Ee.progressLabel})),r.createElement("div",{className:Ee.row},r.createElement(F,{value:n.rareWords,className:Ee.progressBar,leftCustomClass:Ee.leftProgress,rightCustomClass:Ee.rightProgress}),r.createElement(F.Label,{value:n.rareWords,className:Ee.progressLabel})),r.createElement("div",{className:Ee.verticalPillar})))))},ne={marginBottom:C.u.rem(2.4)},re={display:"flex",marginTop:C.u.rem(.9),marginRight:C.u.rem(1),justifyContent:"space-between"},ie={marginBottom:C.u.rem(1.5)},ae={display:"flex",marginTop:C.u.rem(.8)},se={marginBottom:C.u.rem(2.4)},oe={display:"flex",marginTop:C.u.rem(.8)},le={display:"flex",marginTop:C.u.rem(.8)},ce={flexBasis:C.u.percent(50)},ue={position:"relative",paddingLeft:C.u.rem(.5),flexBasis:C.u.percent(50)},de={display:"flex",height:C.u.rem(2),alignItems:"center"},pe={display:"flex",justifyContent:"space-between"},me={width:C.u.rem(10),fontFeatureSettings:`${I.Q9}, ${I.g_}`},he={width:C.u.rem(13)},fe={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.5),borderBottom:`1px solid ${S.xO}`},ge={width:C.u.percent(80),whiteSpace:"pre-line"},ye={display:"inline-block",color:w.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},ve={display:"inline-block",color:w.Il.CoreNeutral90,fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},be={width:C.u.rem(3.2),height:C.u.rem(3.2),fontWeight:"bold"},we={width:C.u.rem(6),backgroundColor:S.xO},Ce={marginLeft:C.u.rem(1.125)},Se={backgroundImage:S.BZ},Ie={backgroundImage:S.Xd},xe={display:"block",paddingTop:C.u.rem(.5)},ke={position:"absolute",top:C.u.rem(.5),left:C.u.rem(3.5),width:C.u.rem(.0625),height:C.u.rem(3),backgroundColor:S.jj},Ee=C.u.stylesheet({titleSection:[ne],titleColumns:[re],wordCountSection:[ie],wordCountColumns:[ae],readabilitySection:[se],readabilityColumns:[oe],vocabularyColumns:[le],firstColumn:[ce],secondColumn:[ue],row:[de],rowData:[pe],numberRowData:[pe,me],timeRowData:[pe,he],sectionHeaderUnderline:[fe],sectionHeaderWrapper:[fe,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[ge],metric:[ye],metricTitle:[ve],checkmark:[{alignItems:"center"}],circleProgressBar:[be],progressBar:[we],progressLabel:[Ce],leftProgress:[Se],rightProgress:[Ie],readabilityDescr:[xe],verticalPillar:[ke]}),Ae={radialProgressBar:Ee.circleProgressBar};var Te;!function(e){let t;e.ModalView=s.UI.Grid.make((({slots:n,state:i,notify:a})=>{const s=a({kind:t.close});return r.createElement(u.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:s},r.createElement(e.ModalContent,{state:i,downloadButton:n.downloadButton,onClose:s}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=({state:t,downloadButton:n,onClose:i})=>r.createElement(u.u_,{className:J.wrapper},r.createElement(u.u_.Header,{className:J.modalHeader},r.createElement(e.Header,{state:t})),r.createElement(u.u_.Body,{name:"performanceBody",className:J.modalBody,wrapperClassName:t.pipe(f.U((e=>e.type===l.g.State.Type.EMPTY?J.modalEmpty:J.modalReady)))},r.createElement(e.Body,{state:t})),r.createElement(u.u_.Footer,{className:J.modalFooter},r.createElement(g,{downloadButton:n,onClose:i})));const n=()=>{const e=r.useContext(o.m.Context);return r.createElement("div",{className:J.zeroStateContainer},r.createElement(d,null),r.createElement("div",{className:J.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=({state:e})=>{const t=r.useContext(o.m.Context);return r.createElement(i.F.Fragment,null,e.pipe(f.U((e=>r.createElement(h.H2,{key:"statisticsHeader",className:e.type===l.g.State.Type.READY?J.modalHeaderUnderline:""},t.performance.title)))))};const p=()=>r.createElement(m.$,{size:64,className:J.loader,variation:"blue"});e.Body=({state:e})=>r.createElement(i.F.Fragment,null,e.pipe(f.U((e=>{switch(e.type){case l.g.State.Type.EMPTY:return null;case l.g.State.Type.LOADING:case l.g.State.Type.ERROR:return r.createElement(p,{key:"statisticsLoading"});case l.g.State.Type.SHORT_CONTENT:return r.createElement(n,{key:"statisticsEmpty"});case l.g.State.Type.READY:return r.createElement(te,{key:"statisticsContent",state:e});default:return(0,a.vE)(e)}}))));const g=({downloadButton:e,onClose:t})=>r.createElement(r.Fragment,null,e,r.createElement(c.zx.Primary,{name:"close-stats",onClick:t},"Close"))}(Te||(Te={}))},89379:(e,t,n)=>{n.d(t,{wK:()=>m,JT:()=>h,hM:()=>f});var r=n(40327),i=n(5114),a=n(8125),s=n(22232),o=n(93756),l=n(86474),c=n(27125),u=n(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}function p(e){switch(e){case c.g.SuccessType.applied:case c.g.SuccessType.large:return"growComplete";default:return"growStart"}}function m(e,t){return()=>e.pipe(u.U((e=>{const n=((e,t)=>{const n=t.successLens;switch(e){case c.g.SuccessType.zero:return n.emptyText;case c.g.SuccessType.small:return n.smallText;case c.g.SuccessType.large:return n.largeText;case c.g.SuccessType.applied:return{title:n.fixedText.titles[(0,a.TN)(9)]};default:return(0,s.vE)(e)}})(e,t);return{kind:p(e),caption:i.some(d(n))}})))}function h(e){return()=>e.pipe(u.U((e=>({kind:p(e),caption:i.none}))))}function f(e){return l.Z.animatingFlow(e,(e=>(0,r.pipe)(e,i.fold((()=>i.some(o.F2("fadein"))),(()=>i.some(o.Hk("fadeout","fadein")))))))}},28378:(e,t,n)=>{n.d(t,{q:()=>_});var r=n(27378),i=n(40327),a=n(5739),s=n(83078),o=n(86474),l=n(90351),c=n(63969),u=n(3656),d=n(77176);const p=o.UI.Node.make((()=>r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),m=o.UI.Node.make((()=>r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),h=o.UI.Node.make((({view:e})=>r.createElement("div",{"data-name":"success-lens-text",className:A.newSuccessText},r.createElement(u.H4,{key:"title"},e("title")),r.createElement("div",{className:A.newSuccessDescription},r.createElement(a.F.div,{className:A.newSuccessDescriptionText},(0,i.pipe)(e("firstLine"),d.U(s.QP))))))),f=o.UI.Union.asOption(h),g=o.UI.Grid.make((({slots:e})=>r.createElement(a.F.div,{className:A.newSuccessContainer},e.image,e.caption))),y=o.UI.Knot.make(g,{image:p,caption:f}),v=o.UI.Knot.make(g,{image:m,caption:f}),b=o.UI.Union.make("kind",{growStart:y,growComplete:v}),w=c.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),C=c.u.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),S={animation:`${w} 300ms linear forwards`},I={position:"absolute",top:0,width:c.u.percent(100),animation:`${C} 200ms linear forwards`},x={width:c.u.percent(100),marginTop:c.u.rem(.5)},k={marginTop:c.u.rem(.25)},E={fontSize:c.u.rem(l.xv.NewSuccessDescriptionSize),color:l.Il.CoreNeutral50,letterSpacing:l.xv.NewSuccessDescriptionLetterSpacing,lineHeight:c.u.rem(l.xv.NewSuccessDescriptionLineHeight),fontWeight:l.xv.NewSuccessDescriptionWeight},A=c.u.stylesheet({success_fadein:[S],success_fadeout:[I],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[x],newSuccessDescription:[k],newSuccessDescriptionText:[E]}),T=o.UI.Transition.make({fadein:A.success_fadein},{fadeout:A.success_fadeout}),_=o.UI.Animated.make(T,b)},38819:(e,t,n)=>{n.d(t,{r:()=>g});var r=n(27378),i=n(40327),a=n(5114),s=n(86474),o=n(63969),l=n(61903),c=n(30763),u=n(94793),d=n(3656);const p=s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:w.grid},r.createElement("div",{className:w.iconWrapper},e.icon),r.createElement("div",{className:w.titleWrapper},e.title),r.createElement("div",{className:w.bottomWrapper},e.bottom)))),m=s.UI.Node.make((()=>{const e=r.useContext(c.m.Context).successLens.paidView;return r.createElement(d.H4,null,e.title)})),h=s.UI.Node.make((()=>r.createElement(u.JO.GreenOk,{width:32}))),f=s.UI.Knot.make(p,{icon:h,title:m,bottom:s.UI.Union.make("kind",{[l.n.State.hidden]:s.UI.Node.empty,[l.n.State.expanded]:l.n.TogglableExpandedPanel})}),g=(0,i.pipe)(s.UI.squash(f),s.UI.contramapState((e=>(0,i.pipe)(e,a.fold((()=>({bottom:{kind:l.n.State.hidden}})),(e=>({bottom:{kind:l.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),y={marginTop:o.u.rem(3.5)},v={marginTop:o.u.rem(1.375)},b={marginTop:o.u.rem(2.675)},w=o.u.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[v],bottomWrapper:[b]})},70023:(e,t,n)=>{n.d(t,{d:()=>d});var r=n(57050),i=n(5114),a=n(22232),s=n(77176),o=n(60797),l=n(93508),c=n(66310),u=n(61903);function d(e){return(0,r.ls)(s.U((e=>{switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,a.vE)(e.action)}case u.n.State.minimized:switch(e.action.action){case"onClick":return i.some(u.n.State.expanded);default:return(0,a.vE)(e.action.action)}default:return(0,a.vE)(e)}})),o.oA,l.O(u.n.State.minimized),c.w((t=>e.pipe(s.U(i.fold((()=>({kind:u.n.State.hidden})),(e=>{switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,a.vE)(t)}})))))))}},61903:(e,t,n)=>{n.d(t,{n:()=>H});var r=n(86474),i=n(27378),a=n(40327),s=n(5739),o=n(22232),l=n(5114),c=n(30763),u=n(7046),d=n(87380),p=n(94793),m=n(3656),h=n(77176),f=n(90351),g=n(63969),y=n(40219);const v={position:"relative",borderRadius:g.u.rem(y.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none",backgroundColor:f.Il.CoreNeutral0},b={padding:`${g.u.rem(1)} ${g.u.rem(2)}`},w={position:"absolute",top:g.u.rem(.75),left:g.u.rem(.5)},C={display:"flex",boxSizing:"border-box",padding:g.u.rem(.5),height:g.u.rem(2.5),cursor:"pointer",justifyContent:"flex-start",alignItems:"center"},S={marginLeft:g.u.rem(.8),fontSize:g.u.rem(.85),lineHeight:g.u.rem(1)},I={display:"flex",width:g.u.percent(100),alignItems:"center",justifyContent:"space-between"},x={position:"absolute",top:g.u.rem(.2),right:g.u.rem(.3),cursor:"pointer"},k={paddingRight:g.u.rem(1),textAlign:"left",fontSize:g.u.rem(.75),lineHeight:g.u.rem(1.15)},E={marginTop:g.u.rem(.6),fontSize:g.u.rem(.875),flexShrink:0},A={display:"flex",marginBottom:g.u.rem(.6),justifyContent:"flex-end",flexShrink:0},T={marginRight:"auto",lineHeight:g.u.rem(1.3125)},_={marginTop:g.u.rem(.21),minWidth:g.u.rem(1.5),flexShrink:0},L={marginTop:g.u.rem(1)},O={display:"flex",justifyContent:"center",alignItems:"center",height:g.u.rem(2),backgroundColor:f.Il.CoreGreen60,borderRadius:g.u.rem(.25),fontSize:g.u.rem(.875),fontWeight:700,color:f.Il.CoreNeutral0,lineHeight:g.u.rem(2),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:g.u.color(f.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:g.u.color(f.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},R=g.u.stylesheet({wrapper:[v],maximizedWrapper:[b],minimizedWrapper:[C],maximizedWrapperIcon:[w],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[S],minimizedContent:[I],maximizedCloseButtonContainer:[x],maximizedHeader:[k],alertCategoryContainer:[E],alertCategory:[A],categoryHumanContainer:[T],alertCounterContainer:[_],premiumButtonContainer:[L],premiumButton:[O]});var P=n(12187);const M=(e,t)=>r.UI.Grid.make((({slots:n})=>i.createElement(s.F.div,Object.assign({},(0,P.Sh)(R.wrapper,e)),i.createElement(p.JO.UpgradeHookPanel.TitleDiamond,{className:t}),n.body))),F=r.UI.Node.make((({notify:e})=>i.createElement(s.F.div,{className:R.maximizedCloseButtonContainer},i.createElement(m.zx,{name:"close",onClick:e("onClick")},i.createElement(p.JO.Arrow,{width:11,direction:p.n4.up})))));var N;!function(e){let t;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={}))}(N||(N={}));const D=r.UI.Node.make((({state:e,notify:t})=>{const n=i.useContext(c.m.Context);return i.createElement(i.Fragment,null,i.createElement("div",{className:R.maximizedHeader},i.createElement(s.F.Fragment,null,e.pipe(h.U((({count:e})=>e>0?e>1?i.createElement(i.Fragment,{key:"plural"},n.sidebar.content.premiumIssues.foundTitlePlural.description1," ",e," ",n.sidebar.content.premiumIssues.foundTitlePlural.description2):i.createElement(i.Fragment,{key:"singular"},n.sidebar.content.premiumIssues.foundTitleSingular.description1," ",e," ",n.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),i.createElement(s.F.div,{className:R.alertCategoryContainer},e.pipe(h.U((({alerts:e})=>e.map((e=>i.createElement("div",{key:e.category,className:R.alertCategory},i.createElement("div",{className:R.categoryHumanContainer},e.categoryHuman),i.createElement("div",{className:R.alertCounterContainer},i.createElement(d.x.Counter,{count:e.count,type:"yellowPremium"}))))))))),i.createElement("div",{className:R.premiumButtonContainer},i.createElement("div",{ref:e=>{t({kind:N.ActionsKind.onUpgradeButtonMount,element:l.fromNullable(e)})()}},i.createElement(u.zx,{name:"upgrade",className:R.premiumButton,onClick:t({kind:N.ActionsKind.onUpgrade})},i.createElement(p.JO.UpgradeHookPanel.ButtonDiamond,null),n.goPremium))))})),$=r.UI.Composite.make(M(R.maximizedWrapper,R.maximizedWrapperIcon),r.UI.Group.make({closeButton:r.UI.Union.make("kind",{hidden:r.UI.Node.empty,visible:F}),content:D})),B=(0,a.pipe)(r.UI.squash($),r.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case N.ActionsKind.onUpgrade:return{kind:"upgrade"};case N.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,o.vE)(e.action)}case"closeButton":switch(e.action.action){case"onClick":return{kind:"collapse"};default:return(0,o.vE)(e.action.action)}default:return(0,o.vE)(e)}})),r.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState})))),U=r.UI.Node.make((({state:e})=>{const t=i.useContext(c.m.Context);return i.createElement(s.F.div,{className:R.minimizedContent},i.createElement("div",{className:R.minimizedText},t.premiumSuggestions),e.pipe(h.U((({alertsCount:e})=>e>0&&i.createElement(d.x.Counter,{type:"yellowPremium",key:"advancedCounter-counter",count:e})))))})),j=r.UI.Grid.make((({slots:e,notify:t})=>i.createElement("div",{className:R.shadowWrapper,onClick:t("onClick")},e.body))),W=r.UI.Knot.make(j,{body:r.UI.Composite.make(M(R.minimizedWrapper),U)}),G=(0,a.pipe)(r.UI.squash(W),r.UI.contramapState((e=>({body:e}))));var H;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={})),e.TogglableExpandedPanel=r.UI.Union.make("kind",{[t.hidden]:r.UI.Node.empty,[t.expanded]:B}),e.TogglablePanel=r.UI.Union.make("kind",{[t.hidden]:r.UI.Node.empty,[t.minimized]:G,[t.expanded]:B})}(H||(H={}))},43743:(e,t,n)=>{n.d(t,{f:()=>r});var r,i=n(49708),a=n(77176),s=n(93508),o=n(85985),l=n(17343),c=n(36303),u=n(24209),d=n(83840),p=n(8473),m=n(15789),h=n(2768),f=n(50628),g=n(44586),y=n(28043),v=n(32952),b=n(66310),w=n(76974);!function(e){class t{static get observable(){return this._obs||(this._obs=i.R(document,"visibilitychange").pipe(a.U((()=>document.hidden)),s.O(document.hidden),o.h(Boolean),l.h(void 0),c.r(1)))}}function n(...e){return u.T(...e.map((e=>e.pipe(d.i())))).pipe(p.o((e=>e.hasValue)),m.D())}e.Hidden=t,e.mergeUntilAnyCompletes=n,e.createAnimationObservable=function(e,r,i){return n(function(e,t,n){return g.y.create((r=>{let i,a=window.requestAnimationFrame(s);function s(o){i||(i=o);const l=o-i;l<n?(r.next(Math.round(e+l/n*(t-e))),a=window.requestAnimationFrame(s)):(r.next(t),r.complete())}return()=>window.cancelAnimationFrame(a)})).pipe(y.x())}(e,r,i).pipe(h.R(t.observable)),t.observable.pipe(l.h(r),f.P()))},e.fadeOutState=function(e){const t=new v.xQ;return{state:e.pipe(b.w((e=>e?w.of("inProgress"):u.T(w.of("fadeOut"),t.pipe(l.h("end")))))),complete:()=>t.next(!0)}},e.rafSequence=function(e,t=!1){return g.y.create((n=>{let r;function i(){n.next(e.shift()),e.length&&(r=requestAnimationFrame(i))}return t?i():r=requestAnimationFrame(i),()=>cancelAnimationFrame(r)}))}}(r||(r={}))},10061:(e,t,n)=>{n.d(t,{c:()=>r});var r,i=n(18625),a=n(49708);!function(e){const t="scrollaction";e.emit=e=>window.dispatchEvent(new CustomEvent(t,{detail:e})),e.observe=i.P((()=>a.R(window,t)))}(r||(r={}))},85255:(e,t,n)=>{n.d(t,{P:()=>r});var r,i=n(27378),a=n(38983),s=n(66310),o=n(76974),l=n(85089),c=n(93508),u=n(77176),d=n(22232),p=n(5114),m=n(19962);!function(e){e.useSubscriptionTo=function(e){i.useEffect((()=>{const t=e.subscribe();return()=>t.unsubscribe()}),[e])};const t=new Set;function n(){return i.useMemo((()=>{const e=a.h.create(p.none);return{ref:e,onMount:t=>e.set(p.fromNullable(t))}}),[])}e.useSingleton=function(e){i.useEffect((()=>((0,d.kG)(!t.has(e),`Component ${e} can be mounted only once!`),t.add(e),()=>{t.delete(e)})),[])},e.useElWatcher=n,e.useRectWatcher=()=>{const{ref:e,onMount:t}=n();return{rect:e.pipe(s.w(p.fold((()=>o.of(p.none)),(e=>l.YC(e).pipe(c.O(m.UL.fromEl(e)),u.U(p.some)))))),onMount:t}},e.useEffectOnDidMount=e=>{i.useEffect(e,[])},e.useEffectOnWillUnmount=e=>{i.useEffect((()=>e),[])},e.useMemoOnDidMount=e=>i.useMemo(e,[]),e.useAtomOf=function(t){const n=e.useMemoOnDidMount((()=>a.h.create(t)));return i.useEffect((()=>{n.set(t)}),[t,n]),n}}(r||(r={}))},95983:(e,t,n)=>{n.d(t,{vM:()=>p,aW:()=>r});var r,i=n(71249),a=n(57050),s=n(40327),o=n(22232),l=n(83078),c=n(5114),u=n(95195),d=n(89943);function p(e,t){return t.reduce(((t,n)=>{const r="function"==typeof e?e(n):n[e];let i=t.get(r);return i||(i=[],t.set(r,i)),i.push(n),t}),new Map)}!function(e){e.URI="ImmutableSortedMap",e.create=function(t,n,r){const i=Array.isArray(t)?new Map(t.map((e=>[n(e),e]))):t,a=e.orderKeys(i,r);return i.forEach((e=>(0,o.kG)(h(e),"init value should implement IEquals",(()=>JSON.stringify(e))))),new m(i,a,r,n)},e.empty=function(e,t){return new m(new Map,[],t,e)},e.diff=function(e,t){const n=e.clear();return e.reduce((({added:e,preserved:n,removed:r,changed:i},a,s)=>{const o=e.has(s)?e.remove(s):e;if(t.has(s)){const e=a.equals(l.MH(t.get(s)).value);return{removed:r,added:o,preserved:e?n.add(a):n,changed:e?i:i.add(a)}}return{removed:r.add(a),added:o,preserved:n,changed:i}}),{removed:n,added:t,preserved:n,changed:n})},e.unsafeGet=function(e,t){return l.MH(t.get(e)).value},e.unsafeGetBy=function(e){return t=>l.MH(t.get(e)).value},e.unsafeGetAt=function(e,t){return l.MH(t.getAt(e))},e.unsafeGetAtBy=function(e){return t=>l.MH(t.getAt(e))},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){let n=-1,r=e.size;for(;n+1!==r;){const i=n+(r-n>>1);t(l.MH(e.getAt(i)))?n=i:r=i}return n+1},e.createKeySorter=function(e,t){return(n,r)=>t(e(n),e(r))},e.orderKeys=function(t,n){return Array.from(t.keys()).sort(e.createKeySorter((e=>t.get(e)),n))},e.takeByKey=function(e,t,n){const r=(0,s.pipe)(n,i.cx((t=>t===e))),a=c.fromNullable(t.get(e));return(0,o.kG)(c.isNone(r)&&c.isNone(a)||c.isSome(r)&&c.isSome(a),"unsynced hash&order"),l.vB(((e,t)=>({index:e,value:t})))(r,a)},e.getFoldableWithIndex=function(){return{URI:e.URI,_E:void 0,reduce:(e,t,n)=>e.reduce(n,t),foldMap:e=>(t,n)=>t.reduce(((t,r)=>e.concat(t,n(r))),e.empty),reduceRight:(e,t,n)=>e.reduce(((e,t)=>n(t,e)),t),reduceWithIndex:(e,t,n)=>e.reduce(((e,t,r)=>n(r,e,t)),t),reduceRightWithIndex:(e,t,n)=>e.reduce(((e,t,r)=>n(r,t,e)),t),foldMapWithIndex:e=>(t,n)=>t.reduce(((t,r,i)=>e.concat(t,n(i,r))),e.empty)}}}(r||(r={}));class m{constructor(e,t,n,r){this._hash=e,this._order=t,this._comp=n,this._getKey=r,(0,o.kG)(e.size===t.length,"every hash entry should has order")}get(e){return r.takeByKey(e,this._hash,this._order)}getIndex(e){return c.fromPredicate((e=>e>-1))(this._order.indexOf(e))}getAt(e){return c.fromNullable(this._hash.get(this._order[e]))}has(e){return this._hash.has(e)}find(e,t=0){if(t<0)return c.none;for(let n=t;n<this._order.length;n++){const t=this._order[n],r=this._hash.get(t);if(e(r))return c.some({index:n,value:r})}return c.none}findFrom(e,t){return this.find(e,t)}findRight(e,t){if(t&&t>=this._order.length)return c.none;for(let n=t||this._order.length-1;n>=0;n--){const t=this._order[n],r=this._hash.get(t);if(e(r))return c.some({index:n,value:r})}return c.none}findRightFrom(e,t){return this.findRight(e,t)}map(e,t=this._comp){const n=new Map;this._order.forEach(((t,r)=>{const i=this._hash.get(t),a=e(i,t,r);(0,o.kG)(h(a),"transformed value should implement IEquals",(()=>JSON.stringify(a))),n.set(t,a)}));const i=r.orderKeys(n,t);return new m(n,i,t,this._getKey)}mapTo(e){return this._order.map(((t,n)=>e(this._hash.get(t),t,n)))}filter(e){const t=new Map,n=this._order.filter((n=>{const r=this._hash.get(n),i=e(r,n);return i&&t.set(n,r),i}));return new m(t,n,this._comp,this._getKey)}reduce(e,t){return this._order.reduce(((t,n,r)=>e(t,this._hash.get(n),n,r)),t)}modifyWith(e,t){const n=new Map(this._hash),i=this._order.slice(),a=(e,a)=>{const s=r.takeByKey(a,n,i),l=t(a,e,s);(0,o.kG)(h(l),"modified value should implement IEquals",(()=>JSON.stringify(l))),n.set(a,l),c.isNone(s)&&i.push(a)};return e instanceof Array?e.forEach((([e,t])=>a(t,e))):e.forEach(a),i.sort(r.createKeySorter((e=>n.get(e)),this._comp)),new m(n,i,this._comp,this._getKey)}patchWith(e,t){const n=new Map(this._hash),i=this._order.slice(),u=(e,u)=>{const d=r.takeByKey(u,n,i),p=t(u,e,d);(0,o.kG)(l.wo(h)(p),"patched value should implement IEquals",(()=>JSON.stringify(p))),(0,s.pipe)(p,c.fold((()=>{(0,s.pipe)(d,c.fold(a.Q1,(({index:e})=>{n.delete(u),i.splice(e,1)})))}),(e=>{n.set(u,e),c.isNone(d)&&i.push(u)})))};return e instanceof Array?e.forEach((([e,t])=>u(t,e))):e.forEach(u),i.sort(r.createKeySorter((e=>n.get(e)),this._comp)),new m(n,i,this._comp,this._getKey)}add(e){const t=new Map(this._hash),n=this._order.slice();return(Array.isArray(e)?e:[e]).forEach((e=>{const r=this._getKey(e);(0,o.kG)(h(e),"added value should implement IEquals",(()=>JSON.stringify(e))),t.set(r,e),-1===n.indexOf(r)&&n.push(r)})),n.sort(r.createKeySorter((e=>t.get(e)),this._comp)),new m(t,n,this._comp,this._getKey)}update(e,t){return(0,s.pipe)(this.get(e),c.fold((()=>u.t$(`Provided key ${e} not found in the map`)),(({value:n})=>{const i=new Map(this._hash),a=this._order.slice();return i.set(e,t(n)),a.sort(r.createKeySorter((e=>i.get(e)),this._comp)),u.F2(new m(i,a,this._comp,this._getKey))})))}remove(e){(0,o.kG)(this.has(e),`can not remove unknown key: ${e}`);const t=new Map(this._hash);t.delete(e);const n=d.CE(e,this._order);return new m(t,n,this._comp,this._getKey)}clear(){return new m(new Map,[],this._comp,this._getKey)}hashCode(){let e=7;return this._hash.forEach((t=>e+=t.hashCode())),e}equals(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every(((t,n)=>t.equals(l.MH(e.getAt(n)))))}values(){return this._order.map((e=>this._hash.get(e)))}keys(){return this._order}get size(){return this._order.length}}function h(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},5920:(e,t,n)=>{n.d(t,{l:()=>r});var r,i=n(40327),a=n(5114);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,i.pipe)(e.get(t),a.filter((e=>n(e.value))))},e.find=function(e,t){return e.find(t)}}(r||(r={}))},21619:(e,t,n)=>{n.d(t,{m:()=>x});var r,i=n(71249),a=n(57050),s=n(40327),o=n(38983),l=n(5114),c=n(45701),u=n(89943),d=n(8125),p=n(55415),m=n(83078),h=n(66896),f=n(32952),g=n(98403),y=n(77176),v=n(67434),b=n(28043),w=n(41398),C=n(19751),S=n(17594),I=n(35416);!function(e){e.Mock=class{constructor(){this.alertHovered=new f.xQ,this.alertClicked=new f.xQ,this.highlightedAlert=o.h.create(l.none)}}}(r||(r={}));class x{constructor(e,t,n,r,o){this._ded=e,this._state=t,this._markAlertMapper=n,this._alertsReader=r,this._getActiveItemWithAlert=o,this._focusedItem=this._state.view(I.nL.getActiveItem(this._getActiveItemWithAlert)),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=e=>(0,s.pipe)(e,l.map((0,a.ls)(i.DZ((e=>this._markAlertMapper.getAlertByMark(e))),i.DY(c.contramap((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(h.R.ord))))),this.alertHovered=g.b2.inRaf(this._ded.hoveredMarks).pipe(y.U(this._marksToAlertTupleArray),y.U(l.map(i.UI((({alert:e})=>e)))),v.R(((e,t)=>(0,s.pipe)(t,l.chain((t=>(0,s.pipe)(e,l.filter((e=>-1!==t.indexOf(e))),l.fold((()=>l.fromNullable(t[0])),l.some)))))),l.none),y.U(l.filter((e=>this._alertsReader.isInteractable(e.id)&&!S.$.isPlagiarism(e)))),b.x()),this.alertClicked=g.b2.inRaf(this._ded.activeMarks).pipe(y.U(this._marksToAlertTupleArray),w.M(this._focusedItem,this._focusedLens),v.R(((e,[t,n,r])=>{const i=t=>(0,s.pipe)(e,l.exists((e=>e.alert.id===t.alert.id))),a=e=>(0,s.pipe)(n,l.exists((t=>t.activeAlert.id===e.alert.id))),o=e=>r.meta.filter(e.alert);return(0,s.pipe)(t,l.chain((e=>(0,s.pipe)(e,u.N6([(0,d.W9)(i,a),a,(0,d.W9)(i,o),o,i]),l.fold((()=>l.fromNullable(e[0])),l.some),l.map((e=>p.Vx(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex})))))))}),m.cS()),C.d({refCount:!0,bufferSize:1}))}}},54216:(e,t,n)=>{n.d(t,{t:()=>c});var r=n(57050),i=n(8125),a=n(40018),s=n(66896);const o=(0,i.W9)(a.bZ.isRegistered,(0,r.ff)(a.bZ.isMuted)),l=e=>t=>(0,i.W9)(o,e(t));var c;!function(e){e.create=function(e,t){const n=l((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:(e,n)=>(0,i.W9)(l((e=>t[e]))(e),(e=>t=>e||a.bZ.isPriority(t))(n)),alertVisibleInSidebar:n,getLensesFilter:t=>e[t],alertCanBeDisplayed:o,alertIsBulkAcceptable:e=>(0,i.W9)(n(e),a.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,n=e=>(0,i.W9)(t(s.R.OutcomeId.fromPriorityOutcomeId(e)),a.bZ.isPriority);e.defaultLensFilters={[s.R.SpecialId.Clarity]:t(s.R.SpecialId.Clarity),[s.R.SpecialId.Correctness]:t(s.R.SpecialId.Correctness),[s.R.SpecialId.Delivery]:t(s.R.SpecialId.Delivery),[s.R.SpecialId.Engagement]:t(s.R.SpecialId.Engagement),[s.R.SpecialId.Vox]:t(s.R.SpecialId.Vox),[s.R.SpecialId.ClarityPriority]:n(s.R.SpecialId.ClarityPriority),[s.R.SpecialId.CorrectnessPriority]:n(s.R.SpecialId.CorrectnessPriority),[s.R.SpecialId.DeliveryPriority]:n(s.R.SpecialId.DeliveryPriority),[s.R.SpecialId.EngagementPriority]:n(s.R.SpecialId.EngagementPriority),[s.R.SpecialId.VoxPriority]:n(s.R.SpecialId.VoxPriority),[s.R.SpecialId.Plagiarism]:t(s.R.SpecialId.Plagiarism),[s.R.SpecialId.DraftAI]:r.jv,[s.R.SpecialId.Premium]:t(s.R.SpecialId.Premium),[s.R.SpecialId.AllAlerts]:a.bZ.belongsToAllAlerts,[s.R.SpecialId.Closed]:r.jv,[s.R.SpecialId.Priority]:a.bZ.belongsToPriorityLens,[s.R.SpecialId.PredictionTakeaways]:a.bZ.belongsToPredictionTakeaways,[s.R.SpecialId.PredictionEmogenie]:a.bZ.belongsToPredictionEmogenie,[s.R.SpecialId.RealTimeProofit]:t(s.R.SpecialId.RealTimeProofit)},e.defaultTextFilters=Object.assign(Object.assign({},e.defaultLensFilters),{[s.R.SpecialId.Closed]:a.bZ.isCriticalImpact,[s.R.SpecialId.Premium]:(0,i.Kg)(e.defaultLensFilters[s.R.SpecialId.Premium],a.bZ.belongsToAllAlerts)}),e.priorityTextFilters=e=>({[s.R.SpecialId.Premium]:(0,i.W9)(e[s.R.SpecialId.Premium],a.bZ.isPriority)})}(c||(c={}))},59368:(e,t,n)=>{n.d(t,{Oe:()=>r,rG:()=>i,Bd:()=>a});var r,i,a,s=n(73975),o=n(40018);!function(e){e.eq=(0,s.Uz)((e=>e.alert))(o.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState)),e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState)),e.canBeChanged=t=>n=>t&&a.applied===n.state.current.visualState?t===a.disposed:o.bZ.State.isBulkApplied(n.alert.state)||e.notAnyOf(a.applied,a.disposed)(n),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(r||(r={})),function(e){e.updateRanges=function(e,t){return Object.assign(Object.assign({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return Object.assign(Object.assign({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return Object.assign(Object.assign({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),function(e){e.isApplied=function(t){return t===e.applied}}(a||(a={}))},16746:(e,t,n)=>{n.d(t,{v:()=>S});var r=n(71249),i=n(57050),a=n(40327),s=n(49524),o=n(25656),l=n(24645),c=n(51996),u=n(95195),d=n(5114),p=n(22232),m=n(83078),h=n(89943),f=n(68983),g=n(8125),y=n(81531),v=n(40018),b=n(17594),w=n(36156),C=n(59368);class S{constructor(e,t,n,r,o,l,c,p){this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=r,this._create=o,this._update=l,this._remove=c,this._onTransitionEnd=p,this._currentState=C.rG.from(C.Bd.initial),this._scheduledState=C.rG.from(C.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,a.pipe)(this._alertRangeService.hasNewRangesForUpdate(this.id),u.g_(i.jv,s.y)))return d.none;const t=(0,a.pipe)(this._alertRangeService.applyPendingRangesUpdate(this.id),u.Vn((e=>I("markAlert").error("cannot apply pending ranges",e))),d.fromEither,d.chain(s.y),d.filter((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,a.pipe)(t,d.map((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),u.wE.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},u.wE.mapLeft(this._alertRef,(e=>I("markAlert").warn("can not take alertRef",e)))}get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,p.kG)(e!==C.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==C.Bd.initial||e!==C.Bd.disposed&&!C.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=C.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=C.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=C.rG.from(C.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!C.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,a.pipe)(this.change(),d.filter((e=>e.rawMark.length>0)),d.map((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return d.none}}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:n})=>{e.rawMark.forEach((e=>{"create"===e.action?n._setMarkAndCheckFinaleState(e.id,(0,a.pipe)(t.created.get(e.id)||u.t$(new Error("Cannot get unknown mark")),d.fromEither)):"remove"===e.action&&n._removeMark(e.id)})),e.commit(),n._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const n=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,a.pipe)(t,d.filter((t=>0!==t.rawMark.length||(I("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:Object.assign(Object.assign({},e.toJSON()),{alert:void 0})}),!1))),d.isSome))).map((([e,t])=>({ma:e,change:m.MH(t)})));if(0===n.length)return;const r=h.VS(n.map((e=>e.change.rawMark))),i=this._changeMarksInDEd(r);this._iterateOverMarkAlerts(n,i)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:d.none}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,p.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?d.some(this._getRawActionForApply(e)):d.none}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===l.v.Change.ActionType.remove)this._removeMark(e.id);else{const n=(0,a.pipe)(d.fromNullable(this._marksMap.get(e.id)),d.chain(s.y),d.alt((()=>(0,a.pipe)((e.action===l.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||u.t$(new Error("Cannot get unknown mark")),d.fromEither))));this._setMark(e.id,n)}})),this._disposeIfEmpty()}_getTransition(){return(0,p.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=Object.assign(Object.assign({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){switch(e.from.visualState){case C.Bd.initial:return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((e=>e.commit()))),{action:"create",commit:o.Z,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};default:switch(e.to.visualState){case C.Bd.disposed:const t=C.Bd.isApplied(e.from.visualState)||v.bZ.State.isRemoved(this.alert.state)&&b.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(i.Q1).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e})));return{action:"remove",commit:(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1))),rawMark:t.map((e=>this._remove(e.range)(e.id)))};case C.Bd.applied:const n=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1))),rawMark:[...n,...this._getAppliedRanges(((t,n)=>this._create(n,e)(n().meta.id)))]};default:const r=()=>v.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(s.y);return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:t,ranges:n})=>this._getReplaceAction(e,r(),n.removed,t))),d.getOrElse((()=>({action:"update",commit:o.Z,rawMark:r().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}}_getReplaceAction(e,t,n,r){return{action:"replace",commit:r,rawMark:[...n.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,a.pipe)(this._alertRangeService.getAppliedRanges(this.id),u.g_((e=>(I("markAlert").error("cannot get applied ranges",{error:e.message,alert:b.$.snapshot(this._alert("_getAppliedRanges"))}),[])),r.Su(e)))}_getHighlightRanges(e){return(0,a.pipe)(this._alertRangeService.getHighlightRanges(this.id),u.g_((t=>(I("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,a.pipe)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),r.UI(e)))),r.UI(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,p.kG)(!(!b.$.isDefault(t)&&!b.$.isSuper(t))||(!e||v.bZ.State.isBulkApplied(t.state)||!C.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,p.kG)(e&&C.Oe.isOneOf(C.Bd.applied)(this)?e===C.Bd.disposed||v.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):C.Oe.notAnyOf(C.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${e?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,a.pipe)(this._mark,d.map((e=>e.id)),d.toUndefined),range:(0,a.pipe)(this._mark,d.map((e=>e.range)),d.toUndefined)},alert:this._alert("toJSON")}}equals(e){return C.Oe.eq.equals(this,e)}hashCode(){return(0,w.AC)(this.id)}}!function(e){e.compareTo=e=>{const t=(0,f.W)(c.SV.distanceFrom)(e);return(e,n)=>(0,g.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...n.alert.getHighlightRanges().map(t)))}}(S||(S={}));const I=(0,g.HP)(y.C8.Logging.getLogger)},25980:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(57050),a=n(59443),s=n(95574),o=n(5114),l=n(81531),c=n(18625),u=n(76974),d=n(60797),p=n(66310),m=n(28043),h=n(17343),f=n(98403),g=n(91224),y=n(40151),v=n(38194),b=n(77176),w=n(24209),C=n(74238),S=n(4890);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={})),e.alignMarkToItem=function(e,n){return({animation:r,suggestedPosition:b})=>({id:w,renderOptions:{features:I},activeHighlightIndex:x,activeAlert:k})=>c.P((()=>u.of(e.getMarkAlertPosition({alert:k,highlightIndex:x})))).pipe(d.oA,p.w((e=>{const t=s.MH(n.getCardSuggestedPositionInViewport(w,I.has(S.j.Features.showLabel),o.none,"cardContentTop"));return n.setCardPosition(w,I.has(S.j.Features.showLabel),!1,C.r.FromWindowTop.ISO.modify(C.L.concatC(-t.contentOffset))(e)).pipe(m.x(),h.h((0,i.zG)(b,o.filter((e=>n.willFitViewport(w,C.r.FromWindowTop.ISO.modify(C.L.concatC(-t.contentOffset))(e)))),o.getOrElse((()=>C.r.FromWindowTop.ISO.modify(C.L.concatC(t.contentOffset))(t.top))))))})),p.w((n=>e.moveAlertHighlightInViewport({alert:k,highlightIndex:x},n,r===t.ANIMATE_ALL?a.uq.fake:a.uq.none))),h.h(f.PU),g.K((e=>(l.C8.Logging.root.getLogger("AlignmentViewModel").error("Cannot align mark to card",e),y.E))),v.B())},e.alignItemToMark=function(t,n){return({animation:r,fitCardIntoViewport:i})=>({id:d,renderOptions:{features:m},activeAlert:I,activeHighlightIndex:x})=>c.P((()=>u.of(t.getMarkAlertPosition({alert:I,highlightIndex:x})))).pipe(p.w(o.fold((()=>y.E),(e=>u.of(e)))),b.U((e=>({mark:e,card:s.MH(n.getCardSuggestedPositionInViewport(d,m.has(S.j.Features.showLabel),o.some(e),"cardContentTop"))}))),p.w((({card:s,mark:o})=>w.T(n.setCardPosition(d,m.has(S.j.Features.showLabel),r===e.Animation.ANIMATE_ALL,C.r.FromWindowTop.ISO.modify(C.L.concatC(-s.contentOffset))(o)),f.Ft(t.moveAlertHighlightInViewport({alert:I,highlightIndex:x},C.r.FromWindowTop.ISO.modify(C.L.concatC(s.contentOffset))(s.top),r===e.Animation.ANIMATE_ALL?a.uq.initial:a.uq.none))(i)))),h.h(f.PU),g.K((e=>(l.C8.Logging.root.getLogger("AlignmentViewModel").error("Cannot align card to mark",e),y.E))),v.B())}}(r||(r={}))},58562:(e,t,n)=>{n.d(t,{eZ:()=>H,UC:()=>z});var r=n(57050),i=n(40327),a=n(49524),s=n(12447),o=n(95574),l=n(22232),c=n(83078),u=n(8125),d=n(55415),p=n(5114),m=n(95195),h=n(40018),f=n(66896),g=n(60797),y=n(98403),v=n(85089),b=n(76974),w=n(77176),C=n(17343),S=n(93508),I=n(28043),x=n(40151),k=n(66310),E=n(598),A=n(83401),T=n(41398),_=n(55721),L=n(95093),O=n(24209),R=n(16118),P=n(85985),M=n(25980),F=n(15646),N=n(91402),D=n(35416),$=n(74238),B=n(14990),U=n(99116);var j,W,G;!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=(t=e.CARD_CONTENT_OFFSET_REM,n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM)=>(e,r)=>Math.round((e?n:t)*r)}(j||(j={})),function(e){e.cardPositionGetter=(e,t)=>(n,a)=>{const s=new B.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return o.vM((()=>(0,i.pipe)(e.view(D.nL.getLens).get(),p.chain((({items:e})=>(0,i.pipe)(e.get(n),p.map((({value:e})=>(0,i.pipe)(a,p.fold((()=>(0,r.ls)($.L.AbsTop.ISO.wrap,s.converters.absTopToViewportTop,s.converters.viewportToWindow)(e.positionState.absTop)),r.yR))))))),c.MH)))},e.cardPositionInViewportGetter=(e,t)=>(n,a)=>{const s=new B.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(D.nL.getLens).get(),m.Yo((()=>new Error("Current lens is not WithItemsLensState"))),m.tS((({items:e,id:t})=>(0,i.pipe)(e.get(n),m.Yo((()=>new Error(`The item with id: ${n} does not exist in lens ${t}`))),m.tS((({value:t})=>{return(0,i.pipe)(a,p.map(s.converters.windowToViewport),p.alt((()=>p.some((0,r.ls)($.L.AbsTop.ISO.wrap,s.converters.absTopToViewportTop)(t.positionState.absTop)))),p.map((o=t,l=((e,t)=>(0,i.pipe)(t.get(e),p.map((({index:e})=>({before:(0,i.pipe)(t.getAt(e-1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),after:(0,i.pipe)(t.getAt(e+1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0)))}))),p.getOrElse((()=>({before:0,after:0})))))(n,e),c=s.viewport,e=>{const t=(0,U.v_)({cardTop:e,cardHeight:o.positionState.height,viewportHeight:c.height,padding:l});return $.L.FromViewportTop.ISO.modify($.L.concatC(-t))(e)})),p.map(s.converters.viewportToWindow),m.Yo((()=>new Error("Cannot get card position in viewport"))));var o,l,c}))))))}}(W||(W={})),function(e){const t=(e,t,n,r)=>{const a=r.viewport.get(),s=r.scrollTop.get(),c=$.L.converters(s,$.r.FromWindowTop.ISO.unwrap(a.top),r.paddingTop.get());return o.vM((()=>(0,i.pipe)(D.nL.getLens(n),p.chain((t=>t.items.get(e))),p.map((e=>$.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),p.map((e=>c.absTopToViewportTop(e))),p.fold((()=>{throw new l.ej("Cannot get offset for unknown card")}),(e=>{const n=c.windowToViewport(t);return $.L.FromViewportTop.ISO.unwrap(e)-$.L.FromViewportTop.ISO.unwrap(n)})))))};e.moveCardToPositionSyncGetter=(e,n)=>r=>(0,i.pipe)(t(r.id,r.position,e.get(),n),m.tS((e=>n.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,n)=>r=>(0,i.pipe)(t(r.id,r.position,e.get(),n),m.g_((e=>N._(e)),(e=>n.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(G||(G={}));var H,z,Y,V,q=n(71841);!function(e){e.cardSuggestedPositionGetter=(e,t)=>(n,r,a,s)=>{const o="cardTop"===s?0:t(r);return(0,i.pipe)(e(n,(0,i.pipe)(a,p.map($.r.FromWindowTop.ISO.modify($.L.concatC(-o))))),m.UI((e=>({top:e,contentOffset:o}))))},e.getSuperScrollMapper=(t,n,r)=>{const a=G.moveCardToPositionAnimatedGetter(t,n),s=G.moveCardToPositionSyncGetter(t,n),l=j.contentOffsetGetter();return{setCardPosition:(e,t,n,i)=>{const c={top:i,contentOffset:l(t,r.get())};return(n?a({id:e,position:i}):b.of(s({id:e,position:i})).pipe(w.U(o.MH))).pipe(C.h(c),S.O(c),I.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(W.cardPositionGetter(t,n),(e=>l(e,r.get()))),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(W.cardPositionInViewportGetter(t,n),(e=>l(e,r.get()))),willFitViewport:(e,r)=>(0,i.pipe)(t.get(),(t=>!!D.nL.hasItems(t)&&((e,t)=>(n,r)=>{const a=new B.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.currentLens.items,(e=>(0,i.pipe)(e.get(n),p.map((({value:e})=>0===(0,U.v_)({cardTop:a.converters.windowToViewport(r),cardHeight:e.positionState.height,viewportHeight:a.viewport.height,padding:{before:0,after:0}}))))),c.MH)})(t,n)(e,r))),isAboveViewportTop:(u=n,e=>$.r.FromWindowTop.ISO.modify($.L.concatC(u.scrollTop.get()+u.paddingTop.get()))(e)<u.viewport.get().top)};var u}}(H||(H={})),function(e){e.getMapper=(e,t,n)=>({moveAlertHighlightInViewport:(t,n,r)=>e.ensureAlertHighlightInViewport(t,$.r.FromWindowTop.ISO.unwrap(n),r),getMarkAlertPosition:r=>(0,i.pipe)(e.getMarkByAlert(r),p.chain((a=>(0,i.pipe)(a.getRect(),m.UI(s.n.relativeToViewport),m.UI((e=>p.some(e.top))),m.fS((()=>(n.debug("Cached alert is missing, falling back to flush"),(n=>(t.flushChanges(),(0,i.pipe)(e.getMarkByAlert(n),p.chain((e=>(0,i.pipe)(p.fromEither((0,i.pipe)(e.getRect(),m.UI(s.n.relativeToViewport),m.UI((e=>e.top))))))))))(r)))),p.map($.r.FromWindowTop.ISO.wrap)))))})}(z||(z={}));!function(e){e.Mock=class{constructor(){this.alignCardToMark=()=>x.E,this.alignCardTo=()=>x.E,this.alignMarkTo=()=>x.E,this.alignMarkToCard=()=>x.E}}}(Y||(Y={})),function(e){let t,n;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=(e,n,r)=>n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}(t||(t={})),e.createAlignmentOnTypingEffect=(e,t,n,r,a)=>{const s=e.view(D.nL.mapper((({currentLens:e})=>(0,i.pipe)(p.some(e),p.filter((0,U.Bk)(a)))))).pipe(w.U(p.chain(r),p.filter(a.isValidToAlign)),g.cp((e=>n.pipe(k.w(y.b2.rafScheduler),k.w((()=>t.alignCardToMark(e,M.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:f.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(s.pipe(E.c(A.C)))}},e.createAlignOnDisjointedAreasEffect=(e,n,s,o)=>{const u=e.view((0,r.ls)(D.nL.getLens,p.filter((e=>p.isNone(D.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),d=u.pipe(w.U(p.isSome),I.x(),k.w(y.Ft(s.changes.pipe(S.O(y.PU),k.w(y.b2.rafScheduler),w.U((()=>p.some((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(s)))),w.U(p.filter((e=>e.top-e.bottom!=0)))))),T.M(u.pipe(w.U(p.map((({items:e})=>e)))),c.vB(((r,a)=>(0,i.pipe)(q.YA(e,o),p.map((e=>({top:$.r.FromWindowTop.ISO.unwrap(e.top),bottom:$.r.FromWindowTop.ISO.unwrap(e.bottom)}))),p.chain((e=>(0,i.pipe)(((e,n,r)=>{const a=(0,i.pipe)(e.getAt(0),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),s=t.getRelativePosition(n,r,a);switch(s){case t.RelativePosition.above:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:n.top}))));case t.RelativePosition.below:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:n.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return p.none;default:return(0,l.vE)(s)}})(a,r,e),p.map((({card:e,top:t})=>n.alignCardTo(e,$.r.FromWindowTop.ISO.wrap(t),M.v.Animation.NO_ANIMATION)))))),p.getOrElse((()=>x.E)))))),k.w(p.fold((()=>x.E),a.y)));return{id:"alignOnDisjointedAreas",when:f.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(d.pipe(E.c(A.C)))}},e.createAlignOnResizeSideEffect=(e,t,n,r,a,s=y.b2.rafScheduler)=>{const o=e.view(D.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))).view(p.filter((({currentLens:e})=>(0,U.Bk)(a)(e)))).view(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(r(e),p.filter(a.isValidToAlign),p.map((n=>({item:n,source:t,lensId:e.id}))))))),l=v.Qr.pipe(_.p(100),L.T(n),T.M(o,((e,t)=>t)),k.w(s),k.w(p.fold((()=>x.E),(({item:e})=>t.alignCardToMark(e,M.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:f.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(l.pipe(E.c(A.C)))}},function(e){e.skip="skip"}(n=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=(t,n,r=((e,t)=>t),i,a,s,o,l=y.b2.rafScheduler)=>{const c=e._createAlignmentSource(t,n,r,i,a,s,o,l);return{id:"alignmentSideEffect",when:f.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(c.pipe(E.c(x.E)))}},e._createAlignmentSource=(e,t,s=((e,t)=>t),o,l,m,f,g=y.b2.rafScheduler)=>{const v=(0,u.Kg)(F.lY.isAlertMinicardButtonClick,F.lY.isSwitchToClosestByViewport,F.lY.isAlertCardShow,F.eI.isCardExpand,F.lY.isBulkAcceptItemShow,F.lY.isBulkHighlight),b=O.T(e.pipe(w.U(D.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),S.O(p.none),w.U(p.map((e=>e.currentLens.id))),R.G(),P.h((([e,t])=>(0,i.pipe)(c.vB(((e,t)=>e!==t))(e,t),p.exists(a.y)))),C.h(p.none)),e.pipe(w.U(D.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),P.h(p.exists((({currentLens:e})=>(0,U.Bk)(l)(e)))),w.U(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(o(e),p.filter(l.isValidToAlign),p.map((n=>({item:n,source:t,lensId:e.id}))))))))).pipe(I.x((0,r.ls)(c.vB(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),p.exists(a.y)))),E=(0,u.Kg)(F.lY.isBulkHighlight,F.lY.isAlertMinicardButtonClick),_=t.pipe(P.h(v),w.U(p.some),S.O(p.none),R.G(),P.h((0,r.ls)((0,r.og)(c.vB(((e,t)=>!F.lY.isAlertCardShow(t)||!F.lY.isAlertMinicardButtonClick(e)))),p.getOrElse(r.jv))),w.U((([,e])=>(0,i.pipe)(e,p.filter(E)))),S.O(p.none)).pipe(k.w((e=>b.pipe(P.h(p.exists((e=>e.source===h.l$.sidebar))),w.U(p.chain((t=>p.some(Object.assign(Object.assign({},t),{clickPoint:(0,i.pipe)(e,p.map(d.ei("clickPoint")))}))))))))),L=b.pipe(P.h(p.exists((e=>e.source!==h.l$.sidebar))),w.U((e=>(0,i.pipe)(e,p.chain((e=>p.some(Object.assign(Object.assign({},e),{clickPoint:p.none}))))))));return O.T(_,L).pipe(S.O(p.none),R.G(),w.U((([e,t])=>(0,i.pipe)(t,p.map((n=>({lensId:n.lensId,card:n.item,source:n.source,animate:(0,i.pipe)(e,c.wo((({lensId:e})=>e===n.lensId))),clickPoint:(0,i.pipe)(t,p.chain(d.ei("clickPoint")),p.map((0,r.ls)(d.ei("y"),$.r.FromWindowTop.ISO.wrap)))})))))),k.w(p.fold((()=>x.E),g)),T.M(e),k.w((([{card:e,source:t,animate:r,clickPoint:a,lensId:o},l])=>(0,i.pipe)(s(e,t),(t=>D.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&o===l.currentLens.id&&t!==n.skip?((e,t,n,r)=>{if(n===h.l$.text)return(0,i.pipe)(e,f({animation:t?M.v.Animation.ANIMATE_ALL:M.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(n===D.h8.forceText)return(0,i.pipe)(e,f({animation:M.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const a=n===h.l$.sidebar?t?M.v.Animation.ANIMATE_ALL:M.v.Animation.ANIMATE_MARK:M.v.Animation.NO_ANIMATION;return(0,i.pipe)(e,m({animation:a,suggestedPosition:r}))}})(e,r,t,a):A.C)))))}}(V||(V={}))},17510:(e,t,n)=>{n.d(t,{dv:()=>A,Xx:()=>re});var r=n(11064),i=n(57050),a=n(40327),s=n(32952),o=n(38983),l=n(84966),c=n(59312);function u(e,t){return{map:function(n,r){return e.map(n,(function(e){return t.map(e,r)}))}}}var d,p=n(5114);function m(e){var t,n,r=(t=e,n=p.Applicative,{map:u(t,n).map,of:function(e){return t.of(n.of(e))},ap:function(e,r){return t.ap(t.map(e,(function(e){return function(t){return n.ap(e,t)}})),r)}}),i=e.of(p.none);return{map:r.map,ap:r.ap,of:r.of,chain:function(t,n){return e.chain(t,(0,p.fold)((function(){return i}),n))},alt:function(t,n){return e.chain(t,(0,p.fold)(n,(function(t){return e.of((0,p.some)(t))})))},fold:function(t,n,r){return e.chain(t,(0,p.fold)(n,r))},getOrElse:function(t,n){return e.chain(t,(0,p.fold)(n,e.of))},fromM:function(t){return e.map(t,p.some)},none:function(){return i}}}!function(e){var t;e.URI="IOOption",e.ioOption=(0,c.pi)({URI:e.URI},m(r.io)),t=(0,a.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,n){return function(r){return e.ioOption.fold(r,t,n)}},e.fromM=e.ioOption.fromM}(d||(d={}));var h=n(22232),f=n(83078),g=n(8125),y=n(95574),v=n(71249),b=n(95195),w=n(81531),C=n(46680),S=n(40018),I=n(79227),x=n(66896),k=n(15646);class E{constructor(e,t=new URLSearchParams){this.base=e,this.params=t;const n=E._toString(e,t).length;(0,h.kG)(n<E.MAX_URL_LENGTH,"url exceeded length limit",String(n))}addParams(e){const t=Object.entries(e).reduce(((e,[t,n])=>(e.append(t,n),e)),(n=this.params,new URLSearchParams(n.toString())));var n;return new E(this.base,t)}toString(){return E._toString(this.base,this.params)}static _toString(e,t){const n=t.toString();return`${e}${n.length?`?${n}`:""}`}}E.MAX_URL_LENGTH=2083;var A,T,_=n(45586),L=n(95983),O=n(598),R=n(40151),P=n(76974),M=n(66310),F=n(91402),N=n(77176),D=n(44586),$=n(83401),B=n(77843),U=n(93508),j=n(95093),W=n(85985),G=n(36919),H=n(2834),z=n(67434),Y=n(38194),V=n(49524),q=n(5920),Z=n(25980),X=n(17594),J=n(26027),K=n(20594),Q=n(16892),ee=n(48521),te=n(35416),ne=n(93494);!function(e){e.changeAlertEffect=(e,t,n,r,i,s,o,l)=>({id:"changeAlertEffect",when:x.R.isWithAlertsId,what:te.nL.Effect.SwitchAlert.create(t.actionEvents.pipe(M.w((t=>{const c=e.get();if(!te.nL.hasCards(c))return F._(new h.ej("Cannot update state without cards"));switch(t.type){case k.lY.Type.alertMinicardButtonClick:return(0,a.pipe)(i.getRegistered(t.alertHighlight.alert.id),p.fold((()=>(l.error("somehow we got click on non registered alert",{alert:X.$.snapshot(t.alertHighlight.alert),alertInRepo:(0,a.pipe)(i.getById(t.alertHighlight.alert.id),p.map(X.$.fromModel),p.map(X.$.snapshot)),state:te.nL.snapshot(K.Mq.snapshot,r)(c)}),R.E)),(()=>P.of(t.alertHighlight))));case k.lY.Type.cardMatchesNavigationButtonClick:const e=t.transitionTo;switch(e.kind){case"anotherAlert":return(0,a.pipe)("right"===t.direction?n.nextAlert(e.card):(0,a.pipe)(n.prevAlert(e.card),f.vx(n.anyRegisteredAlert(e.card))),p.fold((()=>R.E),(e=>P.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,a.pipe)(i.getRegistered(e.card.activeAlert.id),p.fold((()=>R.E),(()=>P.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,h.vE)(e)}case k.lY.Type.switchToClosestByViewport:return((e,t,n,r)=>{const i=e=>(0,a.pipe)(t,p.map((t=>t.alignMarkToCard(e,Z.v.Animation.ANIMATE_ALL,p.none).pipe(O.c(R.E)))),p.getOrElse((()=>R.E)));return(0,a.pipe)(r((t=>(t.lensId===e.id||x.R.isMainLens(e.id))&&!S.bZ.isPremium(t)),"middleOfTheViewport"),p.fold((()=>R.E),(t=>(0,a.pipe)(n(e),p.filter((e=>e.activeAlert.id===t.alert.id)),p.fold((()=>P.of(t)),i)))))})(c.currentLens,s,r,o);default:return R.E}})),N.U((e=>({alertHighlight:e,alertSource:S.l$.sidebar,options:{order:"lensOrder"}})))))}),e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r,s){const o=e.view(te.nL.getActiveAlert(t)).pipe(N.U(p.filter((e=>p.isSome(r.getRegistered(e.id))&&!S.bZ.isInPremiumLens(e)))),M.w(p.fold((()=>R.E),(t=>D.y.create((()=>((0,a.pipe)(n.applyFeedback(t.id,{kind:l.PZ.LOOKED,subtype:I.J.getSubTypeFromLens(e.get().currentLens.id)},S.l$.sidebar),b.g_(s.handler("Failed to send LOOKED feedback").error,i.Q1)),()=>{p.isSome(r.getRegistered(t.id))&&(0,a.pipe)(n.applyFeedback(t.id,{kind:l.PZ.CLOSED,subtype:I.J.getSubTypeFromLens(e.get().currentLens.id)},S.l$.sidebar),b.g_(s.handler("Failed to send CLOSED feedback: ").error,i.Q1))})))))));return{id:"sendActiveAlertFeedbacksEffect",when:i.W8,what:te.nL.Effect.Applicator.create(o.pipe(O.c($.C)))}}}(A||(A={}));class re{constructor(e,t,n,r,o,c,u,d,m,y,v,x){this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._markOnboardingAsSeen=o,this._markMuteQuotedAdviceAsDismissed=c,this._sendToSignInExperiment=d,this._getActiveItemWithAlert=y,this._checksFeedCapabilities=v,this._lensState=x,this._log=w.C8.Logging.getLogger("CardsViewModelImpl",C.i.DEBUG),this._subs=new _.w.Keeper,this._flushCompleteTransition=new s.xQ,this._flushPositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.completePositionAnimation=new s.xQ,this.changePosition=new s.xQ,this._transitionBuffer=B.F(100).pipe(U.O(0),j.T(this._flushCompleteTransition)),this._positionAnimationBuffer=B.F(100).pipe(U.O(0),j.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(W.h(k.eI.isStartTransitionTo),N.U((e=>t=>T.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t)))),this._completeTransitionStateChanges=this.actionEvents.pipe(W.h(k.eI.isCompleteTransitionTo),G.f(this._transitionBuffer),W.h(g.Dw),N.U((e=>t=>{const n=t.currentLens,r=this._applyCompleteVSChange(n,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(C.i.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:L.aW.diff(n.items,r.items)}),te.nL.Prism.getLens().set(r,t)}))),this._changePositionEffect=this.changePosition.pipe(N.U((({id:e,height:t})=>n=>{const r=(0,a.pipe)(q.l.update(n.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(Q.s.PositionState.changeHeight(e.positionState,t))(e))),b.g_((()=>n.currentLens.items),i.yR));return T.itemsLens.set(r,n)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(G.f(this._positionAnimationBuffer),W.h(g.Dw),N.U((e=>t=>{const n=t.currentLens.items,r=e.map((e=>[e,!1])).reduce(((e,[t,n])=>(0,a.pipe)(q.l.update(e,t,(e=>this._checksFeedCapabilities.changePosition(Q.s.PositionState.changeAnimationInProgress(e.positionState,n))(e))),b.g_((()=>e),i.yR))),n);return T.itemsLens.set(r,t)}))),this._switchToNextChanges=this.actionEvents.pipe(W.h((e=>e.type===k.lY.Type.switchToNext)),N.U((()=>e=>e.patch({currentLens:(0,a.pipe)(te.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):p.none,p.fold((()=>(0,a.pipe)(te.nL.getActiveAlert(this._getActiveItemWithAlert)(e),p.fold((()=>{throw new h.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>te.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:S.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(W.h(k.lY.isDismissMuteQuotedAdvice),H.b(this._markMuteQuotedAdviceAsDismissed),N.U((()=>e=>{const t=e.currentLens.items.filter((0,i.ls)(this._checksFeedCapabilities.hasActiveAlert,p.exists(X.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,a.pipe)(q.l.update(e,t,this._cardFactory.hideMuteQuotedAdvice),b.g_((()=>e),i.yR))),e.currentLens.items);return T.itemsLens.set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(W.h(k.lY.isChangeUserInput),H.b((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),N.U((({cardId:e,userInput:t})=>n=>{const r=(0,a.pipe)(n.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(t?p.some(t):p.none)),b.g_((()=>n.currentLens.items),i.yR));return T.itemsLens.set(r,n)}))),this._focusChecksFeedItem=this.actionEvents.pipe(W.h(k.lY.isMiniItemClick),N.U((e=>t=>t.patch({currentLens:(0,a.pipe)(t.currentLens.items.find((t=>t.id===e.id)),p.fold((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,i.MZ)((0,a.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:S.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(W.h(k.lY.isChecklistItemCollapseButtonClick),N.U((()=>e=>e.patch({currentLens:te.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:S.l$.sidebar})))),this._requestShortenItReplacements=this.actionEvents.pipe(W.h(k.lY.isRequestShortenItReplacementsAction),N.U((({alertId:e,itemId:t})=>(0,a.pipe)(this._alertsService.requestShortenItReplacements(e),b.UI((e=>({newAlert:e,itemId:t})))))),N.U((e=>this._updateShortenItCard(e)))),this._smartPhrasesFeedback=this.actionEvents.pipe(W.h(k.lY.isSmartPhrasesFeedbackAction),N.U((({cardId:e,alertId:t,feedbackType:n})=>(0,a.pipe)(this._alertsService.changeSmartPhrasesFeedback(t,n),b.UI((t=>({newAlert:t,cardId:e})))))),H.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesShowMoreIdeas=this.actionEvents.pipe(W.h(k.lY.isSmartPhrasesShowMoreIdeasAction),N.U((({cardId:e,alertId:t})=>(0,a.pipe)(this._alertsService.rotateSmartPhrasesReplacements(t),b.UI((t=>({newAlert:t,cardId:e})))))),H.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesApply=this.actionEvents.pipe(W.h(k.lY.isSmartPhrasesApplyAction),N.U((({cardId:e,alertId:t,replacementIndex:n})=>(0,a.pipe)(this._alertsService.discardSmartPhrasesReplacement(t,n),b.UI((t=>({newAlert:t,cardId:e})))))),H.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._synfonyDrilldown=this.actionEvents.pipe(W.h(k.GM.isDrilldown),N.U((({cardId:e,wordIndex:t})=>n=>(0,a.pipe)(q.l.update(n.currentLens.items,e,(e=>{const n=e;return J.X.changeSynfonySelection((0,a.pipe)(n.synfonySelection,p.getOrElse((()=>[])),(e=>p.some(e.concat([t])))))(n)})),b.g_((()=>n),(e=>te.nL.Prism.getLens().compose(ne.v.Prism.items).set(e,n))))))),this._synfonyBack=this.actionEvents.pipe(W.h(k.GM.isBack),N.U((({cardId:e})=>t=>(0,a.pipe)(q.l.update(t.currentLens.items,e,(e=>{const t=e;return J.X.changeSynfonySelection((0,a.pipe)(t.synfonySelection,p.map((e=>e.slice(0,-1)))))(t)})),b.g_((()=>t),(e=>te.nL.Prism.getLens().compose(ne.v.Prism.items).set(e,t))))))),this._sendToSignIn=(0,a.pipe)(this._sendToSignInExperiment,p.map((e=>e(this.actionEvents)))),this._sendFeedback=(0,i.ls)(((e,t)=>this._alertsService.applyFeedback(e,Object.assign(Object.assign({},t),{subtype:I.J.getSubTypeFromLens(this._lensState.get().currentLens.id)}),S.l$.sidebar)),b.g_(this._log.handler("error calling alert service to send a feedback").error,i.Q1)),this._showIgnoreForm=new s.xQ,this._showIgnoreFormEffect=(0,a.pipe)(this._showIgnoreForm,N.U((e=>t=>T.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"feedback_form",clockwise:!0,options:e.options}]]),t)))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(W.h(k.lY.isMuteCategoryAction),N.U((e=>t=>T.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t)))),this._undoMutedAlertEffect=this.actionEvents.pipe(W.h(k.lY.isUndoMuteCategoryAction),N.U((e=>t=>T.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t)))),this._handleAlertIgnore=(0,i.ls)(ie((({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:l.PZ.IGNORE,drilldownSuggestionIds:t})),(e=>()=>this._showIgnoreForm.next(e))),(e=>this.actionEvents.pipe(W.h(k.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(W.h(k.lY.isHoverAction),H.b((()=>this._ops.flush())),z.R(((e,t)=>"hover"===t.kind?p.some(t.id):(0,a.pipe)(e,p.filter((e=>e!==t.id)))),p.none),Y.B()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleAlertIgnore(m),this._handleAlertResolve(),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleSmartPhrasesDone(),this._handleSmartPhrasesApplyLast(),this._handleSentenceLevelBrandTonesFeedback(),this._handleDrilldown()),(0,a.pipe)(u,f.bw((({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t)))))}_applyStartVSChange(e,t){return t.reduce(((e,[t,n])=>(0,a.pipe)(q.l.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(n)(e))),b.g_((()=>e),i.yR))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,n])=>(0,a.pipe)(e.items.get(t),p.map((({value:e})=>e)),p.fold((()=>e),(r=>ee.o.isAnimatable(r)&&"removed"===r.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,a.pipe)(q.l.update(e.items,t,(e=>ee.o.isAnimatable(e)&&e.visualState.transitionId===n?this._checksFeedCapabilities.completeTransition(n)(e):e)),b.g_((()=>e),(t=>ne.v.Prism.items.set(t,e)))))))),e)}_handleSentenceLevelBrandTonesFeedback(){return this.actionEvents.pipe(W.h(k.lY.isSentenceLevelBrandTonesFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>(this._alertsService.changeSentenceLevelBrandTonesFeedback(e,t),this._sendFeedback(e,{kind:t===S.id.accurate?l.fA.EMOTION_SENTENCE_LIKE:l.fA.EMOTION_SENTENCE_DISLIKE}))))}_sendSmartPhrasesUpdateStateAction(e){return(0,a.pipe)(e,b.UI((({newAlert:e})=>e?this.actionEvents.next({type:k.lY.Type.smartPhrasesUpdateState,alertId:e.id,state:e.getAlertState()}):void 0)))}_updateSmartPhrasesCard(e){return t=>(0,a.pipe)(e,b.tS((({newAlert:e,cardId:t})=>y.vM((()=>((0,h.kG)(void 0!==e,"SmartPhrases alert should exist when updating SmartPhrases card."),{newAlert:e,cardId:t}))))),b.Zl((({newAlert:e,cardId:n})=>q.l.update(t.currentLens.items,n,this._checksFeedCapabilities.updateWithAlerts([e])))),b.g_((e=>(this._log.error("Error updating SmartPhrases card.",e),T.itemsLens.set(t.currentLens.items,t))),(e=>T.itemsLens.set(e,t))))}_updateShortenItCard(e){return t=>(0,a.pipe)(e,b.Zl((({newAlert:e,itemId:n})=>q.l.update(t.currentLens.items,n,this._checksFeedCapabilities.updateWithAlerts([e])))),b.g_((e=>(this._log.error("Error updating card with ShortenIt alert.",e),t)),(e=>te.nL.Prism.getLens().compose(ne.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(W.h(k.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(W.h(k.lY.isTakeawayDetectionFeedbackOrDoneAction)).subscribe((({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===k.lY.Type.takeawayCorrectlyDetected?S.TO.correctlyDetected:t===k.lY.Type.takeawayCorrectlyDetectedAndDone?S.TO.correctlyDetectedAndDone:t===k.lY.Type.takeawayIncorrectlyDetected?S.TO.incorrectlyDetected:(0,h.vE)(t))))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(W.h(k.lY.isTakeawayFeedbackAction)).subscribe((e=>{switch(e.type){case k.lY.Type.takeawayCorrectlyDetected:return this._sendFeedback(e.alertId,{kind:l.PZ.ACCEPTED,replacementText:e.takeawayText});case k.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:l.PZ.IGNORE});case k.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:l.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});case k.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:l.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});default:(0,h.vE)(e)}}))}_handleSmartPhrasesDone(){return this.actionEvents.pipe(W.h(k.lY.isSmartPhrasesDoneAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:l.PZ.HIDE})))}_handleSmartPhrasesApplyLast(){return this.actionEvents.pipe(W.h(k.lY.isSmartPhrasesUpdateStateAction),W.h((e=>0===e.state.replacementsLength))).subscribe((({alertId:e})=>this.actionEvents.next({type:k.lY.Type.smartPhrasesDone,alertId:e,source:"auto"})))}_handleAlertResolve(){return this.actionEvents.pipe(W.h(k.lY.isAlertResolveAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:l.PZ.ACKNOWLEDGED})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(W.h(k.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>this._sendFeedback(e,{kind:l.PZ.IGNORE,reason:t})))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(W.h(k.lY.isMutedAlertCardDismissedAction)).subscribe((t=>(0,a.pipe)(e.muteCategories([t.categoryId]),b.g_(this._log.handler("error calling categories model to commit muted category").error,i.Q1))))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(W.h(k.lY.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlerts(){return this.actionEvents.pipe(W.h(k.lY.isAlertApplyAction)).subscribe((e=>(0,a.pipe)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:S.l$.sidebar,feedbackSubtype:I.J.getSubTypeFromLens(this._lensState.get().currentLens.id),drilldownSuggestionIds:e.drilldownSuggestionIds}),b.g_(this._log.handler("error calling alert service to apply an alert").error,i.Q1))))}_handleDrilldown(){return this.actionEvents.pipe(W.h(k.GM.isDrilldown)).subscribe((e=>this._sendFeedback(e.alertId,{kind:l.P2.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId})))}_dismissAlertsBatch(){return this.actionEvents.pipe(W.h(k.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,a.pipe)(this._alertsService.dismissBatch(e.alerts,I.J.getSubTypeFromLens(this._lensState.get().currentLens.id)),b.g_(this._log.handler("error calling alert service to dismiss alerts batch").error,i.Q1))))}_newFeatureSeen(){return this.actionEvents.pipe(W.h(k.lY.isOnboardingClose)).subscribe((e=>(0,a.pipe)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,a.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._smartPhrasesFeedback,"smartPhrasesFeedback"],[this._smartPhrasesShowMoreIdeas,"smartPhrasesShowMoreIdeas"],[this._smartPhrasesApply,"smartPhrasesApply"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._requestShortenItReplacements,"requestShortenItReplacements"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this.actionEvents.pipe(W.h(k.lY.isNavigation),H.b(this._navigationEvents),O.c(R.E)),"navigationEvents"],[(0,a.pipe)(this._sendToSignIn,p.fold((()=>R.E),V.y)),"sendToSignIn"],[this._showIgnoreFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],v.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:x.R.isWithAlertsId,what:te.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}}!function(e){e.itemsLens=te.nL.Prism.getLens().compose(ne.v.Prism.items);let t;e.Mock=class{constructor(){this.animate=o.h.create(!0),this.clockwise=o.h.create(!0),this.toggleAnimations=()=>this.animate.modify((e=>!e)),this.completePositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.flushTransitionTo=i.Q1,this.sideEffect={id:"cardsViewModelMock",when:x.R.isWithAlertsId,what:te.nL.Effect.Applicator.create(R.E)},this.changePosition=new s.xQ,this.dispose=g.ZT}},function(e){e.sendToSignIn=(e,t)=>n=>n.pipe(W.h((e=>e.type===k.lY.Type.toSignIn)),N.U((()=>n=>(e.actions.openUrl(new E(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n))))}(t=e.Experiments||(e.Experiments={}))}(T||(T={}));const ie=(e,t)=>n=>i=>(0,a.pipe)(i.eligibleForDismissSurvey,r.of,d.chain((e=>(0,a.pipe)(n,r.UI((t=>t?p.none:p.some(e)))))),d.fold((()=>e(i)),(e=>t({id:i.id,options:e}))))},48052:(e,t,n)=>{n.d(t,{$:()=>Z});var r,i=n(71249),a=n(57050),s=n(40327),o=n(36991),l=n(67394),c=n(5114),u=n(95195),d=n(26328),p=n(40018),m=n(22232),h=n(17771),f=n(64450),g=n(84966),y=n(95574),v=n(26653),b=n(98637);function w(e,{text:t,ops:n}){n.reduce(((t,n,r)=>l.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):l.JU.isInsertGap(n)?(e.insertGap("",n,r),t):l.JU.isInsert(n)?t:l.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):l.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,m.vE)(n)),t)}function C(e){return 0===e.replace(/ /g,"").length}function S(e,t){(0,s.pipe)(e,i.Z$,c.fold((()=>{C(t.text)||e.push(t)}),(n=>{n.type===t.type?n.text+=t.text:e.push(t)})))}function I(e){return(0,s.pipe)(y.vM((()=>(0,s.pipe)(e,d.UI((t=>{const n=[];return w({insertString(t,{type:n}){if(n===l.JU.Type.Main)throw new D("Remove transform contains main insert",e)},insertGap(){throw new D("Remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||S(n,{type:b.GP.Text,text:e})},remove(e,{type:t}){S(n,{type:t!==l.JU.Type.Main||C(e)?b.GP.Text:b.GP.Delete,text:e})}},t),n})),i.xH))),u.tS((0,a.ls)(u.DT((e=>e.length>0),(()=>new D("Remove transform contains no data",e))),u.UI((e=>({type:r.Type.Remove,remove:e}))))))}function x(e){return(0,s.pipe)(y.vM((()=>(0,s.pipe)(e,d.UI((t=>{const n=[];return w({insertString(t,{type:n}){if(n===l.JU.Type.Main)throw new D("Multi-remove transform contains main insert",e)},insertGap(){throw new D("Multi-remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||S(n,{type:b.GP.Text,text:e})},remove(e,{type:t}){S(n,{type:t!==l.JU.Type.Main||C(e)?b.GP.Text:b.GP.Delete,text:e})}},t),n}))))),u.tS((0,a.ls)(u.DT((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new D("Incomplete multi-remove",e))),u.UI((e=>({type:r.Type.RemoveOr,removes:e}))))))}function k(e){return(0,s.pipe)(y.vM((()=>(0,s.pipe)(e,d.UI((t=>{const n=[];return w({insertString(e,{type:t}){S(n,{type:l.JU.isOptionalType(t)?b.GP.Text:b.GP.Insert,text:e})},insertGap(){throw new D("Insert transform contains gap insert",e)},retain(e,{type:t}){(!l.JU.isOptionalType(t)||n.length>0)&&S(n,{type:b.GP.Text,text:e})},remove(t,{type:n}){if(n===l.JU.Type.Main)throw new D("Insert transform contains main delete",e)}},t),n}))))),u.tS((0,a.ls)(d.nI,u.Yo((()=>new D("Incomplete insert",e))),u.UI((e=>({type:r.Type.Insert,inserts:e}))))))}function E(e){const{substitutions:t,longestSubstitution:n,inserts:a}=e.reduce(((e,[t,n])=>{const r=t.map((e=>e.text)).join("");return e.substitutions.push(r),e.inserts.push(n),r.length>e.longestSubstitution.length&&(e.longestSubstitution=r),e}),{substitutions:[],inserts:[],longestSubstitution:""}),o=(0,s.pipe)(t,d.UI((e=>n.split(e).join(""))));return(0,s.pipe)(i.yL(a,o,((e,t)=>(t&&e.push({type:b.GP.Text,text:t}),e))),d.nI,u.Yo((()=>new Error("Substitution processing error"))),u.UI((e=>({type:r.Type.Substitution,remove:[{type:b.GP.Delete,text:n}],inserts:e}))))}function A(e,t){return(0,s.pipe)(T(e),u.tS((n=>(0,s.pipe)(y.vM((()=>{(0,m.kG)(t.length>0,"Drilldown transform - empty drilldown tree");return{inserts:(0,s.pipe)(t,d.UI((function e([t,r]){return(0,m.kG)(void 0!==n.inserts[t],"Drilldown transform - alternative insert not found"),{alternativeId:t,label:n.inserts[t],subLabels:r.map(e)}}))),remove:n.remove,type:r.Type.Drilldown}})),u.Vn(D.fromError(e))))))}function T(e){return(0,s.pipe)(y.vM((()=>(0,s.pipe)(e,d.UI((t=>{const n=[[],[]];return w({insertString(e){S(n[1],{type:b.GP.Insert,text:"\n"===e?"¶ ":e})},insertGap(){throw new D("Substitution transform contains gap insert",e)},remove(e){S(n[0],{type:b.GP.Delete,text:e})},retain(e,{type:t}){if(!l.JU.isOptionalType(t)||0!==n[0].length){const t={type:b.GP.Text,text:e};n[0].push(t),n[1].push(t)}}},t),(0,m.kG)(n[0].length>0,"Substituted part is empty"),(0,m.kG)(n[1].length>0,"Inserts are empty"),n}))))),u.tS(E),u.Vn(D.fromError(e)))}function _(e){if(!("list"in e))return c.none;switch(e.list){case"bullet":case"dashed":case"ordered":return c.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return c.none}}function L(e){return(0,s.pipe)(e,u.DT((e=>1===e.length),(()=>new D("Expected full-sentence transform to have 1 alternative",e))),u.UI((0,a.ls)(d.YM,(t=>{let n={blockStart:0,ops:[],kind:b._k.PlainText};return w({insertString(e,t){const r=e.split("\n");if(1===r.length)n.ops.push({type:b.GP.Insert,text:e,shouldBeCollapsed:!1});else{const e=(0,s.pipe)(t.attributes,_,c.fold((()=>a.Q1),(({kind:e,indent:t})=>()=>{n.ops.splice(n.blockStart,1,{type:b.GP.List,kind:e,indent:t}),n={kind:b._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}})));for(let t=0,i=r.length-1;t<=i;t++){const a=r[t];a&&n.ops.push({type:b.GP.Insert,text:a}),t<i&&(e(),n.blockStart=n.ops.length,n.ops.push({type:b.GP.Insert,text:"\n"}))}}},insertGap(){throw new D("Full sentence transform contains gap insert",e)},retain(e,t){n.ops.push({type:b.GP.Text,text:e,shouldBeCollapsed:O(t.type,e)})},remove(e,t){n.ops.push({type:b.GP.Delete,text:e,shouldBeCollapsed:O(t.type,e)})}},t),n}))),u.tS((0,a.ls)(c.fromPredicate((e=>e.ops.length>0)),u.Yo((()=>new D("Got empty full sentence transform",e))),u.UI((({ops:e,kind:t})=>({type:r.Type.FullSentence,ops:e,kind:t}))))))}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.SmartPhrases=6]="SmartPhrases",e[e.OneGap=7]="OneGap",e[e.ShortenIt=8]="ShortenIt"}(t=e.Type||(e.Type={})),function(e){e.parse=function(t,n){const r=t[0];if(r.isFullSentence)return e.FullSentence;if(r.isSmartPhrases)return e.SmartPhrases;if(c.isSome(n.drilldown))return e.Drilldown;if(r.isShortenIt)return e.ShortenIt;switch(r.type){case l.r3.Type.Insert:return e.Insert;case l.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case l.r3.Type.Substitution:return r.ops.find(l.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,m.vE)(r.type)}}}(t=e.Type||(e.Type={})),e.create=function(t){return n=>{const r=e.Type.parse(n,t);switch(r){case e.Type.Remove:return I(n);case e.Type.RemoveOr:return x(n);case e.Type.Insert:return k(n);case e.Type.Substitution:return T(n);case e.Type.Drilldown:return A(n,(0,s.pipe)(t.drilldown,c.getOrElse((()=>g.H5.empty))));case e.Type.FullSentence:return L(n);case e.Type.SmartPhrases:return R(n);case e.Type.OneGap:return P(n);case e.Type.ShortenIt:return M(n);default:return(0,m.vE)(r)}}}}(r||(r={}));const O=(e,t)=>e===l.JU.Type.Optional&&t.length>3;function R(e){return(0,s.pipe)(y.vM((()=>(0,s.pipe)(e,d.UI((t=>{const n=o.s.normalizeDelta(new f.i(t.ops));if(2!==n.ops.length)throw new D("SmartPhrases transform must contain exactly 2 operations",e);if(!o.s.isRetain(n.ops[0]))throw new D("SmartPhrases transform first operation must be a retain",e);if(!o.s.isInsertString(n.ops[1]))throw new D("SmartPhrases transform second operation must be an insert",e);const r=[];return w({insertString(t,{type:n}){if(n!==l.JU.Type.Main)throw new D("SmartPhrases transform insert operation must be of type MAIN",e);S(r,{type:b.GP.Insert,text:t})},insertGap(){throw new D("SmartPhrases transform contains gap insert",e)},retain(){},remove(){throw new D("SmartPhrases transform contains delete",e)}},t),r}))))),u.tS((0,a.ls)(d.nI,u.Yo((()=>new D("Incomplete SmartPhrases transform",e))),u.UI((e=>({type:r.Type.SmartPhrases,inserts:e}))))))}function P(e){return(0,s.pipe)(y.vM((()=>((0,m.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,s.pipe)(e,d.YM,(e=>{const t=[],n=[];let r=!1;return w({insertString(e,{type:i}){S(r?n:t,{type:l.JU.isOptionalType(i)?b.GP.Text:b.GP.Insert,text:e})},insertGap(){(0,m.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain(e,{type:i}){const a=r?n:t;(!l.JU.isOptionalType(i)||a.length>0)&&S(a,{type:b.GP.Text,text:e})},remove:a.Q1},e),(0,m.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,m.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))))),u.Pd(D.fromError(e),(({left:e,right:t})=>({type:r.Type.OneGap,left:e,right:t}))))}function M(e){return(0,s.pipe)(e,u.DT((e=>1===e.length||3===e.length),(()=>new D("Expected shorten-it transform to have 1 or 3 alternatives",e))),u.tS(d.fw(u.wE)(N)),u.UI((e=>({type:r.Type.ShortenIt,summaries:e}))))}function F(e){const t=e.reduce(((e,t)=>t.type===b.GP.Text||t.type===b.GP.Delete?e+t.text:e),""),n=e.reduce(((e,t)=>t.type===b.GP.Text||t.type===b.GP.Insert?e+t.text:e),""),r=Math.max(t.length-n.length,0);return(0,s.pipe)(v.T.fromNumber(r/t.length),u.Vn((e=>new Error(e))))}function N(e){const t=[];return w({insertString(e){t.push({type:b.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new D("ShortenIt transform contains gap insert",[e])},retain(e){t.push({type:b.GP.Text,text:e,shouldBeCollapsed:!1})},remove(e){t.push({type:b.GP.Delete,text:e,shouldBeCollapsed:!0})}},e),h.Y(u.wE)({replacement:(0,s.pipe)(t,u.DT((e=>e.length>0),(()=>new D("Got empty ShortenIt transfrom",[e])))),compressionRatio:F(t)})}class D extends m.sH{constructor(e,t){super(e),this.alternatives=t}static fromError(e){return t=>{const n=new D(t.message,e);return n.stack=t.stack,n}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(l.JU.anonymize)))}`}}var $=n(8125),B=n(81531);const U=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,m.kG)((0,$.Dw)(e),"transforms should have at least one element");const[n]=e;return j(n)>-1?b.nV.create(W(n),e.map(G),t,!0):b.zE.create(e,t)}(e.content.map((e=>[{type:b.GP.Insert,text:e}])),t);case"transform":return function(e,t){(0,m.kG)((0,$.Dw)(e),"transforms should have at least one element");const[n]=e;return j(n)>-1?b.nV.create(W(n),e.map(G),t):function(e){return 2===e.length&&z(e)}(e)?b.fi.create(e[0],e[1],t):z(e)?b.zE.create(e,t):b.n6.create(e,t)}(e.content.map(q),t);default:return(0,m.vE)(e.kind)}};function j(e){return e.findIndex((e=>"arrow"===e.type))}function W(e){return e.slice(0,j(e))}function G(e){return e.slice(j(e)+1)}function H(e){return e.every((e=>"delete"!==e.type))}function z(e){return e.every(H)}function Y(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const V=[Y("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:b.GP.Delete,text:e[2]}))),Y("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:b.GP.Insert,text:e[2]}))),Y("(→)",(e=>({type:b.GP.Arrow}))),Y("([^<>→]+)",(e=>({type:b.GP.Text,text:e[1]})))];function q(e){function t(e){for(const t of V){const n=e.match(t.re);if(null!==n)return[t.createResult(n),n[n.length-1]]}}function n(t){let n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map((e=>t.indexOf(e)));if(n.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(n=n.filter((e=>e>0)),(0,$.Dw)(n)){const e=Math.min(...n);return[{type:b.GP.Text,text:t.substring(0,e)},t.substring(e)]}return[{type:b.GP.Text,text:t},""]}const r=[];let i,a=e,s=!1,o=0;for(;(0,$.Dw)(a);){const e=t(a);void 0===e&&(s=!0);const[l,c]=e||n(a);i&&i.type===b.GP.Text&&l.type===b.GP.Text?i.text+=l.text:(i&&i.type===b.GP.Delete&&l.type===b.GP.Insert&&(r.push({type:b.GP.Arrow}),o++),r.push(l)),l.type===b.GP.Arrow&&o++,i=r[r.length-1],a=c}return(s||!(0,$.Dw)(r)||o>1)&&B.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:o}),r}const Z=(0,a.ls)((function(e){return t=>(0,s.pipe)(t.alternatives,X(e,{isFullSentence:p.eT.isFullSentence(t.cardType),isSmartPhrases:p.eT.isSmartPhrases(t.cardType),isShortenIt:p.eT.isShortenIt(t.cardType)}),u.tS(r.create({drilldown:t.drilldown})))}),(e=>t=>(0,s.pipe)(t.content,u.g_((e=>u.F2(U(e,t.todo))),(0,a.ls)(e,u.UI((e=>function(e,t){switch(e.type){case r.Type.Drilldown:return b.ey.create(e.remove,e.inserts,t);case r.Type.Substitution:return b.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?b.fi.create(e.inserts[0],e.inserts[1],t):b.zE.create(e.inserts,t);case r.Type.Remove:return b.n6.create([e.remove],t);case r.Type.RemoveOr:return b.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case b._k.WithFormatting:return b.i3.createWithFormatting(e.ops,t);case b._k.PlainText:return b.i3.createPlainText(e.ops,t);default:return(0,m.vE)(e)}}(e,t);case r.Type.SmartPhrases:return b.zE.create(e.inserts,t);case r.Type.OneGap:return b.G7.create(e,t);case r.Type.ShortenIt:return function(e,t){return{type:b.b$.Type.ShortenIt,tooltipText:t,labels:e.summaries}}(e,t);default:return(0,m.vE)(e)}}(e,t.todo))))))));function X(e,t){const n=(0,a.ls)(e,(e=>e.delta.reduce(((e,t)=>o.s.isInsertString(t)?e+t.insert:e),"")));return(0,a.ls)(function(e,{isFullSentence:t,isSmartPhrases:n,isShortenIt:r}){return a=>(0,s.pipe)(a,i.DZ((i=>(0,s.pipe)(i.type,c.map((a=>{if(l.r3.hasOptionalContext(i.ops)){const[s,...o]=i.ops,c=l.JU.length(s);return{text:e(c,i.lengthAffected-c),ops:o,type:a,isFullSentence:t,isSmartPhrases:n,isShortenIt:r}}return{text:e(0,i.lengthAffected),ops:i.ops,type:a,isFullSentence:t,isSmartPhrases:n,isShortenIt:r}}))))),d.nI)}(n,t),u.Yo((()=>new Error("Alternative array is empty"))))}},98637:(e,t,n)=>{n.d(t,{GP:()=>r,b$:()=>i,zE:()=>a,n6:()=>s,fz:()=>o,fi:()=>l,ey:()=>c,nV:()=>u,_k:()=>d,i3:()=>p,G7:()=>m,q6:()=>h});var r,i,a,s,o,l,c,u,d,p,m,h,f=n(57050),g=n(73975),y=n(8125),v=n(45701),b=n(26653);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(r||(r={})),function(e){let t;!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.Drilldown=7]="Drilldown",e[e.ShortenIt=8]="ShortenIt"}(t=e.Type||(e.Type={})),e.eq=g.f7(((e,t)=>e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels))),e.isFullSentence=t=>t.type===e.Type.FullSentence,e.isOneGap=t=>t.type===e.Type.OneGap,e.isShortenIt=t=>t.type===e.Type.ShortenIt,e.isRegular=t=>(0,f.ff)((0,y.Kg)(e.isFullSentence,e.isOneGap,e.isShortenIt))(t)}(i||(i={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.InsertList})}(a||(a={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteList})}(s||(s={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteOr})}(o||(o={})),function(e){e.create=(e,t,n)=>({type:i.Type.InsertOr,labels:[e,t],tooltipText:n})}(l||(l={})),function(e){e.create=function(e,t,n){return{type:i.Type.Drilldown,original:e,labels:t,tooltipText:n}},e.getSelectedItems=(e,t)=>{if(!t||0===t.length)return{activeLabels:e.labels,original:e.original};const n=t.slice(1).reduce(((e,t)=>e.subLabels[t]),e.labels[t[0]]);return{activeLabels:n.subLabels,original:n.label}}}(c||(c={})),function(e){function t(e,t){return[...e,...t].map((e=>e.text.length)).reduce(y.Sm,0)>30}e.create=function(e,n,r,a){return{type:i.Type.Arrow,original:e,labels:n,tooltipText:r,onlyReplacements:a||t(e,n[0])}}}(u||(u={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(d||(d={})),function(e){e.createPlainText=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:d.PlainText}},e.createWithFormatting=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:d.WithFormatting}}}(p||(p={})),function(e){e.create=function(e,t){return{type:i.Type.OneGap,labels:{left:e.left.map((e=>Object.assign(Object.assign({},e),{type:r.Text}))),right:e.right.map((e=>Object.assign(Object.assign({},e),{type:r.Text})))},tooltipText:t}}}(m||(m={})),function(e){e.ord=v.contramap((e=>e.compressionRatio))(v.getDualOrd(b.T.ord))}(h||(h={}))},26027:(e,t,n)=>{n.d(t,{X:()=>x});var r=n(35214),i=n(57050),a=n(40327),s=n(5114),o=n(22232),l=n(95195),c=n(45701),u=n(73975),d=n(8125),p=n(81531),m=n(40018),h=n(98637),f=n(77176),g=n(28043),y=n(19751),v=n(85985),b=n(36156),w=n(17594),C=n(55567),S=n(77610),I=n(4890);class x{constructor(e,t,n,r,i,o,l,c,u,d,p,m,h,f,g,y){this.id=e,this.alerts=t,this.activeAlertIndex=n,this.activeHighlightIndex=r,this.positionState=i,this.visualState=o,this.meta=l,this.lensId=c,this.renderOptions=u,this.muteCategory=d,this.order=p,this.initialAlertId=m,this.removedAlertsIds=h,this.cachedTransform=f,this.userInput=g,this.synfonySelection=y,this.kind=x.Kind,this.activeAlert=S.C.getActiveAlert(this),this.transform=(0,a.pipe)(this.cachedTransform,s.map((e=>e.labels)))}get activeAlertRemoved(){return S.C.activeAlertRemoved(this)}get scheduledToDispose(){return S.C.willBeDisposed(this,this.removedAlertsIds)}hashCode(){return x.hashCode(this)}equals(e){return x.eq.equals(this,e)}toJSON(){return Object.assign(Object.assign({},this),{renderOptions:I.j.toJSON(this.renderOptions)})}}!function(e){let t,n;function I(e){return e.activeAlert.alertType===m.bZ.Type.Synfony}function x(e){return e.activeAlert.type===w.$.Type.default}e.Kind="AlertCard",e.isPriority=e=>w.$.isPriority(e.activeAlert),e.updateAlerts=(t,n,r,i)=>a=>new e(a.id,t,r,i,a.positionState,a.visualState,a.meta,a.lensId,a.renderOptions,a.muteCategory,a.order,a.initialAlertId,n,a.cachedTransform,a.userInput,a.synfonySelection),e.updateUserInput=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,t,n.synfonySelection),e.changeVisualState=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,t,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changePosition=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,t,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changeMeta=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,t,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changeTransform=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,t,n.userInput,n.synfonySelection),e.changeSynfonySelection=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,t),e.canHydrate=e=>!(e.meta.checking!==C.n.CheckingState.Idle||S.C.activeAlertRemoved(e)),e.getId=function(e){return e.id},function(e){e.getRemoveAlerts=(e,t)=>(n,r)=>o=>{const l=new Set(n.map((e=>e.id)));return S.C.hasAnyOfAlerts(l)(o)?e.remove(o,[o.activeAlert],(0,a.pipe)(r,s.map((e=>t.compare(o,e)>0)),s.getOrElse(i.W8))):o},e.getChangePosition=function(e){return{changePosition:t=>n=>e.changePosition(n,t)}},e.getTransitionTo=function(e){return{transitionTo:t=>n=>e.transitionTo(n,t)}},e.getCompleteTransition=function(e){return{completeTransition:t=>n=>e.completeTransition(n,t)}},e.getRemove=function(e){return{remove:(t,n)=>r=>t(r)?e.remove(r,[r.activeAlert],n(r)):r}},e.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>n=>e.updateWith(n,t)}},e.getSelect=function(e){return{select:(t,n)=>r=>e.selectFirstAlert(r,t,n),selectByAlert:(t,n,r)=>i=>e.select(i,n,t,r),unselect:(t,n)=>r=>e.unselect(r,t,n)}}}(t=e.Capabilities||(e.Capabilities={})),function(e){e.default="default",e.super="super",e.takeaway="takeaway"}(n=e.Type||(e.Type={})),(0,o.L0)(null),e.isSynfonyView=I,e.isDefaultView=x,e.match=function(e){return t=>{if(function(e){return e.activeAlert.type===w.$.Type.super}(t))return l.F2(e.super(t));if(function(e){return e.activeAlert.type===w.$.Type.smartPhrases}(t))return l.F2(e.smartPhrases(t));if(function(e){return e.activeAlert.type===w.$.Type.takeaway}(t))return l.F2(e.takeaway(t));if(function(e){return e.activeAlert.type===w.$.Type.sentenceLevelBrandTones}(t))return l.F2(e.sentenceLevelBrandTones(t));if(I(t))return l.F2(e.synfony(t));if(function(e){return e.activeAlert.type===w.$.Type.shortenIt}(t))return l.F2(e.shortenIt(t));if(x(t))return l.F2(e.default(t));const n={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return l.t$(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(n,null,2)}]`))}},e.eq=S.C.eq,e.hashCode=e=>(0,b.NO)({itemHashCode:S.C.hashCode(e),synfonySelection:(0,a.pipe)(e.synfonySelection,s.getOrElse((()=>[])),(e=>e.join(",")))});const k=c.getMonoid();let E;e.ord=(0,r.fold)(k)([(0,a.pipe)(c.ordNumber,c.contramap((e=>e.order))),(0,a.pipe)(c.ordString,c.contramap((e=>e.initialAlertId)))]),e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,a.pipe)(e.from,s.exists((t=>"expanded"===t&&"rendered"===e.transition.type)))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=u.f7(((e,t)=>e.type===t.type&&e.clockwise===t.clockwise))}(E=e.Transition||(e.Transition={})),e.hasTransform=function(e){return s.isSome(e.transform)},e.hasFullSentenceTransform=function(e){return m.eT.isFullSentence(e.activeAlert.extraProperties.cardType)},e.hasOneGapTransform=function(e){return(0,a.pipe)(e.transform,s.exists(h.b$.isOneGap))},e.hasSynfonyTransform=function(e){return m.eT.isSynfony(e.activeAlert.extraProperties.cardType)},e.isSmartPhrases=function(e){return w.$.isSmartPhrases(e.activeAlert)},e.isTakeaway=function(e){return w.$.isTakeaway(e.activeAlert)},e.isSimple=function(e){return m.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.miniTitle=function(e,t){return w.$.isTakeaway(e.activeAlert)&&s.isNone(e.activeAlert.takeawayFeedback)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle},e.useCardStates=e=>({isChecking:e.pipe(f.U((e=>e.meta.checking===C.n.CheckingState.Checking)),g.x(),y.d({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(f.U((e=>e.meta.checking===C.n.CheckingState.Full)),g.x(),y.d({bufferSize:1,refCount:!0})),transform:e.pipe(f.U((({transform:e})=>e)),v.h(s.isSome),y.$f(s.getEq(h.b$.eq)))}),e.foldCard=l.fS((e=>(A("CardComponent").error("Got an unexpected card type",e),null)));const A=(0,d.HP)(p.C8.Logging.getLogger)}(x||(x={}))},55567:(e,t,n)=>{n.d(t,{n:()=>r});var r,i=n(26653),a=n(36156);!function(e){let t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));class n{constructor(e,t,n,r,i){this.percentile=e,this.explanation=t,this.checking=n,this.ranges=r,this.showMuteQuotedAdvice=i}equals(e){return this.hashCode()===e.hashCode()}hashCode(){return(0,a.NO)({percentile:i.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((e=>e.meta.id)).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})}}e.Impl=n,e.empty=(e="",r=i.g.MIN,a=t.Idle,s=[])=>new n(r,e,a,s,!1),e.create=({explanation:e="",percentile:r=i.g.MIN,checking:a=t.Idle,ranges:s=[]})=>new n(r,e,a,s,!1)}(r||(r={}))},91549:(e,t,n)=>{n.d(t,{R:()=>r});var r,i=n(57050),a=n(40327),s=n(45701),o=n(5114),l=n(22232),c=n(73975),u=n(40018),d=n(17594),p=n(26027),m=n(55567),h=n(20594),f=n(77610),g=n(48521);!function(e){let t;e.Kind="AlertsBundle",e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title},e.ord=(0,a.pipe)(s.ordNumber,s.contramap((0,i.ls)((e=>e.activeAlert.bundleInfo),o.fold((()=>Number.MAX_SAFE_INTEGER),(e=>e.rank))))),e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":case"muted":return!1;default:return(0,l.vE)(e.visualState.transition.type)}},e.getAlertOutcomeBundle=e=>(0,a.pipe)(e.bundleInfo,o.fold((()=>({id:"other",title:"Other"})),(e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title})))),e.eq={equals:(e,t)=>f.C.eq.equals(e,t)&&o.getEq(c.yv).equals(e.lensId,t.lensId)},function(t){const i=t=>(n,r)=>Object.assign({id:n,kind:e.Kind,bundleInfo:t,activeAlert:f.C.getAlertByIndex(r.activeAlertIndex,r.alerts),transform:(0,a.pipe)(r.cachedTransform,o.map((e=>e.labels))),equals(t){return e.eq.equals(this,t)},hashCode(){return f.C.hashCode(this)}},r);t.create=function(t,s,c,p){const m=r(t),y=e=>h.Mq.getCreate(i(e),s,m,p,c),v=n(c);return{create:e=>(t,n,r,i,a,s,l)=>y(a)(t,n,r,i,h.Mq.getApplicableCardMeta(n[r],s,c),e,o.some(s),l),createAdded:e=>(t,n,r,i)=>{const a=g.o.VisualState.initial({type:"added",clockwise:!0},!0);return y(n)(t,r,0,0,h.Mq.getApplicableCardMeta(r[0],a,c),e,o.some(a),i)},createFocused:e=>(t,n,r,i,a)=>{const s=g.o.VisualState.initial({type:"focused",clockwise:!0},!0);return y(n)(t,r,i,0,h.Mq.getApplicableCardMeta(r[i],s,c),e,o.some(s),a)},createRendered:e=>(t,n,r,i)=>{const a=g.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return y(n)(t,r,0,0,h.Mq.getApplicableCardMeta(r[0],a,c),e,o.some(a),i)},updateWith:(n,r)=>i=>{(0,l.kG)(n.every((e=>u.bZ.isRegistered(e))),"cannot add non registered alerts");const s=new Set(n.map((e=>e.id))),o=new Set(i.removedAlertsIds);s.forEach((e=>{o.delete(e)}));const c=i.alerts.filter((e=>!s.has(e.id))).concat(n.map(d.$.fromModel)).sort(r.compare);return(0,a.pipe)(i,v(c,o,f.C.getIndexByAlert(i.activeAlert.id,c)),e.getCardHydrator(t))}}}}(t=e.ItemFactory||(e.ItemFactory={}));const n=e=>(t,n,r)=>i=>{const a=f.C.getAlertByIndex(r,t),s=d.$.isApplicableAlert(a)?h.Mq.getApplicableCardMeta(a,i.visualState,e):m.n.empty(void 0);return Object.assign(Object.assign({},i),{alerts:t,activeAlert:a,meta:s,removedAlertsIds:n,activeAlertIndex:r})};e.changePosition=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),e.changeVisualState=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),e.getCardHydrator=e=>h.Mq.getCardHydrator((e=>e.cachedTransform),p.X.canHydrate,y,e);const r=t=>h.Mq.getChangeVisualState(e.changeVisualState,e.getCardHydrator(t));e.changeUserInput=e=>t=>Object.assign(Object.assign({},t),{userInput:e});const y=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,a.pipe)(e,o.map((e=>e.labels)))});e.transitionTo=h.Mq.getTransitionTo(e.changeVisualState,e.changePosition),e.completeTransition=t=>n=>e.changeVisualState(g.o.VisualState.complete(n.visualState,t))(n),e.getRemove=t=>h.Mq.getRemove(n(t),e.transitionTo);const v=e=>t=>Object.assign(Object.assign({},t),{meta:e});e.unselect=h.Mq.getUnselect(e.changeVisualState,e.changePosition),e.getSelectByAlert=(t,r,i)=>h.Mq.getSelect(n(r),e.changeUserInput,e.changeVisualState,e.changePosition,v,i,t,r),e.getSelect=(t,n,r)=>h.Mq.getSelectFirstAlert(e.getSelectByAlert(t,n,r)),e.getRemoveAlertsCapability=(t,n,r,s)=>(l,c)=>{const u=e.getSelectByAlert(t,n,e.getCardHydrator(r)),d=h.Mq.getSelectNextAlert(h.Mq.getCardSelections(t),u);return t=>{const r=new Set(l.map((e=>e.id)));if(!f.C.hasAnyOfAlerts(r)(t))return t;const u=e.getRemove(n)(l,(0,a.pipe)(c,o.map((e=>s.compare(t,e)>0)),o.getOrElse(i.W8)))(t);return(0,a.pipe)(c,o.exists((e=>e.id===t.id)))?d(s)(u):u}},e.getUpdatableWithAlertsCapability=t=>n=>(0,i.ls)(t.updateWith(n,u.h$.ord),(t=>e.isExtendableWithAlerts(t)?t:e.transitionTo({type:"added",clockwise:!0})(t)))}(r||(r={}))},83167:(e,t,n)=>{n.d(t,{Dv:()=>L,VC:()=>O,u0:()=>R,vM:()=>M,Py:()=>F});var r=n(35214),i=n(57050),a=n(40327),s=n(38983),o=n(5114),l=n(22232),c=n(8125),u=n(83078),d=n(95195),p=n(81531),m=n(40018),h=n(66896),f=n(16118),g=n(50628),y=n(77176),v=n(93508),b=n(85985),w=n(66310),C=n(19751),S=n(45586),I=n(24209),x=n(2834),k=n(98403),E=n(41398),A=n(35416),T=n(93494),_=n(73841);const L=(e,t,n,r=(()=>o.none))=>i=>{if(!e(i))return t(i);const{currentLens:s}=i;return s.kind===A._L.abstract?o.none:(0,a.pipe)(o.fromPredicate(A.nL.hasItems)(i),o.chain((e=>n.findNextAlert(e.currentLens))),o.alt((()=>r(i))),o.map(_.l.toLensAlert))},O=(e,t,n,r,i,s=T.v.WithSuccess.State.isInGlobalSuccess(i),l=(()=>!0))=>c=>{const{currentLens:u}=c;return u.kind===A._L.abstract?o.none:u.kind===A._L.persistent?(0,a.pipe)(A.nL.getActiveAlertHighlight(r)(c),o.fold((()=>A.nL.hasItems(c)?i.findNextAlert(c.currentLens):o.none),(t=>e.findNextAlertInTextByLens(t,u.id,T.v.WithPriority.nonPriorityAlertsVisible(c)))),o.alt((()=>l()&&(s(c)||h.R.isOutcomeId(c.currentLens.id)&&e.hasZeroFreeAlerts(n))?e.findPremiumAlert():o.none)),o.map(_.l.toLensAlert)):(0,a.pipe)((s=>(0,a.pipe)(o.fromPredicate(A.nL.hasItems)(s),o.chain((e=>i.findNextAlert(e.currentLens))),o.map(_.l.toLensAlert),o.alt((()=>(0,a.pipe)(A.nL.getActiveAlertHighlight(r)(s),o.fold((()=>t(m.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,m.bZ.isApplicableAlert))),o.map((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:n.get()}))))))))(c),o.alt((()=>(0,a.pipe)(e.findPremiumAlert(),o.map(_.l.toLensAlert)))))};function R(e,t){return(n,r)=>t.findClosestAlertHighlight(e(r),n)}const P=e=>e.pipe(f.G(),g.P((([e,t])=>"idle"!==e&&"idle"===t)),y.U((()=>{})));class M{constructor(e,t){this._subs=new S.w.Keeper,this.firstOpeningOfDocumentWithAlerts=s.h.create(!1);const n=P(e),r=(e=>(0,a.pipe)(e,b.h((e=>A.nL.hasCards(e)&&o.isSome(A.In.getActiveItem(e.currentLens)))),y.U((()=>{}))))(t);this._subs.push((0,a.pipe)(t,g.P((e=>A.nL.hasCards(e))),w.w((()=>(0,a.pipe)(I.T(r,n),y.U(i.jv),v.O(!0)))),x.b(k.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}dispose(){this._subs.dispose()}}var F;!function(e){const t=(0,c.HP)(p.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,n,r,i,s)=>{const l=P(n),c=n.pipe(v.O("idle"),f.G(),g.P((([e,t])=>"idle"===t)),b.h((([e])=>"full"===e)),y.U((()=>{})));const u=((e,t)=>{const n=P(e);return t.bigPaste.pipe(w.w((()=>n)),y.U((()=>{})),C.d({bufferSize:1,refCount:!0}))})(n,i);return(0,a.pipe)(I.T(l,c,u),E.M(e,s,r),b.h((([e,t,n,r])=>r&&!n&&A.nL.hasCards(t)&&o.isNone(A.In.getActiveItem(t.currentLens)))),y.U((()=>A.nL.Effect.FocusBehavior.focusFirst)),x.b((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const n=(0,a.pipe)(e,y.U((e=>t=>n=>{switch(t.kind){case A.nL.Effect.FocusBehaviorType.noFocus:return n;case A.nL.Effect.FocusBehaviorType.unFocus:return A.nL.Prism.getLensWithItems().modify(e.unselectItem(),n);case A.nL.Effect.FocusBehaviorType.focusFirst:return(0,a.pipe)(e.findFirstAlert(n.currentLens),o.fold((()=>n),(t=>A.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case A.nL.Effect.FocusBehaviorType.focusNext:return(0,a.pipe)(e.findNextAlert(n.currentLens),o.fold((()=>n),(t=>A.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case A.nL.Effect.FocusBehaviorType.focusAlert:return A.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),n);default:(0,l.vE)(t)}})(t)));return{id:"autoFocusEffect",when:h.R.isWithAlertsId,what:A.nL.Effect.ItemsApplicator.create(n)}},e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),e.whenShouldVerifyCurrentLens=(e,n)=>r=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!A.nL.hasItems(r)||!n.shouldVerify(r.currentLens))&&((0,a.pipe)(A.nL.getActiveAlert(e)(r),o.filter(m.bZ.isInDuplicatedState),o.fold((()=>t(i).debug("Current alert removed, should verify current lens...")),(e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},e.whenNoActiveCard=e=>e.currentLens.items.size>0&&o.isNone(A.In.getActiveItem(e.currentLens)),e.behaviorToEffect=e=>n=>r=>(0,a.pipe)(n(r)?e(r):o.none,u.bw((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`)))),e.getDefaultBehavior=(t,n)=>(0,a.pipe)([(0,a.pipe)(e.whenShouldVerifyCurrentLens(t,n),e.behaviorToEffect((()=>o.some(A.nL.Effect.FocusBehavior.focusNext))))],(0,r.fold)((0,r.getFunctionMonoid)(o.getFirstMonoid())())),e.getFocusFromCacheBehavior=(t,n,s,l,u,d)=>(0,a.pipe)([(0,a.pipe)(e.whenShouldVerifyCurrentLens(l,u),e.behaviorToEffect((()=>o.some(A.nL.Effect.FocusBehavior.focusNext)))),(0,a.pipe)((0,c.W9)((()=>n.get()),(0,c.W9)((0,c.W9)((0,c.W9)(e.whenFirstOpeningDocumentWithAlerts(s),(()=>t)),e.whenNoActiveCard),(0,a.pipe)(d,o.map((e=>(0,i.ff)(e.willShowBulkAccept))),o.getOrElse((()=>i.W8))))),e.behaviorToEffect((()=>o.some(A.nL.Effect.FocusBehavior.focusFirst))))],(0,r.fold)((0,r.getFunctionMonoid)(o.getFirstMonoid())())),e.getFirstApiAlignmentOverride=function(){const e=s.h.create(!0);return(t,n)=>{let r=n;return e.get()&&n===m.l$.api&&(r=m.l$.text),e.set(!1),r}},e.getShouldAutoFocus=(e,t,n)=>r=>e.get()&&(0,a.pipe)(r,A.nL.getActiveAlert(n),o.chain((({id:e})=>t.getById(e))),o.filter((0,c.Kg)((e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method),m.bZ.isDuplicated)),o.isSome),e.getStateTransformer=(e,n,r,i,s,c,u)=>({state:p,metadata:m})=>{const h=t("AutoFocus.stateTransformer");if(!A.nL.hasCards(p)||!A.nL.hasItems(p))return h.trace("state has no items, returning original state"),d.t$({state:p,metadata:m});const f=e(p);if(h.trace("effect: ",{state:p,metadata:m,effect:f}),o.isNone(f))return h.trace("no effect selected, returning original state"),d.t$({state:p,metadata:m});if(c(f.value),f.value.kind===A.nL.Effect.FocusBehaviorType.unFocus||f.value.kind===A.nL.Effect.FocusBehaviorType.noFocus)return d.t$({state:A.nL.Prism.getLensWithItems().modify(i.unselectItem(),p),metadata:m});const g=s(p);return h.trace("shouldAutoFocus",{alertSource:p.alertSource,shouldAutoFocus:g}),(0,a.pipe)(f,o.chain((e=>{switch(e.kind){case A.nL.Effect.FocusBehaviorType.noFocus:case A.nL.Effect.FocusBehaviorType.unFocus:return o.none;case A.nL.Effect.FocusBehaviorType.focusFirst:return(0,a.pipe)(i.findFirstAlert(p.currentLens),o.map((e=>Object.assign(Object.assign({},e),{lensId:p.currentLens.id}))));case A.nL.Effect.FocusBehaviorType.focusNext:return n(p);case A.nL.Effect.FocusBehaviorType.focusAlert:return o.some(Object.assign(Object.assign({},e.alertHighlight),{lensId:p.currentLens.id}));default:(0,l.vE)(e)}})),o.map((e=>((0,l.kG)(o.isSome(r.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),o.fold((()=>p.currentLens.kind===A._L.active?d.F2(d.F2({lensId:u.get(),alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:A.nL.Effect.FocusBehavior.noFocus}})):d.t$({state:p,metadata:m})),(({alert:e,highlightIndex:t,lensId:n})=>p.currentLens.meta.filter(e)?d.t$(g?{state:A.nL.Prism.getLensWithItems().modify(i.selectItemByAlert({alert:e,highlightIndex:t}),p),metadata:{sourceId:"LSM.updateActiveState"}}:{state:p,metadata:m}):d.F2(g?d.t$({alertHighlight:{alert:e,highlightIndex:t},alertSource:p.alertSource,options:{lensId:n,order:p.switchOrder,toFocus:A.nL.Effect.FocusBehavior.focusFirst}}):d.F2({lensId:n,alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:A.nL.Effect.FocusBehavior.noFocus}})))))}}(F||(F={}))},20594:(e,t,n)=>{n.d(t,{Ls:()=>I,IG:()=>r,Mq:()=>E});var r,i=n(57050),a=n(40327),s=n(51996),o=n(5114),l=n(22232),c=n(83078),u=n(95195),d=n(89943),p=n(81531),m=n(40018),h=n(66896),f=n(26653),g=n(17594),y=n(26027),v=n(55567),b=n(48521),w=n(77610),C=n(16892),S=n(4890);function I(e,t,n,r,i){const a=E.getCardSelections(t),s=E.getCardHydrator((e=>e.cachedTransform),y.X.canHydrate,y.X.changeTransform,e),c=E.getChangeVisualState(y.X.changeVisualState,s),u=E.getSelect(y.X.updateAlerts,y.X.updateUserInput,c,y.X.changePosition,y.X.changeMeta,s,t,n),d=E.getUnselect(c,y.X.changePosition),p=E.getTransitionTo(c,y.X.changePosition),h=E.getRemove(y.X.updateAlerts,p);const f=E.getCreate(k,i,c,r,n);const w=E.getSelectFirstAlert(u);return Object.assign(Object.assign({shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:f,createFromAlert:e=>t=>f(t.id,[t],0,0,v.n.empty(m.bZ.isApplicableAlert(t)?t.explanation:void 0),e,o.none),createFocused:function(e){const t=b.o.VisualState.initial({type:"focused",clockwise:!0},!0);return(r,i,a)=>f(r,[i],0,a,E.getApplicableCardMeta(i,t,n),e,o.some(t))},createRendered:function(e){const t=b.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return(r,i)=>f(r,[i],0,0,E.getApplicableCardMeta(i,t,n),e,o.some(t))},createAdded:function(e){const t=b.o.VisualState.initial({type:"added",clockwise:!0},!0);return(r,i)=>f(r,[i],0,0,E.getApplicableCardMeta(i,t,n),e,o.some(t))}},a),{select:(e,t,n,r)=>u(t,n,r)(e),selectFirstAlert:(e,t,n)=>w(t,n)(e),selectNextAlert:(e,t)=>E.getSelectNextAlert(a,u)(t)(e),unselect:(e,t,n)=>d(t,n)(e),remove:(e,t,n)=>h(t,n)(e),updateWith(e,t){(0,l.kG)(1===t.length,"AlertCard can only handle update with a single alert");const r=t[0];(0,l.kG)(void 0!==e.alerts.find((e=>e.id===r.id)),"can not receive updates for unknown alert",(()=>r.toString()));const i=function(e,t){const r=E.getApplicableCardMeta(t,e.visualState,n);return new y.X(e.id,e.alerts.map((e=>e.id===t.id?g.$.fromModel(t):e)),e.activeAlertIndex,E.getAHI(e,r),e.positionState,e.visualState,r,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}(e,r);switch(r.state.type){case m.bZ.State.Type.REGISTERED:{const e="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?s(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?p({type:"focused",clockwise:i.visualState.transition.clockwise})(e):e}case m.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((e=>m.bZ.isCapiDone(e)&&e.allowUpdate&&m.bZ.isRated(i.activeAlert)))?h(t,!0)(i):p({type:"presuccess",clockwise:i.visualState.transition.clockwise})(i);case m.bZ.State.Type.APPLIED:case m.bZ.State.Type.BEING_APPLIED:return h(t,!0)(i);default:return(0,l.vE)(r.state)}},changePosition:(e,t)=>y.X.changePosition(t)(e),changeVisualState:(e,t)=>c(t)(e),transitionTo:(e,t)=>p(t)(e),completeTransition:(e,t)=>c(b.o.VisualState.complete(e.visualState,t))(e),hideMuteQuotedAdvice:e=>new y.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new v.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection),updateUserInput:(e,t)=>y.X.updateUserInput(t)(e),updateSynfonySelection:(e,t)=>y.X.changeSynfonySelection(t)(e),updateSmartPhrasesAlert:(e,t)=>new y.X(e.id,e.alerts.map(((n,r)=>r===e.activeAlertIndex&&g.$.isSmartPhrases(n)?g.$.updateSmartPhrasesAlert(n,t):n)),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)})}function x(e){return m.bZ.isOneGap(e)&&""!==e.gapValue?o.some(e.gapValue):o.none}!function(e){let t;e.toCardRenderOptions=function(e,n,r){const i=new Set;return(h.R.isMainLens(n)||e.features.has(t.showCardLabelInOutcomes)&&n!==h.R.SpecialId.Plagiarism)&&i.add(S.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&i.add(S.j.Features.enableMuteQuotedAdvice),e.features.has(t.showAnonymousUserFooters)&&i.add(S.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&i.add(S.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&i.add(S.j.Features.showPersistentPremiumCardLabels),{features:i,layoutDensity:e.cardLayoutDensityMode,isNew:r}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:S.j.Density.cozy,shouldAnimateAlertApply:m.bZ.isAccepted}}(r||(r={}));const k=(e,t)=>new y.X(e,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection);var E;!function(e){function t(e,t,n){let i;i=m.bZ.getCheckingState(e)===m.bZ.CheckingState.CHECKING?"focused"===t.transition.type||"expanded"===t.transition.type?v.n.CheckingState.Checking:v.n.CheckingState.Full:v.n.CheckingState.Idle;const a=n.features.has(r.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new v.n.Impl(f.g.fromRatio(e.progress),e.explanation,i,e.getHighlightRanges(),a)}e.getApplicableCardMeta=t,e.getRemove=(e,t)=>(n,r=!0)=>i=>{const s=new Set(n.map((e=>e.id))),o=new Set(i.removedAlertsIds);s.has(i.activeAlert.id)&&o.add(i.activeAlert.id);const{remainingAlerts:l,activeAlertIndex:c}=i.alerts.reduce(((e,t,n)=>!s.has(t.id)||b.o.isFocused(i)&&t.id===i.activeAlert.id?{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}:{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(n<i.activeAlertIndex||n===i.activeAlertIndex&&n===i.alerts.length-1&&n>0?-1:0)}),{remainingAlerts:[],activeAlertIndex:i.activeAlertIndex}),u=(0,a.pipe)(i,w.C.willBeDisposed(i,s)?e(i.alerts,s,i.activeAlertIndex,i.activeHighlightIndex):e(l,o,c,0));return w.C.willBeDisposed(u,u.removedAlertsIds)?t({type:"removed",clockwise:r})(u):u},e.getTransitionTo=(e,t)=>n=>r=>{const i=b.o.VisualState.to(r.visualState,n);return(0,a.pipe)(r,e(i),(e=>n.type===r.visualState.transition.type||"expanded"!==n.type&&"focused"!==n.type?e:t(C.s.PositionState.invalidateHeight(r.positionState))(e)))};const n=e=>t=>{const n=t.alerts;return o.fromNullable(n.slice(t.activeAlertIndex+1).find(e))};e.getPrevAlert=e=>t=>{const n=t.alerts;return o.fromNullable(n.slice(0,t.activeAlertIndex).reverse().find(e))},e.getAnyRegisteredAlert=e=>t=>{const n=t.alerts;return(0,a.pipe)(n.filter((t=>e.isRegistered(t.id))),(e=>e[e.length-1]),o.fromNullable)},e.getCardSelections=t=>{const r=(e=>t=>e.isRegistered(t.id))(t);return{nextAlert:n(r),prevAlert:e.getPrevAlert(r),anyRegisteredAlert:e.getAnyRegisteredAlert(t)}},e.getSelect=(e,n,r,s,u,d,p,h)=>({alert:f,highlightIndex:g},S,I)=>k=>{(0,l.kG)(!k.removedAlertsIds.has(f.id),"Cannot select removed alert");const E=p.getById(f.id);(0,l.kG)(o.isSome(E),"Cannot select not registered alert");const A=c.MH(E),T=k.alerts.filter((e=>!k.removedAlertsIds.has(e.id))),_=(0,a.pipe)(S,o.map((e=>I.compare(k,e)>0)),o.getOrElse(i.W8)),L=(0,a.pipe)(S,o.exists((e=>e.id===k.id))),O=L?k.positionState:C.s.PositionState.invalidateHeight(k.positionState),R=L&&y.X.isCardOpen(k.visualState)?"expanded":"focused",P=x(A),M=w.C.getIndexByAlert(f.id,T),F=(0,a.pipe)(S,o.fold((()=>b.o.VisualState.initial({type:R,clockwise:_})),(e=>b.o.VisualState.to(k.visualState,{type:R,clockwise:_})))),N=m.bZ.isApplicableAlert(A)?t(A,F,h):v.n.empty(void 0);return(0,a.pipe)(k,s(O),r(F),e(T,k.removedAlertsIds,M,g),n(P),u(N),d)},e.getSelectNextAlert=(e,t)=>n=>r=>w.C.activeAlertRemoved(r)&&!w.C.willBeDisposed(r,r.removedAlertsIds)?(0,a.pipe)(e.nextAlert(r),c.vx(e.prevAlert(r)),o.map((e=>t({alert:e,highlightIndex:0},o.none,n)(r))),o.getOrElse((()=>r))):r,e.getSelectFirstAlert=e=>(t,n)=>r=>{const i=r.alerts.filter((e=>!r.removedAlertsIds.has(e.id)));(0,l.kG)(i.length>0,"Selectable card must have at least one not removed alert");const a=i[0];return e({alert:a,highlightIndex:0},t,n)(r)},e.getUnselect=(e,t)=>(n,r)=>s=>{const l=(0,a.pipe)(n,o.map((e=>r.compare(s,e)>0)),o.getOrElse(i.W8)),c=(0,a.pipe)(n,o.exists((e=>e.id===s.id)))?s.positionState:C.s.PositionState.invalidateHeight(s.positionState);return(0,a.pipe)(s,t(c),w.C.willBeDisposed(s,s.removedAlertsIds)||b.o.isHidden(s)?i.yR:e(b.o.VisualState.to(s.visualState,{type:"rendered",clockwise:l})))},e.getCardHydrator=(e,t,n,r)=>i=>{const s=i.activeAlert.type===g.$.Type.super||i.activeAlert.type===g.$.Type.plagiarism||i.activeAlert.type===g.$.Type.premium||i.activeAlert.type===g.$.Type.takeaway||i.activeAlert.type===g.$.Type.sentenceLevelBrandTones||m.eT.isSimple(i.activeAlert.extraProperties.cardType)?o.none:function(e,t,n){const i=p.C8.Logging.getLogger("CardFactory");return(0,a.pipe)(t,o.filter((t=>!n||(0,a.pipe)(e,o.exists((e=>t.id===e.id&&t.rev===e.revision))))),o.alt((()=>(0,a.pipe)(e,o.chain((e=>(0,a.pipe)(r(e),u.g_((n=>(i.error("Could not hydrate transform",n,{alertId:e.id}),t)),(t=>o.some({id:e.id,rev:e.revision,labels:t}))))))))))}(i.activeAlert.getTransform(),e(i),t(i));return n(s)(i)},e.getChangeVisualState=(e,t)=>n=>r=>{const i=e(n)(r);return"focused"===n.transition.type||"expanded"===n.transition.type?t(i):i},e.getCreate=(e,t,n,i,s)=>(c,u,d,p,h,f,y,S=m.h$.ord)=>{const I=w.C.getAlertByIndex(d,u),k=x(I),E=[...u].sort(S.compare).map(g.$.fromModel),A=E[0];(0,l.kG)(!!A,"The card must contain at least 1 alert");const T=(0,a.pipe)(t,o.chain((e=>e.getAlertMuteCategory(u[0].id)))),_=e(c,{alerts:E,activeAlertIndex:w.C.getIndexByAlert(I.id,E),activeHighlightIndex:p,positionState:C.s.PositionState.empty,visualState:b.o.VisualState.initial({type:"rendered",clockwise:!0}),meta:new v.n.Impl(h.percentile,h.explanation,h.checking,h.ranges,s.features.has(r.Features.enableMuteQuotedAdvice)&&g.$.isInQuotes(A)),lensId:o.some(f),renderOptions:r.toCardRenderOptions(s,f,i(A)),muteCategory:T,order:A.getHighlightRanges()[0].end,initialAlertId:A.id,removedAlertsIds:new Set,cachedTransform:o.none,userInput:k,synfonySelection:o.none});return(0,a.pipe)(y,o.fold((()=>_),(e=>n(e)(_))))},e.getAHI=function(e,t){if((0,l.kG)(t.ranges.length>0,`Incorrect card meta: rangeIds empty. Card ID ${e.id}, activeAlert: ${e.activeAlert.toString()}`),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;{const n=e.meta.ranges[e.activeHighlightIndex];return(0,l.kG)(void 0!==n,"AHI not found in rangeIds"),(0,a.pipe)(o.some(t.ranges.findIndex((e=>e.meta.id===n.meta.id))),o.filter((e=>-1!==e)),o.alt((()=>d.OI(t.ranges,n,s.SV.ordEnd))),o.getOrElse((()=>t.ranges.length-1)))}},e.snapshot=e=>({cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,a.pipe)(e.alerts&&e.alerts.map((e=>e.id))),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex})}(E||(E={}))},20291:(e,t,n)=>{if(n.d(t,{R7:()=>b,XU:()=>w}),75==n.j)var r=n(40327);var i=n(5114),a=n(66896),s=n(15646),o=n(48521),l=n(98403),c=n(77176);if(75==n.j)var u=n(66310);if(75==n.j)var d=n(85985);if(75==n.j)var p=n(2834);if(75==n.j)var m=n(24209);if(75==n.j)var h=n(598);if(75==n.j)var f=n(83401);var g=n(35416),y=n(99116);const v={cardsBeyondViewport:5,cardsAroundActive:100},b=(e,t,n,r,u=v,d=l.b2.rafScheduler)=>{const p=e=>!e.positionState.visible&&o.o.isAnimatable(e)&&e.visualState.incomplete?(r.next({type:s.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),n.completeTransition(e.visualState.transitionId)(e)):e,m=e.pipe(c.U(g.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t}))))),h=(0,y.nM)(n)(m,t.viewport,t.scrollTop,t.paddingTop,d).pipe(c.U((({viewport:e,scrollTop:t,paddingTop:n})=>({viewport:e,scrollTop:t,paddingTop:n,completeTransition:p}))),c.U((0,y.GC)({cardsBeyondViewport:u.cardsBeyondViewport,cardsAroundActive:u.cardsAroundActive,changePosition:n})));return{id:"manageCardsVisibility",when:a.R.isWithAlertsId,what:g.nL.Effect.Applicator.create(h)}},w=(e,t,n)=>{const s=(0,r.pipe)(e,c.U(g.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t})))),(0,y.SW)(n),u.w(l.b2.rafScheduler),d.h((e=>0!==e)),p.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:a.R.isWithAlertsId,what:g.nL.Effect.Applicator.create(m.T(m.T(s).pipe(h.c(f.C))))}}},71841:(e,t,n)=>{n.d(t,{i$:()=>m,YA:()=>h});var r=n(57050),i=n(40327),a=n(5114),s=n(98403),o=n(55935),l=n(93508),c=n(19751),u=n(35416),d=n(74238),p=n(14990);const m=e=>s.Hl(e.scrollTop.pipe(o.T(1)),100,!0).pipe(l.O(!1),c.d({bufferSize:1,refCount:!0})),h=(e,t)=>{const n=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),a.chain((({items:e,cardsHeight:t})=>(0,i.pipe)(e.getAt(0),a.map((e=>{const i=(0,r.ls)(d.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:i,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(t))(i)}}))))))}},35607:(e,t,n)=>{n.d(t,{o:()=>g});var r=n(40327),i=n(38983),a=n(95195),s=n(8125),o=n(81531),l=n(32952),c=n(44586),u=n(43743),d=n(16118),p=n(77176),m=n(93508),h=n(2834),f=n(74238);class g{constructor(e){this._validateOffset=e,this._log=o.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.h.create(0),this.paddingTop=i.h.create(0),this.viewport=i.h.create({top:f.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.xQ,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),a.F2(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),c.y.create((t=>(0,r.pipe)(this._validateOffset(e,this),a.g_((e=>(t.thrownError(e),s.ZT)),(()=>{const n=2*this.viewport.get().height,r=Math.abs(e)>n?(e>0?1:-1)*n:e,i=e-r,a=u.f.createAnimationObservable(0,r,200).pipe(d.G(),p.U((([e,t])=>t-e)),m.O(i),h.b((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>a.unsubscribe()}))))))}}},74238:(e,t,n)=>{n.d(t,{r:()=>r,L:()=>i});var r,i,a=n(73975),s=n(50479),o=n(64681);!function(e){let t;!function(e){e.ISO=(0,o.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){let t,n,r;!function(e){e.ISO=(0,o.k4)(),e.equals=(0,o.Eh)(a.lr).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,o.k4)()}(n=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,o.k4)()}(r=e.CardTop||(e.CardTop={})),e.concatC=e=>t=>e+t;const i=e=>new s.aD(e);e.converters=function(t,n,r){const a=i(e.concatC(r)).get,s=i(e.concatC(-t)).get;return{windowToViewport:i(e.concatC(-n)).get,viewportToWindow:i(e.concatC(n)).get,cardTopToViewport:s,viewportToCardTop:i(e.concatC(t)).get,absTopToViewportTop:e=>s(a(e)),absTopToCardTop:a}}}(i||(i={}))},14990:(e,t,n)=>{n.d(t,{Db:()=>i});var r,i,a,s=n(73975),o=n(74238);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){e.Impl=class{constructor(e,t,n){this.scrollTop=e,this.viewport=t,this.converters=o.L.converters(e,o.r.FromWindowTop.ISO.unwrap(t.top),n)}}}(i||(i={})),function(e){const t=(0,s.MW)({top:s.lr,height:s.lr});e.eqDimensionsTuple=(0,s.IP)(t,t)}(a||(a={}))},99116:(e,t,n)=>{if(n.d(t,{Bk:()=>I,v_:()=>k,SW:()=>E,Sd:()=>A,nM:()=>T,GC:()=>_}),75==n.j)var r=n(17771);if(75==n.j)var i=n(29909);var a=n(57050),s=n(40327),o=n(83078),l=n(5114),c=n(73975),u=n(89943),d=n(95983),p=n(77176);if(75==n.j)var m=n(16118);var h=n(85985),f=n(28043),g=n(66310),y=n(98403),v=n(2844),b=n(16892),w=n(35416),C=n(93494),S=n(74238);const I=e=>t=>t.isCardsHeightValid&&(0,s.pipe)(w.In.getActiveItem(t),o.wo((t=>!e.isScheduledToDispose(t)))),x=e=>t=>t.isCardsHeightValid&&(0,s.pipe)(w.In.getActiveItem(t),o.wo((t=>!e.isScheduledToDispose(t))));function k({cardTop:e,cardHeight:t,viewportHeight:n,padding:r}){const i=S.L.FromViewportTop.ISO.unwrap(e),a=i+t;return t>n?i:i<0?t+r.before<n?i-r.before:i:a>n?t+r.after<n?a-n+r.after:a-n:i<r.before?t+r.after+r.before<n?i-r.before:t+r.after<n?i-r.after:r.before:n-a<r.after&&t+r.after<n?r.after-(n-a):0}const E=e=>t=>t.pipe(A(e),p.U(l.map((e=>e.currentLens))),m.G(),h.h((([e,t])=>(0,s.pipe)((0,a.bc)(e,t),(0,a.og)(o.vB(((e,t)=>e.id===t.id&&(0,s.pipe)((0,a.bc)(w.In.getActiveItem(e),e.cardIndex,w.In.getActiveItem(t),t.cardIndex),(0,a.og)(r.g(l.option)),l.map((([e,t,n,r])=>e.id===n.id&&t!==r)))))),l.getOrElse((()=>!1))))),p.U((0,a.ls)(i.Pd(l.chain(w.In.getActiveItem),l.chain(w.In.getActiveItem)),(0,a.og)(o.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),l.getOrElse((()=>0))))),A=e=>t=>t.pipe(p.U(l.filter((({currentLens:t})=>x(e)(t))))),T=e=>(t,n,r,i,a)=>{const o=(e=>l.getEq(c.f7(((t,n)=>{const r=w.In.getActiveItem(t),i=w.In.getActiveItem(n);return l.getEq(e.visualStateEq).equals(r,i)&&t.items.size===n.items.size&&u.Hx(t.items.keys(),n.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(p.U(l.map((e=>e.currentLens.id))),f.x(c.w4.equals),p.U(l.isSome),g.w(y.Ft(v.aj(n,r,i,A(e)(t).pipe(p.U(l.map((e=>e.currentLens))),f.x(o.equals),g.w(a))))),h.h((([t,n,r,i])=>(0,s.pipe)(i,l.exists(x(e))))),p.U((([e,t,n])=>({viewport:e,scrollTop:t,paddingTop:n}))))},_=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:n})=>({viewport:r,scrollTop:i,paddingTop:c,completeTransition:u})=>p=>{const m=p.currentLens,h=((e,t,n,r)=>e.size<2||Math.floor(t.height/Math.min(o.MH(e.getAt(0)).positionState.height,o.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,d.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<n))-r),to:Math.min(e.size,d.aW.lowerBound(e,(e=>e.positionState.absTop<n+t.height))+r)})(m.items,r,i-c,e);let f=!1;const g=m.items.map(((e,r,i)=>{const o=(0,a.ls)((c=n,d=e.positionState.watched||(e=>h.from<=e&&h.to>e||(0,s.pipe)(m.cardIndex,l.exists((n=>e>=n-t&&e<=n+t))))(i),e=>e.positionState.visible!==d?c.changePosition(b.s.PositionState.changeVisible(e.positionState,d))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(b.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(n),u)(e);var c,d;return o!==e?(f=!0,o):e}));return f?w.nL.Prism.getLens().compose(C.v.Prism.items).set(g,p):p}},34383:(e,t,n)=>{n.d(t,{D:()=>r,T:()=>i});var r,i,a=n(17889),s=n(40327),o=n(43675),l=n(45701),c=n(73975),u=n(5114),d=n(40018),p=n(86718);!function(e){e.empty=()=>new Map,e.diff=function(e,t){return o.yi(i.eq)(e,t)}}(r||(r={})),function(e){let t,n,r;e.ordAlert=l.fromCompare(((e,t)=>d.bZ.isTakeaway(e)&&d.bZ.isTakeaway(t)?d.h$.ord.compare(e,t):d.bZ.isTakeaway(e)?-1:d.bZ.isTakeaway(t)?1:d.h$.ord.compare(e,t))),function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.eq=c.MW({title:c.yv,miniTitle:u.getEq(c.yv),miniLabel:u.getEq(c.yv),alertIds:a.Eh(c.yv)})}(n=e.AlertsView||(e.AlertsView={})),function(e){e.eq=c.MW({title:c.yv,miniTitle:u.getEq(c.yv),miniLabel:u.getEq(c.yv),checked:c.vD,card:p.f.eq})}(r=e.EmptyView||(e.EmptyView={})),e.eq=c.MW({id:c.yv,rank:c.lr,suggestionsView:u.getEq(n.eq),successView:u.getEq(n.eq),emptyView:r.eq}),e.hasAlerts=function(e){return u.isSome(e.suggestionsView)||u.isSome(e.successView)},e.removeAlerts=function(e,t){return Object.assign(Object.assign({},e),{suggestionsView:(0,s.pipe)(e.suggestionsView,u.chain((e=>(0,s.pipe)(a.nI(e.alertIds.filter((e=>!t.has(e)))),u.map((t=>Object.assign(Object.assign({},e),{alertIds:t}))))))),successView:(0,s.pipe)(e.successView,u.chain((e=>(0,s.pipe)(a.nI(e.alertIds.filter((e=>!t.has(e)))),u.map((t=>Object.assign(Object.assign({},e),{alertIds:t})))))))})}}(i||(i={}))},33806:(e,t,n)=>{n.d(t,{c:()=>i,E:()=>a});var r=n(86775);class i{constructor(e,t,n,r,i,a){this._checklistItemFactory=e,this._checklistItems=t,this._alertsReader=n,this._lensPredicate=r,this._inner=i,this._itemEq=a}create(e,t,n,i){return this._lensPredicate(t)?r.G.create(this._checklistItemFactory,this._checklistItems.get(),this._alertsReader,e,t,this._itemEq):this._inner.create(e,t,n,i)}}const a=(e,t,n,i,a,s)=>o=>i(o)?r.G.getAlertsHandler(e,t,n,s):a(o)},86775:(e,t,n)=>{n.d(t,{G:()=>r});var r,i=n(17889),a=n(57050),s=n(40327),o=n(5114),l=n(71249),c=n(83078),u=n(95195),d=n(92843),p=n(40018),m=n(77610),h=n(16892),f=n(48521),g=n(15215),y=n(70100),v=n(35416),b=n(93494),w=n(95983),C=n(93508),S=n(16118),I=n(77176),x=n(85985),k=n(34383);!function(e){function t(e,t){return`${e}_${t}`}function n(e,t,n){return g.d.isChecklistItemEmpty(t)?y.X.changePositionState(n)(t):e.changePositionState(n)(t)}function r(e,n,r,i){const a=t(n,r.id),s={rank:r.rank,checked:r.emptyView.checked,title:r.emptyView.title,miniTitle:r.emptyView.miniTitle,miniLabel:r.emptyView.miniLabel,miniChecked:o.none};return i?e.createFocusedDefault(n,a,s,r.emptyView.card):e.createRenderedDefault(n,a,s,r.emptyView.card)}function E(e,n,r,a,u,d){return(0,s.pipe)(a.suggestionsView,o.chain((c=>(0,s.pipe)(c.alertIds.map(n),l.oA,i.nI,o.map((n=>function(e,n,r,i,a,l,c){const u=t(n,r),d={id:u,title:i.title};return(0,s.pipe)(l,o.map((e=>a.findIndex((t=>t.id===e)))),o.filter((e=>e>-1)),o.fold((()=>c?e.createFocusedBundle(n,u,i,d,a,o.none):e.createRenderedBundle(n,u,i,d,a)),(t=>e.createFocusedBundle(n,u,i,d,a,o.some(t)))))}(e,r,a.id,{rank:a.rank,checked:!1,miniChecked:o.none,title:c.title,miniTitle:c.miniTitle,miniLabel:c.miniLabel},n,u,d)))))),o.alt((()=>(0,s.pipe)(a.successView,o.chain((i=>{const p=(0,s.pipe)(u,o.filter((e=>i.alertIds.includes(e))),o.chain(n));return(0,s.pipe)(p,c.vx((0,s.pipe)(i.alertIds.map(n),l.oA,l.YM)),o.map((n=>function(e,n,r,i,a,l){const c=t(n,r);return(0,s.pipe)(l,o.filter((e=>e===a.id)),o.fold((()=>e.createRenderedSingle(n,c,i,a)),(t=>e.createFocusedSingle(n,c,i,a))))}(e,r,a.id,{rank:a.rank,checked:!0,miniChecked:o.none,title:i.title,miniTitle:i.miniTitle,miniLabel:i.miniLabel},n,d?o.some(n.id):u))))}))))))}function A(e,t,n){return e.updateMeta(Object.assign(Object.assign({},t.itemMeta),{miniChecked:o.some(n.emptyView.checked),miniTitle:(0,s.pipe)(n.emptyView.miniTitle,c.vx(o.some(n.emptyView.title))),miniLabel:n.emptyView.miniLabel}))(t)}function T(e,t,n,r,i,l,c){if(i.every((e=>!m.C.hasAlert(e.id)(n)))||m.C.willBeDisposed(n,n.removedAlertsIds))return n;const u=k.T.removeAlerts(r,new Set(i.map((e=>e.id)).concat(Array.from(n.removedAlertsIds)))),d=m.C.willBeDisposed(n,new Set(i.map((e=>e.id)))),h=d&&!k.T.hasAlerts(u),f=(0,s.pipe)(l,o.exists((e=>e.id===n.id)));if(!d||h){const t=(0,s.pipe)(h?A(e,n,r):n,e.removeAlerts(i,(0,s.pipe)(l,o.map((e=>c.itemsOrd.compare(n,e)>0)),o.getOrElse(a.W8))));return!!i.find((e=>e.id===n.activeAlert.id))?e.selectNextAlert(c.itemsOrd)(t):t}return(0,s.pipe)(E(e,(0,a.ls)(t.getRegistered,o.filter(p.bZ.isApplicableAlert)),c.id,r,(0,s.pipe)(l,o.filter((e=>e.id===n.id)),o.map((e=>e.activeAlert.id))),f),o.map((t=>f?t:e.changePositionState(n.positionState)(t))),o.getOrElse((()=>n)))}e.create=function(e,t,n,i,l,c){const u=w.aW.create(Array.from(t.values()).map((t=>(0,s.pipe)(E(e,(0,a.ls)(n.getRegistered,o.filter(p.bZ.isApplicableAlert)),i,t,o.none,!1),o.getOrElse((()=>r(e,i,t,!1)))))),(e=>e.id),g.d.ord.compare);return{id:i,type:v.Nm.lensview,kind:v._L.persistent,meta:l,withPriorityList:!1,cardIndex:o.none,items:u,itemsOrd:g.d.ord,animation:v.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return b.v.lensHash.hashCode(this)},equals(e){return b.v.getEq(c).equals(this,e)}}};const _=(e,n,r)=>i=>a=>{if(0===i.length)return a;const o=v.In.getActiveItem(a),l=n.reduce(((n,l)=>(0,s.pipe)(n.update(t(a.id,l.id),(t=>g.d.isChecklistItemWithAlerts(t)?T(e,r,t,l,i,o,a):t)),u.fS((()=>n)))),a.items);return Object.assign(Object.assign({},a),{items:l,animation:v.wj.force})};function L(e,t,i,l,c,u,d){if(g.d.isChecklistItemWithAlerts(i)&&m.C.willBeDisposed(i,i.removedAlertsIds))return i;const p=(0,s.pipe)(c,o.exists((e=>e.id===i.id)));return(0,s.pipe)(E(e,d,t.id,l,u,p),o.alt((()=>p&&g.d.isChecklistItemWithAlerts(i)?o.none:o.some(r(e,t.id,l,p)))),o.map((t=>n(e,t,p?h.s.PositionState.invalidateHeight(i.positionState):i.positionState))),o.map((t=>{return function(e,t,n){return g.d.isChecklistItemEmpty(t)?y.X.changeVisualState(n)(t):e.changeVisualState(n)(t)}(e,t,(n=i,r=t,g.d.isChecklistItemEmpty(n)&&g.d.isChecklistItemEmpty(r)||g.d.isChecklistItemWithAlerts(n)&&g.d.isChecklistItemWithAlerts(r)&&n.viewKind===r.viewKind||!p?i.visualState:f.o.VisualState.initial({type:"focused",clockwise:!0},!0)));var n,r})),o.getOrElse((()=>g.d.isChecklistItemWithAlerts(i)?e.removeAlerts(i.alerts,(0,s.pipe)(c,o.map((e=>t.itemsOrd.compare(i,e)>0)),o.getOrElse(a.W8)))(A(e,i,l)):i)))}e.getAlertsHandler=function(e,n,r,i){return(o,c)=>d=>{const h=b.v.ApplyDiff.applyWithFilter(c,b.v.ApplyDiff.apply);return(0,s.pipe)(d,h(o,(()=>a.yR),((e,n,r,i)=>a=>o=>{if(0===a.length)return o;const{left:c,right:d}=(0,s.pipe)(a,b.v.filterAlertInLens(o,i),l.uK(p.bZ.isRegistered)),h=_(e,n,r)(c)(o),f=n.reduce(((n,r)=>(0,s.pipe)(n.update(t(o.id,r.id),(t=>g.d.isChecklistItemWithAlerts(t)?e.updateWith(d.filter((e=>m.C.hasAlert(e.id)(t))))(t):t)),u.fS((()=>n)))),h.items);return Object.assign(Object.assign({},h),{items:f,animation:v.wj.force})})(e,Array.from(n.get().values()),r,i),_(e,Array.from(n.get().values()),r)))}},e.getChecklistHandlerSideEffect=(e,n,i,l,c)=>{const m=n.pipe(C.O(k.D.empty()),S.G(),I.U((([e,t])=>({entries:t,latestChangeDiff:k.D.diff(e,t)}))),x.h((e=>!d.v.isEmpty(e.latestChangeDiff))),I.U((n=>c=>{const m=c.currentLens,h=v.In.getActiveItem(m),f=(0,s.pipe)(l(m),o.map((e=>e.activeAlert.id))),y=(0,a.ls)(i.getRegistered,o.filter(p.bZ.isApplicableAlert)),b=(0,s.pipe)(n.latestChangeDiff,d.v.reduce(m.items,((e,n,r)=>e.has(t(m.id,r))?e.remove(t(m.id,r)):e),((n,r,i)=>(0,s.pipe)(n.update(t(m.id,i.id),(t=>g.d.isChecklistItem(t)?L(e,m,t,i,h,f,y):t)),u.fS((()=>n)))),((t,n)=>(0,s.pipe)(E(e,y,m.id,n,f,!1),o.getOrElse((()=>r(e,m.id,n,!1))),(e=>t.add(e))))));return v.nL.Prism.getLens().modify((e=>Object.assign(Object.assign({},e),{items:b,cardIndex:(0,s.pipe)(h,o.chain((e=>b.get(e.id))),o.map((e=>e.index))),animation:v.wj.force})),c)})));return{id:"checklistHandlerSideEffect",when:c,what:v.nL.Effect.Applicator.create(m)}},e.getHasAlertsQuery=function(e,t,n){return b.v.WithBundles.getHasAlerts(e,t,n)},e.getItemReleaser=(e,i,l,c)=>({removeItemById:u=>d=>{const m=(0,s.pipe)(d.items.get(u),o.map((e=>e.value)),o.chain(o.fromPredicate(g.d.isChecklistItemWithAlerts)));if(o.isNone(m))return c?c.removeItemById(u)(d):d;const y=v.In.getActiveItem(d),b=(0,s.pipe)(y,o.exists((e=>e.id===u))),w=(0,a.ls)(l.getRegistered,o.filter(p.bZ.isApplicableAlert)),C=(0,s.pipe)(m,o.fold((()=>d.items),(l=>(0,s.pipe)(d.items.remove(u),(c=>(0,s.pipe)(o.fromNullable(Array.from(i.get().values()).find((e=>t(d.id,e.id)===l.id))),o.map((t=>c.add((0,a.MZ)((0,s.pipe)(E(e,w,d.id,t,o.none,b),o.map((t=>b?e.changeVisualState(f.o.VisualState.initial({type:"focused",clockwise:!0},!0))(t):t)),o.getOrElse((()=>r(e,d.id,t,!1))),(t=>n(e,t,b?h.s.PositionState.invalidateHeight(l.positionState):l.positionState))))))),o.getOrElse((()=>c)))))))),S=(0,s.pipe)(y,o.exists((e=>e.id===u&&(0,s.pipe)(C.get(u),o.fold(a.W8,(({value:e})=>g.d.isChecklistItemEmpty(e)))))));return Object.assign(Object.assign({},d),{cardIndex:S?o.none:d.cardIndex,animation:b?v.wj.force:v.wj.proceed,items:C})}}),e.getRemoveAlert=(e,n,r)=>({removeAlertFromItem:(i,a)=>l=>{const c=new Set(i.map((e=>e.id)));return(0,s.pipe)(o.fromPredicate(g.d.isChecklistItemWithAlerts)(l),o.filter(m.C.hasAnyOfAlerts(c)),o.chain((e=>o.fromNullable(Array.from(n.get().values()).find((n=>t(a.id,n.id)===e.id))))),o.map((t=>T(e,r,l,t,i,v.In.getActiveItem(a),a))),o.getOrElse((()=>l)))}})}(r||(r={}))},48521:(e,t,n)=>{n.d(t,{o:()=>r});var r,i=n(40966);!function(e){function t(e){return"visualState"in e}e.Transition=i.u,e.VisualState=i.t,e.eq={equals:(n,r)=>!t(n)||t(r)&&e.VisualState.eq.equals(n.visualState,r.visualState)},e.isAnimatable=t,e.isFocused=e=>{switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}},e.isHidden=e=>"hidden"===e.visualState.transition.type}(r||(r={}))},86718:(e,t,n)=>{n.d(t,{t:()=>r,f:()=>i});var r,i,a=n(22690),s=n(73975),o=n(5114),l=n(45701),c=n(22232),u=n(36156);!function(e){e.eq=s.MW({rank:s.lr,checked:s.vD,title:s.yv,miniTitle:o.getEq(s.yv),miniChecked:o.getEq(s.vD),miniLabel:o.getEq(s.yv)}),e.hash=e=>(0,u.NO)({rank:e.rank,title:e.title,miniTitle:m.show(e.miniTitle),miniChecked:f.show(e.miniChecked),miniLabel:p.show(e.miniLabel),checked:e.checked}),e.ord=l.contramap((e=>e.rank))(l.ordNumber)}(r||(r={})),function(e){let t;!function(e){e.simple="simple",e.textLength="textLength"}(t=e.Kind||(e.Kind={})),e.eqSimple=s.MW({explanation:s.yv,details:o.getEq(s.yv)}),e.eqTextLength=s.MW({explanation:s.yv,details:o.getEq(s.yv),wordCount:s.lr}),e.hashSimple=e=>(0,u.NO)({kind:e.kind,explanation:e.explanation,details:h.show(e.details)}),e.hashTextLength=e=>(0,u.NO)({kind:e.kind,explanation:e.explanation,details:h.show(e.details),wordCount:e.wordCount}),e.isTextLengthCard=function(t){return t.kind===e.Kind.textLength},e.eq=s.f7(((t,n)=>{switch(t.kind){case e.Kind.simple:return n.kind===e.Kind.simple&&e.eqSimple.equals(t,n);case e.Kind.textLength:return n.kind===e.Kind.textLength&&e.eqTextLength.equals(t,n);default:(0,c.vE)(t)}})),e.hash=t=>{switch(t.kind){case e.Kind.simple:return e.hashSimple(t);case e.Kind.textLength:return e.hashTextLength(t);default:(0,c.vE)(t)}}}(i||(i={}));const d=o.getShow(a._3),p=d,m=d,h=d,f=o.getShow(a.R)},70100:(e,t,n)=>{n.d(t,{X:()=>r});var r,i=n(40327),a=n(73975),s=n(5114),o=n(83078),l=n(69345),c=n(40966),u=n(36156),d=n(48521),p=n(86718);!function(e){function t(t,n,r,i,a,s){return{kind:e.kind,id:t,itemMeta:n,cardMeta:r,positionState:i,visualState:a,renderOptions:s,equals(t){return e.eq.equals(this,t)},hashCode(){return e.hash(this)}}}e.kind="ChecklistItemEmpty",e.eq=a.f7(((e,t)=>e.id===t.id&&p.f.eq.equals(e.cardMeta,t.cardMeta)&&p.t.eq.equals(e.itemMeta,t.itemMeta)&&l.Z.eq.equals(e.positionState,t.positionState)&&c.t.eq.equals(e.visualState,t.visualState))),e.hash=e=>(0,u.NO)({id:e.id,checklistItemMeta:p.t.hash(e.itemMeta),card:p.f.hash(e.cardMeta)}),e.create=t,e.updateMeta=e=>n=>t(n.id,e,n.cardMeta,n.positionState,n.visualState,n.renderOptions),e.updateCardMeta=e=>n=>t(n.id,n.itemMeta,e,n.positionState,n.visualState,n.renderOptions),e.changeVisualState=e=>n=>t(n.id,n.itemMeta,n.cardMeta,n.positionState,e,n.renderOptions),e.changePositionState=e=>n=>t(n.id,n.itemMeta,n.cardMeta,e,n.visualState,n.renderOptions),e.completeTransition=e=>n=>t(n.id,n.itemMeta,n.cardMeta,n.positionState,c.t.complete(n.visualState,e),n.renderOptions),e.transitionTo=e=>n=>t(n.id,n.itemMeta,n.cardMeta,n.positionState,c.t.to(n.visualState,e),n.renderOptions),e.select=e=>n=>(0,i.pipe)(e,s.filter((e=>e.id===n.id)),o.vx((0,i.pipe)(n,s.fromPredicate((e=>"focused"===e.visualState.transition.type)))),s.fold((()=>{const r=l.Z.invalidateHeight(n.positionState),a={type:"focused",clockwise:!0},o=(0,i.pipe)(e,s.fold((()=>c.t.initial(a)),(()=>c.t.to(n.visualState,a))));return t(n.id,n.itemMeta,n.cardMeta,r,o,n.renderOptions)}),(()=>n))),e.unselect=e=>n=>(0,i.pipe)(e,s.filter((e=>e.id===n.id)),o.vx((0,i.pipe)(n,s.fromPredicate((e=>"rendered"===e.visualState.transition.type)))),s.fold((()=>{const e=l.Z.invalidateHeight(n.positionState),r=d.o.isHidden(n)?n.visualState:c.t.to(n.visualState,{type:"rendered",clockwise:!0});return t(n.id,n.itemMeta,n.cardMeta,e,r,n.renderOptions)}),(()=>n)))}(r||(r={}))},11245:(e,t,n)=>{n.d(t,{U:()=>w});var r=n(17889),i=n(40327),a=n(5114),s=n(22232),o=n(40018),l=n(17594),c=n(26027),u=n(55567),d=n(91549),p=n(20594),m=n(48521),h=n(77610),f=n(69345),g=n(40966),y=n(76974),v=n(70100),b=n(47306);function w(e,t,n,b){const w=p.Mq.getCardSelections(t),I=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),x=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),k=p.Mq.getTransitionTo(x,I),E=(e,t,r)=>i=>{const a=h.C.getAlertByIndex(r,e),s=l.$.isApplicableAlert(a)?p.Mq.getApplicableCardMeta(a,i.visualState,n):u.n.empty(void 0);return Object.assign(Object.assign({},i),{meta:s,alerts:e,activeAlert:a,removedAlertsIds:t,activeAlertIndex:r})},A=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,i.pipe)(e,a.map((e=>e.labels)))}),T=t=>p.Mq.getCardHydrator((e=>e.cachedTransform),c.X.canHydrate,A,e)(t),_=p.Mq.getSelect(E,(e=>t=>Object.assign(Object.assign({},t),{userInput:e})),x,I,(e=>t=>Object.assign(Object.assign({},t),{meta:e})),T,t,n),L=p.Mq.getSelectFirstAlert(_),O=p.Mq.getSelectNextAlert(p.Mq.getCardSelections(t),_),R=p.Mq.getUnselect(x,I),P=p.Mq.getRemove(E,k),M=p.Mq.getChangeVisualState(x,T),F=e=>p.Mq.getCreate(S(e),a.none,M,(()=>y.of(a.none)),n),N=(e,t)=>p.Mq.getCreate(C(e,t),a.none,M,(()=>y.of(a.none)),n),D=(e,t,r,s,o)=>{const l=v.X.create(e,t,r,f.Z.empty,g.t.initial({type:"rendered",clockwise:!0},!1),p.IG.toCardRenderOptions(n,s,y.of(a.none)));return(0,i.pipe)(o,a.fold((()=>l),(e=>v.X.changeVisualState(e)(l))))};return Object.assign({changePositionState:I,changeVisualState:x,completeTransition:e=>t=>x(m.o.VisualState.complete(t.visualState,e))(t),transitionTo:k,selectByAlert:_,selectFirstAlert:L,selectNextAlert:O,unselect:R,removeAlerts:P,updateWith:e=>t=>{(0,s.kG)(e.every((e=>o.bZ.isRegistered(e))),"cannot add non registered alerts");const n=new Set(e.map((e=>e.id))),r=new Set(t.removedAlertsIds);n.forEach((e=>{r.delete(e)}));const a=t.alerts.filter((e=>!n.has(e.id))).concat(e.map(l.$.fromModel)).sort(b.compare);return(0,i.pipe)(t,E(a,r,h.C.getIndexByAlert(t.activeAlert.id,a)),T)},updateMeta:e=>t=>Object.assign(Object.assign({},t),{itemMeta:e}),createDefault:D,createWithAlerts:(e,t,n,r,a,s,o,l)=>(0,i.pipe)(l?N(t,d.R.getAlertOutcomeBundle(n[0])):F(t),(t=>t(e,n,r,0,a,s,o,b))),createRenderedDefault:(e,t,n,r)=>D(t,n,r,e,a.some(g.t.initial({type:"rendered",clockwise:!0},!1))),createRenderedSingle:(e,t,r,i)=>{const s=m.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return F(r)(t,[i],0,0,p.Mq.getApplicableCardMeta(i,s,n),e,a.some(s),b)},createRenderedBundle:(e,t,r,i,s)=>{const o=m.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return N(r,i)(t,s,0,0,p.Mq.getApplicableCardMeta(s[0],o,n),e,a.some(o),b)},createFocusedDefault:(e,t,n,r)=>D(t,n,r,e,a.some(g.t.initial({type:"focused",clockwise:!0},!0))),createFocusedSingle:(e,t,r,i)=>{const s=m.o.VisualState.initial({type:"focused",clockwise:!0},!0);return F(r)(t,[i],0,0,p.Mq.getApplicableCardMeta(i,s,n),e,a.some(s),b)},createFocusedBundle:(e,t,s,o,l,c)=>(0,i.pipe)(c,a.fold((()=>(0,i.pipe)(l,r.DY(b),(e=>({alerts:e,activeAlertIdx:0})))),(e=>({alerts:l,activeAlertIdx:e}))),(r=>{const i=m.o.VisualState.initial({type:"focused",clockwise:!0},!0);return N(s,o)(t,r.alerts,r.activeAlertIdx,0,p.Mq.getApplicableCardMeta(r.alerts[r.activeAlertIdx],i,n),e,a.some(i),b)}))},w)}const C=(e,t)=>(n,r)=>Object.assign(Object.assign({},I("bundle",e,n,r)),{bundleInfo:t,viewKind:"bundle"}),S=e=>(t,n)=>Object.assign(Object.assign({},I("single",e,t,n)),{viewKind:"single"}),I=(e,t,n,r)=>{const i=new u.n.Impl(r.meta.percentile,r.meta.explanation,r.meta.checking,r.meta.ranges,r.meta.showMuteQuotedAdvice);return b.J.create(n,e,t,r.alerts,r.activeAlertIndex,r.activeHighlightIndex,r.positionState,r.visualState,i,r.lensId,r.renderOptions,r.muteCategory,r.order,r.initialAlertId,r.removedAlertsIds,r.cachedTransform,r.userInput,r.synfonySelection)}},47306:(e,t,n)=>{n.d(t,{J:()=>r});var r,i=n(40327),a=n(73975),s=n(22232),o=n(5114),l=n(26027),c=n(36156),u=n(86718);!function(e){e.kind="ChecklistItemWithAlerts",e.eq=a.f7(((e,t)=>l.X.eq.equals(e,t)&&u.t.eq.equals(e.itemMeta,t.itemMeta)&&e.viewKind===t.viewKind)),e.isBundle=function(e){return"bundle"===e.viewKind},e.isSingle=function(e){return"single"===e.viewKind},e.create=function(t,n,r,a,d,p,m,h,f,g,y,v,b,w,C,S,I,x){const k=a[d];return(0,s.kG)(!!k,"Active alert index should point to an alert"),{kind:e.kind,id:t,viewKind:n,itemMeta:r,alerts:a,activeAlertIndex:d,activeHighlightIndex:p,positionState:m,visualState:h,meta:f,lensId:g,renderOptions:y,muteCategory:v,order:b,initialAlertId:w,removedAlertsIds:C,cachedTransform:S,userInput:I,synfonySelection:x,activeAlert:k,transform:(0,i.pipe)(S,o.map((e=>e.labels))),activeAlertRemoved:C.has(k.id),hashCode(){return(0,c.NO)({alertCard:l.X.hashCode(this),itemMeta:u.t.hash(r),viewKind:n})},equals(t){return e.eq.equals(this,t)}}}}(r||(r={}))},15215:(e,t,n)=>{n.d(t,{d:()=>r});var r,i=n(40327),a=n(45701),s=n(73975),o=n(5114),l=n(86718),c=n(70100),u=n(47306);!function(e){function t(e){return e.kind===c.X.kind}function n(e){return e.kind===u.J.kind}e.ord=a.contramap((e=>e.itemMeta))(l.t.ord),e.eq=s.f7(((e,r)=>t(e)&&t(r)?c.X.eq.equals(e,r):!(!n(e)||!n(r))&&u.J.eq.equals(e,r))),e.isChecklistItemEmpty=t,e.isChecklistItemWithAlerts=n,e.isChecklistItem=function(e){return t(e)||n(e)},e.getAlertsCount=function(e){return(0,i.pipe)(e,o.fromPredicate(n),o.map((e=>e.alerts.length)))}}(r||(r={}))},16892:(e,t,n)=>{n.d(t,{s:()=>r});var r,i=n(73975),a=n(69345);!function(e){e.PositionState=a.Z,e.eqById=i.f7(((e,t)=>e.id===t.id)),e.positionStateEq={equals:(t,n)=>e.PositionState.eq.equals(t.positionState,n.positionState)},e.verticalPositionEq={equals:(t,n)=>e.PositionState.verticalEq.equals(t.positionState,n.positionState)}}(r||(r={}))},69345:(e,t,n)=>{n.d(t,{Z:()=>r});var r,i=n(57050),a=n(73975),s=n(55415);!function(e){e.eq=a.MW({absTop:a.lr,height:a.lr,animationInProgress:a.vD,visible:a.vD,isHeightValid:a.vD,watched:a.vD}),e.verticalEq=a.MW({absTop:a.lr,height:a.lr}),e.empty={absTop:0,height:0,animationInProgress:!1,visible:!1,isHeightValid:!1,watched:!1},e.create=i.yR,e.dimensionEquals=function(e,t){return e.absTop===t.absTop&&e.height===t.height},e.changeTop=function(e,t){return s.Vx(e,{absTop:t})},e.changeHeight=function(e,t){return s.Vx(e,{height:t,isHeightValid:!0})},e.changeAnimationInProgress=function(e,t){return s.Vx(e,{animationInProgress:t})},e.changeVisible=function(e,t){return s.Vx(e,{visible:t})},e.invalidateHeight=function(e){return s.Vx(e,{isHeightValid:!1})},e.changeWatched=function(e,t){return s.Vx(e,{watched:t})}}(r||(r={}))},4890:(e,t,n)=>{n.d(t,{j:()=>r});var r,i=n(11064),a=n(5114),s=n(22232),o=n(76974);!function(e){let t,n;e.toJSON=function(e){return Object.assign(Object.assign({},e),{isNew:e.isNew._value})},function(e){e.cozy="cozy",e.compact="compact",e.minimal="minimal"}(t=e.Density||(e.Density={})),e.defaultOptions={features:new Set,layoutDensity:t.cozy,isNew:o.of(a.none)},function(e){function t(t,n,r){return i=>{switch(i){case e.cozy:return t();case e.compact:return n();case e.minimal:return r();default:return(0,s.vE)(i)}}}e.match=function(e,n,r){return t(i.of(e),i.of(n),i.of(r))},e.matchL=t,e.matchOrDefault=function(e){return(t,n)=>r=>r===e?t():n()}}(t=e.Density||(e.Density={})),function(e){e.showLabel="showLabel",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showNewPremiumCardLabels="showNewPremiumCardLabels"}(n=e.Features||(e.Features={}))}(r||(r={}))},40966:(e,t,n)=>{n.d(t,{u:()=>r,t:()=>i});var r,i,a=n(73975),s=n(5114),o=n(22232),l=n(55415);!function(e){let t;e.eq=a.MW({type:a.yv,clockwise:a.vD}),t=e.nominal||(e.nominal={})}(r||(r={})),function(e){e.initial=(e,t=!0)=>({from:s.none,transitionId:0,transition:e,incomplete:t}),e.eq=a.MW({from:s.getEq(a.w4),transitionId:a.w4,transition:r.eq,incomplete:a.w4}),e.to=(e,t)=>({from:s.some(e.transition.type),transitionId:e.transitionId+1,transition:t,incomplete:!0}),e.complete=(e,t)=>((0,o.kG)(t===e.transitionId,"unexpected transitionId"),l.Vx(e,{incomplete:!1}))}(i||(i={}))},77610:(e,t,n)=>{n.d(t,{C:()=>r});var r,i=n(64015),a=n(22690),s=n(5114),o=n(73975),l=n(8125),c=n(22232),u=n(95195),d=n(40018),p=n(17594),m=n(36156),h=n(69345),f=n(40966);!function(e){let t;function n(e){return e.activeAlert.type===p.$.Type.super}function r(e){return e.activeAlert.type===p.$.Type.smartPhrases}function g(e){return p.$.isTakeaway(e.activeAlert)}function y(e){return e.activeAlert.type===p.$.Type.sentenceLevelBrandTones}function v(e){return e.activeAlert.alertType===d.bZ.Type.Synfony}function b(e){return p.$.isShortenIt(e.activeAlert)}function w(e){return e.activeAlert.type===p.$.Type.default}!function(e){e.show=s.getShow(a._3)}(t=e.UserInput||(e.UserInput={})),e.hashCode=e=>(0,m.NO)({id:e.id,activeAlertId:e.activeAlert.id,metaHashCode:e.meta.hashCode(),alertsCount:e.alerts.length,removedAlertsIdsCount:e.removedAlertsIds.size,activeHighlightIndex:e.activeHighlightIndex,userInput:t.show.show(e.userInput),takeawayAlertsHashCode:e.alerts.reduce(((e,t)=>p.$.isTakeaway(t)?31*e+d.UC.calculateHashCode(t):e),0),shortenItAlertsHashCode:e.alerts.reduce(((e,t)=>p.$.isShortenIt(t)?31*e+d.Np.calculateHashCode(t):e),0),smartPhrasesAlertHashCode:p.$.isSmartPhrases(e.activeAlert)?d.Xi.calculateHashCode(e.activeAlert):void 0,sentenceLevelBrandTonesAlertHashCode:p.$.isSentenceLevelBrandTones(e.activeAlert)?d.iL.calculateHashCode(e.activeAlert):void 0}),e.eq=o.f7(((e,t)=>e.hashCode()===t.hashCode()&&h.Z.eq.equals(e.positionState,t.positionState)&&f.t.eq.equals(e.visualState,t.visualState)&&e.meta.equals(t.meta)&&i.Eh(p.$.eq).equals(e.alerts,t.alerts)&&(0,l.As)(e.removedAlertsIds,t.removedAlertsIds))),e.hasAlert=e=>t=>void 0!==t.alerts.find((t=>t.id===e)),e.hasAnyOfAlerts=e=>t=>t.alerts.some((t=>e.has(t.id))),e.willBeDisposed=(e,t)=>e.alerts.every((e=>t.has(e.id))),e.activeAlertRemoved=e=>e.removedAlertsIds.has(e.activeAlert.id),e.getAlertByIndex=(e,t)=>{const n=t[e];return(0,c.kG)(!!n,"Active alert index should point to an alert",(()=>JSON.stringify({alerts:t,alertIndex:e}))),n},e.getIndexByAlert=(e,t)=>{const n=t.findIndex((t=>t.id===e));return(0,c.kG)(-1!==n,"Alert must exist"),n},e.getActiveAlert=t=>e.getAlertByIndex(t.activeAlertIndex,t.alerts),e.isSuperItem=n,e.isSmartPhrasesItem=r,e.isTakeawayItem=g,e.isSentenceLevelBrandTonesItem=y,e.isSynfonyItem=v,e.isShortenItItem=b,e.isDefaultItem=w,e.match=function(e){return t=>{if(n(t))return u.F2(e.super(t));if(r(t))return u.F2(e.smartPhrases(t));if(g(t))return u.F2(e.takeaway(t));if(y(t))return u.F2(e.sentenceLevelBrandTones(t));if(v(t))return u.F2(e.synfony(t));if(b(t))return u.F2(e.shortenIt(t));if(w(t))return u.F2(e.default(t));const i={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return u.t$(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(i,null,2)}]`))}}}(r||(r={}))},35416:(e,t,n)=>{n.d(t,{h8:()=>r,Nm:()=>i,_L:()=>a,In:()=>s,CX:()=>o,yi:()=>C,nL:()=>S,Zz:()=>I,Tl:()=>x,FS:()=>k,wj:()=>A});var r,i,a,s,o,l=n(35214),c=n(57050),u=n(40327),d=n(20817),p=n(5114),m=n(8125),h=n(22232),f=n(55415),g=n(66896),y=n(40151),v=n(87938),b=n(76974),w=n(36156);!function(e){e.forceText="forceText",e.forceSidebar="forceSidebar"}(r||(r={})),function(e){e.lensview="lensview",e.advanced="advanced",e.plagiarism="plagiarism",e.draftAI="draftAI",e.closed="closed"}(i||(i={})),function(e){e.active="active",e.persistent="persistent",e.abstract="abstract"}(a||(a={})),function(e){function t(e){return(0,u.pipe)(e.cardIndex,p.chain((t=>e.items.getAt(t))))}e.getActiveItem=t,e.getActiveItemOfType=function(e){return(0,c.ls)(t,p.filter(e))}}(s||(s={})),function(e){e.withFilter=e=>t=>(n,r)=>t(n,(0,m.W9)(e,r)),e.compose=function(e){return(t,n)=>(0,l.fold)((0,l.getEndomorphismMonoid)())(e.map((e=>e(t,n))))}}(o||(o={}));const C=e=>"withPriorityList"in e&&e.withPriorityList;class S{constructor(e){this._data=e}static create(e){return new S(e)}get alertSource(){return this._data.alertSource}get switchOrder(){return this._data.switchOrder}get currentLens(){return this._data.currentLens}patch(e){return new S(Object.assign(Object.assign({},this._data),e))}hashCode(){let e=7;return e=31*e+(0,w.AC)(this.alertSource),e=31*e+(0,w.AC)(this.switchOrder),e=31*e+this.currentLens.hashCode(),e}equals(e){return this.alertSource===e.alertSource&&this.switchOrder===e.switchOrder&&this.currentLens.equals(e.currentLens)}}var I;!function(e){function t(e,t,n){return r=>{switch(r.currentLens.kind){case a.active:return e(r);case a.persistent:return t(r);case a.abstract:return n(r);default:return(0,h.vE)(r.currentLens)}}}let n,s,o,l;function m(e){return e.currentLens.kind===a.persistent}function w(e){return g.R.isOutcomeId(e.currentLens.id)||g.R.isMainLens(e.currentLens.id)||e.currentLens.id===g.R.SpecialId.PredictionTakeaways||e.currentLens.id===g.R.SpecialId.PredictionEmogenie}e.withCardLensSnapshot=(e,t)=>n=>{const r=n.currentLens.items.size>50,i=(0,u.pipe)(n.currentLens.cardIndex,p.getOrElse((()=>0))),[a,s]=r?[Math.max(i-25,0),i+25]:[0,50];return{alertSource:n.alertSource,switchOrder:n.switchOrder,lens:{id:n.currentLens.id,card:(0,u.pipe)(t(n.currentLens),p.map(e)),items:n.currentLens.items.values().slice(a,s).map(e),sample:r}}},e.snapshot=(n,r)=>t(e.withCardLensSnapshot(n,r),e.withCardLensSnapshot(n,r),(e=>({alertSource:e.alertSource,switchOrder:e.switchOrder,lens:{id:e.currentLens.id,kind:e.currentLens.kind}}))),e.genericMapper=t,e.mapper=e=>t(e,e,(()=>p.none)),e.getActiveItem=t=>e.mapper((({currentLens:e})=>t(e))),e.getActiveAlertHighlight=t=>(0,c.ls)(e.getActiveItem(t),p.map((e=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex})))),e.getActiveAlert=t=>(0,c.ls)(e.getActiveItem(t),p.map((e=>e.activeAlert))),e.getLens=e.mapper((({currentLens:e})=>p.some(e))),function(e){e.mapper=function(e,t){return n=>t[e(n)](n)}}(n=e.Items||(e.Items={})),e.is=function(e){return t=>t.currentLens.id===e},e.isLensview=function(e){return e.currentLens.type===i.lensview},e.isPersistent=m,e.hasCards=function(e){return e.currentLens.kind===a.active||m(e)},e.hasItems=function(e){return e.currentLens.kind===a.active||e.currentLens.kind===a.persistent},e.hasSuccess=w,e.isWithPriorityList=function(e){return w(e)&&C(e.currentLens)},e.isForceSidebar=t=>(e.isLensview(t)||t.currentLens.type===i.plagiarism)&&t.alertSource===r.forceSidebar,e.isSidebarOpened=t=>!e.is(g.R.SpecialId.Closed)(t),function(e){e.defaultFilter=f.ei("alertHighlight")}(s=e.FocusFirstFilter||(e.FocusFirstFilter={})),function(e){e.getLens=()=>d.Ri.create((e=>e.currentLens),((e,t)=>t.patch({currentLens:e}))),e.getLensWithItems=()=>d.Ri.create((e=>e.currentLens),((e,t)=>t.patch({currentLens:e})))}(o=e.Prism||(e.Prism={})),function(e){let t,n,r,i,a,s,o,l;!function(e){e.SwitchLens="SwitchLens",e.SwitchAlert="SwitchAlert",e.Applicator="Applicator",e.ItemsApplicator="ItemsApplicator"}(t=e.Type||(e.Type={})),function(e){let n;e.create=function(e){return{type:t.Applicator,source:e}},function(e){e.identity=e=>e,e.override=e=>()=>e,e.empty=y.E}(n=e.Source||(e.Source={}))}(n=e.Applicator||(e.Applicator={})),function(e){let n;e.create=function(e){return{type:t.ItemsApplicator,source:e}},function(e){e.identity=()=>e=>e,e.override=e=>()=>e,e.empty=y.E}(n=e.Source||(e.Source={}))}(r=e.ItemsApplicator||(e.ItemsApplicator={})),function(e){e.create=function(e){return{type:t.SwitchAlert,source:e}}}(i=e.SwitchAlert||(e.SwitchAlert={})),function(e){e.create=function(e){return{type:t.SwitchLens,source:e}}}(a=e.SwitchLens||(e.SwitchLens={})),function(e){e.delayed=e=>t=>{const n=v.j((()=>b.of(void 0)),e),r=Object.assign(Object.assign({},t.what),{source:n(t.what.source)});return Object.assign(Object.assign({},t),{what:r})}}(s=e.Producer||(e.Producer={})),function(e){e.noFocus="noFocus",e.unFocus="unFocus",e.focusFirst="focusFirst",e.focusNext="focusNext",e.focusAlert="focusAlert"}(o=e.FocusBehaviorType||(e.FocusBehaviorType={})),function(e){e.noFocus={kind:o.noFocus},e.unFocus={kind:o.unFocus},e.focusNext={kind:o.focusNext},e.focusFirst={kind:o.focusFirst},e.focusAlert=e=>({kind:o.focusAlert,alertHighlight:e})}(l=e.FocusBehavior||(e.FocusBehavior={}))}(l=e.Effect||(e.Effect={}))}(S||(S={})),function(e){e.defaultOptions={focusBehavior:S.Effect.FocusBehavior.focusFirst}}(I||(I={}));const x=e=>t=>t.id===e.id;var k,E,A;!function(e){e[e.allAlerts=0]="allAlerts",e[e.priorityAlertsOnly=1]="priorityAlertsOnly"}(k||(k={})),function(e){e.getDefault=()=>k.allAlerts}(E||(E={})),function(e){e.skip=c.jv,e.force=c.W8,e.proceed=e=>e.positionState.animationInProgress}(A||(A={}))},93494:(e,t,n)=>{n.d(t,{v:()=>H});var r,i,a,s=n(17771),o=n(57050),l=n(40327),c=n(20817),u=n(83078),d=n(55415),p=n(92843),m=n(22232),h=n(89943),f=n(5114),g=n(71249),y=n(95195),v=n(73975),b=n(40018),w=n(66896),C=n(36156),S=n(5920),I=n(48521),x=n(16892),k=n(35416);!function(e){let t,n,r,i;e.filterAlertInLens=(e,t)=>g.hX((n=>b.bZ.isNotRemoved(n)||f.isSome(e.items.find((e=>t.hasAlert(n.id)(e)))))),function(e){e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(k.In.getActiveItem(t),f.chain((t=>(0,l.pipe)(e.get(t.id),f.map((e=>e.index)))))),items:e}),e.getActiveItemIndex=e=>(0,o.ls)(k.In.getActiveItem,f.chain((t=>e.get(t.id))),f.map((e=>e.index))),e.hideItem=function(e,t){return I.o.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e},e.calculateCardsHeight=e=>(0,l.pipe)(e.getAt(e.size-1),f.map((e=>e.positionState.absTop+e.positionState.height)),f.getOrElse((()=>0)));e.getItemsPositionsUpdateTransformer=t=>({state:n,metadata:r})=>{if(!k.nL.hasCards(n))return y.t$({state:n,metadata:r});const i=k.nL.Prism.getLens();return y.t$({state:i.modify(e.updateItemsPositions(t),n),metadata:r})};const t=e=>t=>(0,l.pipe)(t.items.find((e=>t=>n=>n.positionState.watched&&!e.isHidden(n)&&(0,l.pipe)(t,u.wo((e=>e.id!==n.id))))(e)(k.In.getActiveItem(t))),f.map((({value:t,index:n})=>({index:n,value:(0,l.pipe)(t,f.fromPredicate((t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t))))}))));e.updateItemsPositions=n=>r=>{const i=k.In.getActiveItem(r),a=t(n)(r),s=(0,l.pipe)(a,f.chain(d.ei("value")),f.map((e=>e.positionState.height)));let o=0;const c=(0,l.pipe)(i,u.wo((e=>e.positionState.isHeightValid))),p=(0,l.pipe)(a,f.map(d.ei("index")),f.getOrElse((()=>{return e=r.cardIndex,(0,l.pipe)(e,f.map((e=>0===e?1:0)),f.getOrElse((()=>0)));var e}))),m=r.items.map(((e,t,i)=>{const a=u.FX(i)(r.cardIndex),d=a||i===p,m=n.isScheduledToDispose(e)||(a?e.positionState.isHeightValid:f.isSome(s)),h=n.isScheduledToDispose(e)?n.useReferenceHeightOnRemove(e)?(0,l.pipe)(s,f.getOrElse((()=>e.positionState.height))):0:a?e.positionState.height:(0,l.pipe)(s,f.getOrElse((()=>e.positionState.height))),g={absTop:a||c?o:e.positionState.absTop,height:h,animationInProgress:r.animation(e,i),visible:e.positionState.visible,isHeightValid:m,watched:d};return o+=h,x.s.PositionState.eq.equals(e.positionState,g)?e:n.changePosition(g)(e)})),h=e.calculateCardsHeight(m),g=(0,l.pipe)(i,u.wo((e=>e.positionState.isHeightValid)))&&(0,l.pipe)(m.getAt(p),u.wo((e=>e.positionState.isHeightValid)));return Object.assign(Object.assign({},r),{items:m,cardsHeight:h,isCardsHeightValid:g})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,n,r)=>i=>(0,l.pipe)(e,p.v.reduce(i,((e,{alert:t})=>r([t])(e)),((e,t,{alert:r})=>n([r])(e)),((e,{alert:n})=>t([n])(e)))),e.applyWithFilter=(e,t)=>(n,r,i,a)=>{const s=(0,o.ls)(g.uK(e),(e=>(0,o.ls)(a(e.left),i(e.right))));return t(n,(t=>r(t.filter(e))),s,a)}}(n=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=c.Ri.create((e=>e.items),((e,n)=>t.setVisibleItems(e)(n))),e.getFeedItems=()=>c.Ri.create((e=>e.items),((e,n)=>t.setVisibleItems(e)(n)))}(r=e.Prism||(e.Prism={})),e.getEq=e=>v.f7(((t,n)=>{if(t.kind===k._L.abstract||n.kind===k._L.abstract)return t.id===n.id;{const r=t,i=n;return t.id===n.id&&f.getEq(e).equals(k.In.getActiveItem(r),k.In.getActiveItem(i))&&r.meta.equals(n.meta)&&r.items.equals(i.items)}})),e.lensHash={hashCode:e=>{if(e.kind===k._L.abstract)return(0,C.AC)(e.id);{const n=e;let r=7;return r=31*r+(0,C.AC)(e.id),r=31*r+(t=k.In.getActiveItem(n),(0,l.pipe)(t,f.fold((()=>2433880),(e=>null==e?9735524:e.hashCode()<<2)))),31*r+e.meta.count}var t}},function(e){e.getAlertReleaser=e=>({release:t=>n=>{const r=n.items.map(e.removeAlertFromItem([t],n)),i=(0,l.pipe)(n.cardIndex,f.chain((t=>(0,l.pipe)(r.findRightFrom(e.isScheduledToDispose,t),f.map((e=>e.index))))),f.isSome)?k.wj.skip:k.wj.force;return Object.assign(Object.assign({},n),{animation:i,items:r})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>n=>{const r=(0,l.pipe)(n,e,f.map((e=>n.items.add((0,l.pipe)(e,t.unselect(f.none,n.itemsOrd))))),f.getOrElse((()=>n.items)));return Object.assign(Object.assign({},n),{items:r,animation:k.wj.force,cardIndex:f.none})}}),e.getSelectableByAlert=(e,t)=>({selectItemByAlert:n=>r=>{const i=e(r),a=r.items.find(t.isSelectableByAlert(n));(0,m.kG)(f.isSome(a),"Can not find card for provided alert. Unknown card or it is already disposed.",(()=>n.alert.toString()));const{value:s,index:o}=u.MH(a),c=(0,l.pipe)(i,f.map((e=>r.items.add((0,l.pipe)(e,t.unselect(f.some(s),r.itemsOrd))))),f.getOrElse((()=>r.items))).add((0,l.pipe)(s,t.selectByAlert(i,n,r.itemsOrd)));return Object.assign(Object.assign({},r),{items:c,animation:k.wj.force,cardIndex:f.some(o)})}}),e.getSelectableById=(e,t)=>({selectItemById:n=>r=>{const i=e(r),a=r.items.get(n),{value:s,index:o}=u.MH(a),c=(0,l.pipe)(i,f.map((e=>r.items.add((0,l.pipe)(e,t.unselect(f.some(s),r.itemsOrd))))),f.getOrElse((()=>r.items))).add((0,l.pipe)(s,t.select(i,r.itemsOrd)));return Object.assign(Object.assign({},r),{items:c,animation:k.wj.force,cardIndex:f.some(o)})}}),e.getItemReleaser=()=>({removeItemById:t=>n=>e.setVisibleItems(n.items.remove(t))(n)}),e.getMetaUpdatable=function(){return{updateMeta:e=>t=>Object.assign(Object.assign({},t),{meta:w.R.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{finishApplyAnimation:n=>r=>{(0,m.kG)(n.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const i=r.id,a=e=>{const r=e.items.map(t.removeAlertFromItem(n,e));return Object.assign(Object.assign({},e),{items:r})};if(w.R.isOutcomeId(i))return a(r);switch(i){case w.R.SpecialId.Priority:case w.R.SpecialId.AllAlerts:case w.R.SpecialId.PredictionTakeaways:case w.R.SpecialId.PredictionEmogenie:case w.R.SpecialId.RealTimeProofit:return a(r);case w.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case w.R.SpecialId.Plagiarism:return(0,m.kG)(n.every(b.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),a(r);default:return(0,m.vE)(i)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>(0,l.pipe)(k.In.getActiveItem(t),f.exists((t=>e.isScheduledToDispose(t))))||f.isNone(t.items.find((t=>!e.isScheduledToDispose(t))))}},e.getHasAlerts=function(e,t,n){const r=e=>e.id===w.R.SpecialId.Premium||e.id===w.R.SpecialId.Plagiarism?e.meta.count:(0,l.pipe)(k.In.getActiveItem(e),f.chain(t.hasActiveAlert),f.exists(b.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:r,getActiveAlertsCount:r,findFirstAlert:e=>(0,l.pipe)(e.items.filter(n(e)).find((e=>f.isSome(t.hasActiveAlert(e)))),f.map((({value:e})=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex})))),findNextAlert:t=>((0,m.kG)(f.isSome(k.In.getActiveItem(t))===f.isSome(t.cardIndex),"Lens is in wrong state"),(0,l.pipe)((0,s.g)(f.option)(k.In.getActiveItem(t),t.cardIndex),f.chain((([r,i])=>(0,l.pipe)(e.nextAlert(r),f.alt((()=>e.prevAlert(r))),f.alt((()=>(0,l.pipe)(h.dn(t.items.values(),i,n(t)),f.map((e=>e.value.activeAlert)))))))),u.vx((0,l.pipe)(S.l.find(t.items,n(t)),f.map((({value:e})=>e.activeAlert)))),f.map((e=>({alert:e,highlightIndex:0})))))}},e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(k.In.getActiveItem(t),f.chain((t=>(0,l.pipe)(e.get(t.id),f.map((e=>e.index)))))),items:e})}(i=e.Capabilities||(e.Capabilities={}))}(r||(r={})),function(e){let t;e.create=function(e,n){return t||(t={id:w.R.SpecialId.Closed,kind:k._L.abstract,type:k.Nm.closed,meta:w.R.createStaticLens({id:w.R.SpecialId.Closed,title:"Closed"},w.R.Meta.group.empty,e),hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(n).equals(this,e)}}),t}}(i||(i={})),function(e){e.create=()=>({id:w.R.SpecialId.DraftAI,type:k.Nm.draftAI,kind:k._L.abstract,meta:w.R.createStaticLens({id:w.R.SpecialId.DraftAI,title:"Draft AI"},w.R.Meta.group.empty,o.jv),transitionSource:f.none,hashCode(){return(0,C.AC)(this.id)},equals(e){return this.id===e.id}}),e.createFromTransitionSource=t=>Object.assign(Object.assign({},e.create()),{transitionSource:f.some(t)})}(a||(a={}));var E,A,T=n(95983),_=n(17594);!function(e){function t(e){return T.vM("cardId",e)}e.create=function(e,n,i,a,s,o){(0,m.kG)(e.id===w.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const c=T.aW.empty((e=>e.id),o.compare),u=t(n),d=(0,l.pipe)(i,f.map((({alertIndex:e})=>((0,m.kG)(void 0!==n[e],"Can not find alert for provided alertIndex"),n[e]))));let p=f.none;const h=Array.from(u.entries()).reduce(((e,[t,n])=>(0,l.pipe)(d,f.map((e=>n.indexOf(e))),f.filter((e=>e>-1)),f.fold((()=>e.add(a.createRendered(t,n))),(r=>{const i=a.createFocused(t,n,r);return p=f.some(t),e.add(i)})))),c),g=(0,l.pipe)(p,f.chain((e=>(0,l.pipe)(h.get(e),f.map((e=>e.index))))));return{id:w.R.SpecialId.Plagiarism,kind:k._L.persistent,type:k.Nm.plagiarism,meta:e,cardIndex:g,items:h,itemsOrd:o,animation:k.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(s).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===w.R.SpecialId.Plagiarism?Object.assign(Object.assign({},t),{items:t.items.map((t=>_.$.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(_.$.isPlagiarism)):t))}):t},e.add=e=>n=>r=>{const i=t(n),a=Array.from(i.entries()).reduce(((t,[n,r])=>(0,l.pipe)(t.update(n,(t=>e.addPlagiarismAlerts(t,r))),y.g_((()=>t.add(e.createAdded(n,r))),o.yR))),r.items),s=(0,l.pipe)(k.In.getActiveItem(r),f.map((({id:e})=>u.MH(a.get(e)).index))),c=f.getEq(v.lr).equals(s,r.cardIndex)?k.wj.force:k.wj.skip;return Object.assign(Object.assign({},r),{cardIndex:s,items:a,animation:c})},e.remove=e=>n=>r=>{const i=t(n),a=k.In.getActiveItem(r),s=Array.from(i.entries()).reduce(((t,[n,i])=>(0,l.pipe)(t.update(n,(t=>{const n=(0,l.pipe)(e.remove(t,i,(0,l.pipe)(a,f.map((e=>r.itemsOrd.compare(t,e)>0)),f.getOrElse(o.W8))),(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(_.$.isPlagiarism))));return(0,l.pipe)(a,f.exists((e=>e.id===n.id)))?e.selectNextAlert(n,r.itemsOrd):n})),y.g_((()=>t),o.yR))),r.items);return Object.assign(Object.assign({},r),{items:s,animation:k.wj.force})},e.update=t=>n=>r=>e.updateWithAlerts(t)(n.filter((0,o.ff)(t.shouldAnimateAlertApply)))(r),e.updateWithAlerts=n=>r=>i=>{const[a,s]=h.uK(r,b.bZ.isRegistered),c=t(a),u=Array.from(c.entries()).reduce(((e,[t,r])=>(0,l.pipe)(e.update(t,(e=>n.changePlagiarismMetaWithAlerts(e,e.alerts.filter(_.$.isPlagiarism)))),y.g_((()=>e.add(n.createAdded(t,r))),o.yR))),e.remove(n)(s)(i).items),d=(0,l.pipe)(k.In.getActiveItem(i),f.map((({id:e})=>(0,l.pipe)(u.get(e),f.map((({index:e})=>e)),f.getOrElse((()=>0))))));return Object.assign(Object.assign({},i),{cardIndex:d,items:u,animation:k.wj.proceed})},e.getAlertsHandler=function(t){return n=>r.ApplyDiff.apply(n,e.add(t),e.update(t),e.remove(t))}}(E||(E={})),function(e){e.create=function(e,t,n,i,a){const s=T.aW.create(t.map(n.createFromAlert(w.R.SpecialId.Premium)),(e=>e.id),a.compare);return(0,m.kG)(s.size>0,"PremiumLensView should have at least one card"),{id:w.R.SpecialId.Premium,kind:k._L.active,type:k.Nm.advanced,meta:e,items:s,itemsOrd:a,cardIndex:f.none,animation:k.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(i).equals(this,e)}}},e.getAlertsHandler=function(t,n){return i=>r.ApplyDiff.apply(i,e.add(t),e.update(t,n),e.remove(n))},e.add=e=>t=>n=>{const i=t.map(e.createFromAlert(n.id)),a=n.items.add(i),s=r.Items.getActiveItemIndex(a)(n);return Object.assign(Object.assign({},n),{cardIndex:s,items:a,animation:k.wj.proceed})},e.remove=e=>t=>n=>{const i=new Set(t.map((e=>e.id))),a=n.items.filter((0,o.ls)(e.hasActiveAlert,f.exists((e=>i.has(e.id))))).reduce(((e,t)=>e.remove(t.id)),n.items),s=r.Items.getActiveItemIndex(a)(n);return Object.assign(Object.assign({},n),{cardIndex:s,items:a})},e.update=(t,n)=>r=>i=>{const[a,s]=h.uK(r,b.bZ.isRegistered);return(0,o.zG)(i,e.remove(n)(s),e.add(t)(a))}}(A||(A={}));var L,O=n(8125),R=n(91549);!function(e){const t=b.h$.ord;function n(e){return e.id}function i(e){const t=e.map((e=>[R.R.getAlertOutcomeBundle(e),e]));return T.vM((([e,t])=>n(e)),t)}function a(e,n,r,a,s){(0,m.kG)((0,l.pipe)(r,u.wo((({alertIndex:e})=>void 0!==n[e]))),"Can not find alert for provided alertIndex");const o=i(n),c=(0,l.pipe)(r,f.map((({alertIndex:e})=>((0,m.kG)(void 0!==n[e],"Can not find alert for provided alertIndex"),n[e]))));let d=f.none;const p=T.aW.empty(R.R.getId,s.compare),h=Array.from(o.entries()).reduce(((n,[r,i])=>{const s=i.map((([e,t])=>t)),o=i[0][0];return(0,l.pipe)(c,f.map((e=>s.indexOf(e))),f.filter((e=>e>-1)),f.fold((()=>n.add(a.createRendered(e)(r,o,s,t))),(i=>{const l=a.createFocused(e)(r,o,s,i,t);return d=f.some(r),n.add(l)})))}),p);return{cardIndex:(0,l.pipe)(d,f.chain((e=>(0,l.pipe)(h.get(e),f.map((e=>e.index)))))),cards:h}}e.getCardId=n,e.initCardsHash=a,e.create=function(e,t,n,i,s,o,l){const{cards:c,cardIndex:u}=a(e,n,i,s,l);return{id:e,type:k.Nm.lensview,kind:k._L.persistent,meta:t,withPriorityList:!1,cardIndex:u,items:c,itemsOrd:l,animation:k.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(o).equals(this,e)}}},e.add=(e,n)=>a=>s=>{if(0===a.length)return s;const c=i(a),u=Array.from(c.entries()).reduce(((r,[i,a])=>{const c=a.map((([e,t])=>t)),u=a[0][0];return(0,l.pipe)(r.update(i,(e=>n.updateWithAlerts(c)(e))),y.g_((()=>r.add(e.createAdded(s.id)(i,u,c,t))),o.yR))}),s.items),d=(0,l.pipe)(s,r.Items.getActiveItemIndex(u)),p=f.getEq(v.lr).equals(d,s.cardIndex)?k.wj.force:k.wj.skip;return Object.assign(Object.assign({},s),{cardIndex:d,items:u,animation:p})},e.remove=e=>t=>n=>{const a=i(t),s=Array.from(a.entries()).reduce(((t,[r,i])=>(0,l.pipe)(t.update(r,(t=>e.removeAlertFromItem(i.map((([e,t])=>t)),n)(t))),y.g_((()=>t),o.yR))),n.items),c=(0,l.pipe)(n,r.Items.getActiveItemIndex(s));return Object.assign(Object.assign({},n),{cardIndex:c,items:s,animation:k.wj.force})},e.update=(t,n,r)=>i=>a=>e.updateWithAlerts(t,r)(i.filter((0,O.ff)(n.shouldAnimateAlertApply)))(a),e.updateWithAlerts=(n,a)=>s=>c=>{if(0===s.length)return c;const{left:u,right:d}=(0,l.pipe)(s,r.filterAlertInLens(c,a),g.uK(b.bZ.isRegistered)),p=i(d),m=Array.from(p.entries()).reduce(((e,[r,i])=>{const s=i.map((([e,t])=>t)),u=i[0][0];return(0,l.pipe)(e.update(r,(e=>a.updateWithAlerts(s)(e))),y.g_((()=>e.add(n.createAdded(c.id)(r,u,s,t))),o.yR))}),e.remove(a)(u)(c).items),h=(0,l.pipe)(c,r.Items.getActiveItemIndex(m));return Object.assign(Object.assign({},c),{cardIndex:h,items:m,animation:k.wj.proceed})},e.getAlertsHandler=function(t,n,i){return(a,s)=>o=>{const c=r.ApplyDiff.applyWithFilter(s,r.ApplyDiff.apply);return(0,l.pipe)(o,c(a,e.add(t,i),e.update(t,n,i),e.remove(i)))}},e.getHasAlerts=function(e,t,n){const i=r.Capabilities.getHasAlerts(e,t,n);return Object.assign(Object.assign({},i),{findNextAlert:t=>(0,l.pipe)((0,s.g)(f.option)(k.In.getActiveItem(t),t.cardIndex),f.chain((([r,i])=>(0,l.pipe)(e.nextAlert(r),f.alt((()=>e.prevAlert(r))),f.alt((()=>(0,l.pipe)(h.XT(t.items.values(),i+1,n(t)),f.alt((()=>h.XT(t.items.values(),0,n(t)))),f.chain((e=>f.fromNullable(e.value.alerts))),f.map((e=>e[0])))))))),u.vx((0,l.pipe)(S.l.find(t.items,n(t)),f.chain((({value:e})=>f.fromNullable(e.alerts))),f.map((e=>e[0])))),f.map((e=>({alert:e,highlightIndex:0}))))})}}(L||(L={}));var P=n(35214),M=n(45701),F=n(26027),N=n(69345),D=n(4890);const $=v.f7(((e,t)=>e.id===t.id&&e.visibilityState===t.visibilityState&&N.Z.eq.equals(e.positionState,t.positionState))),B=e=>(0,C.NO)({itemId:e.id,visibilityState:e.visibilityState,positionState:(0,C.NO)(e.positionState)});var U,j,W,G,H;!function(e){e.id="PriorityToggleHintId",e.Kind="PriorityToggleHint",e.create=(e,n)=>new t(e,n,D.j.defaultOptions),e.hidden="hidden",e.visible="visible",e.isVisible=t=>t.visibilityState===e.visible,e.changePosition=(t,n)=>e.create(t.visibilityState,n),e.isPriorityToggleHint=t=>t.id===e.id,e.transitionTo=(t,n)=>t.visibilityState!==n?e.create(n,t.positionState):t;class t{constructor(t,n,r){this.visibilityState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return $.equals(this,e)}hashCode(){return B(this)}}}(U||(U={})),function(e){e.id="PriorityToggleId",e.Kind="PriorityToggle",e.isCollapsed=e=>"collapsed"===e.visibilityState,e.isExpanded=e=>"expanded"===e.visibilityState,e.isHidden=e=>"hidden"===e.visibilityState,e.create=(e,n)=>new t(e,n,D.j.defaultOptions),e.changePosition=(t,n)=>e.create(t.visibilityState,n),e.transitionTo=(t,n)=>t.visibilityState!==n?e.create(n,t.positionState):t,e.isPriorityToggle=t=>t.id===e.id,e.isPriorityItem=(0,O.Kg)(e.isPriorityToggle,U.isPriorityToggleHint);class t{constructor(t,n,r){this.visibilityState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return $.equals(this,e)}hashCode(){return B(this)}}}(j||(j={})),function(e){let t;function n(e,t){return`${e.id}_${t.id}`}function i(e,t,r,i,a,s){(0,m.kG)((0,l.pipe)(i,u.wo((({alertIndex:e})=>void 0!==r[e]))),"Can not find alert for provided alertIndex");const o=T.aW.create(r.map(((r,s)=>(0,l.pipe)(i,f.exists((({alertIndex:e})=>s===e)))?a.createFocused(e)(n(t,r),r,(0,l.pipe)(i,f.fold((()=>0),(({highlightIndex:e})=>e)))):a.createRendered(e)(n(t,r),r))),F.X.getId,s.compare);return{cardIndex:(0,l.pipe)(i,f.chain((({alertIndex:e})=>o.find((t=>t.activeAlert.id===r[e].id)))),f.map((e=>e.index))),hash:o}}e.isInSuccess=function(e,t,n=o.W8){return 0===e.meta.count&&(0===e.items.filter(n).size||f.isNone(e.items.filter(n).find((e=>!t.isScheduledToDispose(e)))))},function(t){t.isInSuccess=t=>n=>k.nL.hasSuccess(n)&&k.nL.hasItems(n)&&e.isInSuccess(n.currentLens,t),t.isInGlobalSuccess=e=>n=>(k.nL.is(w.R.SpecialId.AllAlerts)(n)||k.nL.is(w.R.SpecialId.Priority)(n))&&t.isInSuccess(e)(n)}(t=e.State||(e.State={})),e.getCardId=n,e.initCardsHash=i,e.create=function(e,t,n,a,s,o,l){const{hash:c,cardIndex:u}=i(e,t,n,a,s,l);return{id:e,type:k.Nm.lensview,kind:k._L.persistent,withPriorityList:!1,meta:t,cardIndex:u,items:c,itemsOrd:l,animation:k.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(o).equals(this,e)}}},e.add=(e,t,i)=>a=>s=>{const o=a.map((a=>{const o=t.createAdded(s.id)(n(s.meta,a),a);return e(s,a)?o:r.Items.hideItem(o,i)})),l=s.items.add(o),c=r.Items.getActiveItemIndex(l)(s),u=f.getEq(v.lr).equals(c,s.cardIndex)?k.wj.force:k.wj.skip;return Object.assign(Object.assign({},s),{cardIndex:c,items:l,animation:u})},e.remove=e=>t=>n=>{const i=new Set(t.map((e=>e.id))),a=n.items.map(e.remove((0,o.ls)(e.hasActiveAlert,f.fold(o.jv,(e=>i.has(e.id)))),(e=>(0,l.pipe)(k.In.getActiveItem(n),f.map((t=>n.itemsOrd.compare(e,t)>0)),f.getOrElse(o.W8))))),s=(0,l.pipe)(n.cardIndex,f.chain((t=>(0,l.pipe)(a.findRightFrom((t=>e.isScheduledToDispose(t)),t),f.map((e=>e.index))))),f.isSome)?k.wj.skip:k.wj.force,c=(0,l.pipe)(n,r.Items.getActiveItemIndex(a));return Object.assign(Object.assign({},n),{cardIndex:c,items:a,animation:s})},e.update=(t,n,r)=>i=>a=>e.updateWithAlerts(n,t,r)(i.filter((0,O.ff)(n.shouldAnimateAlertApply)))(a),e.updateWithAlerts=(e,t,i)=>a=>s=>{if(0===a.length)return s;const c=(0,l.pipe)(a,r.filterAlertInLens(s,i),g.UI((e=>[n(s.meta,e),e])),g.u4(s.items,((n,[a,c])=>(0,l.pipe)(n.update(a,i.updateWithAlerts([c])),y.g_((()=>{const o=e.createAdded(s.id)(a,c);return n.add(t(s,c)?o:r.Items.hideItem(o,i))}),o.yR))))),u=r.Items.getActiveItemIndex(c)(s);return Object.assign(Object.assign({},s),{cardIndex:u,items:c,animation:k.wj.proceed})},e.getAlertHandler=function(t,n,i=o.W8){return(a,s)=>{const o=r.ApplyDiff.applyWithFilter(s,r.ApplyDiff.apply);return r=>(0,l.pipe)(r,o(a,e.add(i,t,n),e.update(i,t,n),e.remove(n)))}}}(W||(W={})),function(e){function t(e,t){return(0,l.pipe)(k.In.getActiveItem(e),f.chain(t.hasActiveAlert),f.map((e=>!_.$.isPriority(e))),f.getOrElse((()=>!1)))}function n(e){return(0,l.pipe)(e.items.get(j.id),f.map((({value:e})=>j.isPriorityToggle(e)&&j.isExpanded(e))),f.getOrElse((()=>!1)))}function i(e,t,n){return 0!==e.meta.count&&0===e.meta.priorityCount&&0===e.items.filter((0,O.W9)(t,(e=>!n.isScheduledToDispose(e)))).size}let a;function s(e,t){return r=>k.nL.hasSuccess(r)&&W.isInSuccess(r.currentLens,t)||k.nL.isWithPriorityList(r)&&(W.isInSuccess(r.currentLens,t,(0,O.ff)(j.isPriorityItem))||i(r.currentLens,e,t)&&!n(r.currentLens))}e.ord=(0,P.fold)(M.getMonoid())([(0,l.pipe)(M.ordBoolean,M.contramap(U.isPriorityToggleHint)),(0,l.pipe)(M.ordBoolean,M.contramap(j.isPriorityToggle)),F.X.ord]),e.create=function(e,t,n,i,a,s,d,p){const m=(0,l.pipe)(i,f.map((({alertIndex:e})=>n[e])),f.chain(f.fromNullable),f.map((e=>"all"===e.view)),f.getOrElse((()=>!1))),{hash:h}=W.initCardsHash(e,t,n,i,a,p);let g=c(h);g=u(g,m,m,s);const y=(0,l.pipe)(i,f.chain((({alertIndex:e})=>g.find((0,o.ls)(s.hasActiveAlert,f.exists((t=>t.id===n[e].id)))))),f.map((e=>e.index)));return{id:e,type:k.Nm.lensview,kind:k._L.persistent,itemsOrd:p,meta:t,cardIndex:y,items:g,animation:k.wj.skip,withPriorityList:!0,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(d).equals(this,e)}}},e.getHasPriorityToggle=function(e){return{toggleNonPriorityList:r=>i=>{const a=n(i);if("collapsed"===r&&!a||"expanded"===r&&a)return i;const s=t(i,e),o=u(i.items,!a,!a&&s,e);return Object.assign(Object.assign({},i),{items:o,cardIndex:s&&a?f.none:i.cardIndex,animation:k.wj.proceed})}}},e.focusedCardIsNonPriority=t,e.isNonPriorityListOpened=n,e.onlyNonPriorityAlertsLeft=i,e.nonPriorityAlertsVisible=function(e){return!k.nL.isWithPriorityList(e)||n(e.currentLens)},function(e){e.fromLensState=e=>t=>e.currentLens.id!==t||k.nL.isWithPriorityList(e)&&!n(e.currentLens)?k.FS.priorityAlertsOnly:k.FS.allAlerts}(a=e.LensViewMode||(e.LensViewMode={})),e.isInSuccess=s,e.isInGlobalSuccess=function(e,t){return n=>(k.nL.is(w.R.SpecialId.AllAlerts)(n)||k.nL.is(w.R.SpecialId.Priority)(n))&&s(e,t)(n)},e.getSyncVisibleCardsHandler=function(e){return i=>{if(!w.R.isWithSuccessId(i.id))return i;let a=c(i.items);const s=t(i,e);a=u(a,n(i)||s,s,e);const o=r.Items.getActiveItemIndex(a)(i);return Object.assign(Object.assign({},i),{cardIndex:o,items:a,animation:k.wj.proceed})}};function c(e){return e.has(j.id)||0===e.size?e:e=(e=e.add(j.create("expanded",x.s.PositionState.empty))).add(U.create("visible",x.s.PositionState.empty))}function u(e,t,n,i){const a=(e=>({transitionTo:t=>n=>I.o.isAnimatable(n)&&n.visualState.transition.type!==t.type?e.transitionTo(t)(n):n}))(i),s=0===e.filter((e=>!i.isScheduledToDispose(e)&&(0,l.pipe)(i.hasActiveAlert(e),f.exists((0,O.ff)(_.$.isPriority))))).size;return e.map((e=>(0,l.pipe)(i.hasActiveAlert(e),f.fold((()=>j.isPriorityItem(e)?s?j.isPriorityToggle(e)?j.transitionTo(e,"hidden"):U.transitionTo(e,"hidden"):j.isPriorityToggle(e)?t||n?j.transitionTo(e,"expanded"):j.transitionTo(e,"collapsed"):t||n?U.transitionTo(e,"visible"):U.transitionTo(e,"hidden"):e),(n=>t||_.$.isPriority(n)?I.o.isAnimatable(e)&&I.o.isHidden(e)?a.transitionTo({type:"rendered",clockwise:!0})(e):e:r.Items.hideItem(e,i))))))}e.isAlertVisible=function(e,t){return"priority"===t.view||n(e)},e.ensureExpandCardIsPresent=c,e.syncVisibleCards=u,e.getHasAlerts=function(e,t,i){return Object.assign(Object.assign({},r.Capabilities.getHasAlerts(e,t,i)),{getVisibleAlertsCount:e=>(0,l.pipe)(k.In.getActiveItem(e),f.chain(t.hasActiveAlert),f.exists(b.bZ.isCapiDone))&&1===e.items.size?0:n(e)?e.meta.count:e.meta.priorityCount})}}(G||(G={})),function(e){e.Prism=r.Prism,e.Items=r.Items,e.Capabilities=r.Capabilities,e.ApplyDiff=r.ApplyDiff,e.filterAlertInLens=r.filterAlertInLens,e.lensHash=r.lensHash,e.getEq=r.getEq,e.Closed=i,e.DraftAI=a,e.Plagiarism=E,e.Premium=A,e.WithBundles=L,e.WithPriority=G,e.WithSuccess=W}(H||(H={}))},73841:(e,t,n)=>{n.d(t,{l:()=>R});var r=n(31542),i=n(11064),a=n(57050),s=n(40327),o=n(95195),l=n(5114),c=n(22232),u=n(8125),d=n(81531),p=n(46680),m=n(66896),h=n(32952),f=n(77176),g=n(76974),y=n(95300),v=n(24209),b=n(66310),w=n(98403),C=n(69935),S=n(91224),I=n(41398),x=n(2834),k=n(28043),E=n(598),A=n(83401),T=n(17594),_=n(48521),L=n(35416),O=n(89770);class R{constructor(e,t,n,c,u,E,A){this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=c,this._stateSideEffects=u,this._getActiveAlert=E,this._stateTransformer=A,this.focusLens=(e,t,n={toFocus:L.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=(e,t,n)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._ts=d.C8.TimeSeries.root.getMetric("lens_state.manager"),this._switchLensActions=new h.xQ,this._switchAlertActions=new h.xQ,this._addMetadata=e=>t=>t.pipe(f.U((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:n=L.Zz.defaultOptions.focusBehavior,order:r}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),m.R.isClosedId(e))return(0,s.pipe)(g.of(L.nL.Effect.Applicator.Source.override((0,O.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(m.R.isDraftAIId(e))return(0,s.pipe)(g.of(L.nL.Effect.Applicator.Source.override((0,O.zc)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));const i=this._state.get(),a=i.patch({switchOrder:r||i.switchOrder,alertSource:t});return(0,s.pipe)(this._stateProvider.getLensEventsByLensId(a,e,{focusBehavior:n}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:n})=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const r=this._state.get(),i=r.patch({switchOrder:n.order||r.switchOrder,alertSource:t});return(0,s.pipe)(this._stateProvider.getLensEventsByAlert(i,function(e,t,n){if(e===m.R.SpecialId.Priority||e===m.R.SpecialId.PredictionTakeaways||e===m.R.SpecialId.PredictionEmogenie||e===m.R.SpecialId.RealTimeProofit)return e;if(void 0!==n)return n;if(e===m.R.SpecialId.Closed||e===m.R.SpecialId.AllAlerts)return m.R.SpecialId.AllAlerts;return t}(r.currentLens.id,e.alert.lensId,n.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const _=this._state.get(),R=this._stateTransformer,P=new y.X(_);this._effects=v.T(...this._stateSideEffects.map((({when:e,what:t,id:n})=>this._state.view("currentLens","id").view(e).pipe(b.w(w.Ft((0,s.pipe)(this._effectToApplicator(t),this._addMetadata({sourceId:n}))))))),v.T(this._switchAlertActions.pipe(f.U(this._focusAlertEffect)),this._switchLensActions.pipe(f.U(this._focusLensEffect))).pipe(C.B()));const M=this._ts.getTimer("batched.long_state_change");this._subs=[this._effects.pipe(S.K(((e,t)=>(this._log.error("Got error from effects: ",e),t))),I.M(P,(({source:e,metadata:t},n)=>({state:e(n),metadata:t}))),S.K(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),f.U(R),S.K(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,s.pipe)(e,o.g_((({state:e,metadata:t})=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,s.pipe)(this._checkState(e),o.g_((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>P.next(e))))}),o.g_((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,s.pipe)(P,f.U(L.nL.getActiveAlert(this._getActiveAlert)),x.b((e=>this._log.trace("active alert: ",e))),k.x(l.getEq(T.$.eq).equals),b.w(w.aI((e=>(0,s.pipe)(this._alertsService.takeReference(e,"activeCard"),o.Vn((e=>this._log.error("can not take alertRef",e))),o.g_(i.of(a.Q1),(e=>e.dispose))))))).subscribe(),(0,s.pipe)(P,f.U((e=>{const t=performance.now();r.unstable_batchedUpdates((()=>{this._state.set(e)}));const n=performance.now()-t;n>16&&M.recordTime(n)}))).subscribe()],L.nL.hasCards(_)&&(0,s.pipe)(L.nL.getActiveAlertHighlight(this._getActiveAlert)(_),l.filter((e=>this._alertsReader.isRegistered(e.alert.id))),l.fold((()=>this._switchLensActions.next({lensId:_.currentLens.id,alertSource:_.alertSource,options:{order:_.switchOrder,toFocus:L.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:_.alertSource,options:{lensId:_.currentLens.id,order:_.switchOrder}}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case L.nL.Effect.Type.Applicator:case L.nL.Effect.Type.ItemsApplicator:return e.source;case L.nL.Effect.Type.SwitchLens:return e.source.pipe(x.b((e=>this._switchLensActions.next(e))),E.c(A.C));case L.nL.Effect.Type.SwitchAlert:return e.source.pipe(x.b((e=>this._switchAlertActions.next(e))),E.c(A.C));default:return(0,c.vE)(e)}}_checkState(e){try{if(L.nL.hasCards(e)){const t=e.currentLens.items.filter((0,u.W9)(_.o.isAnimatable,_.o.isFocused));(0,c.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return o.t$(e)}return o.F2(void 0)}}R.toLensAlert=({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})},89770:(e,t,n)=>{n.d(t,{T:()=>T,zc:()=>_,oq:()=>L});var r=n(57050),i=n(40327),a=n(73975),s=n(22232),o=n(92843),l=n(5114),c=n(8125),u=n(83078),d=n(81531),p=n(51374),m=n(40018),h=n(66896),f=n(4390),g=n(89772),y=n(76974),v=n(85985),b=n(28043),w=n(77176),C=n(24209),S=n(16118),I=n(66310),x=n(93508),k=n(17594),E=n(35416),A=n(93494);const T=()=>E.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:A.v.Closed.create(r.jv,a.f7(r.jv))}),_=()=>E.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:A.v.DraftAI.create()});class L{constructor(e,t,n,a,s,o,l,c,u,p=E.nL.FocusFirstFilter.defaultFilter){this._checkingState=e,this._alertsReader=t,this._lenses=n,this._positionManager=a,this._lensPreviewVM=s,this._lensViewFactory=o,this._alertsHandlerFactory=l,this._capabilities=c,this._alertsFilterService=u,this._focusFirstFilter=p,this._transformAlertsDiffToApplicator=e=>t=>n=>E.nL.hasItems(n)?n.patch({currentLens:e(t,(0,r.ff)(m.bZ.isMuted))(n.currentLens)}):n,this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._updateMetaSource=e=>t=>n=>e===n.currentLens.id&&E.nL.hasItems(n)?E.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),n):n,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,i.pipe)(this._checkingState.get(),f.p.reduce([],((e,{alert:n})=>t(n)?[...e,n]:e)),(e=>e.sort(m.h$.ord.compare)))}}static _mapByActiveLensId(e,t,n,r){if(h.R.isOutcomeId(e))return r();switch(e){case h.R.SpecialId.Plagiarism:return t();case h.R.SpecialId.Premium:return n();case h.R.SpecialId.AllAlerts:case h.R.SpecialId.Priority:case h.R.SpecialId.PredictionTakeaways:case h.R.SpecialId.PredictionEmogenie:case h.R.SpecialId.RealTimeProofit:return r();default:return(0,s.vE)(e)}}_conditionedApplicator(e,t){return n=>r=>e(r,n)?t(n)(r):r}static _filterALEvents(e){return t=>y.of((0,i.pipe)(t,f.p.Diff.filter((t=>e(t.alert))))).pipe(v.h((0,r.ff)(o.v.isEmpty)))}emptyState(e=h.R.SpecialId.AllAlerts){return E.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:l.none,alertSource:m.l$.api}),alertSource:m.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,n={}){const r=this._getActiveLensMeta(t),a=this._lensAlerts(r),s=this._createState(e,l.none,r,t,a),o=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,s):l.none;e.currentLens.id===t&&E.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==a.length&&this._log.warn("Lens contains inconsistent number of alerts",r.id);const c=E.nL.hasItems(s)?(0,i.pipe)(o,l.fold((()=>s),(n=>this._createState(e,l.some(n),r,t,a)))):s;return this._generateEventsFromState(c,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,n){(0,s.kG)(l.isSome(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);const r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&E.nL.hasItems(e)?E.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(n),e):this._createState(e,l.some(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findClosestAlertHighlight(e,t){return(0,i.pipe)(this._positionManager.findClosestToPosition(e,(e=>p.P.is(e)&&p.x.isVisible(e)&&!p.x.isApplied(e)&&(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.exists((n=>this._alertsFilterService.alertCanBeDisplayed(n)&&t(n)&&n.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),l.chain((e=>(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.map((t=>{const n={alert:k.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return n.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:n.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>p.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),n.highlightIndex=0),n}))))))}findNextAlertInText({alert:e,highlightIndex:t},n){const r=e.getHighlightRanges();return(0,s.kG)(t<r.length,"AHI is out of highlightRanges length",`hr length: ${r.length}, ahi: ${t}`),this.findClosestAlertHighlight(r[t].end,n)}findNextAlertInTextByLens(e,t,n){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,n))}findPremiumAlert(){return this._lensPreviewVM.getLens(h.R.SpecialId.Premium).get().count>0?(0,i.pipe)(this._checkingState.get(),f.p.find((0,r.ls)(m.bZ.fromAlertModel,(0,c.W9)(m.bZ.isRegistered,m.bZ.isPremium))),l.map((e=>({alert:k.$.fromModel(e.alert),highlightIndex:0})))):l.none}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return E.nL.hasItems(e)&&e.currentLens.kind===E._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):E.nL.hasItems(e)&&e.currentLens.type===E.Nm.lensview?this._lenses.pipe(b.x(g.w.eq.equals),w.U((0,r.ls)(g.w.lookup(e.currentLens.id),l.map(this._updateMetaSource(e.currentLens.id)),l.getOrElse((()=>E.nL.Effect.Applicator.Source.identity))))):E.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return C.T(this._checkingState.pipe(S.G(),w.U((([e,t])=>f.p.diff(e,t))),I.w(L._filterALEvents(e.currentLens.meta.filter)),w.U(this._conditionedApplicator(((e,t)=>{const n=this._alertsFilterService.getLensesFilter(e.currentLens.id),a=(0,i.pipe)(t,f.p.Diff.filter((0,r.ff)((({alert:e})=>n(e)))));return o.v.isEmpty(a)||this._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:f.p.Diff.show.show(a)}),o.v.isEmpty(a)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(x.O(E.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=L._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(h.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(h.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,s.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState({alertSource:e,switchOrder:t},n,r,a,o){(0,s.kG)(u.wo((({alert:e})=>l.isSome(this._alertsReader.getInteractable(e.id))))(n),"we can create state only with alert in registered state",(()=>(0,i.pipe)(n,l.fold((()=>"null"),(e=>e.toString())))));const c=this._createLens({lensId:a,initialLens:r,visibleAlerts:o,alertHighlight:n,alertSource:e});return E.nL.create({currentLens:c,alertSource:e,switchOrder:t})}_createLens(e){const t=(0,i.pipe)(this._focusFirstFilter(e),l.map((({alert:t,highlightIndex:n})=>({alertIndex:e.visibleAlerts.findIndex((0,E.Tl)(t)),highlightIndex:n}))));return this._lensViewFactory.create(e.lensId,e.initialLens,e.visibleAlerts,t)}_getAlertToFocus(e,t){switch(e.kind){case E.nL.Effect.FocusBehaviorType.noFocus:case E.nL.Effect.FocusBehaviorType.unFocus:return l.none;case E.nL.Effect.FocusBehaviorType.focusFirst:return E.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):l.none;case E.nL.Effect.FocusBehaviorType.focusNext:return E.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):l.none;case E.nL.Effect.FocusBehaviorType.focusAlert:return l.some(e.alertHighlight);default:(0,s.vE)(e)}}}},39920:(e,t,n)=>{n.d(t,{is:()=>l,kn:()=>c,ad:()=>u,gi:()=>d});var r,i=n(22232),a=n(66896),s=n(35416),o=n(93494);!function(e){e.compose=function(e){return t=>s.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return n=>t(e(n))}}(r||(r={}));const l=(e,t)=>n=>{if(a.R.isOutcomeId(n))return o.v.WithSuccess.getAlertHandler(e,t);switch(n){case a.R.SpecialId.Premium:return o.v.Premium.getAlertsHandler(e,t);case a.R.SpecialId.AllAlerts:case a.R.SpecialId.Priority:case a.R.SpecialId.PredictionTakeaways:case a.R.SpecialId.PredictionEmogenie:case a.R.SpecialId.RealTimeProofit:return o.v.WithSuccess.getAlertHandler(e,t);default:return(0,i.vE)(n)}},c=(e,t,n,r,i)=>a=>n(a)?o.v.WithBundles.getAlertsHandler(e,t,i):r(a);class u{constructor(e,t,n,r,i,a){this._cardFactory=e,this._alertsFilterService=t,this._lensPredicate=n,this._inner=r,this._itemEq=i,this._itemOrd=a}create(e,t,n,r){return this._lensPredicate(t)?o.v.WithBundles.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._itemEq,this._itemOrd):this._inner.create(e,t,n,r)}}class d{constructor(e,t,n,r){this._cardFactory=e,this._alertsFilterService=t,this._itemEq=n,this._itemOrd=r}create(e,t,n,r){const s=()=>o.v.WithSuccess.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._itemEq,this._itemOrd);if(a.R.isOutcomeId(e))return s();switch(e){case a.R.SpecialId.Premium:return o.v.Premium.create(t,n,this._cardFactory,this._itemEq,this._itemOrd);case a.R.SpecialId.AllAlerts:case a.R.SpecialId.Priority:case a.R.SpecialId.PredictionTakeaways:case a.R.SpecialId.PredictionEmogenie:case a.R.SpecialId.RealTimeProofit:return s();default:return(0,i.vE)(e)}}}},88772:(e,t,n)=>{n.d(t,{t:()=>r});var r,i=n(95195),a=n(35416);!function(e){e.nothing=i.t$,e.liftLensState=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:e(t.state)}))},e.liftWithItemsState=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:a.nL.hasItems(t.state)?a.nL.Prism.getLensWithItems().modify(e,t.state):t.state}))},e.liftLensView=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:a.nL.hasCards(t.state)?a.nL.Prism.getLens().modify(e,t.state):t.state}))}}(r||(r={}))},17372:(e,t,n)=>{var r,i;n.d(t,{K:()=>r,z:()=>i}),function(e){e.isPriorityMode=e=>e===i.priority}(r||(r={})),function(e){e.priority="priority",e.all="all"}(i||(i={}))},74364:(e,t,n)=>{n.d(t,{EQ:()=>L,tn:()=>T,$A:()=>_});var r,i=n(57050),a=n(40327),s=n(8125),o=n(95574),l=n(22232),c=n(83078),u=n(5114),d=n(95195),p=n(40018),m=n(66896),h=n(98403),f=n(19751),g=n(32952),y=n(28043),v=n(66310),b=n(40151),w=n(44586),C=n(78674),S=n(77176),I=n(598),x=n(83401),k=n(2834),E=n(73975),A=n(71249);!function(e){e.eq=(0,E.MW)({alert:(0,E.Uz)((e=>e.id))(E.w4),highlightIndex:E.w4}),e.getEq=()=>e.eq,e.getHighlightRange=e=>A.P5(e.highlightIndex)(e.alert.getHighlightRanges())}(r||(r={}));var T,_,L,O=n(35416);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(T||(T={})),function(e){e.Mock=class{constructor(){this.events=new g.xQ,this.focusAlertHighlight=()=>d.t$(new Error("Method not implemented.")),this.highlightAlertHighlight=()=>d.t$(new Error("Method not implemented.")),this.moveCursorToHighlight=s.ZT}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}},e.getHighlightIndex=function(e,t){return(0,a.pipe)(t,d.Vn((()=>new Error("Mark is collapsed"))),d.tS((t=>o.vM((()=>{const n=e.getHighlightRanges(),r=n.length>1?n.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,l.kG)(-1!==r,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:n,targetRange:t}))),r})))))}}(_||(_={})),function(e){e.getHighlightSubscribtion=(e,t,n)=>e.pipe(y.x(u.getEq(p.h$.ord).equals),v.w((e=>(0,a.pipe)(e,u.fold((()=>b.E),(e=>w.y.create((()=>(n.debug(`highlight mark: ${e.id}`),(0,a.pipe)(t.highlightAlertHighlight(e),d.g_((t=>(n.error(`Cannot highlight mark: ${e.id}`,t),s.ZT)),(t=>()=>{n.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),e.highlightMarkByHighlightedCard=(t,n,r,s,o,l)=>{const c=e.getHighlightSubscribtion(t.hovered.pipe(C.b(100),S.U((0,i.ls)(u.chain((e=>{const t=n.get();return O.nL.hasCards(t)?t.currentLens.items.find((t=>(0,a.pipe)(o.hasActiveAlert(t),u.exists((n=>t.id===e&&s.isRegistered(n.id)))))):u.none})),u.chain((({value:e})=>o.hasActiveAlert(e)))))),r,l);return{id:"highlightMarkByHighlightedAlert",when:m.R.isWithAlertsId,what:O.nL.Effect.Applicator.create(c.pipe(I.c(x.C)))}},e.focusMarkByActiveAlert=(e,t,n,i,o)=>{const l=e.view(O.nL.mapper((({currentLens:e,alertSource:t})=>(0,a.pipe)(i(e),u.map((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(v.w(h.b2.rafScheduler),f.$f(u.getEq(r.getEq())),S.U(u.filter((e=>u.isSome(n.getRegistered(e.alert.id))))),k.b(c.bw((e=>o.trace("new alert highlight: ",e)))),v.w(u.fold((()=>(o.debug("Nothing to focus"),b.E)),(e=>w.y.create((()=>(o.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}`),e.source===p.l$.sidebar&&t.moveCursorToHighlight(e,"start"),(0,a.pipe)(t.focusAlertHighlight(e),d.g_((t=>(o.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),s.ZT)),(t=>()=>{o.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))));return{id:"focusMarkByActiveAlert",when:m.R.isWithAlertsId,what:O.nL.Effect.Applicator.create(l.pipe(I.c(x.C)))}}}(L||(L={}))},43637:(e,t,n)=>{n.d(t,{Bo:()=>m,eh:()=>p,TV:()=>d});var r,i=n(38983),a=n(8125),s=n(5114),o=n(32952),l=n(22232),c=n(66896);!function(e){e.Mock=class{constructor(e={}){this._previewConfig=e}get lensPreviews(){return Object.entries(this._previewConfig).reduce(((e,[t,n])=>{const r=this.getLens(t).get();return e[t]=Object.assign(Object.assign({},c.R.Info.base),{logo:s.none,id:t,title:r.title,description:r.description,status:n.status,progress:n.progress,isUnavailable:n.isUnavailable}),e}),{})}getLens(e){const t=t=>t.lensId===e;if(c.R.isOutcomeId(e))return i.h.create(new c.R.LensImpl(c.R.Info.createOutcome(e),c.R.Meta.group.empty,t));switch(e){case c.R.SpecialId.AllAlerts:return i.h.create(new c.R.LensImpl(c.R.Info.allAlerts,c.R.Meta.group.empty,t));case c.R.SpecialId.Premium:return i.h.create(new c.R.LensImpl(c.R.Info.premium,c.R.Meta.group.empty,t));case c.R.SpecialId.Plagiarism:return i.h.create(new c.R.LensImpl(c.R.Info.plagiarism,c.R.Meta.group.empty,t));case c.R.SpecialId.Priority:return i.h.create(new c.R.LensImpl(c.R.Info.priority,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionTakeaways:return i.h.create(new c.R.LensImpl(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionEmogenie:return i.h.create(new c.R.LensImpl(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,t));case c.R.SpecialId.RealTimeProofit:return i.h.create(new c.R.LensImpl(c.R.Info.realTimeProofit,c.R.Meta.group.empty,t));default:return(0,l.vE)(e)}}findLens(){return s.none}}}(r||(r={}));var u,d,p,m,h=n(17372);!function(e){e[e.EngagementHook=0]="EngagementHook",e[e.DeliveryHook=1]="DeliveryHook",e[e.PlagiarismHook=2]="PlagiarismHook",e[e.ProofitHook=3]="ProofitHook",e[e.GbVoxHook=4]="GbVoxHook",e[e.GbEnableVoxHook=5]="GbEnableVoxHook"}(u||(u={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(d||(d={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(p||(p={})),function(e){let t;!function(e){e.default="default",e.priority="priority"}(t=e.LensTitleType||(e.LensTitleType={})),e.documentActionAvailable={kind:"available"},e.proofitDisabled=e=>({kind:"disabled",reason:e}),e.plagiarismDisabled=e=>({kind:"disabled",reason:e});e.Mock=class{constructor(n={}){this.documentActions=i.h.create({proofit:e.documentActionAvailable,plagiarism:e.documentActionAvailable}),this.popover=i.h.create(s.none),this.showMuteControl=i.h.create(!1),this.isDocumentActionsDisabled=i.h.create(!1),this.lensMode=i.h.create(h.z.all),this.defaultLensMode=h.z.all,this.events=new o.xQ,this.lensModeEvents=new o.xQ,this.lensTitleType=t.default,this.dispose=a.ZT;const l=new r.Mock(n);this.lensPreviews=i.h.create(l.lensPreviews)}}}(m||(m={}))},64992:(e,t,n)=>{n.d(t,{x:()=>g,O:()=>y});var r=n(45701),i=n(18208),a=n(68983),s=n(66896),o=n(26653);function l(e){return`${e} ${i._6(e,"alert","alerts")}`}const c=(e,t)=>(n,r,i,a)=>{const s=a?n.count:n.priorityCount;return s>0?l(s):i&g.IsDocumentEmpty?e:t},u={description:"Improves spelling, grammar, and punctuation.",stateMessage:c("No alerts","Looking good")},d={description:"Helps make your writing easier to understand.",stateMessage(e,t,n){const i=(0,a.W)(r.lt(o.g.ord))(t);if(n&g.IsDocumentEmpty)return"So far so good";if(e.count>0){if(o.g.isMin(t))return l(e.count);if(i(o.g.fromNumber(20)))return"Unclear";if(i(o.g.fromNumber(70)))return"A bit unclear";if(i(o.g.fromNumber(85)))return"Mostly clear";if(i(o.g.fromNumber(95)))return"Clear"}return"Very clear"}},p={description:"Helps make your writing more interesting and effective.",stateMessage(e,t,n){const i=n&g.IsFreeUser,s=o.g.isMin(t),c=(0,a.W)(r.lt(o.g.ord))(t);if(n&g.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.g.fromNumber(20)))return"Bland";if(c(o.g.fromNumber(80)))return"A bit bland";if(c(o.g.fromNumber(95)))return"Engaging"}return"Very engaging"}},m={description:"Helps you make the right impression on your reader.",stateMessage(e,t,n){const i=n&g.IsFreeUser,s=o.g.isMin(t),c=(0,a.W)(r.lt(o.g.ord))(t);if(n&g.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.g.fromNumber(20)))return"Serious issues";if(c(o.g.fromNumber(40)))return"Very off";if(c(o.g.fromNumber(95)))return"Slightly off"}return"Just right"}},h={description:"Your organization’s writing guidelines.",stateMessage:c("Nothing yet","All good")},f={[s.R.SpecialId.Correctness]:u,[s.R.SpecialId.CorrectnessPriority]:u,[s.R.SpecialId.Clarity]:d,[s.R.SpecialId.ClarityPriority]:d,[s.R.SpecialId.Engagement]:p,[s.R.SpecialId.EngagementPriority]:p,[s.R.SpecialId.Delivery]:m,[s.R.SpecialId.DeliveryPriority]:m,[s.R.SpecialId.Vox]:h,[s.R.SpecialId.VoxPriority]:h,[s.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:(e,t,n)=>n&g.IsLensVisited&&!(n&g.IsDocumentEmpty)?n&g.IsLensActive?o.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"},[s.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:(e,t,n)=>n&g.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i._6(e.count,"alert","alerts")}`}};var g;function y(e){return f[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(g||(g={}))},25970:(e,t,n)=>{n.d(t,{g:()=>o});var r,i=n(57050),a=n(5114),s=n(38983);!function(e){let t,n;!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(t=e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){e.Mock=class{constructor(){this.downloadStarted=s.h.create(!1),this.beginDownload=i.Q1,this.tryToInterrupt=i.Q1,this.generateReport=()=>{throw new Error("Method not implemented.")},this.reportData=s.h.create(a.none),this.dedHTML="",this.dispose=i.Q1}}}(n=e.ViewModel||(e.ViewModel={}))}(r||(r={}));var o,l=n(76974);!function(e){let t,n;!function(e){let t;!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(t=e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){e.Mock=class{constructor(e={type:t.Type.EMPTY},n=a.some(new r.ViewModel.Mock)){this.statisticsState=e,this.reportViewModel=n,this.state=l.of(this.statisticsState),this.onModalClose=i.Q1}}}(n=e.ViewModel||(e.ViewModel={}))}(o||(o={}))},27125:(e,t,n)=>{if(n.d(t,{L:()=>I,g:()=>i}),75==n.j)var r=n(40327);var i,a=n(38983);if(75==n.j)var s=n(84966);if(75==n.j)var o=n(5114);if(75==n.j)var l=n(66896);if(75==n.j)var c=n(35416);if(75==n.j)var u=n(32952);if(75==n.j)var d=n(85985);if(75==n.j)var p=n(77176);if(75==n.j)var m=n(66310);if(75==n.j)var h=n(98403);if(75==n.j)var f=n(93508);if(75==n.j)var g=n(16118);if(75==n.j)var y=n(76974);if(75==n.j)var v=n(50628);if(75==n.j)var b=n(17343);if(75==n.j)var w=n(60797);if(75==n.j)var C=n(2834);if(75==n.j)var S=n(93494);class I{constructor(e,t,n,y,v,b,w,C=S.v.WithSuccess.State.isInSuccess(y),I){this._state=e,this._documentModel=t,this._trackSuccessStateChanged=n,this._capabilities=y,this.nonPriorityOptions=v,this.mutedAlertsOptions=b,this.hasNonPriorityAlerts=w,this.isInSuccess=C,this._withBirthday=I,this._getTextAmount=e=>0===e?i.TextAmount.zero:e<=s.hD?i.TextAmount.small:i.TextAmount.large,this._subs=[],this.textAmount=a.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new u.xQ,this.applicatorEffects={id:"successViewModel.effects",when:l.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((({type:e})=>e===i.ActionType.More)),p.U((()=>e=>{const t=e.patch({currentLens:c.nL.hasItems(e)&&(0,c.yi)(e.currentLens)?this._capabilities.toggleNonPriorityList("expanded")(e.currentLens):e.currentLens});return(0,r.pipe)(c.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):o.none,o.fold((()=>t),(e=>t.patch({currentLens:c.nL.hasItems(t)?this._capabilities.selectItemByAlert(e)(t.currentLens):t.currentLens}))))}))))},this._currentLens=this._state.view((e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:c.nL.isLensview(e)&&c.nL.hasItems(e)&&0!==this._capabilities.getActiveAlertsCount(e.currentLens),isAllAlerts:l.R.isMainLens(e.currentLens.id)}))),this._listenTextSize=()=>this._currentLens.view((e=>e.isSuccess)).pipe(m.w(h.Ft(this._documentModel.documentLength.view("trimmed"))),p.U(this._getTextAmount)).subscribe(h.wW(this.textAmount)),this._lensSwitch=this._currentLens.pipe(f.O(this._currentLens.get()),g.G(),p.U((([e,t])=>t.isSuccess?o.some({prevLensType:e.type,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}):o.none))),this._textAmountToSuccessType=e=>e===i.TextAmount.zero?{type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}:e===i.TextAmount.large?{type:i.SuccessType.large}:{type:i.SuccessType.small},this.successState=a.h.create({type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}),this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,r.pipe)(v,o.map((e=>({hasNonPriorityAlerts:this._state.view(w),reviewNonPriorityAlerts:()=>{e.trackNonPriorityToggle(),this.actionEvents.next({type:i.ActionType.More})}})))),this.mutedAlerts=(0,r.pipe)(b,o.map((()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view((e=>e.currentLens.meta.mutedCount))}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===i.SuccessType.applied||e.type===i.SuccessType.zero?y.of(e):this._documentModel.checkingState.pipe(d.h((e=>"checking"!==e)),v.P(),b.h(e));return this._lensSwitch.pipe(w.cp((t=>this.textAmount.pipe(p.U(this._textAmountToSuccessType),f.O(t.prevLensType===c.Nm.lensview?{type:i.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),g.G(),p.U((([e,t])=>e.type===i.SuccessType.applied&&t.type!==i.SuccessType.zero?e:t)),m.w(((t,n)=>0===n?y.of(t):e(t))),C.b((e=>{this._trackSuccessStateChanged(e.type===i.SuccessType.applied?"applied":e.type===i.SuccessType.zero?"nothingToCheck":"noIssues")})))))).subscribe(h.wW(this.successState))}}!function(e){let t,n,r;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(n=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied"}(r=e.SuccessType||(e.SuccessType={}));e.Mock=class{constructor(){this.textAmount=a.h.create(n.zero),this.successState=a.h.create({type:r.zero,showBirthday:!1}),this.mutedSuggestionsCount=a.h.create(0),this.hasNonPriorityAlerts=a.h.create(!1)}reviewMutedSuggestions(){throw new Error("Method not implemented.")}reviewNonPriorityAlerts(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}}}(i||(i={}))},85287:(e,t,n)=>{n.d(t,{Dn:()=>s,AP:()=>l,rD:()=>S,IY:()=>E,$4:()=>N,bb:()=>D});var r=n(63969),i=n(40219),a=n(50224);const s="linear",o=r.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=r.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=r.u.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),u=r.u.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),d=r.u.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),p=r.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),m=r.u.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),h=r.u.keyframes({"0%, 100%":{opacity:0}}),f=r.u.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),g=r.u.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),y=r.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),v=r.u.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),b=r.u.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),w=r.u.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),C={position:"relative",margin:`${r.u.rem(.5)} ${r.u.rem(2)} ${r.u.rem(.5)} 0`,userSelect:"none"},S={position:"absolute",width:r.u.percent(100),pointerEvents:"none"},I={opacity:0,animation:`${o} ${r.u.seconds(i.v4/4/1e3)} ${s} ${r.u.seconds(i.v4/1e3)} forwards`},x={transformOrigin:"top",animation:`${l} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},k={transformOrigin:"bottom",animation:`${c} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},E={transformOrigin:"top",willChange:"contents"},A={animation:`${u} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},T={animation:`${d} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},_={animation:`${p} ${r.u.seconds(i.v4/1e3)} ${s} reverse forwards`},L={animation:`${p} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},O={animation:`${m} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},R={animation:`${m} ${r.u.seconds(i.v4/1e3)} ${s} reverse forwards`},P={transformOrigin:"top",animation:`${f} ${r.u.seconds(i.v4/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${a.g.successWrapperSelector} > *`]:{animation:`${g} ${r.u.seconds(i.v4/1e3)} ${s} forwards`}}},M={position:"absolute",width:r.u.percent(100),transformOrigin:"top",animation:`${y} ${r.u.seconds(i.v4/1e3)} ${s} forwards`,pointerEvents:"none",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${v} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${r.u.seconds(i.v4/1e3)} ${s} none`},[`& .${a.g.fullCardSelector}`]:{transform:`translateY(${r.u.rem(-1)})`}}},F={transformOrigin:"top",animation:`${b} ${r.u.seconds(i.v4/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${w} ${r.u.seconds(i.v4/1e3)} ${s} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${r.u.seconds(i.v4/1e3)} ${s} none`}}},N=r.u.stylesheet({wrapper:[C],animationWrapper:[{position:"relative"}],shade:[S],focused2renderedMain:[I],focused2renderedShade:[S,x],focused2renderedShadeClockwise:[S,k],rendered2focusedMainBase:[E],rendered2focusedMain:[E,A],rendered2focusedMainClockwise:[E,T],addedMain:[_],rendered2removedShade:[S,L],openedMain:[O],closedMain:[R],focused2successMain:[P],focused2successShade:[M],success2FocusedMain:[F]}),D=new Map([[l,N.focused2renderedShade],[c,N.focused2renderedShadeClockwise],[p,N.rendered2removedShade],[y,N.focused2successShade]])},22800:(e,t,n)=>{n.d(t,{S:()=>x,c:()=>k});var r=n(63969),i=n(40219),a=n(85287),s=n(50224);const o=r.u.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=r.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=r.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),u=r.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),d=r.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),p=r.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),m=r.u.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),h=r.u.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),f=r.u.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),g=r.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),y=r.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),v={opacity:0,animation:`${o} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},b={transformOrigin:"top",animation:`${a.AP} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${u} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},w={transformOrigin:"top",animation:`${d} ${r.u.seconds(i.v4/1500)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${u} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},C={animation:`${p} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${m} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${h} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${f} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},S={animation:`${g} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${m} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${h} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${f} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},I={animation:`${y} ${r.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},x=r.u.stylesheet({focused2renderedBundleMain:[v],focused2renderedBundleShade:[a.rD,b],focused2renderedBundleShadeClockwise:[a.rD,w],rendered2focusedBundleMain:[a.IY,C],rendered2focusedBundleMainClockwise:[a.IY,S],rendered2focusedBundleShade:[a.rD,I]}),k=new Map([[a.AP,x.focused2renderedBundleShade],[d,x.focused2renderedBundleShadeClockwise],[y,x.rendered2focusedBundleShade]])},32338:(e,t,n)=>{n.d(t,{C:()=>m,B:()=>x});var r=n(27378),i=n(5739),a=n(12187),s=n(90351),o=n(63969),l=n(24588),c=n(40219),u=n(15646),d=n(94793),p=n(3656);class m extends r.Component{constructor(){super(...arguments),this._createCardToggler=e=>()=>this.props.actions.next({type:u.lY.Type.hover,kind:e,id:this.props.cardId})}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:n,children:s,counter:o,className:l,hideActivateButton:c}=this.props;return r.createElement(i.F.div,Object.assign({"data-aid":t,onClick:t=>{const r=e();n.next({type:u.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:r},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,a.Sh)(l,x.wrapper,x.miniCard)),r.createElement(p.XY,{className:x.contentWrapper},s),r.createElement("div",{className:x.iconContainer},o&&r.createElement("div",{className:f},o),c?null:r.createElement("div",{className:y},r.createElement(d.JO.Arrow,{className:x.activeTopIcon}),r.createElement(d.JO.Arrow,{className:x.activeBottomIcon}))))}}const h="baseMiniCounterContainer",f=o.u.joinClasses([h,o.u.style({position:"absolute",height:o.u.percent(100),top:0,right:0,zIndex:c.VN,margin:"auto 0",background:s.Il.CoreNeutral0,opacity:1})]),g="baseMiniActivateBtnSelector",y=o.u.joinClasses([g,o.u.style({position:"absolute",top:0,right:0,height:o.u.percent(100),zIndex:c.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:s.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),v={position:"relative",display:"flex",overflow:"hidden",borderRadius:o.u.rem(c.fx),background:s.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:s.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:o.u.seconds(.2)},[`&:hover .${g}`]:{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},b={overflow:"hidden",margin:`0 ${o.u.rem(3)} 0 ${o.u.rem(2)}`,color:l.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:o.u.rem(1.5)},w={position:"absolute",top:0,right:o.u.rem(.5),bottom:0,display:"flex"},C={display:"flex",margin:`${o.u.rem(.1)} 0 ${o.u.rem(-1.25)}`,transform:"rotate(180deg)"},S={$nest:{"&:before":{position:"absolute",width:o.u.px(10),height:o.u.px(10),borderRadius:o.u.percent(50),content:"''",transform:"scale(.5)"}}},I={$nest:{"&:before":{margin:`auto 0 auto ${o.u.rem(.75)}`}}},x=o.u.stylesheet({wrapper:[v],contentWrapper:[b],iconContainer:[w],activeTopIcon:[C],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[S],miniCard:[S,I]})},50225:(e,t,n)=>{n.d(t,{b:()=>B});var r=n(27378),i=n(57050),a=n(40327),s=n(5739),o=n(38983),l=n(5114),c=n(54338),u=n(15646),d=n(85287),p=n(22800),m=n(35108);const h=({children:e})=>r.createElement(s.F.div,{role:"animation-wrapper",className:d.$4.animationWrapper},e),f=e=>(0,a.pipe)(l.fromNullable(e.activeAlert),l.fold((()=>e.id),(e=>e.id)));class g extends r.Component{constructor(){super(...arguments),this._elementState=c.f.emptyWithName("card")}_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;case"muted":return this.props.mutedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:u.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:n}=this.props;if(!t.visualState.incomplete)return r.createElement(h,null,r.createElement(s.F.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const g=n||m.SA,{main:y,shade:v}=g(t.visualState),b=o.h.create(void 0===v?l.none:(0,a.pipe)(t.visualState.from,l.map((e=>({state:e,className:v})))));return!y&&l.isNone(b.get())&&requestAnimationFrame((()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}))),r.createElement(c.f.Context.Provider,{value:this._elementState},r.createElement(h,null,b.view((0,i.ls)(l.map((({state:n,className:i})=>r.createElement(s.F.div,{className:i,key:"shade"+n+f(t),onAnimationEnd:n=>{p.c.get(n.animationName)!==i&&d.bb.get(n.animationName)!==i||(e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame((()=>b.set(l.none))))}},this._stateToElement(n)))),l.toUndefined)),r.createElement(s.F.div,{className:y,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:u.eI.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}}var y,v=n(32338),b=n(8125),w=n(90351),C=n(63969),S=n(24588),I=n(40219),x=n(30763),k=n(7046),E=n(94793),A=n(3656),T=n(57091),_=n(50224);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(y||(y={}));const L=({actions:e,isLastCard:t})=>{const n=r.useContext(x.m.Context).successLens.fixedText.titles,i=o.h.create(y.stage0),a=()=>e.next({type:u.lY.Type.switchToNext});return r.createElement(s.F.div,{className:$.successWrapper},r.createElement(A.P1,{className:$.successText,onAnimationEnd:()=>{i.set(y.stage1)}},n[(0,b.TN)(n.length)]),r.createElement(s.F.span,null,i.view((e=>e>=y.stage1&&r.createElement("span",{onAnimationEnd:()=>i.set(y.stage2)},r.createElement(E.JO.CheckmarkAnimated,{className:$.successCheckMark}))))),r.createElement(s.F.span,{className:$.successBtnHolder},t.pipe(T.a(i,((e,t)=>t<y.stage2?null:e?r.createElement(k.zx.Caps,{className:$.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):r.createElement(k.zx.Caps,{className:$.successBtn,name:"next",key:"next-card",onClick:a},"Next"))))))},O=C.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),R={fontWeight:"bold",lineHeight:C.u.rem(2),animation:`${O} ${C.u.seconds(.2)} linear forwards`},P={position:"relative",borderRadius:C.u.rem(I.Jr),background:w.Il.CoreNeutral0,boxShadow:`0 ${C.u.rem(.625)} ${C.u.rem(I.mJ)} 0 rgba(198, 203, 222, .45)`},M={display:"flex",padding:`${C.u.rem(1.5)} ${C.u.rem(2)}`,alignItems:"center"},F={marginLeft:C.u.rem(1),minWidth:0,minHeight:0,width:C.u.rem(1.325),height:C.u.rem(1.325),animation:`${O} ${C.u.seconds(.2)} linear forwards`},N={float:"right",width:C.u.rem(4),textAlign:"center",animation:`${O} ${C.u.seconds(.2)} linear forwards`},D={backgroundColor:w.Il.CoreGreen50,color:w.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:S.mb}}},$=Object.assign(Object.assign({},C.u.stylesheet({successText:[R],successCheckMark:[F],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[N],doneBtn:[N,D]})),{fullCard:C.u.joinClasses([_.g.fullCardSelector,C.u.style(P)]),successWrapper:C.u.joinClasses([_.g.successWrapperSelector,C.u.style(P,M)])});var B;!function(e){e.Mini=v.C,e.Card=g,e.Success=L}(B||(B={}))},50224:(e,t,n)=>{n.d(t,{g:()=>g,m:()=>y});var r=n(90351),i=n(63969),a=n(24588),s=n(40219);const o={position:"relative",borderRadius:i.u.rem(s.Jr),background:r.Il.CoreNeutral0,boxShadow:`0 ${i.u.rem(.625)} ${i.u.rem(s.mJ)} 0 rgba(198, 203, 222, .45)`},l={$nest:{"&:before":{position:"absolute",width:i.u.px(10),height:i.u.px(10),borderRadius:i.u.percent(50),content:"''",transform:"scale(.5)"}}},c={$nest:{"&:before":{backgroundColor:a.kl}}},u={$nest:{"&:before":{backgroundColor:a.AX}}},d={$nest:{"&:before":{backgroundColor:r.Il.CoreRed50}}},p={$nest:{"&:before":{backgroundColor:r.Il.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:r.Il.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:r.Il.CorePurple50}}},f={$nest:{"&:before":{backgroundColor:r.Il.CoreNeutral50}}},g={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},y=Object.assign(Object.assign({},i.u.stylesheet({dot:[l],dotAdvanced:[u],dotCritical:[c],dotCorrectness:[d],dotClarity:[p],dotEngagement:[m],dotDelivery:[h],dotVox:[f]})),{fullCard:i.u.joinClasses([g.fullCardSelector,i.u.style(o)])})},35108:(e,t,n)=>{n.d(t,{SA:()=>u,a:()=>d});var r,i=n(40327),a=n(5114),s=n(8125),o=n(81531),l=n(85287),c=n(22800);function u({from:e,transition:t,incomplete:n}){if(!n)return{};const r=p("transitionClassMapper");return(0,i.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?l.$4.rendered2focusedMainClockwise:l.$4.rendered2focusedMain};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.$4.focused2renderedMain,shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.$4.focused2successMain,shade:l.$4.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};default:return{}}default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}})))}function d({from:e,transition:t,incomplete:n}){return n?(0,i.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?c.S.rendered2focusedBundleMainClockwise:c.S.rendered2focusedBundleMain,shade:c.S.rendered2focusedBundleShade};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.S.focused2renderedBundleMain,shade:t.clockwise?c.S.focused2renderedBundleShadeClockwise:c.S.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.$4.focused2successMain,shade:l.$4.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};default:return{}}default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}}))):{}}!function(e){e.toOption=function(e){return t=>{const{main:n,shade:r}=e(t);return{main:a.fromNullable(n),shade:a.fromNullable(r)}}}}(r||(r={}));const p=(0,s.HP)(o.C8.Logging.getLogger)},40111:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),a=n(57050),s=n(40327),o=n(5739),l=n(59312),c=n(83078),u=n(5114),d=n(95300),p=n(78146),m=n(98036),h=function(){function e(e){this._keySelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this._keySelector))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r._keySelector=n,r.attemptedToUnsubscribe=!1,r.count=0,r._currentGroup=u.none,r}return(0,l.ZT)(t,e),t.prototype._next=function(e){var t=this,n=this._keySelector(e);(0,s.pipe)(this._currentGroup,u.fold((function(){return t._createGroup(n,e)}),(function(r){var i=r.key,a=r.group;i!==n?(a.complete(),t._currentGroup=u.none,t._createGroup(n,e)):a.closed||a.next(e)})))},t.prototype._createGroup=function(e,t){var n=new d.X(t);this._currentGroup=u.some({key:e,group:n}),this.destination.next(new p.T(e,n,this))},t.prototype._error=function(e){(0,s.pipe)(this._currentGroup,c.bw((function(t){return t.group.error(e)}))),this._currentGroup=u.none,this.destination.error(e)},t.prototype._complete=function(){(0,s.pipe)(this._currentGroup,c.bw((function(e){return e.group.complete()}))),this._currentGroup=u.none,this.destination.complete()},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(m.L),g=n(19751),y=n(77176),v=n(66310),b=n(28043),w=n(76974),C=n(8125),S=n(90351),I=n(81531),x=n(63969),k=n(40219),E=n(26027),A=n(77610),T=n(29847),_=n(50224),L=n(55636),O=n(25819),R=n(19157);!function(e){e.Mini=({card:e,actions:t})=>i.createElement(o.F.Fragment,null,e.pipe(y.U((e=>i.createElement(R.P.Bundle,{card:e,actions:t}))))),e.Full=({card:e,actions:n,renderCard:c})=>{const{isChecking:u,isCheckingGlobal:d,transform:p}=E.X.useCardStates(e),m=e=>(l("CardBundle").error("card type not supported:",e),null),f=e.pipe((e=>e.lift(new h((e=>e.activeAlert.id)))),v.w((e=>e.pipe(b.x(((e,t)=>e.activeAlertIndex===t.activeAlertIndex)),y.U((t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,s.pipe)(e,b.x(((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId)),g.d({bufferSize:1,refCount:!0}))}))))))),C=(e,t)=>{const r=t.alerts.length,a=1===r?te.bundleInnerContainer:2===r?te.bundleInnerContainer2Cards:te.bundleInnerContainerNCards;return i.createElement(o.F.div,{className:a},c?c({card:t,actions:n,isChecking:u,isCheckingGlobal:d,transform:e}):i.createElement(O.J,{card:t,actions:n,isChecking:u,transform:e,isCheckingGlobal:d}))};return i.createElement(r,{card:e,actions:n},i.createElement(t,{state:f,stateToClassMapper:(e,t)=>{if(!e)return{prev:(0,T.EJ)(""),next:(0,T.EJ)("")};if(e.activeAlertId===t.activeAlertId)return{prev:(0,T.EJ)(te.inBundleToUpdatedCardOld),next:(0,T.EJ)(te.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:(0,T.EJ)(te.inBundleToUpdatedCardOld),next:(0,T.EJ)(te.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:(0,T.EJ)(te.inBundleToNextCardOld),next:(0,T.EJ)(te.inBundleToNextCardNew)}:{prev:(0,T.EJ)(te.inBundleToPrevCardOld),next:(0,T.EJ)(te.inBundleToPrevCardNew)}}},(e=>i.createElement(o.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:a.Q1},(0,s.pipe)(e.state.card,y.U((0,a.ls)(A.C.match({super:m,smartPhrases:t=>C("prev"===e.type?w.of(t.transform):p,t),takeaway:t=>C("prev"===e.type?w.of(t.transform):p,t),sentenceLevelBrandTones:e=>C(p,e),synfony:t=>C("prev"===e.type?w.of(t.transform):p,t),shortenIt:t=>C("prev"===e.type?w.of(t.transform):p,t),default:t=>C("prev"===e.type?w.of(t.transform):p,t)}),E.X.foldCard)))))))};class t extends T.l5{}const n=({alertCount:e})=>1===e?i.createElement(i.Fragment,null):2===e?i.createElement("div",{className:te.bundleFakeCard1}):i.createElement(i.Fragment,null,i.createElement("div",{className:te.bundleFakeCard1}),i.createElement("div",{className:te.bundleFakeCard2})),r=({children:e,card:t,actions:r})=>i.createElement(o.F.div,{className:te.bundleCardWrapper},i.createElement(L.PS,{card:t,actions:r}),i.createElement(o.F.div,{className:te.cardBundleContainer},e,(0,s.pipe)((e=>(0,s.pipe)(e,y.U((e=>u.some(e.alerts.length)))))(t),y.U(u.map((e=>i.createElement(n,{key:e,alertCount:e})))),y.U(u.toNullable)))),l=(0,C.HP)(I.C8.Logging.getLogger)}(r||(r={}));const P=.25,M="0 1px 8px rgba(109, 117, 141, .18)",F=x.u.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),N=x.u.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),D=x.u.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),$=x.u.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),B=x.u.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),U={position:"relative",borderRadius:x.u.rem(k.Jr),background:S.Il.CoreNeutral0,boxShadow:M,zIndex:2},j={marginTop:x.u.rem(.75)},W={marginTop:x.u.rem(1.25)},G={position:"absolute",top:x.u.px(-5),right:x.u.rem(.5),left:x.u.rem(.5),zIndex:-1,display:"block",height:x.u.percent(100),borderRadius:x.u.rem(k.Jr),backgroundColor:S.Il.CoreNeutral1,boxShadow:M,content:"' '"},H={position:"absolute",top:x.u.px(-10),right:x.u.rem(1),left:x.u.rem(1),zIndex:-2,display:"block",height:x.u.rem(2),borderRadius:x.u.rem(k.Jr),backgroundColor:S.Il.CoreNeutral10,boxShadow:M,content:"' '"},z={borderRadius:x.u.rem(.75),background:S.Il.CoreNeutral20,margin:`${x.u.rem(-.25)} ${x.u.rem(-.25)}`,padding:`${x.u.rem(.25)} ${x.u.rem(.25)}`,$nest:{[`& .${_.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${_.g.fullCardSelector}`]:{padding:`${x.u.rem(.75)} ${x.u.rem(.5)} ${x.u.rem(.5)} ${x.u.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${x.u.rem(-.5)})`}}},Y={position:"absolute",top:x.u.rem(.8),right:x.u.rem(1),margin:0},V={borderRadius:x.u.rem(k.Jr),background:S.Il.CoreNeutral0,boxShadow:M},q={display:"block",position:"absolute",top:0,$nest:{[`& .${_.g.bundleInnerContainerSelector}`]:{margin:0}}},Z={animation:`${B} ${x.u.seconds(P)} ease-out`},X={animation:`${D} ${x.u.seconds(P)} ease-out`},J={animation:`${N} ${x.u.seconds(P)} ease-in`},K={animation:`${$} ${x.u.seconds(P)} ease-in`},Q={display:"none",animation:`${F} ${x.u.seconds(P)} ease-in`},ee={animation:`${F} ${x.u.seconds(P)} ease-in`},te=Object.assign(Object.assign({},x.u.stylesheet({bundleInnerContainer:[U],bundleCardWrapper:[z],minimalBetaLabel:[Y],compactCardContainer:[V],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[q],inBundleToPrevCardOld:[q,Z],inBundleToPrevCardNew:[X],inBundleToNextCardOld:[q,J],inBundleToNextCardNew:[K],inBundleToUpdatedCardOld:[Q],inBundleToUpdatedCardNew:[ee]})),{bundleInnerContainer:x.u.joinClasses([_.g.bundleInnerContainerSelector,x.u.style(U)]),bundleInnerContainer2Cards:x.u.joinClasses([_.g.bundleInnerContainerSelector,x.u.style(U,j)]),bundleInnerContainerNCards:x.u.joinClasses([_.g.bundleInnerContainerSelector,x.u.style(U,W)]),bundleFakeCard1:x.u.joinClasses([_.g.bundleFakeCard1Selector,x.u.style(G)]),bundleFakeCard2:x.u.joinClasses([_.g.bundleFakeCard2Selector,x.u.style(H)])})},28584:(e,t,n)=>{n.d(t,{a0:()=>r,$x:()=>I,Im:()=>x,oL:()=>M});var r,i=n(27378),a=n(57050),s=n(40327),o=n(49524),l=n(12187),c=n(5114),u=n(83078),d=n(30763),p=n(66896),m=n(40018),h=n(17594),f=n(4890),g=n(7046),y=n(29245),v=n(94793),b=n(16951),w=n(3656),C=n(50224),S=n(36642);!function(e){e.none="none",e.persistent="persistent",e.new="new"}(r||(r={}));const I=({className:e,vox:t,isMinimalCard:n})=>{const{vox:{styleGuide:r}}=i.useContext(d.m.Context);return i.createElement("div",Object.assign({},(0,l.Sh)(e,S.h.voxTitle,n?S.h.minimalTitle:void 0)),i.createElement("span",null,t.companyName," ",r))},x=({logoUrl:e,className:t})=>i.createElement("img",Object.assign({src:e},(0,l.Sh)(t,S.h.voxLogo))),k=({title:e,layoutDensity:t})=>i.createElement(w.XY,{className:(0,s.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>S.h.minimalTitle),(()=>S.h.toneTitle)))},i.createElement(y.d,{emojiClassName:S.h.toneLogo},e));function E(e){return p.R.outcomeTypeMatch(e.lensType)({correctness:C.m.dotCorrectness,clarity:C.m.dotClarity,premium:C.m.dotAdvanced,engagement:C.m.dotEngagement,delivery:C.m.dotDelivery,vox:C.m.dotVox})}const A=({companyLogoUrl:e})=>{const t=i.useContext(d.m.Context).card.sentenceLevelBrandTones;return i.createElement(w.x4,{className:S.h.sentenceLevelBrandTonesLabel},e&&i.createElement("img",{src:e,className:S.h.toneLogo}),i.createElement("span",{className:S.h.sentenceLevelBrandTonesOffBrand},t.offBrandCardTitle)," ",t.detected)};function T(e,t,n,r,d){const{extraProperties:p}=e;return h.$.isTakeaway(e)?function(e,t,n){return{style:"",description:i.createElement("div",{className:(0,s.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>S.h.minimalTitle),(()=>{})))},(u.FX(m.TO.correctlyDetected)(e.takeawayFeedback)||u.FX(m.TO.correctlyDetectedAndDone)(e.takeawayFeedback))&&e.takeawayIsLikelyToBeRead?i.createElement(v.JO.ValidationOk,Object.assign({width:16},(0,l.Sh)(S.h.cardLogo,S.h.takeawayIcon))):i.createElement(v.JO.Megaphone,Object.assign({width:16},(0,l.Sh)(S.h.cardLogo,S.h.takeawayIcon))),t===f.j.Density.minimal?n:e.lensName)}}(e,n,d):h.$.isSmartPhrases(e)?function(e){return{style:"",description:i.createElement("div",null,i.createElement(v.JO.SmartPhrases.HeaderCirclePlus,Object.assign({},(0,l.Sh)(S.h.cardLogo))),i.createElement(w.x4,{className:S.h.smartPhrasesLabel},e.miniCardTitle))}}(e):h.$.isSentenceLevelBrandTones(e)?function(e){const t=(0,s.pipe)(e.extraProperties.sentenceLevelBrandTones,c.chain((e=>e.companyLogoUrl)),c.fold(a.gn,o.y));return{style:"",description:i.createElement(A,{companyLogoUrl:t})}}(e):h.$.isShortenIt(e)?_(e,n,d):c.isSome(p.tone)?function(e,t){return{style:E(e),description:i.createElement(k,{title:e.title,layoutDensity:t})}}(e,n):t?c.isSome(p.vox)?function(e,t){return{style:C.m.dotVox,description:i.createElement(i.Fragment,null,(0,s.pipe)(e.logoUrl,c.fold((()=>null),(e=>i.createElement(x,{logoUrl:e,className:S.h.cardLogo})))),i.createElement(I,{vox:e,isMinimalCard:t===f.j.Density.minimal}))}}(p.vox.value,n):h.$.isFree(e)?_(e,n,d):function(e,t,n){return{style:E(e),description:i.createElement("div",Object.assign({},(0,l.Sh)(S.h.dualItemLabel,(0,s.pipe)(n,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>S.h.minimalTitle),(()=>{}))))),i.createElement("span",{className:S.h.dualItemLabel},e.lensName,i.createElement(R,{highlightStyle:t})))}}(e,r,n):null}function _(e,t,n){return(0,s.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>function(e,t){return{style:E(e),description:t||i.createElement(w.XY,{className:S.h.minimalTitle},e.miniCardTitle)}}(e,n)),(()=>function(e){return{style:E(e),description:e.lensName}}(e))))}const L=({label:e})=>i.createElement("span",{className:S.h.fluencyLabel},e,i.createElement(g.RZ,{iconWidth:10,buttonClass:S.h.fluencyInfo,iconClass:S.h.fluencyInfo,title:i.useContext(d.m.Context).card.fluency.tooltip})),O=({style:e,description:t})=>i.createElement("span",Object.assign({},(0,l.Sh)(S.h.lens,S.h.dot,e)),t),R=({highlightStyle:e})=>{const t=i.useContext(d.m.Context);if(e===r.none)return null;const n=e===r.new?i.createElement("div",{className:S.h.newPremiumLabel},t.premiumAlertLabel.new,i.createElement(v.JO.Paid,{className:S.h.newPremiumLabelIcon,width:12})):i.createElement(v.JO.Paid,{className:S.h.premiumPersistentTooltipIcon,width:10});return i.createElement(b.u,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},n)},P=({style:e,description:t,extraStyle:n})=>i.createElement("span",Object.assign({},(0,l.Sh)(n,S.h.lensMinimal,S.h.lens,S.h.dot,e)),t),M=e=>(0,s.pipe)(T(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),c.fromNullable,c.map((t=>i.createElement("div",{className:e.className},(0,s.pipe)(e.activeAlert.extraProperties.fluencyMessage,c.fold((()=>(0,s.pipe)(e.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>i.createElement(P,Object.assign({},t))),(()=>i.createElement(O,Object.assign({},t)))))),(n=>(0,s.pipe)(e.layoutDensity,f.j.Density.match(i.createElement(i.Fragment,null,i.createElement(O,Object.assign({},t)),i.createElement(L,{label:n})),i.createElement(O,Object.assign({},t)),i.createElement(P,{style:t.style,extraStyle:S.h.minimalTitle,description:e.activeAlert.miniCardTitle}))))))))),c.fold((()=>i.createElement("div",{"data-purpose":"label-placeholder"})),(t=>i.createElement(F,null,t,e.badge)))),F=({children:e})=>i.createElement("div",{className:S.h.labelContainer},e)},74754:(e,t,n)=>{n.d(t,{y:()=>a});var r=n(28706);const i=["b","i","br","ul","li"];var a;!function(e){e.renderToHtml=function(e,t){const n=t?{allowedTags:i.concat(["a"]),linkRegExp:t}:{allowedTags:i};return r.yG(e,n)}}(a||(a={}))},66346:(e,t,n)=>{n.d(t,{Vh:()=>p,G3:()=>m,hC:()=>h});var r=n(27378),i=n(84966),a=n(30763),s=n(26027),o=n(15646),l=n(7046),c=n(94793),u=n(28706),d=n(36642);const p=({card:{activeAlert:e,id:t,visualState:n},actions:p,mode:m,className:f})=>{const g=r.useContext(a.m.Context);return r.createElement(l.zx.Tertiary,{key:"toggle-more",name:h(n,g),title:"mini"===m?h(n,g):"",className:f,onClick:u.hz((()=>{const r=s.X.isCardOpen(n);p.next({type:o.eI.Kind.startTransitionTo,id:t,transition:{type:r?"focused":"expanded",clockwise:!0}}),r||p.next({type:o.lY.Type.alertFeedback,alertId:e.id,feedbackType:i.PZ.EXPANDED})}))},s.X.isCardOpen(n)?r.createElement(c.JO.Arrow,{key:"more",className:d.h.lessIcon}):r.createElement(c.JO.QuestionMark,{key:"expand"}),"default"===m&&h(n,g))},m=({visualState:e,children:t,className:n})=>r.createElement("div",{className:(s.X.isCardOpen(e)?d.h.more:d.h.moreHidden)+" "+n},t);function h(e,t){const n=t.card;return s.X.isCardOpen(e)?n.less:n.more}},36642:(e,t,n)=>{n.d(t,{h:()=>k});var r=n(90351),i=n(63969),a=n(40219);const s={$nest:{"&:before":{position:"absolute",width:i.u.px(10),height:i.u.px(10),borderRadius:i.u.percent(50),content:"''",transform:"scale(.5)"}}},o={opacity:1,transition:"opacity .3s"},l={color:r.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:r.xv.SubheadingLetterSpacing,fontSize:i.u.rem(r.xv.SubheadingSize),lineHeight:i.u.rem(r.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:i.u.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:i.u.px(2),left:i.u.rem(-1.1),margin:"auto 0"}}},u={$nest:{"&:before":{top:0,bottom:0,left:i.u.rem(-1.1),margin:`${i.u.rem(.25)} 0 auto 0`}}},d={margin:`0 ${i.u.rem(.4)} 0 ${i.u.rem(.2)}`,width:i.u.rem(.85),height:i.u.rem(.85),objectFit:"contain"},p={position:"absolute",top:0,bottom:0,left:i.u.rem(-1),margin:"auto",background:r.Il.CoreNeutral0,transform:"translateX(-50%)"},m={minWidth:"initial",minHeight:"initial",padding:`${i.u.rem(.3)} ${i.u.rem(.25)}`,cursor:"pointer",borderRadius:i.u.percent(100),marginLeft:i.u.rem(.5),$nest:{"&:hover":{background:r.Il.CoreNeutral10}}},h={display:"flex",alignItems:"center",padding:`0 ${i.u.rem(.25)}`,borderRadius:i.u.rem(a.fx),cursor:"pointer",background:r.Il.CoreYellow20,color:r.Il.CoreYellow80,marginLeft:i.u.rem(.5),$nest:{"&:hover":{background:r.Il.CoreYellow10}}},f={minWidth:"initial",minHeight:"initial",fill:r.Il.CoreYellow80,marginLeft:i.u.rem(.3)},g={display:"flex",alignItems:"flex-start",top:i.u.rem(.125),minWidth:"initial",minHeight:"initial",background:r.Il.CoreNeutral0},y={color:r.Il.CoreNeutral90,textTransform:"none",letterSpacing:r.xv.SmallLetterSpacing,fontWeight:r.xv.SmallWeight,fontSize:i.u.rem(r.xv.SmallSize),lineHeight:i.u.rem(r.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},v={color:r.Il.CoreNeutral50,textTransform:"none"},b={width:i.u.rem(1),height:i.u.rem(1)},w={display:"inline-flex",padding:`0 ${i.u.rem(.25)}`,borderRadius:i.u.rem(a.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},C={display:"inline-flex",marginLeft:i.u.rem(.1),minWidth:0,minHeight:0},S={color:r.Il.CoreNeutral80,textTransform:"none"},I={width:i.u.rem(1),height:i.u.rem(1),marginRight:i.u.rem(.375)},x={color:r.Il.CoreRed60},k=i.u.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[o],moreHidden:[o,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"}],lens:[l,c],lensMinimal:[u],voxLogo:[d],cardLogo:[p],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[m],newPremiumLabel:[h],newPremiumLabelIcon:[f],takeawayIcon:[g],minimalTitle:[y],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[v],toneLogo:[p,b],fluencyLabel:[l,w],fluencyInfo:[C],dot:[s],smartPhrasesLabel:[{textTransform:"none"}],sentenceLevelBrandTonesLabel:[S],sentenceLevelBrandTonesLabelImage:[I],sentenceLevelBrandTonesOffBrand:[x]})},1883:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(27378),i=n(5739),a=n(12187),s=n(63969),o=n(35108),l=n(50224);const c=e=>{const{shade:t}=(0,o.SA)(e.visualState);r.useEffect((()=>{t||e.onFocus()}),[]);const n=e.theme||{};return r.createElement(i.F.div,{className:n.container},e.header,r.createElement(i.F.div,{className:n.innerContainer},r.createElement(i.F.div,Object.assign({},(0,a.Sh)(b.wrapper,n.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),r.createElement(i.F.div,Object.assign({},(0,a.Sh)(b.grid,n.content)),r.createElement(i.F.div,Object.assign({},(0,a.Sh)(b.mainContent,n.contentBody)),e.body),r.createElement("div",{className:b.footerContent},e.footer),r.createElement("div",{className:b.actions},e.subActions,r.createElement("div",{className:b.spacerOne}),e.navigation,r.createElement("div",{className:b.spacerFloat}),e.mainActions))),e.extra))},u="& > * + *",d=.75,p={position:"relative"},m={padding:`${s.u.rem(1)} ${s.u.rem(.5)} ${s.u.rem(d)} ${s.u.rem(1)}`},h={padding:`0 ${s.u.rem(.5)} 0 ${s.u.rem(1)}`,$nest:{[u]:{marginTop:s.u.rem(d)}}},f={padding:`0 ${s.u.rem(.5)} 0 ${s.u.rem(1)}`,$nest:{[u]:{marginTop:s.u.rem(d)}}},g={display:"flex",marginLeft:s.u.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},y={width:s.u.rem(1),flexShrink:1},v={$nest:{[u]:{marginTop:s.u.rem(d)}}},b=Object.assign(Object.assign({},s.u.stylesheet({mainContent:[h],footerContent:[f],actions:[g],spacerOne:[y],spacerFloat:[{flex:1}],grid:[v]})),{fullCard:s.u.joinClasses([l.g.fullCardSelector,s.u.style(p)]),wrapper:s.u.joinClasses([l.g.fullCardSelector,s.u.style(p,m)])})},55636:(e,t,n)=>{n.d(t,{PS:()=>it,mQ:()=>nt,o:()=>et,jt:()=>tt,UK:()=>mt,Kg:()=>Ne,dk:()=>Oe,U4:()=>Me,lJ:()=>Ge,hl:()=>Je,__:()=>Xe,M9:()=>at,ko:()=>Re,hT:()=>Ye,Be:()=>Fe,Eq:()=>gt,oE:()=>ft,g8:()=>ht,q4:()=>He,Dx:()=>Ve,jg:()=>qe,Ot:()=>Ze,Nm:()=>We,VM:()=>yt,k_:()=>sn,LM:()=>vt,m_:()=>Ke,Bn:()=>on,Gq:()=>bt,IH:()=>wt});var r=n(27378),i=n(40327),a=n(97329),s=n(12187),o=n(5739),l=n(38983),c=n(6322),u=n(84966),d=n(8125),p=n(83078),m=n(18208),h=n(5114),f=n(90351),g=n(81531),y=n(63969),v=n(24588),b=n(40219),w=n(71284),C=n(30763),S=n(40018),I=n(17594),x=n(26027),k=n(91549),E=n(15646),A=n(77610),T=n(4890),_=n(51006),L=n(8313),O=n(24523),R=n(29847),P=n(62310),M=n(7046),F=n(24811),N=n(95286),D=n(29245),$=n(94793),B=n(50790),U=n(63847),j=n(42329),W=n(16951),G=n(97528),H=n(3656),z=n(85255),Y=n(60797),V=n(26653),q=n(28706),Z=n(66310),X=n(49708),J=n(2834),K=n(95093),Q=n(17343),ee=n(40151),te=n(77176),ne=n(32952),re=n(24209),ie=n(2844),ae=n(85985),se=n(55935),oe=n(50224),le=n(28584),ce=n(74754),ue=n(66346),de=n(1883),pe=n(26662),me=n(14532);const he=({examples:e,layoutDensity:t})=>r.createElement(H.ZT,{nodeType:"table",styleType:H.ZT.Type.Base,className:ke.wrapper},e.map(((e,n)=>r.createElement("tbody",{key:n,className:ke.group},e.map((({text:e,title:n,color:a,hasItalic:s},o)=>r.createElement("tr",{key:o,className:(0,i.pipe)(t,T.j.Density.matchL((()=>ke.item),(()=>ke.itemCompact),(()=>ke.itemMinimal)))},(0,i.pipe)(n,h.map((e=>r.createElement("td",{className:me.J.colorMatch(a)(ke)},(e=>e.split("/").reduce(((e,t,n)=>(0!==n&&e.push(r.createElement("br",{key:n})),e.push(t),e)),[]))(e)))),h.toNullable),r.createElement("td",Object.assign({colSpan:h.isNone(n)?2:void 0,className:s?ke.content:ke.contentItalic},q.yG(e)))))))))),fe={$nest:{"&:not(:last-child):after":{display:"block",height:y.u.rem(1.75),content:"''"}}},ge={$nest:{"&:not(:last-child)":{borderBottom:`${y.u.rem(.5)} solid transparent`}}},ye={display:"flex",flexDirection:"column",lineHeight:y.u.rem(1.3125)},ve={padding:0,verticalAlign:"top",lineHeight:y.u.rem(1.25)},be={paddingRight:y.u.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},we={color:f.Il.CoreNeutral50,fontFeatureSettings:`${b.g_}, ${b.xL}`},Ce={color:f.Il.CoreRed50},Se={color:f.Il.CoreGreen60},Ie={color:f.Il.CoreNeutral90},xe={color:f.Il.CoreNeutral90},ke=y.u.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[fe],item:[ge],itemCompact:[ge,{display:"flex",flexDirection:"column"}],itemMinimal:[ge,ye],baseBlock:[ve],title:[ve,be],content:[ve,we],contentItalic:[ve,we,{fontStyle:"italic"}],red:[ve,be,Ce],green:[ve,be,Se],yellow:[ve,be,Ie],fallback:[ve,be,xe]});var Ee=n(98210),Ae=n(19025);const Te=a.default||a,_e=(0,d.HP)(g.C8.Logging.getLogger);var Le;!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=t=>(0,i.pipe)(h.fromNullable(t.match(e.actionRegex)),h.chain((e=>{switch(e[1]){case"set-goals":return h.some(E.lY.Type.openSetGoals);default:return h.none}})))}(Le||(Le={}));const Oe=({description:e,actions:t,layoutDensity:n,className:a})=>{const o=r.useContext(C.m.Context),l=r.useContext(G.G.Context),{ref:c,onMount:u}=z.P.useElWatcher();z.P.useSubscriptionTo(c.pipe(Y.oA,Z.w((e=>Array.from(e.getElementsByTagName("a")).reduce(((e,n)=>{const r=X.R(n,"click").pipe(J.b((e=>e.preventDefault())));return(0,i.pipe)(h.fromNullable(n.getAttribute("href")),h.chain(Le.parse),h.fold((()=>(_e("Description").error("Invalid action",n),e.pipe(K.T(r)))),(i=>e.pipe(K.T(l.getTooltipObservable(n,o.card.actionDescription[i],"auto",h.none),r.pipe(Q.h({type:i}),J.b(t)))))))}),ee.E)))));const d=(0,i.pipe)(n,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>cn.minimalDescription),(()=>cn.description)));return r.createElement(H.XY,Object.assign({mount:u},(0,s.Sh)(d,a),ce.y.renderToHtml(e,Le.actionRegex)))},Re=({card:e,isChecking:t})=>S.bZ.isRated(e.activeAlert)?r.createElement(F.B,{value:x.X.isCardPresuccess(e.visualState)?V.g.MAX:e.meta.percentile,initValue:x.X.isCardPresuccess(e.visualState)?e.meta.percentile:V.g.MIN,isLoading:t}):null,Pe=({card:e})=>{const t=(0,F.N)(x.X.isCardPresuccess(e.visualState)?V.g.MAX:e.meta.percentile,x.X.isCardPresuccess(e.visualState)?e.meta.percentile:V.g.MIN);return r.createElement(o.F.Fragment,null,t.pipe(te.U(V.g.prism.reverseGet),te.U((e=>r.createElement(U.P,{percentage:e,colorType:U.P.ColorType.neoBlue,iconSize:U.P.IconSize.extraSmall,theme:{radialProgressBar:cn.circleProgress,radialProgressText:cn.circleText}})))))},Me=({card:e,feedbackActions:t,onClick:n,disabled:a})=>{const s=r.useContext(C.m.Context);return r.createElement(M.zx.Ghost,{name:"ignore",title:s.dismiss,onClick:q.hz((()=>{t.next({type:E.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:x.X.isEligibleForDismissSurvey(e),drilldownSuggestionIds:A.C.isSynfonyItem(e)?(0,i.pipe)(e.synfonySelection,h.getOrElse((()=>[]))):void 0}),n&&n()})),disabled:a},r.createElement($.JO.Ignore,null))},Fe=({card:e,feedbackActions:t,onClick:n,disabled:i})=>{const a=r.useContext(C.m.Context);return r.createElement(M.zx.Ghost,{name:"resolve",title:a.resolve,onClick:q.hz((()=>{t.next({type:E.lY.Type.alertResolve,alertId:e.activeAlert.id,id:e.id}),n&&n()})),disabled:i},r.createElement($.JO.YesCircle,null))},Ne=({card:e,feedbackActions:t})=>r.createElement(r.Fragment,null,r.createElement(Me,{card:e,feedbackActions:t}),r.createElement(Ue,{activeAlert:e.activeAlert,onMute:(0,i.pipe)(e.muteCategory,h.map((n=>q.hz((()=>t.next({type:E.lY.Type.muteAlertCategory,categoryId:n.id,id:e.id})))))),onWrong:q.hz(q.hz((()=>t.next({type:E.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.WRONG_SUGGESTION})))),onOffensive:q.hz(q.hz((()=>t.next({type:E.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.OFFENSIVE_CONTENT})))),onVisibilityChange:e=>t.next({type:E.lY.Type.moreActionsButtonToggle,mode:e?"open":"closed"})})),De=({onClick:e})=>{const t=r.useContext(C.m.Context);return r.createElement(M.zx.Flat,{name:"mute",onClick:e},r.createElement($.JO.Mute,null),t.card.mute)},$e=({onClick:e})=>{const t=r.useContext(C.m.Context);return r.createElement(M.zx.Flat,{name:"incorrect",onClick:e},r.createElement($.JO.Report,null),t.card.wrong)},Be=({activeAlert:e,onClick:t})=>{const n=r.useContext(C.m.Context);return(0,i.pipe)(e.extraProperties.vox,p.dH((()=>null),r.createElement(M.zx.Flat,{name:"offensive",onClick:t},r.createElement($.JO.Report,null),n.card.offensive)))},Ue=({activeAlert:e,onMute:t,onWrong:n,onOffensive:a,onVisibilityChange:s})=>{const o=e.getTransform(),l=h.isSome(t);return l||h.isSome(o)?r.createElement(N.L,{label:r.createElement(M.zx.Ghost,{name:"moreActions"},r.createElement($.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:cn.dropdownContainer},name:"moreActions",onVisibilityChange:s},(0,i.pipe)(t,h.map((e=>r.createElement(De,{onClick:e}))),p.QP),(0,i.pipe)(o,h.map((()=>r.createElement(r.Fragment,null,l&&r.createElement(N.L.Delimiter,null),r.createElement($e,{onClick:n}),r.createElement(Be,{activeAlert:e,onClick:a})))),p.QP)):null},je=({card:e,onClick:t,mode:n="default"})=>{const i=r.useContext(C.m.Context),a=r.useContext(w.a.Context),s=r.useCallback((e=>{a.has(w.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()}),[]),o=e.renderOptions.features.has(T.j.Features.showAnonymousUserFooters)?{disabled:!0,title:i.card.disabledForAnonymous}:{title:"mini"===n?i.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?r.createElement(M.zx.Tertiary,Object.assign({},o,{name:"add-to-dict",onClick:s}),r.createElement($.JO.Dict,null),i.card.addToDict):null},We=({title:e,checkingInProgress:t,checkingMessage:n,applyMessage:i,onClick:a})=>r.createElement(M.zx.Primary,{key:"update-all",name:"update-all",title:e,className:t.pipe(te.U((0,d.RN)(pe.V.updateAllBtnLoading,pe.V.updateAllBtn))),disabled:t,children:t.pipe(te.U((0,d.RN)(r.createElement(r.Fragment,{key:"update-all-checking"},m.kC(n),r.createElement(j.$,{size:18,strokeWidth:2,wrapperClassName:pe.V.updateBtnSpinner,variation:"white"})),r.createElement(r.Fragment,{key:"update-all-checked"},m.kC(i))))),onClick:q.hz(a)}),Ge=({card:e})=>(0,i.pipe)(Qe(e.activeAlert,e.renderOptions.layoutDensity),h.map((t=>r.createElement(ue.G3,{key:"card-actions-details",visualState:e.visualState,className:cn.more},t))),h.toNullable),He=({card:e,actions:t})=>Ke(e.activeAlert,e.renderOptions.layoutDensity)?r.createElement(ue.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):r.createElement(je,{key:"card-actions-button",card:e,mode:"default",onClick:q.hz((()=>t.next({type:E.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.ADD_TO_DICTIONARY})))}),ze=e=>r.createElement(L.TG,{alignment:"bottom",eventType:"onclick",stepId:_.X.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",dotPosition:{kind:"findFirstButton",position:L.E2.rightTop},themes:{containerWrapperClassName:cn.onboardingNotification}},e.children),Ye=({onClick:e,rl:t,layoutDensity:n})=>r.createElement(ze,null,r.createElement(Ee.zO,{replacementsLabels:t,onClick:e,layoutDensity:n})),Ve=({text:e})=>r.createElement(H.P1,Object.assign({className:cn.title},ce.y.renderToHtml(e))),qe=({text:e})=>r.createElement(H.P1,Object.assign({className:cn.titleMinimal},ce.y.renderToHtml(e))),Ze=({alert:e})=>r.createElement(H.H4,Object.assign({className:cn.title},ce.y.renderToHtml(e.title))),Xe=({alert:e,options:t,children:n,className:i,badge:a})=>r.createElement(le.oL,Object.assign({activeAlert:e,showCardLabel:t.features.has(T.j.Features.showLabel),premiumAlertLabelHighlight:t.features.has(T.j.Features.showNewPremiumCardLabels)?le.a0.new:t.features.has(T.j.Features.showPersistentPremiumCardLabels)?le.a0.persistent:le.a0.none,layoutDensity:t.layoutDensity},(0,s.Sh)(cn.label,i),{badge:a}),n),Je=({text:e,layoutDensity:t})=>r.createElement("div",{className:cn.highlightedTextBox},r.createElement(H.XY,{className:(0,i.pipe)(t,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>cn.minimalHighlightedTextInnerBox),(()=>cn.highlightedTextInnerBox)))},e));function Ke(e,t){return!e.extraProperties.hasAddToDictionary&&(!I.$.isSentenceLevelBrandTones(e)&&(!(!h.isSome(e.examples)&&!h.isSome(e.details))||!(t!==T.j.Density.minimal||!h.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation)))}const Qe=(e,t)=>{if(!Ke(e,t))return p.cS();const n=(0,i.pipe)(t,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>cn.minimalDescription),(()=>cn.description)));return h.some(r.createElement(r.Fragment,null,(0,i.pipe)(t,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>h.isNone(e.details)?r.createElement(H.XY,Object.assign({className:n},ce.y.renderToHtml(e.explanation,Le.actionRegex))):null),(()=>null))),(0,i.pipe)(e.details,h.map((e=>r.createElement(H.XY,Object.assign({className:n},ce.y.renderToHtml(e))))),h.toNullable),(0,i.pipe)(e.examples,h.map((e=>r.createElement(he,{layoutDensity:t,examples:e}))),h.toNullable)))},et=({isChecking:e})=>r.createElement(o.F.Fragment,null,e.pipe(te.U((e=>r.createElement(j.$,{className:e?cn.spinner:cn.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2}))))),tt=e=>{const[t,n]=r.useState(!0);return t?r.createElement(st,{type:e.type,actions:e.actions,onClose:()=>n(!1)}):null},nt=({card:e,actions:t})=>A.C.isSentenceLevelBrandTonesItem(e)?null:(0,i.pipe)(e.activeAlert.extraProperties.freePremium,p.FX("unlocked"))?r.createElement(ut,null):!I.$.isFree(e.activeAlert)&&e.renderOptions.features.has(T.j.Features.showPremiumTrialFooters)?r.createElement(ct,{actions:t}):e.renderOptions.features.has(T.j.Features.showAnonymousUserFooters)?r.createElement(lt,{actions:t,card:e}):(0,i.pipe)(e.renderOptions.layoutDensity,T.j.Density.matchOrDefault(T.j.Density.cozy)((()=>r.createElement(ot,{card:e,actions:t})),(()=>(0,i.pipe)(e.activeAlert.extraProperties.fluencyMessage,h.fold((()=>r.createElement(ot,{card:e,actions:t})),(e=>r.createElement(dt,{fluencyLabel:e})))))));function rt(e,t,n){n.next({type:E.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const it=({card:e,actions:t})=>{const n=r.useContext(C.m.Context).card.matchesNavigation;return r.createElement(o.F.Fragment,null,(0,i.pipe)(e,te.U((e=>r.createElement("div",{key:e.activeAlert.id,className:cn.bundleNavWrapper},r.createElement(H.XY,{className:cn.bundleTitle},k.R.bundleTitle(e)),r.createElement("div",{className:cn.bundleNavMatchesRow},r.createElement(M.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:cn.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>rt("left",e,t)},r.createElement($.JO.Arrow,{className:cn.bundleNavLeftButtonIcon})),r.createElement(H.ck,{className:cn.bundleNavCount},n.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),r.createElement(M.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:cn.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>rt("right",e,t)},r.createElement($.JO.Arrow,{className:cn.bundleNavRightButtonIcon}))))))))},at=({card:e,actions:t,isChecking:n})=>r.createElement(r.Fragment,null,(0,i.pipe)(e.renderOptions.layoutDensity,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>S.bZ.isRated(e.activeAlert)?r.createElement(r.Fragment,null,r.createElement(Pe,{card:e}),r.createElement(qe,{text:e.activeAlert.miniCardTitle})):r.createElement(Xe,{alert:e.activeAlert,options:e.renderOptions},r.createElement(qe,{text:e.activeAlert.miniCardTitle}))),(()=>r.createElement(r.Fragment,null,r.createElement(Xe,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(Ve,{text:e.activeAlert.title}),r.createElement(Re,{card:e,isChecking:n}))))),r.createElement(Oe,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),st=e=>{const t=r.useContext(C.m.Context),{title:n,content:i}=t.card.onboarding[e.type];return r.useLayoutEffect((()=>()=>e.actions.next({type:E.lY.Type.onboardingClose,value:e.type}))),r.createElement(B.DI.AdHoc,{key:"new-notification",title:r.createElement(r.Fragment,null,n,r.createElement(P.C.Regular,{className:cn.newLabel},t.new)),className:cn.newCheckNotification,onClose:e.onClose},i)},ot=({actions:e,card:t})=>{const n=r.useContext(C.m.Context);return z.P.useEffectOnDidMount((()=>{t.meta.showMuteQuotedAdvice&&e.next({type:E.lY.Type.muteQuotedAdviceShow})})),t.meta.showMuteQuotedAdvice?r.createElement(pt.Base,{className:Mt},r.createElement("span",null,n.card.muteCitedText(r.createElement("a",{"data-name":"open-preferences-link",onClick:()=>e.next({type:E.lY.Type.openPreferences})},n.documentSettings.editorSettings))),r.createElement(M.zx,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:E.lY.Type.dismissMuteQuotedAdvice})},r.createElement($.JO.Close,null))):null},lt=({actions:e,card:t})=>{const n=r.useContext(C.m.Context),i=t.activeAlert.extraProperties.hasAddToDictionary?n.anonymousUserAddToDictionarySignInPrompt:n.anonymousUserGenericSignInPrompt;return r.createElement(pt.Base,{className:cn.anonymousUserNotice},i((()=>{e.next({type:E.lY.Type.toSignIn})})))},ct=({actions:e})=>r.createElement(pt.Small,{className:Nt},r.createElement($.JO.PaidLink,{className:cn.iconWrapper,width:12}),r.useContext(C.m.Context).premiumFreeTrial((()=>{e.next({type:E.lY.Type.premiumTrialFooterCtaClick})}))),ut=()=>{const{beforeIcon:e,afterIcon:t}=r.useContext(C.m.Context).freePremiumAlertFooter;return r.createElement(pt.Small,{className:$t},e,r.createElement($.JO.PaidLink,{width:12}),t)},dt=({fluencyLabel:e})=>{const t=r.useContext(C.m.Context).card.fluency,n=Object.keys(c.n5.PrimaryLanguage).filter((e=>e!==c.n5.PrimaryLanguage.Other)).map((e=>e.toLowerCase())),a=e.toLowerCase(),s=(0,i.pipe)(h.fromNullable(n.find((e=>a.includes(e)))),h.map(m.kC),h.getOrElse((()=>"multilingual")),t.cardFooter);return r.createElement(H.x4,{className:cn.fluencyNotice},s,r.createElement(W.u,{title:t.tooltip},r.createElement($.JO.Info,{width:10,className:cn.fluencyInfo})))};var pt;!function(e){function t(e){return({children:t,className:n})=>r.createElement(e,Object.assign({},(0,s.Sh)(cn.cardFooter,n)),t)}e.Small=t(H.x4),e.Base=t(H.XY)}(pt||(pt={}));const mt=({title:e,children:t})=>r.createElement("div",{className:cn.cardWrapper},r.createElement("div",{className:cn.cardWrapperTitle},e),t),ht=({className:e,title:t,emoji:n,hideBetaBadge:i})=>{const a=r.useContext(C.m.Context);return r.createElement("div",Object.assign({},(0,s.Sh)(cn.smartPhrasesTitle,e)),r.createElement("div",null,r.createElement(D.d,{className:cn.smartPhrasesTitleEmoji},n),t),i?null:r.createElement(P.C.Regular,null,a.beta))},ft=({card:e,actions:t,isLoading:n,transform:i,classes:a})=>{const[s,l]=r.useState(null),[c,u]=r.useState(null),[d,p]=r.useState(200),[m,f]=r.useState(null);r.useEffect((()=>{const e=new Te((e=>{e[0]&&u(e[0].contentRect.height)}));return l(e),()=>e.disconnect()}),[]);const y=r.useCallback((e=>{m&&(null==s||s.unobserve(m)),e&&(f(e),null==s||s.observe(e))}),[m,s]);return r.useEffect((()=>{!e.activeAlert.hideReplacements&&c&&p(c)}),[c]),n?r.createElement("div",{className:cn.smartPhrasesLoadingContainer,style:{height:null!=d?d:void 0}},r.createElement("div",{className:cn.smartPhrasesLoadingContainerInner},r.createElement(O.D,{size:"medium"}))):e.activeAlert.hideReplacements?r.createElement("div",{className:cn.smartPhrasesSuccessLabel},r.createElement($.JO.SmartPhrases.HeaderCheckmark,{className:cn.smartPhrasesSuccessLabelIcon}),e.activeAlert.phraseAddedTitle):r.createElement("div",{ref:y,className:cn.smartPhrasesReplacementsContainer},r.createElement(Xe,{alert:e.activeAlert,options:e.renderOptions,className:cn.smartPhrasesReplacementsLabel}),r.createElement(o.F.div,{className:a.transformContainer},r.createElement(R.T9,{classes:{rendered:a.renderedReplacement,removing:a.hiddenReplacement},timeout:250,content:i.pipe(te.U(h.fold((()=>(g.C8.Logging.getLogger("SmartPhrasesReplacements").error("No replacements available for SmartPhrases card.",{cardId:e.id}),null)),(n=>{const i=Object.assign(Object.assign({},n),{labels:n.labels.filter(((t,n)=>!e.activeAlert.usedReplacementsIndexes.includes(n))).slice(e.activeAlert.replacementsStartIndex,e.activeAlert.replacementsEndIndex)});return r.createElement(Ee.GP,{replacementsLabels:i,onClick:n=>q.hz((()=>{const r=e.activeAlert.originalReplacementsIndexes.get(n+e.activeAlert.replacementsStartIndex)||n;t.next({type:E.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r,cardType:E.lY.getCardType(e)}),t.next({type:E.lY.Type.smartPhrasesApply,alertId:e.activeAlert.id,cardId:e.id,replacementIndex:n+e.activeAlert.replacementsStartIndex,originalReplacementIndex:r})}))})}))))})))},gt=({card:e,actions:t})=>{const n=r.useContext(C.m.Context);return r.createElement(M.zx.Flat,{className:cn.smartPhrasesFooter,name:`smart-phrases-${e.activeAlert.intent}-open-feedback-form`,onClick:()=>t.next({type:E.lY.Type.smartPhrasesOpenFeedbackForm,alertId:e.activeAlert.id,cardId:e.id})},r.createElement("span",null,n.card.smartPhrases.openFeedbackFormQuestion),r.createElement($.JO.SmartPhrases.OpenFeedbackFormArrow,null))},yt=({card:e,actions:t,isChecking:n,isCheckingGlobal:i,cardTheme:a,cardBody:s,cardFooter:o,mainActions:c,subActions:u,cardExtra:p})=>{const{transformHidden:m,isMouseInside:h,transformHiddenObservable:f}=z.P.useMemoOnDidMount((()=>{const e=l.h.create(!1),t=new ne.xQ,r=re.T(ie.aj([t,n]).pipe(te.U((([e,t])=>e&&t)),ae.h((e=>!0===e)),J.b((()=>e.set(!0)))),n.pipe(se.T(1),ae.h((e=>!e)),J.b((()=>e.set(!1)))));return{transformHidden:e,isMouseInside:t,transformHiddenObservable:r}}));return z.P.useSubscriptionTo(f),r.createElement(de.Z,{visualState:e.visualState,onFocus:()=>t.next({type:E.lY.Type.alertCardShow,cardType:E.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOver:()=>{t.next({type:E.lY.Type.hover,kind:"hover",id:e.id}),h.next(!0)},onMouseOut:()=>{t.next({type:E.lY.Type.hover,kind:"unhover",id:e.id}),h.next(!1)},theme:Object.assign(Object.assign({content:i.pipe(te.U((0,d.RN)(cn.loadingWrapperInvisible,cn.loadingWrapper)))},(0,Ae.G)(e.renderOptions)),a),extra:r.createElement(r.Fragment,null,r.createElement(et,{isChecking:i}),null==p?void 0:p()),body:s(m),mainActions:null==c?void 0:c(),footer:null==o?void 0:o(m),subActions:null==u?void 0:u()})},vt={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:f.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${b.g_}, ${b.xL}`},"& ul":{margin:`${y.u.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:y.u.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:y.u.rem(.5)}}},bt={lineHeight:y.u.rem(1.3125)},wt={$nest:{"& i":{color:f.Il.CoreNeutral50},"& > * + *":{marginTop:y.u.rem(.75)}}},Ct={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:v.kl}}},St={marginTop:y.u.important(0),lineHeight:y.u.rem(1.125)},It={fontSize:y.u.rem(f.xv.SubheadingSize),lineHeight:y.u.rem(f.xv.SubheadingLineHeight)},xt={width:y.u.rem(2),height:y.u.rem(2)},kt={position:"absolute",top:`calc(50% - ${y.u.rem(1)})`,left:`calc(50% - ${y.u.rem(1)})`,width:y.u.rem(2),height:y.u.rem(2),transition:"opacity .2s"},Et={marginLeft:y.u.rem(.5),backgroundColor:f.Il.CoreGreen50,color:f.Il.CoreNeutral0,fontWeight:600},At={position:"absolute",marginTop:y.u.rem(-8.5),marginLeft:y.u.rem(-2),$nest:{"&:after":{position:"absolute",bottom:y.u.rem(-.525),left:y.u.rem(.7),borderTop:`${y.u.rem(.625)} solid ${f.Il.BackgroundNotification}`,borderRight:`${y.u.rem(.5)} solid transparent`,borderLeft:`${y.u.rem(.5)} solid transparent`,content:"' '"}}},Tt={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},_t={position:"absolute",top:y.u.rem(.75),left:y.u.rem(.4)},Lt={color:f.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:f.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:f.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${f.Il.CoreBlue40}`,color:f.Il.CoreBlue40}}}}},Ot={display:"flex",borderRadius:`${b.LB} ${b.LB} ${y.u.rem(b.Jr)} ${y.u.rem(b.Jr)}`,color:f.Il.CoreNeutral50,padding:`${y.u.rem(.5)} ${y.u.rem(.75)} ${y.u.rem(.5)} ${y.u.rem(1)}`,fontSize:y.u.rem(.6875),lineHeight:y.u.rem(1.125)},Rt={padding:`0 ${y.u.rem(.6)}`,minWidth:y.u.rem(.625),minHeight:y.u.rem(.625)},Pt="muteQuotedAdvice",Mt=y.u.joinClasses([Pt,y.u.style({$nest:{"& a":{borderBottom:`1px solid ${f.Il.CoreBlue50}`,color:f.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:f.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${f.Il.CoreBlue40}`,color:f.Il.CoreBlue40}}},"& i:hover":{strokeWidth:y.u.px(2)}}})]),Ft="premiumFreeTrial",Nt=y.u.joinClasses([Ft,y.u.style({$nest:{"& svg":{fill:f.Il.CoreYellow80},"& a":{fontWeight:800,color:f.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:f.Il.CoreYellow80},"&:hover":{borderBottom:`1px solid ${f.Il.CoreYellow60}`,color:f.Il.CoreYellow60}}}}})]),Dt="freePremiumAlertFooter",$t=y.u.joinClasses([Dt,y.u.style({$nest:{"& svg":{margin:`0 ${y.u.rem(.25)}`,fill:f.Il.CoreYellow80}}})]),Bt={display:"block",boxSizing:"border-box",padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1.5)}`,width:y.u.percent(100),borderRadius:`${b.LB} ${b.LB} ${y.u.rem(b.Jr)} ${y.u.rem(b.Jr)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(2)}`,background:f.Il.CoreNeutral10,color:f.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(2)}`,position:"relative",background:f.Il.CoreYellow20,color:f.Il.CoreNeutral90},"&.freePremiumAlertFooter":{display:"flex",justifyContent:"center",alignItems:"center",padding:`${y.u.rem(.5)}`,background:f.Il.CoreYellow20,color:f.Il.CoreYellow80}}},Ut={position:"absolute",top:y.u.rem(.8),left:y.u.rem(.5),minWidth:y.u.rem(1),minHeight:y.u.rem(1)},jt={fontWeight:"bold",fontSize:y.u.rem(.875),lineHeight:y.u.rem(1.125),flex:2},Wt={padding:`${y.u.rem(.625)} 0 ${y.u.rem(.1875)} ${y.u.rem(.5)}`,marginBottom:y.u.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},Gt={fontSize:y.u.rem(.75),lineHeight:y.u.rem(1.125),color:f.Il.CoreNeutral90},Ht={display:"flex",justifyContent:"flex-end",alignItems:"center",height:y.u.rem(1.5),$nest:{"& > * + *":{marginLeft:y.u.rem(.25)},"& > *":{borderRadius:y.u.rem(b.fx)}}},zt={height:y.u.rem(2),minHeight:y.u.rem(2),width:y.u.rem(2),fill:f.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:f.Il.CoreBlue50},"&[data-disabled='true']":{fill:f.Il.CoreNeutral30}}},Yt={borderRadius:y.u.rem(.75),background:f.Il.CoreNeutral20,margin:`${y.u.rem(-.25)} ${y.u.rem(-.25)}`,padding:`${y.u.rem(.25)} ${y.u.rem(.25)}`,$nest:{[`& .${oe.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${oe.g.fullCardSelector}`]:{padding:`${y.u.rem(.75)} ${y.u.rem(.5)} ${y.u.rem(.5)} ${y.u.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${y.u.rem(-.5)})`}}},Vt={paddingTop:y.u.rem(.25),paddingBottom:y.u.rem(.5),paddingLeft:y.u.rem(.5),paddingRight:y.u.rem(.5),fontWeight:"bold",fontSize:y.u.rem(.875),lineHeight:y.u.rem(1.125)},qt={marginRight:y.u.rem(.5)},Zt={display:"flex",alignItems:"center",justifyContent:"space-between",background:f.Il.CoreNeutral10,borderRadius:`${b.LB} ${b.LB} ${y.u.rem(.5)} ${y.u.rem(.5)}`,padding:`${y.u.rem(.6875)} ${y.u.rem(.5)} ${y.u.rem(.6875)} ${y.u.rem(1)}`,color:f.Il.CoreNeutral50,fontSize:y.u.rem(.6875),lineHeight:y.u.rem(1.125),height:y.u.rem(2.5),boxSizing:"border-box"},Xt={fontSize:y.u.rem(.75),lineHeight:y.u.rem(1.125),color:f.Il.CoreNeutral90,display:"flex",alignItems:"center",marginLeft:y.u.rem(-1.5)},Jt={marginRight:y.u.rem(.5)},Kt={display:"flex",flexDirection:"column",justifyContent:"center",animation:`${y.u.keyframes({from:{opacity:0,transform:"scale(0)"}})} .3s ease-in-out`},Qt={marginBottom:y.u.rem(.75)},en={animation:`${y.u.keyframes({from:{opacity:0}})} .3s ease-in-out`};function tn(e,t){return{display:["block","-webkit-box"],maxHeight:y.u.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const nn=Object.assign(Object.assign({},tn(1.5,3)),{lineHeight:y.u.rem(1.5)}),rn=Object.assign(Object.assign({},tn(1.3125,3)),{lineHeight:y.u.rem(1.3125)}),an={padding:y.u.rem(.5),borderRadius:y.u.rem(b.fx),background:f.Il.CoreNeutral10,color:f.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${b.g_}, ${b.xL}`},sn=.25,on={opacity:0,pointerEvents:"none"},ln={transition:`opacity ${y.u.seconds(sn)}`},cn=y.u.stylesheet({loadingWrapper:[ln],loadingWrapperInvisible:[ln,on],description:[vt],minimalDescription:[vt,bt],more:[wt],onboardingNotification:[{display:"block"}],title:[Ct],titleMinimal:[Ct,St],label:[It],dropdownContainer:[xt],spinner:[kt],spinnerInvisible:[kt,{opacity:0,pointerEvents:"none"}],newLabel:[Et],newCheckNotification:[At],baseNotice:[Tt],iconWrapper:[_t],anonymousUserNotice:[Tt,Lt],fluencyNotice:[Tt,Ot],fluencyInfo:[Rt],cardFooter:[Bt],circleProgress:[Ut],circleText:[{display:"none"}],bundleTitle:[jt],bundleNavWrapper:[Wt],bundleNavCount:[Gt],bundleNavMatchesRow:[Ht],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[zt],bundleNavLeftButtonIcon:[zt,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[zt,{transform:"rotate(270deg)"}],cardWrapper:[Yt],cardWrapperTitle:[Vt],smartPhrasesTitle:[{display:"flex",justifyContent:"space-between"}],smartPhrasesTitleEmoji:[qt],smartPhrasesFooter:[Zt],smartPhrasesSuccessLabel:[Xt],smartPhrasesSuccessLabelIcon:[Jt],smartPhrasesLoadingContainer:[Kt],smartPhrasesLoadingContainerInner:[{width:"100%",display:"flex",justifyContent:"center"}],smartPhrasesReplacementsLabel:[Qt],smartPhrasesReplacementsContainer:[en],highlightedTextBox:[an],highlightedTextInnerBox:[nn],minimalHighlightedTextInnerBox:[rn]})},25819:(e,t,n)=>{n.d(t,{J:()=>Pe});var r,i=n(27378),a=n(57050),s=n(40327),o=n(38983),l=n(5739),c=n(8125),u=n(5114),d=n(90351),p=n(81531),m=n(63969),h=n(30763),f=n(26027),g=n(15646),y=n(77610),v=n(4890),b=n(29847),w=n(62310),C=n(7046),S=n(77797),I=n(94793),x=n(3656),k=n(28706),E=n(85255),A=n(55935),T=n(2834),_=n(57091),L=n(77176),O=n(95300),R=n(85985),P=n(13444),M=n(93508),F=n(1883),N=n(18208),D=n(73975),$=n(40219),B=n(40018),U=n(29245),j=n(55636),W=n(19025);!function(e){e.Full=({card:e,actions:r})=>i.createElement(F.Z,{footer:null,visualState:e.visualState,onFocus:()=>r.next({type:g.lY.Type.alertCardShow,cardType:g.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,W.G)(e.renderOptions),body:i.createElement(n,{card:e}),mainActions:i.createElement(j.U4,{card:e,feedbackActions:r}),subActions:null,extra:i.createElement(t,{card:e,actions:r})});const t=({card:e,actions:t})=>{const n=i.useContext(h.m.Context).card.sentenceLevelBrandTones;return i.createElement(x.x4,{className:X.sentenceLevelBrandTonesFooter},n.helpfulFeedbackQuestion(e.activeAlert.emotion),i.createElement("div",{className:X.sentenceLevelBrandTonesFooterHelpfulFeedback},i.createElement(C.zx.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-yes`,title:n.helpfulFeedbackYes,active:u.getEq(D.w4).equals(e.activeAlert.feedback,u.some(B.id.accurate)),disabled:u.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:g.lY.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:B.id.accurate})}},i.createElement(I.JO.VoteYes,null)),i.createElement(C.zx.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-no`,title:n.helpfulFeedbackNo,active:u.getEq(D.w4).equals(e.activeAlert.feedback,u.some(B.id.inaccurate)),disabled:u.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:g.lY.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:B.id.inaccurate}),t.next({type:g.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:f.X.isEligibleForDismissSurvey(e)})}},i.createElement(I.JO.VoteNo,null))))},n=({card:e})=>{const t=i.useContext(h.m.Context),n=u.fromNullable(e.activeAlert.highlightTexts[0]);return i.createElement("div",null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement("div",null,i.createElement("div",{className:X.sentenceLevelBrandTonesHeaderWrapper},i.createElement("div",{className:X.sentenceLevelBrandTonesHeader},i.createElement(U.d,{className:X.sentenceLevelBrandTonesHeaderEmoji},e.activeAlert.emoji),N.kC(e.activeAlert.emotion)),i.createElement(w.C.Regular,{className:X.offBrandBadge},t.card.sentenceLevelBrandTones.offBrandBadge)),i.createElement(x.XY,{className:X.sentenceLevelBrandTonesDescription},e.activeAlert.description),(0,s.pipe)(n,u.fold(a.gn,(t=>i.createElement(j.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity}))))))}}(r||(r={}));const G={display:"flex",alignItems:"center",justifyContent:"space-between",background:d.Il.CoreNeutral10,borderRadius:`${$.LB} ${$.LB} ${m.u.rem($.Jr)} ${m.u.rem($.Jr)}`,padding:`${m.u.rem(.3)} ${m.u.rem(1)}`,color:d.Il.CoreNeutral50,fontSize:m.u.rem(.64)},H={display:"flex",alignItems:"center",$nest:{'& div[role="button"]:first-child':{marginRight:m.u.rem(.125)}}},z={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:m.u.rem(1),marginBottom:m.u.rem(.625)},Y={fontWeight:"bold",fontSize:m.u.rem(.875),lineHeight:m.u.rem(1)},V={marginRight:m.u.rem(.5),lineHeight:m.u.rem(1)},q={background:d.Il.CoreRed1,color:d.Il.CoreRed60,fontWeight:"bold",fontSize:m.u.rem(.6),lineHeight:m.u.rem(1)},Z={marginBottom:m.u.rem(1)},X=m.u.stylesheet({offBrandBadge:[q],sentenceLevelBrandTonesHeaderWrapper:[z],sentenceLevelBrandTonesHeader:[Y],sentenceLevelBrandTonesHeaderEmoji:[V],sentenceLevelBrandTonesFooter:[G],sentenceLevelBrandTonesFooterHelpfulFeedback:[H],sentenceLevelBrandTonesDescription:[Z]});var J,K=n(26328),Q=n(98637),ee=n(2844),te=n(28043),ne=n(98210),re=n(22232),ie=n(26653),ae=n(66346);function se(e){return e===J.brief?0:e===J.focused?1:e===J.detailed?2:(0,re.vE)(e)}!function(e){e.brief="brief",e.focused="focused",e.detailed="detailed"}(J||(J={}));const oe=({activeSummary:e})=>{const t=i.useContext(h.m.Context);return i.createElement(C.zx.Group,{sticky:!0},i.createElement(C.zx.White,{title:t.card.shortenIt.selectorTooltip(J.brief),name:J.brief,key:J.brief,active:e.view((e=>e===J.brief)),onClick:()=>e.set(J.brief),className:ye.textButton},i.createElement(I.JO.TextShort,{className:ye.textIcon})),i.createElement(C.zx.White,{title:t.card.shortenIt.selectorTooltip(J.focused),name:J.focused,key:J.focused,active:e.view((e=>e===J.focused)),onClick:()=>e.set(J.focused),className:ye.textButton},i.createElement(I.JO.TextMedium,{className:ye.textIcon})),i.createElement(C.zx.White,{title:t.card.shortenIt.selectorTooltip(J.detailed),name:J.detailed,key:J.detailed,active:e.view((e=>e===J.detailed)),onClick:()=>e.set(J.detailed),className:ye.textButton},i.createElement(I.JO.TextLong,{className:ye.textIcon})))},le=({activeSummary:e,showSelector:t,transform:n})=>{const r=i.useContext(h.m.Context),a=e.view((e=>r.card.shortenIt.compressionHint(ie.g.fromRatio(n.labels[se(e)].compressionRatio))));return i.createElement("div",{className:ye.summarySelector},i.createElement("div",{className:ye.labelContainer},i.createElement(x.XY,{className:ye.label},t?e:a),t&&i.createElement(x.ck,{className:ye.hint},a)),t&&i.createElement(oe,{activeSummary:e}))},ce=({card:e,actions:t})=>{const n=i.useContext(h.m.Context);return i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,n.beta)}),i.createElement(ue,{sentenceCount:e.activeAlert.sentenceCount}),i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))},ue=({sentenceCount:e})=>i.createElement(x.H3,{className:ye.sentenceCount},e," ",i.createElement(x.XY,{className:ye.sentences},"sentences")),de=({card:e,feedbackActions:t})=>i.createElement(i.Fragment,null,i.createElement(j.Be,{card:e,feedbackActions:t}),i.createElement(j.U4,{card:e,feedbackActions:t})),pe=({card:e,actions:t})=>(0,j.m_)(e.activeAlert,e.renderOptions.layoutDensity)?i.createElement(ae.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null,me={color:d.Il.CoreRed50},he={$nest:{"&:not([data-disabled='true'])[data-active='true']":{stroke:d.Il.CoreNeutral0}}},fe={padding:m.u.important(0)},ge={color:d.Il.CoreNeutral50,lineHeight:m.u.rem(1.125)},ye=m.u.stylesheet({sentenceCount:[me],sentences:[{display:"inline-block"}],textIcon:[he],textButton:[fe],summarySelector:[{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}],labelContainer:[{display:"flex",flexDirection:"column"}],label:[{fontWeight:"bold",textTransform:"capitalize"}],hint:[ge]}),ve=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const s=i.useContext(h.m.Context);return i.createElement(j.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,a.a9)(i.createElement(ce,{card:e,actions:t})),mainActions:(0,a.a9)(i.createElement(de,{card:e,feedbackActions:t})),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(j.Nm,{title:s.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:g.lY.Type.requestShortenItReplacements,alertId:e.activeAlert.id,itemId:e.id})}))})),subActions:(0,a.a9)(i.createElement(pe,{card:e,actions:t}))})},be=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:c})=>{const u=i.useContext(h.m.Context),d=o.h.create(J.brief),p=o.h.create(!0);return i.createElement(j.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,mainActions:(0,a.a9)(i.createElement(j.Kg,{card:e,feedbackActions:t})),subActions:(0,a.a9)(i.createElement(pe,{card:e,actions:t})),cardBody:(0,a.a9)(i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,u.beta)}),(0,s.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),i.createElement(le,{activeSummary:d,showSelector:3===c.labels.length,transform:c}),i.createElement(b.T9,{classes:{rendered:Ie.replacement,removing:Ie.replacementHidden},timeout:250,content:d.view((t=>i.createElement(ne.OW,{label:c.labels[se(t)],collapsed:p,layoutDensity:e.renderOptions.layoutDensity})))}),i.createElement(j.ko,{card:e,isChecking:n}))),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement("div",{className:Ie.footerBtns},i.createElement(j.Nm,{title:u.card.todoAction(c.tooltipText),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:se(d.get()),cardType:g.lY.getCardType(e)})}))}),i.createElement(C.zx.Ghost,{name:"expand-edits-btn",onClick:()=>p.modify((e=>!e)),className:Ie.expandEditsBtn},i.createElement(l.F.Fragment,null,p.view(u.card.shortenIt.expandEdits)))))})};var we;!function(e){e.Full=e=>{const{isChecking:t,isCheckingGlobal:n}=function(e,t,n){const r=E.P.useAtomOf({isWaiting:e.activeAlert.summariesRequestState===B.vQ.SummariesRequestState.requested,cardIsOpen:"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type});return E.P.useMemoOnDidMount((()=>({isChecking:ee.aj([t,r]).pipe(L.U((([e,t])=>e||t.isWaiting&&t.cardIsOpen)),te.x()),isCheckingGlobal:ee.aj([n,r]).pipe(L.U((([e,t])=>e||t.isWaiting&&!t.cardIsOpen)),te.x())})))}(e.card,e.isChecking,e.isCheckingGlobal);return(0,s.pipe)(e.card.transform,u.filter(Q.b$.isShortenIt),u.map((e=>Object.assign(Object.assign({},e),{labels:(0,s.pipe)(e.labels,K.DY(Q.q6.ord))}))),u.fold((0,a.a9)(i.createElement(ve,Object.assign({},e,{isChecking:t,isCheckingGlobal:n}))),(t=>i.createElement(be,Object.assign({},e,{transform:t})))))}}(we||(we={}));const Ce={transition:`opacity ${m.u.seconds(j.k_)}`},Se={padding:`0 ${m.u.rem(1)}`},Ie=m.u.stylesheet({replacement:[Ce],replacementHidden:[Ce,{opacity:0}],footerBtns:[{display:"flex"}],expandEditsBtn:[Se]});var xe=n(76720);const ke=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const s=i.useContext(h.m.Context);return i.createElement(Le,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,a.a9)(i.createElement(j.M9,{card:e,actions:t,isChecking:n})),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement("div",{className:Be.fullSentenceCardFooterBtns},i.createElement(j.Nm,{title:s.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})}))})))})},Ee=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:c})=>{const d=i.useContext(h.m.Context),m=o.h.create(!0);return E.P.useSubscriptionTo((0,s.pipe)(m,A.T(1),T.b((e=>t.next({type:g.lY.Type.fullSentenceHighlightChangesToggle,showChanges:e}))))),i.createElement(Le,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,a.a9)(i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,d.beta)}),i.createElement(Me,{isNew:e.renderOptions.isNew,actions:t}),(0,s.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),i.createElement(b.T9,{classes:{rendered:Be.replacement,removing:Be.replacementHidden},timeout:250,content:m.pipe(_.a(c,((t,n)=>(0,s.pipe)(n,u.fold((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null)),(n=>i.createElement(ne.n4,{replacements:n,showDiff:t,layoutDensity:e.renderOptions.layoutDensity})))))))}),i.createElement(j.ko,{card:e,isChecking:n}))),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(l.F.div,{className:Be.fullSentenceCardFooterBtns},i.createElement(j.Nm,{title:c.pipe(L.U(u.fold((()=>""),(e=>d.card.todoAction(e.tooltipText))))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})}))}),i.createElement(S.Ys,{className:Be.fullSentenceCardCheckbox,checked:m,name:"set-goals"},d.card.showChangesToggle)))})},Ae=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:o})=>{const d=i.useContext(h.m.Context),m=(0,s.pipe)(e.userInput,u.getOrElse((0,a.a9)("")));return i.createElement(Le,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,{key:"content"},i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(Me,{isNew:e.renderOptions.isNew,actions:t}),i.createElement(l.F.div,{className:r.pipe(L.U((0,c.RN)(Be.transformContainerInvisible,Be.transformContainer)))},i.createElement(b.T9,{classes:{rendered:Be.replacement,removing:Be.replacementHidden},timeout:250,content:o.pipe(L.U(u.fold((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>i.createElement(ne.$s,{key:"label",gapValue:m,replacements:n,layoutDensity:e.renderOptions.layoutDensity,onFocus:()=>t.next({type:g.lY.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:n=>t.next({type:g.lY.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:n}),onApply:k.hz((()=>t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})))})))))})),i.createElement(x.Xk,{className:r.pipe(L.U((0,c.RN)(Be.transformHint,Be.transformHintInvisible)))},d.card.updatingSuggestion),i.createElement(j.ko,{card:e,isChecking:n}),(0,s.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,a.a9)(i.createElement(j.lJ,{card:e}))})},Te=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:o})=>{const d=i.useContext(h.m.Context);return i.createElement(Le,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,null,i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,d.beta)})),i.createElement(l.F.div,{className:r.pipe(L.U((0,c.RN)(Be.transformContainerInvisible,Be.transformContainer)))},i.createElement(b.T9,{classes:{rendered:Be.replacement,removing:Be.replacementHidden},timeout:250,content:o.pipe(L.U(u.fold((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>{const r=(0,s.pipe)(e.synfonySelection,u.getOrElse((()=>[])));return i.createElement(ne.Px,{replacements:n,onClick:n=>k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:g.lY.getCardType(e),drilldownSuggestionIds:r})})),onDive:(n,i)=>t.next({type:g.GM.Kind.drilldown,alertId:e.activeAlert.id,wordIndex:n,cardId:e.id,alternativeId:i,drilldownSuggestionIds:r}),onBack:()=>t.next({type:g.GM.Kind.back,cardId:e.id}),selection:r,layoutDensity:e.renderOptions.layoutDensity})}))))})),i.createElement(x.Xk,{className:r.pipe(L.U((0,c.RN)(Be.transformHint,Be.transformHintInvisible)))},d.card.updatingSuggestion),i.createElement(j.ko,{card:e,isChecking:n}),(0,s.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,a.a9)(i.createElement(j.lJ,{card:e}))})},_e=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:o})=>{const d=i.useContext(h.m.Context);return i.createElement(Le,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(l.F.div,{className:r.pipe(L.U((0,c.RN)(Be.transformContainerInvisible,Be.transformContainer)))},i.createElement(b.T9,{classes:{rendered:Be.replacement,removing:Be.replacementHidden},timeout:250,content:o.pipe(L.U(u.fold((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>i.createElement(j.hT,{rl:n,onClick:n=>k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:g.lY.getCardType(e)})})),layoutDensity:e.renderOptions.layoutDensity})))))})),i.createElement(x.Xk,{className:r.pipe(L.U((0,c.RN)(Be.transformHint,Be.transformHintInvisible)))},d.card.updatingSuggestion),i.createElement(j.ko,{card:e,isChecking:n}),(0,s.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,a.a9)(i.createElement(j.lJ,{card:e}))})},Le=e=>{var t,n,r;return i.createElement(j.VM,Object.assign({},e,{cardExtra:null!==(t=e.cardExtra)&&void 0!==t?t:(0,a.a9)(i.createElement(j.mQ,{card:e.card,actions:e.actions})),mainActions:null!==(n=e.mainActions)&&void 0!==n?n:(0,a.a9)(i.createElement(j.Kg,{card:e.card,feedbackActions:e.actions})),subActions:null!==(r=e.subActions)&&void 0!==r?r:(0,a.a9)(i.createElement(j.q4,{card:e.card,actions:e.actions}))}))},Oe=({card:e,actions:t,isChecking:n})=>i.createElement(F.Z,{visualState:e.visualState,onFocus:()=>t.next({type:g.lY.Type.alertCardShow,cardType:g.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,W.G)(e.renderOptions),body:i.createElement(j.M9,{card:e,actions:t,isChecking:n}),mainActions:i.createElement(j.Kg,{card:e,feedbackActions:t}),footer:i.createElement(j.lJ,{card:e}),subActions:i.createElement(j.q4,{card:e,actions:t}),extra:i.createElement(j.mQ,{card:e,actions:t})}),Re=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:s})=>{const o=i.useContext(h.m.Context),u=i.useMemo((()=>new O.X(!0)),[]);return i.useEffect((()=>{"focused"===e.visualState.transition.type&&t.next({type:g.lY.Type.smartPhrasesShowFullCard,alertId:e.activeAlert.id})}),[t,e.activeAlert.id,e.visualState.transition.type]),E.P.useSubscriptionTo(u.pipe(R.h(Boolean),P.g(1e3),T.b((()=>u.next(!1))))),i.createElement(j.UK,{title:i.createElement(j.g8,{title:e.activeAlert.title,emoji:e.activeAlert.emoji})},i.createElement(l.F.Fragment,null,u.pipe(L.U((l=>i.createElement(j.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardTheme:l?{contentBody:Be.smartPhrasesCardBodyLoading}:void 0,cardBody:n=>i.createElement(j.oE,{card:e,actions:t,isLoading:l,transform:s,classes:{transformContainer:n.pipe(L.U((0,c.RN)(Be.transformContainerInvisible,Be.transformContainer))),renderedReplacement:Be.replacement,hiddenReplacement:Be.replacementHidden}}),mainActions:(0,a.a9)(e.activeAlert.usedReplacementsIndexes.length>0?i.createElement(C.zx.Ghost,{name:`smart-phrases-${e.activeAlert.intent}-done`,onClick:k.hz((()=>t.next({type:g.lY.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"user"}))),disabled:l},o.done):i.createElement(j.U4,{card:e,feedbackActions:t,onClick:()=>t.next({type:g.lY.Type.smartPhrasesDismiss,alertId:e.activeAlert.id}),disabled:l})),subActions:()=>e.activeAlert.replacementsLength>5||e.activeAlert.hideReplacements?i.createElement(C.zx.Tertiary,{name:`smart-phrases-${e.activeAlert.intent}-show-more-ideas`,onClick:()=>{t.next({type:g.lY.Type.smartPhrasesShowMoreIdeas,cardId:e.id,alertId:e.activeAlert.id}),u.next(!0)},disabled:l},i.createElement(I.JO.SmartPhrases.ShowMore,null),o.card.smartPhrases.showMoreIdeas):null,cardExtra:()=>l?null:i.createElement(j.Eq,{card:e,actions:t})}))))))},Pe=({card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s})=>y.C.isSmartPhrasesItem(e)?i.createElement(Re,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):y.C.isSentenceLevelBrandTonesItem(e)?i.createElement(r.Full,{card:e,actions:t}):y.C.isTakeawayItem(e)?i.createElement(xe.o.Full,{card:e,actions:t}):y.C.isShortenItItem(e)?i.createElement(we.Full,{card:e,actions:t,isChecking:n,isCheckingGlobal:a}):f.X.hasTransform(e)?f.X.hasFullSentenceTransform(e)?i.createElement(Ee,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):f.X.hasOneGapTransform(e)?i.createElement(Ae,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):f.X.hasSynfonyTransform(e)?i.createElement(Te,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):i.createElement(_e,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):f.X.isSimple(e)?i.createElement(ke,{card:e,actions:t,isChecking:n,isCheckingGlobal:a}):i.createElement(Oe,{card:e,actions:t,isChecking:n}),Me=e=>i.createElement(l.F.Fragment,null,e.isNew.pipe(L.U(u.fold(a.gn,(t=>i.createElement(j.jt,{type:t,actions:e.actions,key:"new-notification"})))),M.O(null))),Fe={transition:`opacity ${m.u.seconds(j.k_)}`,transitionDelay:m.u.seconds(j.k_)},Ne={position:"absolute",top:m.u.rem(2),color:d.Il.CoreNeutral40,lineHeight:m.u.rem(2),transition:`opacity ${m.u.seconds(j.k_)}`,transitionDelay:m.u.seconds(j.k_)},De={transition:`opacity ${m.u.seconds(j.k_)}`},$e={fontSize:m.u.rem(d.xv.BodySize),lineHeight:m.u.rem(2.0625)},Be=Object.assign({},m.u.stylesheet({invisible:[j.Bn],transformContainer:[Fe],transformContainerInvisible:[Fe,j.Bn,{transitionDelay:"initial"}],transformHint:[Ne],transformHintInvisible:[Ne,j.Bn,{transitionDelay:"initial"}],replacement:[De],replacementHidden:[De,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[$e],smartPhrasesCardBodyLoading:[{padding:0}]}))},19157:(e,t,n)=>{n.d(t,{P:()=>N});var r=n(27378),i=n(40327),a=n(12187),s=n(5739),o=n(5114),l=n(83078),c=n(90351),u=n(63969),d=n(40219),p=n(30763),m=n(66896),h=n(40018),f=n(17594),g=n(26027),y=n(91549),v=n(15646),b=n(77610),w=n(62310),C=n(7046),S=n(29245),I=n(94793),x=n(3656),k=n(28706),E=n(77176),A=n(50225),T=n(32338),_=n(50224),L=n(28584),O=n(55636);const R=({theme:e={},action:t,hasEmoji:n})=>r.createElement("div",Object.assign({},(0,a.Sh)(e.wrapper,se.ctaText)),n?r.createElement(S.d,{emojiClassName:(0,a.Sh)(se.cardLogo,e.logo).className},t):t),P=({vox:e,theme:t={}})=>r.createElement(r.Fragment,null,(0,i.pipe)(e.logoUrl,o.map((e=>r.createElement(L.Im,Object.assign({},(0,a.Sh)(se.cardLogo,t.logo),{logoUrl:e})))),o.toNullable),r.createElement(L.$x,Object.assign({vox:e},(0,a.Sh)(se.cta,t.label),{isMinimalCard:!1}))),M=e=>[m.R.outcomeTypeMatch(e.lensType)({correctness:_.m.dotCorrectness,clarity:_.m.dotClarity,premium:_.m.dotAdvanced,engagement:_.m.dotEngagement,delivery:_.m.dotDelivery,vox:_.m.dotVox}),se.cta],F=()=>{const e=r.useContext(p.m.Context);return r.createElement(w.C.Regular,{className:se.newLabel},e.new)};var N;!function(e){e.SmartPhrases=({card:e,actions:t,useBundleContainer:n=!1,twoLined:i=!1})=>{const s=r.useContext(p.m.Context);return r.useEffect((()=>{"added"!==e.visualState.transition.type&&"rendered"!==e.visualState.transition.type||(t.next({type:v.lY.Type.smartPhrasesShowMiniCard,alertId:e.activeAlert.id}),e.activeAlert.hideReplacements&&t.next({type:v.lY.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"auto"}))}),[t,e.activeAlert.hideReplacements,e.activeAlert.id,e.visualState.transition.type]),r.createElement(A.b.Mini,Object.assign({},(0,a.Sh)(i?Y.wrapper:ee.wrapper,se.smartPhrasesWrapper,n?ee.bundleContainer:null),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,hideActivateButton:!0}),r.createElement("div",{className:se.smartPhrasesContainer},r.createElement(O.g8,{className:se.smartPhrasesTitle,title:e.activeAlert.title,emoji:e.activeAlert.emoji,hideBetaBadge:!0}),r.createElement("div",{className:se.smartPhrasesIntentDetectedFeedback},r.createElement(C.zx.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackYes,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-yes`,active:e.activeAlert.intentDetectedFeedback===h.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:n=>{var r,i;t.next({type:v.lY.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:h.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE}),t.next({type:v.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:e.activeAlert},clickPoint:{x:null!==(r=null==n?void 0:n.clientX)&&void 0!==r?r:0,y:null!==(i=null==n?void 0:n.clientY)&&void 0!==i?i:0}})}},r.createElement(I.JO.VoteYes,null)),r.createElement(C.zx.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackNo,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-no`,active:e.activeAlert.intentDetectedFeedback===h.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:k.hz((()=>{t.next({type:v.lY.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:h.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE}),t.next({type:v.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:g.X.isEligibleForDismissSurvey(e)})}))},r.createElement(I.JO.VoteNo,null)))))},e.Bundle=({card:e,actions:t})=>{const[n]=M(e.activeAlert);return r.createElement(A.b.Mini,Object.assign({},(0,a.Sh)(ee.wrapper,ee.bundleContainer,ee.dot,n),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:r.createElement(x.CL,{className:ee.alertsCounter},e.alerts.length)}),r.createElement(s.F.div,{className:ee.miniContainer},r.createElement("div",{className:ee.highlightedText},y.R.bundleTitle(e))))},e.Standard=({card:n,actions:l})=>{const c=r.useContext(p.m.Context);if(b.C.isSmartPhrasesItem(n))return r.createElement(e.SmartPhrases,{card:n,actions:l});{const[e,u]=M(n.activeAlert);return r.createElement(A.b.Mini,Object.assign({},(0,a.Sh)(ee.wrapper,ee.dot,e),{actions:l,cardId:n.id,getActiveAlert:()=>n.activeAlert}),r.createElement(s.F.div,{className:ee.miniContainer},r.createElement("div",{className:ee.highlightedText},n.activeAlert.highlightTexts[0]),r.createElement("div",{className:ee.middleDot},"·"),(0,i.pipe)(n.activeAlert.extraProperties.vox,o.map((e=>r.createElement(P,{vox:e,theme:{logo:ee.cardLogo}}))),o.getOrElse((()=>r.createElement(r.Fragment,null,r.createElement(R,{hasEmoji:f.$.hasTone(n.activeAlert),action:g.X.miniTitle(n,c),theme:{wrapper:u,logo:ee.cardLogo}}),b.C.isTakeawayItem(n)&&r.createElement(t,{item:n,className:Y.takeawayIconStandard}))))),(0,i.pipe)(n.renderOptions.isNew,E.U((e=>o.isSome(e)?r.createElement(F,{key:"new-label"}):null)))))}};const t=({item:e,className:t})=>(l.FX(h.TO.correctlyDetected)(e.activeAlert.takeawayFeedback)||l.FX(h.TO.correctlyDetectedAndDone)(e.activeAlert.takeawayFeedback))&&e.activeAlert.takeawayIsLikelyToBeRead?r.createElement(I.JO.ValidationOk,{width:16,className:t}):r.createElement(I.JO.Megaphone,{width:16,className:t});e.TwoLined=({card:n,actions:s})=>{const l=r.useContext(p.m.Context);if(b.C.isSmartPhrasesItem(n))return r.createElement(e.SmartPhrases,{card:n,actions:s,twoLined:!0});{const[e,c]=M(n.activeAlert);return r.createElement(A.b.Mini,Object.assign({},(0,a.Sh)(Y.wrapper,Y.dot,e),{actions:s,cardId:n.id,getActiveAlert:()=>n.activeAlert}),r.createElement("div",{className:Y.miniContainer},(0,i.pipe)(n.activeAlert.extraProperties.vox,o.map((e=>r.createElement(P,{vox:e,theme:{logo:Y.cardLogo,label:Y.subTitle}}))),o.getOrElse((()=>r.createElement(r.Fragment,null,r.createElement(R,{hasEmoji:f.$.hasTone(n.activeAlert),action:g.X.miniTitle(n,l),theme:{wrapper:(0,a.Sh)(c,Y.ctaText,Y.subTitle).className,logo:Y.cardLogo}}),b.C.isTakeawayItem(n)&&r.createElement(t,{item:n,className:Y.takeawayIconMini}))))),r.createElement("div",{className:U},n.activeAlert.highlightTexts[0])))}}}(N||(N={}));const D="0 1px 8px rgba(109, 117, 141, .18)",$={$nest:{"&:before":{top:u.u.rem(.85),left:0}}},B="miniTwoLinedHighlightedText",U=u.u.joinClasses([B,u.u.style({overflow:"hidden",marginTop:u.u.rem(-.25),color:c.Il.CoreNeutral90,textOverflow:"ellipsis"})]),j={height:u.u.rem(3.25),borderRadius:u.u.rem(d.Jr),boxShadow:D,$nest:{"&:hover":{boxShadow:D},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},W={top:u.u.rem(.7)},G={fontWeight:u.u.important(400),fontSize:u.u.rem(.75)},H={position:"absolute",left:u.u.rem(.5),minWidth:"initial",minHeight:"initial",background:c.Il.CoreNeutral0},z=Object.assign(Object.assign({},H),{top:u.u.rem(.6)}),Y=u.u.stylesheet({dot:[$],wrapper:[j],miniContainer:[{flexDirection:"column"}],cardLogo:[W],subTitle:[G],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[z],takeawayIconStandard:[H]}),V={height:u.u.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},q={$nest:{"&:before":{top:u.u.px(1),bottom:0,left:0}}},Z={height:u.u.important(u.u.rem(2.5)),borderRadius:u.u.rem(d.Jr)},X={color:c.Il.CoreNeutral50,display:"flex",width:u.u.rem(2),height:u.u.percent(100),justifyContent:"center",alignItems:"center"},J={overflow:"hidden",color:c.Il.CoreNeutral90,textOverflow:"ellipsis"},K={display:"inline-block",padding:`0 ${u.u.rem(.5)}`},Q={top:0,bottom:0,left:u.u.rem(.5),margin:"auto"},ee=u.u.stylesheet({wrapper:[V],dot:[q],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[Z],alertsCounter:[X],highlightedText:[J],middleDot:[K],cardLogo:[Q]}),te={color:c.Il.CoreNeutral50,fontWeight:300},ne={position:"absolute",left:u.u.rem(.5),width:u.u.rem(1),height:u.u.rem(1),background:c.Il.CoreNeutral0},re={marginLeft:u.u.rem(.5)},ie={$nest:{[`& .${T.B.contentWrapper}`]:{margin:0}}},ae={color:c.Il.CoreNeutral90,fontSize:u.u.rem(.875),lineHeight:u.u.rem(1.125),paddingLeft:u.u.rem(.75)},se=u.u.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[te],cardLogo:[ne],newLabel:[re],smartPhrasesWrapper:[ie],smartPhrasesContainer:[{display:"flex",alignItems:"center",justifyContent:"space-between"}],smartPhrasesTitle:[ae],smartPhrasesIntentDetectedFeedback:[{display:"flex",alignItems:"center",position:"absolute",right:0}]})},98210:(e,t,n)=>{n.d(t,{Px:()=>Qe,n4:()=>Ke,$s:()=>tt,zO:()=>it,OW:()=>st,GP:()=>at});var r=n(27378),i=n(71249),a=n(57050),s=n(40327),o=n(12187),l=n(38983),c=n(5739),u=n(66310),d=n(55415),p=n(22232),m=n(8125),h=n(30763),f=n(51006),g=n(98637),y=n(4890),v=n(8313),b=n(7046),w=n(43965),C=n(94793),S=n(90351),I=n(63969),x=n(24588),k=n(40219),E=n(54338),A=n(3656);function T(e){return e?t=>`${e}/${t}`:a.yR}function _(e){const{name:t}=r.useContext(E.f.Context);return void 0===e?e:"string"==typeof e?T(t)(e):e.view(T(t))}const L=e=>r.createElement(A.ZT,Object.assign({},R(e),{value:e.value,onChange:e.onChange})),O=e=>r.createElement(L,Object.assign({},e,{nodeType:"input"})),R=e=>{return Object.assign({"data-name":_(e.name),mount:(t=e.autofocus,t?e=>e&&requestAnimationFrame((()=>e.focus())):void 0),styleType:A.ZT.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},(0,o.Sh)(M.inputField,e.className));var t},P={width:I.u.percent(100),outline:"none",border:`1px solid ${x.xO}`,borderRadius:I.u.rem(k.fx),background:S.Il.CoreNeutral0,$nest:{"&::placeholder":{color:x.FW,opacity:1},"&:focus":{borderColor:S.Il.CoreBlue50}}},M=I.u.stylesheet({inputField:[P],textArea:[{resize:"none"}]});const F=(0,n(83171).Gd)(),N=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:I.u.rem(.5*e)}}}),D=(e,t,n,r)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:r,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${n}) '. '`}}}}}),$=e=>[D(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),D(e,5,"lower-roman","card-list6 card-list7 card-list8"),D(e,6,"decimal","card-list7 card-list8"),D(e,7,"lower-alpha","card-list8"),D(e,8,"lower-roman","none")],B="cards-replacements_labels-",U={list:`${B}list`,item:`${B}item`,diff:`${B}diff`,columnList:`${B}columnList`,itemInsert:`${B}itemInsert`,deleteAll:`${B}deleteAll`,crossed:`${B}crossed`,deleteQuote:`${B}deleteQuote`,deletePunctuation:`${B}deletePunctuation`,deleteDoubleComma:`${B}deleteDoubleComma`,deleteApostrophe:`${B}deleteApostrophe`,deleteLetter:`${B}deleteLetter`,deletePunctuationBeforeLetter:`${B}deletePunctuationBeforeLetter`,itemOriginal:`${B}itemOriginal`,itemOriginalStrikeThrough:`${B}itemOriginalStrikeThrough`,itemOriginalContent:`${B}itemOriginalContent`,removeOrContainer:`${B}removeOrContainer`,itemContext:`${B}itemContext`,itemContextShifted:`${B}itemContextShifted`,or:`${B}or`,arrowInsertsList:`${B}arrowInsertsList`,cozyArrowInsertsList:`${B}cozyArrowInsertsList`,inlineHeader:`${B}inlineHeader`,fullSentenceBackground:`${B}fullSentenceBackground`,minimalFullSentenceBackground:`${B}minimalFullSentenceBackground`,fullSentenceDelete:`${B}fullSentenceDelete`,fullSentenceDeleteCollapsed:`${B}fullSentenceDeleteCollapsed`,fullSentenceHidden:`${B}fullSentenceHidden`,fullSentenceListItem:`${B}fullSentenceListItem`,fullSentenceBulletListItem:`${B}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${B}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${B}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:B+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:B+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:B+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${B}fullSentenceInsert`,fullSentenceInsertPunctuation:`${B}fullSentenceInsertPunctuation`,shortenItBackground:`${B}shortenItBackground`,minimalShortenItBackground:`${B}minimalShortenItBackground`,shortenItDelete:`${B}shortenItDelete`,shortenItDeleteCollapsed:`${B}shortenItDeleteCollapsed`,shortenItInsert:`${B}shortenItInsert`,shortenItInsertPunctuation:`${B}shortenItInsertPunctuation`,itemRemove:`${B}itemRemove`,oneGapInsert:`${B}oneGapInsert`,oneGapInput:`${B}oneGapInput`,smartPhrasesInsert:`${B}smartPhrasesInsert`,smartPhrasesInsertContent:`${B}smartPhrasesInsertContent`,smartPhrasesInsertContentText:`${B}smartPhrasesInsertContentText`,drilldownInsertGroup:`${B}drilldownInsertGroup`,drilldownArrowButton:`${B}drilldownArrowButton`,drilldownIcon:`${B}drilldownIcon`,drilldownOriginalRow:`${B}drilldownOriginalRow`,drilldownBackButton:`${B}drilldownBackButton`,collapsibleDelete:`${B}collapsibleDelete`,collapsibleInsert:`${B}collapsibleInsert`,shortenItCollapsibleDelete:`${B}shortenItCollapsibleDelete`,collapsiblePartContent:`${B}collapsiblePartContent`},j={position:"relative",overflow:"hidden",margin:`0 ${I.u.rem(.5)} ${I.u.rem(.5)} 0`,padding:`${I.u.rem(.25)} ${I.u.rem(.5)}`,borderRadius:I.u.rem(k.fx),color:S.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:I.u.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},W={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:I.u.rem(.3125),width:"1px",height:"120%",background:S.Il.CoreNeutral0,content:"''",opacity:.8}}},G={position:"relative",marginRight:I.u.rem(.5),whiteSpace:"nowrap"},H={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${I.u.rem(1)} 0`,padding:I.u.rem(.5),maxHeight:I.u.rem(12),borderRadius:I.u.rem(k.fx),background:S.Il.CoreNeutral10,color:S.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${k.g_}, ${k.xL}`},z={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${I.u.rem(1)} 0`,maxHeight:I.u.rem(12),color:S.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontFeatureSettings:`${k.g_}, ${k.xL}`},Y={position:"relative",marginRight:I.u.rem(.5),maxWidth:`calc(100% - ${I.u.rem(.5)})`,overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:I.u.rem(.5),color:S.Il.CoreNeutral50,content:"'→'",verticalAlign:"middle"}}},V={textDecoration:"line-through",color:S.Il.CoreRed40,textDecorationLine:"line-through"},q=[N(0),N(1),N(2),N(3),N(4),N(5),N(6),N(7),N(8)],Z={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${k.g_}, ${k.xL}`},X={background:S.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:S.Il.CoreGreen50},"&[data-disabled='true']":{background:S.Il.CoreGreen40}}},J={$nest:{"&:after":{transform:"rotate(-25deg)"}}},K={paddingRight:I.u.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},Q={paddingRight:I.u.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},ee={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},te={display:"flex",flexBasis:"100%"},ne={margin:`0 ${I.u.rem(.5)} ${I.u.rem(.5)} 2px`,color:S.Il.CoreNeutral60},re={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},ie={marginBottom:I.u.rem(.25),color:S.Il.CoreNeutral60,fontWeight:400,fontSize:I.u.rem(.8),lineHeight:I.u.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},ae={color:S.Il.CoreRed50,textDecoration:"line-through",fontWeight:600},se=Object.assign(Object.assign({},ae),{textDecoration:"none"}),oe={color:S.Il.CoreNeutral50,textDecoration:"line-through",fontWeight:400},le=Object.assign(Object.assign({},oe),{textDecoration:"none"}),ce={background:S.Il.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:S.Il.CoreRed40}}},ue={$nest:{"&:before":{content:"'¶\\A\\00a0-\\00a0'"}}},de={$nest:{"&:before":{content:"'¶\\A\\00a0\\2022\\00a0'"}}},pe={width:"100%",marginTop:I.u.rem(.5),marginBottom:I.u.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:S.Il.CoreNeutral40}}},me={marginTop:I.u.rem(.5),lineHeight:`calc(${I.u.rem(2)} - ${I.u.px(2)})`,padding:`0 ${I.u.rem(.5)}`,border:I.u.important(`${I.u.px(1)} solid ${S.Il.CoreNeutral50}`),color:S.Il.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:I.u.important(S.Il.CoreNeutral20)}}},he=F.style(j,X),fe={position:"relative",margin:`0 ${I.u.rem(.5)} ${I.u.rem(.5)} 0`,padding:`${I.u.rem(.25)} ${I.u.rem(.5)}`,borderRadius:I.u.rem(k.fx),cursor:"pointer",transitionDuration:".2s",backgroundColor:S.Il.CoreNeutral10,color:S.Il.CoreGreen60,fontSize:I.u.rem(.875),fontWeight:700,lineHeight:I.u.rem(1.25),width:I.u.percent(100),boxSizing:"border-box",$nest:{"&[data-hovered='true']":{background:S.Il.CoreGreen60,color:S.Il.CoreNeutral0}}},ge={display:"flex",justifyContent:"space-between",alignItems:"center",width:I.u.percent(100)},ye={textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",overflowWrap:"break-word",overflow:"hidden"},ve={margin:`0 ${I.u.rem(.5)} ${I.u.rem(.5)} 0`,$nest:{[`& .${U.itemInsert}`]:{transitionProperty:"background",margin:0},[`& > .${U.itemInsert}:first-child:not(:last-child)`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${U.drilldownArrowButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},be={boxShadow:"inset 1px 0px 0px rgba(255, 255, 255, 0.3)",paddingLeft:I.u.rem(.1875),paddingRight:I.u.rem(.3125)},we={width:I.u.rem(1),height:I.u.rem(1),minWidth:I.u.rem(1),minHeight:I.u.rem(1),verticalAlign:"top",marginTop:I.u.rem(.25),$nest:{"& > svg":{transform:"scale(0.75)"},"& > svg *":{fill:I.u.important("white")}}},Ce={width:I.u.percent(100),marginBottom:I.u.rem(.5),display:"flex",$nest:{"& > *":{marginRight:I.u.rem(.5)}}},Se={background:S.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:S.Il.CoreNeutral10}}},Ie={display:"inline-block",width:I.u.rem(1),lineHeight:I.u.rem(.625),height:I.u.rem(.625),margin:`0 ${I.u.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:I.u.rem(k.mA)},xe={lineHeight:I.u.rem(.2),verticalAlign:"super",marginLeft:"1px"},ke=Object.assign(Object.assign({},Ie),{backgroundColor:S.Il.CoreRed10}),Ee=Object.assign(Object.assign({},Ie),{backgroundColor:S.Il.CoreNeutral10}),Ae=Object.assign(Object.assign({},Ie),{backgroundColor:S.Il.CoreGreen10}),Te={list:I.u.joinClasses([U.list,I.u.style(Z),F.style(Z)]),item:I.u.joinClasses([U.item,I.u.style(j),F.style(j)]),itemInsert:I.u.joinClasses([U.itemInsert,I.u.style(j,X),he]),deleteAll:I.u.joinClasses([U.deleteAll,I.u.style({textDecoration:"line-through"}),F.style({textDecoration:"line-through"})]),crossed:I.u.joinClasses([U.crossed,I.u.style(W)]),deleteQuote:I.u.joinClasses([U.deleteQuote,I.u.style(W,J),F.style(W,J)]),deletePunctuation:I.u.joinClasses([U.deletePunctuation,I.u.style(W,K),F.style(W,K)]),deleteDoubleComma:I.u.joinClasses([U.deleteDoubleComma,I.u.style({textDecoration:"line-through"}),F.style({textDecoration:"line-through"})]),deleteApostrophe:I.u.joinClasses([U.deleteApostrophe,I.u.style(W,Q),F.style(W,Q)]),deleteLetter:I.u.joinClasses([U.deleteLetter,I.u.style(ee),F.style(ee)]),deletePunctuationBeforeLetter:I.u.joinClasses([U.deletePunctuationBeforeLetter,I.u.style({textDecoration:"line-through"}),F.style({textDecoration:"line-through"})]),itemOriginal:I.u.joinClasses([U.itemOriginal,I.u.style(Y),F.style(Y)]),itemOriginalStrikeThrough:I.u.joinClasses([U.itemOriginalStrikeThrough,I.u.style(V),F.style(V)]),itemOriginalContent:I.u.joinClasses([U.itemOriginalContent,I.u.style({color:S.Il.CoreNeutral90}),F.style({color:S.Il.CoreNeutral90})]),removeOrContainer:I.u.joinClasses([U.removeOrContainer,I.u.style(te),F.style(te)]),itemContext:I.u.joinClasses([U.itemContext,I.u.style(G)]),itemContextShifted:I.u.joinClasses([U.itemContextShifted,I.u.style(G,{marginRight:"2px"}),F.style(G,{marginRight:"2px"})]),or:I.u.joinClasses([U.or,I.u.style(ne),F.style(ne)]),arrowInsertsList:I.u.joinClasses([U.arrowInsertsList,I.u.style(re),F.style(re)]),columnList:I.u.joinClasses([U.columnList,I.u.style(re,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),F.style(re)]),cozyArrowInsertsList:I.u.joinClasses([U.arrowInsertsList,I.u.style(re,{flex:2,flexBasis:"0%"}),F.style(re)]),inlineHeader:I.u.joinClasses([U.inlineHeader,I.u.style(ie),F.style(ie)]),shortenItBackground:I.u.joinClasses([U.shortenItBackground,I.u.style(z),F.style(z)]),minimalShortenItBackground:I.u.joinClasses([U.minimalShortenItBackground,I.u.style(z,{lineHeight:I.u.rem(1.3125)}),F.style(z,{lineHeight:I.u.rem(1.3125)})]),shortenItDelete:I.u.joinClasses([U.shortenItDelete,I.u.style(oe),F.style(oe)]),shortenItDeleteCollapsed:I.u.joinClasses([U.shortenItDeleteCollapsed,I.u.style(le),F.style(le)]),shortenItInsert:I.u.joinClasses([U.shortenItInsert]),shortenItInsertPunctuation:I.u.joinClasses([U.shortenItInsertPunctuation]),fullSentenceBackground:I.u.joinClasses([U.fullSentenceBackground,I.u.style(H),F.style(H)]),minimalFullSentenceBackground:I.u.joinClasses([U.minimalFullSentenceBackground,I.u.style(H,{lineHeight:I.u.rem(1.3125)}),F.style(H,{lineHeight:I.u.rem(1.3125)})]),fullSentenceDelete:I.u.joinClasses([U.fullSentenceDelete,I.u.style(ae),F.style(ae)]),fullSentenceDeleteCollapsed:I.u.joinClasses([U.fullSentenceDeleteCollapsed,I.u.style(se),F.style(se)]),fullSentenceHidden:I.u.joinClasses([U.fullSentenceHidden,I.u.style({display:"none"})]),fullSentenceListItem:I.u.joinClasses([U.fullSentenceListItem,I.u.style(...q),F.style(...q)]),fullSentenceBulletListItem:I.u.joinClasses([U.fullSentenceBulletListItem,I.u.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),F.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:I.u.joinClasses([U.fullSentenceDashedListItem,I.u.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),F.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:I.u.joinClasses([U.fullSentenceOrderedListItem,I.u.style(...$(""),...q),F.style(...$(""),...q)]),fullSentenceOrderedListItemWithFormatting:I.u.joinClasses([U.fullSentenceOrderedListItemWithFormatting,I.u.style(...$("¶"),...q),F.style(...$("¶"),...q)]),fullSentenceBulletListItemWithFormatting:I.u.joinClasses([U.fullSentenceBulletListItemWithFormatting,I.u.style(...q,de),F.style(...q,de)]),fullSentenceDashedListItemWithFormatting:I.u.joinClasses([U.fullSentenceDashedListItemWithFormatting,I.u.style(...q,ue),F.style(...q,ue)]),fullSentenceInsert:I.u.joinClasses([U.fullSentenceInsert]),fullSentenceInsertPunctuation:I.u.joinClasses([U.fullSentenceInsertPunctuation]),diff:I.u.joinClasses([U.diff,I.u.style({fontWeight:"bolder"}),F.style({fontWeight:"bolder"})]),itemRemove:I.u.joinClasses([U.itemRemove,I.u.style(j,ce)]),oneGapInsert:I.u.joinClasses([U.oneGapInsert,I.u.style(j,X,pe),he]),oneGapInput:I.u.joinClasses([U.oneGapInput,I.u.style(me)]),smartPhrasesInsert:I.u.joinClasses([U.smartPhrasesInsert,I.u.style(fe),F.style(fe)]),smartPhrasesInsertContent:I.u.joinClasses([U.smartPhrasesInsertContent,I.u.style(ge),F.style(ge)]),smartPhrasesInsertContentText:I.u.joinClasses([U.smartPhrasesInsertContentText,I.u.style(ye),F.style(ye)]),drilldownInsertGroup:I.u.joinClasses([U.drilldownInsertGroup,I.u.style(ve)]),drilldownArrowButton:I.u.joinClasses([U.drilldownArrowButton,I.u.style(be)]),drilldownIcon:I.u.joinClasses([U.drilldownIcon,I.u.style(we)]),drilldownOriginalRow:I.u.joinClasses([U.drilldownOriginalRow,I.u.style(Ce)]),drilldownBackButton:I.u.joinClasses([U.drilldownBackButton,I.u.style(Se)]),collapsibleDelete:I.u.joinClasses([U.collapsibleDelete,I.u.style(ke)]),shortenItCollapsibleDelete:I.u.joinClasses([U.shortenItCollapsibleDelete,I.u.style(Ee)]),collapsibleInsert:I.u.joinClasses([U.collapsibleInsert,I.u.style(Ae)]),collapsiblePartContent:I.u.joinClasses([U.collapsiblePartContent,I.u.style(xe)])};var _e;function Le(e,t){if(e.length<=4)return null;const n=function(e,t){if(e===t)return;const n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}const i=r<n?r:n,a=function(e,t,n){let r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i);let s=function(e,t,n,r,i){let a=0;for(;e[n-a-1]===t[r-a-1]&&i-a>=0;)a+=1;return a}(e,t,n,r,i);a+s>n&&(s-=a+s-n);a+s>r&&(s-=a+s-r);return{from:a,to:n-s,oldFragment:e.substr(a,n-s-a),newFragment:t.substr(a,r-s-a)}}(e,t);if(void 0===n)return null;const{from:r,to:i,oldFragment:a,newFragment:s}=n,o=1===s.length&&r>0&&e[r-1]===s,l=1===a.length&&0===s.length&&t[r-1]===a;let c=r,u=s;return(o||l)&&(c=r-1),o&&(u=s+s),l&&(u=a),u.length>3?null:[e.substring(0,c),u,e.substring(i)]}I.u.cssRule(`.${U.fullSentenceInsert}, .${U.fullSentenceInsertPunctuation}`,{color:S.Il.CoreGreen60,fontWeight:600}),I.u.cssRule(`.${U.shortenItInsert}, .${U.shortenItInsertPunctuation}`,{color:S.Il.CoreBlue50,fontWeight:600}),I.u.cssRule(`.${U.fullSentenceDelete} + .${U.fullSentenceInsert}`,{marginLeft:I.u.rem(.25)}),I.u.cssRule(`.${U.shortenItDelete} + .${U.shortenItInsert}`,{marginLeft:I.u.rem(.25)}),I.u.cssRule(`.${U.fullSentenceOrderedListItemWithFormatting},\n.${U.fullSentenceDashedListItemWithFormatting},\n.${U.fullSentenceBulletListItemWithFormatting}`,{color:S.Il.CoreGreen60,fontWeight:600}),function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["'”’]/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'”][.,;]/)}(t)?e.deleteQuote:function(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'”“.,;:!?\\\/…\-—()]+$/)}(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(_e||(_e={}));const Oe=({transform:e,title:t,disabled:n,boldifier:i=De,classes:a=Te,onClick:s})=>r.createElement(b.zx,{animationMode:w.m.FromClickPoint,name:"apply-insert",onClick:s,title:t,disabled:n,className:a.itemInsert},e.map(((e,t)=>r.createElement(r.Fragment,{key:t},i(e,Te.diff))))),Re=({transform:e,theme:t=Te,showOnboarding:n,onClick:i,onExpand:a})=>{const s=r.useContext(h.m.Context),l=e.label.map(((e,t)=>r.createElement(r.Fragment,{key:t},e.text))),c=r.createElement(b.zx,Object.assign({animationMode:w.m.FromClickPoint,name:"expand-insert",onClick:a,title:s.synfony.drilldownTooltip(l)},(0,o.Sh)(t.itemInsert,t.drilldownArrowButton)),r.createElement(C.JO.Arrow,{direction:C.n4.right,className:t.drilldownIcon}));return r.createElement("div",{className:t.drilldownInsertGroup},r.createElement(b.zx,{animationMode:w.m.FromClickPoint,name:"apply-insert",onClick:i,title:s.synfony.applyTooltip,className:t.itemInsert},l),Boolean(e.subLabels.length)&&(n?r.createElement(et,null,c):c))},Pe=({transform:e,title:t,classes:n=Te,onClick:i})=>r.createElement(b.zx,Object.assign({animationMode:w.m.FromClickPoint,name:"apply-remove"},{onClick:i,title:t,className:n.itemRemove}),e.map(((e,t)=>r.createElement(Ue,{key:t,element:e})))),Me=({transform:e,title:t,classes:n=Te,onClick:i,children:a})=>r.createElement("div",{className:n.removeOrContainer},e.map(((a,s)=>"text"===a.type?r.createElement("span",{key:s,className:s===e.length-1?n.itemContextShifted:n.itemContext},a.text):r.createElement(b.zx,Object.assign({key:s,animationMode:w.m.FromClickPoint,name:"apply-remove-or"},{onClick:i,title:t,className:n.itemRemove}),r.createElement(Ue,{element:a})))),a),Fe=()=>r.createElement("span",{className:Te.or},r.useContext(h.m.Context).card.or),Ne=({transform:e,boldifier:t=De,strikeThrough:n=!0})=>r.createElement("div",Object.assign({},(0,o.Sh)(Te.itemOriginal,n&&Te.itemOriginalStrikeThrough)),r.createElement("span",{className:Te.itemOriginalContent},e.map(((e,n)=>r.createElement(r.Fragment,{key:n},t(e,Te.diff)))))),De=d.ei("text"),$e=({text:e,type:t},n)=>"text"===t?e:r.createElement("span",{className:n},e);function Be(e,t){return n=>r.createElement(Je,{index:t,oldText:e,newText:n.text})}const Ue=({element:e,strikeClass:t})=>"delete"===e.type?r.createElement("span",Object.assign({},(0,o.Sh)(_e.getClass(Te,e.text),t)),e.text):r.createElement(r.Fragment,null,e.text);const je=/^\W/,We=e=>{switch(e.type){case g.GP.Delete:return Te.fullSentenceDelete;case g.GP.Insert:return je.test(e.text)?Te.fullSentenceInsertPunctuation:Te.fullSentenceInsert;case g.GP.Text:case g.GP.List:return"";default:return(0,p.vE)(e)}},Ge=e=>{switch(e.type){case g.GP.Delete:return Te.fullSentenceHidden;case g.GP.List:case g.GP.Text:case g.GP.Insert:return"";default:return(0,p.vE)(e)}},He=e=>{switch(e.type){case g.GP.Delete:return Te.fullSentenceHidden;case g.GP.List:return"bullet"===e.kind?Te.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?Te.fullSentenceDashedListItemWithFormatting:Te.fullSentenceOrderedListItemWithFormatting;case g.GP.Insert:case g.GP.Text:return"";default:return(0,p.vE)(e)}},ze=e=>{switch(e.type){case g.GP.Delete:return Te.fullSentenceHidden;case g.GP.List:return"bullet"===e.kind?Te.fullSentenceBulletListItem:"dashed"===e.kind?Te.fullSentenceDashedListItem:Te.fullSentenceOrderedListItem;case g.GP.Insert:case g.GP.Text:return"";default:return(0,p.vE)(e)}},Ye=({p:e})=>{const t=l.h.create(e.shouldBeCollapsed);return r.createElement(c.F.Fragment,null,t.view((0,m.RN)(r.createElement("span",{className:e.type===g.GP.Delete?Te.collapsibleDelete:Te.collapsibleInsert,onClick:()=>t.set(!1)},r.createElement("span",{className:Te.collapsiblePartContent},"…")),r.createElement(r.Fragment,null,e.text))))},Ve=({p:e,allEditsCollapsed:t})=>{const n=null!=t?t:l.h.create(!!e.shouldBeCollapsed);return r.createElement(c.F.Fragment,null,n.pipe(u.w((t=>{const n=l.h.create(e.shouldBeCollapsed);return n.view((0,a.ls)((e=>e&&t),(0,m.RN)(r.createElement("span",{className:e.type===g.GP.Delete?Te.shortenItCollapsibleDelete:Te.collapsibleInsert,onClick:()=>n.set(!1)},r.createElement("span",{className:Te.collapsiblePartContent},"…")),r.createElement(r.Fragment,null,e.text))))}))))},qe=(e,t)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case g.GP.Insert:case g.GP.Delete:return t?r.createElement(Ye,{p:e}):e.text;case g.GP.Text:return r.createElement("span",null," … ");default:(0,p.vE)(e)}},Ze=(e,t)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case g.GP.Insert:case g.GP.Delete:return r.createElement(Ve,{p:e,allEditsCollapsed:t});case g.GP.Text:return r.createElement("span",null," … ");default:(0,p.vE)(e)}},Xe=e=>(0,s.pipe)((t=>Object.assign({children:Ze(t,e)},(0,o.Sh)((e=>{switch(e.type){case g.GP.Delete:return Te.shortenItDelete;case g.GP.Insert:return je.test(e.text)?Te.shortenItInsertPunctuation:Te.shortenItInsert;case g.GP.Text:case g.GP.List:return"";default:return(0,p.vE)(e)}})(t)))),i.UI),Je=({index:e=0,oldText:t,newText:n})=>{const i=Le(t,n);return r.createElement(r.Fragment,null,i?[i[0],r.createElement("span",{key:e,className:Te.diff},i[1]),i[2]]:n)},Ke=e=>{return r.createElement(A.XY,{className:(0,s.pipe)(e.layoutDensity,y.j.Density.matchOrDefault(y.j.Density.minimal)((()=>Te.minimalFullSentenceBackground),(()=>Te.fullSentenceBackground)))},(0,s.pipe)(e.replacements.kind===g._k.WithFormatting?(t=e.showDiff,(0,s.pipe)(t,(0,m.RN)(He,ze),(e=>n=>n.type===g.GP.List?Object.assign(Object.assign({},(0,o.Sh)(e(n))),{"data-indent":n.indent}):Object.assign({children:qe(n,t)},(0,o.Sh)(e(n)))),i.UI))(e.replacements.labels):(e=>(0,s.pipe)(e,(0,m.RN)(We,Ge),(t=>n=>Object.assign({children:qe(n,e)},(0,o.Sh)(t(n)))),i.UI))(e.showDiff)(e.replacements.labels),(0,i.Su)(((e,t)=>r.createElement("span",Object.assign({key:e},t))))));var t},Qe=({replacements:e,layoutDensity:t,selection:n,onClick:i,onDive:a,onBack:s})=>{const o=r.useContext(h.m.Context),{activeLabels:l,original:c}=g.ey.getSelectedItems(e,n);return r.createElement(A.Xk,{className:Te.list},r.createElement("div",{className:Te.drilldownOriginalRow},n.length>0&&r.createElement(b.zx.Ghost,{name:"go-back",title:o.synfony.back,onClick:s,className:Te.drilldownBackButton},r.createElement(C.JO.Arrow,{direction:C.n4.left})),r.createElement(Ne,{transform:c,strikeThrough:!n||0===n.length})),r.createElement("div",{className:t===y.j.Density.cozy?Te.cozyArrowInsertsList:Te.arrowInsertsList},l.map(((e,t)=>r.createElement(Re,{key:t,transform:e,showOnboarding:2===t,onClick:i(e.alternativeId),onExpand:()=>a(t,e.alternativeId)})))))},et=e=>{const t=r.useContext(h.m.Context);return r.createElement(v.TG,{alignment:"topLeft",eventType:"onclick",stepId:f.X.StepId.Synfony,message:t.synfony.onboardingTooltip,dotPosition:{kind:"dotAtPosition",position:v.E2.rightCenter}},e.children)},tt=e=>{const t=r.useContext(h.m.Context).card,n=""===e.gapValue;return r.createElement(r.Fragment,null,r.createElement(O,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:Te.oneGapInput}),r.createElement(Oe,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:$e,onClick:e.onApply,classes:{itemInsert:Te.oneGapInsert,inlineHeader:Te.inlineHeader},disabled:n,transform:nt(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},nt=(e,t,n)=>[...e,{type:g.GP.Insert,text:rt(e)+(t||"…")+rt(n)},...n],rt=e=>e.length?" ":"",it=({replacementsLabels:e,layoutDensity:t,onClick:n})=>{const i=r.useContext(h.m.Context).card.todoAction(e.tooltipText);switch(e.type){case g.b$.Type.InsertList:return r.createElement(A.Xk,{className:Te.list},e.labels.map(((e,t)=>r.createElement(Oe,Object.assign({},{key:t,title:i,onClick:n(t)},{transform:e})))));case g.b$.Type.DeleteList:return r.createElement(A.Xk,{className:Te.list},e.labels.map(((e,t)=>r.createElement(Pe,Object.assign({},{key:t,title:i,onClick:n(t)},{transform:e})))));case g.b$.Type.Arrow:return function({labels:e,original:t,onlyReplacements:n},i,a,s){const o=1===t.length,[l]=o?[t[0].text,e[0][0].text].map(Be):[$e,$e];return r.createElement(A.Xk,{className:Te.list},!n&&r.createElement(Ne,{transform:t}),r.createElement("div",{className:a===y.j.Density.cozy?Te.cozyArrowInsertsList:e.length>2?Te.columnList:Te.arrowInsertsList},e.map(((e,t)=>r.createElement(Oe,Object.assign({},{key:t,title:i,onClick:s(t)},{transform:e,boldifier:l}))))))}(e,i,t,n);case g.b$.Type.InsertOr:return r.createElement(A.Xk,{className:Te.list},r.createElement(Oe,Object.assign({transform:e.labels[0]},{title:i,onClick:n(0)},{boldifier:$e})),r.createElement(Fe,null),r.createElement(Oe,Object.assign({transform:e.labels[1]},{title:i,onClick:n(1)},{boldifier:$e})));case g.b$.Type.DeleteOr:return r.createElement(A.Xk,{className:Te.list},e.labels.map(((t,a)=>r.createElement(Me,Object.assign({},{key:a,title:i,onClick:n(a)},{transform:t}),a===e.labels.length-2&&r.createElement(Fe,null)))));case g.b$.Type.FullSentence:case g.b$.Type.OneGap:case g.b$.Type.Drilldown:case g.b$.Type.ShortenIt:return null;default:return(0,p.vE)(e)}},at=({replacementsLabels:e,onClick:t})=>{const n=r.useContext(h.m.Context).card.todoAction(e.tooltipText);return r.createElement(r.Fragment,null,e.labels.map(((e,i)=>r.createElement(b.zx,{key:i,animationMode:w.m.FromClickPoint,name:"apply-smart-phrases-insert",onClick:t(i),title:n,className:Te.smartPhrasesInsert},r.createElement("div",{className:Te.smartPhrasesInsertContent},r.createElement("div",{className:Te.smartPhrasesInsertContentText},e.map(((e,t)=>r.createElement(r.Fragment,{key:t},De(e,Te.diff))))),r.createElement(C.JO.SmartPhrases.AddPhraseCirclePlus,null))))))},st=e=>r.createElement(A.XY,{className:(0,s.pipe)(e.layoutDensity,y.j.Density.matchOrDefault(y.j.Density.minimal)((()=>Te.minimalShortenItBackground),(()=>Te.shortenItBackground)))},(0,s.pipe)(Xe(e.collapsed)(e.label.replacement),(0,i.Su)(((e,t)=>r.createElement("span",Object.assign({key:e},t))))))},19025:(e,t,n)=>{n.d(t,{f:()=>c,G:()=>u});var r=n(40327),i=n(90351),a=n(63969),s=n(40219),o=n(4890),l=n(50224);const c=e=>({container:(0,r.pipe)(e,o.j.Density.matchOrDefault(o.j.Density.cozy)((()=>h.cozyCardContainer),(()=>h.compactCardContainer)))}),u=e=>Object.assign(Object.assign({},c(e.layoutDensity)),{wrapper:(0,r.pipe)(e.layoutDensity,o.j.Density.matchOrDefault(o.j.Density.minimal)((()=>h.minimalCardWrapper),(()=>{})))}),d={padding:`${a.u.rem(.75)} ${a.u.rem(.5)} ${a.u.rem(.5)} ${a.u.rem(1)}`},p={margin:`${a.u.rem(1)} 0 ${a.u.rem(1.5)}`,borderRadius:a.u.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:`0 ${a.u.rem(.625)} ${a.u.rem(s.mJ)} 0 rgba(198, 203, 222, .45)`},m={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:a.u.rem(s.Jr),background:i.Il.CoreNeutral0},h=Object.assign(Object.assign({},a.u.stylesheet({minimalCardWrapper:[d],compactCardContainer:[m]})),{cozyCardContainer:a.u.joinClasses([l.g.cozyCardContainerSelector,a.u.style(p)])})},18031:(e,t,n)=>{n.d(t,{A:()=>le});var r,i=n(27378),a=n(57050),s=n(40327),o=n(5739),l=n(26027),c=n(77610),u=n(4890),d=n(28043),p=n(77176),m=n(50225),h=n(38983),f=n(8125),g=n(5114),y=n(81531),v=n(30763),b=n(15646),w=n(7046),C=n(12187),S=n(90351),I=n(63969),x=n(24588);!function(e){e.Item=({className:e,children:t,onChange:n,checked:r,tabIndex:a,id:s})=>i.createElement(o.F.label,Object.assign({},(0,C.Sh)(T.radio,e)),r.view((e=>i.createElement(i.Fragment,{key:`radio-${s}`},i.createElement("input",{onChange:n,tabIndex:a||-1,type:"radio",checked:e,className:T.radioInputHidden}),i.createElement("span",{className:E})))),t),e.Group=({items:t,selectedItemIndex:n,itemWrapperClassName:r,onChange:a})=>i.createElement(o.F.Fragment,null,t.map(((t,s)=>i.createElement(e.Item,{id:s,key:s,onChange:()=>{n.set(s),a&&a(s)},checked:n.view((e=>s===e)),className:r},t))))}(r||(r={}));const k="radioInput",E=I.u.joinClasses([k,I.u.style({display:"inline-block",boxSizing:"border-box",minWidth:I.u.rem(1),width:I.u.rem(1),height:I.u.rem(1),border:`${I.u.rem(.125)} solid ${x.FW}`,borderRadius:I.u.percent(50),backgroundColor:S.Il.CoreNeutral0,content:"' '"})]),A={outline:"none",appearance:"none",$nest:{"&:checked + .radioInput":{border:`${I.u.rem(.25)} solid ${S.Il.CoreBlue50}`}}},T=I.u.stylesheet({radioInputHidden:[A],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]});var _=n(3656),L=n(28706),O=n(1883),R=n(55636);const P=I.u.style({margin:`${I.u.rem(1)} 0`}),M=I.u.style({marginLeft:I.u.rem(.5),lineHeight:I.u.rem(1.3125),fontSize:I.u.rem(.875),color:S.Il.CoreNeutral90}),F=I.u.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:I.u.rem(1)}}}),N=I.u.style({marginTop:"0 !important",marginLeft:I.u.rem(1)}),D={color:S.Il.CoreRed60,fontSize:I.u.rem(.75),lineHeight:I.u.rem(1.125)},$=I.u.style(D),B=I.u.style(D,{visibility:"hidden"});var U=n(19025);const j=({card:e,actions:t})=>{const n=i.useContext(v.m.Context).card.feedbackForm,a=h.h.create(void 0),l=h.h.create(!1);return(0,s.pipe)(e.visualState.transition,g.fromPredicate((e=>"feedback_form"===e.type)),g.fold((()=>(y.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null)),(({options:s})=>i.createElement(O.Z,{onFocus:()=>t.next({type:b.lY.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:(0,U.G)(e.renderOptions),visualState:e.visualState,body:i.createElement(i.Fragment,null,i.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(_.H4,{className:P},n.dismissReason),i.createElement(r.Group,{itemWrapperClassName:F,selectedItemIndex:a,items:s.map((e=>i.createElement("div",{className:M},e.text))),onChange:()=>l.set(!1)})),mainActions:i.createElement(i.Fragment,null),footer:i.createElement(i.Fragment,null,i.createElement(o.F.div,{"aria-hidden":l,className:l.view((0,f.RN)($,B))},n.error),i.createElement("div",null,i.createElement(w.zx.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const n=a.get();return void 0===n?l.set(!0):L.hz((()=>t.next({type:b.lY.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:s[n].key})))()}},n.submit),i.createElement(w.zx.Ghost,{className:N,name:"skipCardFeedbackForm",onClick:L.hz((()=>t.next({type:b.lY.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:"skipped"})))},n.skip))),subActions:i.createElement(i.Fragment,null)}))))};var W=n(25819),G=n(19157),H=n(94793),z=n(85255);const Y=I.u.style({marginRight:I.u.rem(-.5),marginTop:I.u.rem(.5)}),V=I.u.style({padding:`0 ${I.u.rem(1.625)} !important`,marginRight:I.u.rem(.125)}),q=I.u.style({marginRight:0}),Z=({card:e,actions:t})=>{const n=i.useRef(h.h.create(!1));z.P.useEffectOnWillUnmount((()=>{n.current.get()||(0,s.pipe)(e.muteCategory,g.map((n=>t.next({type:b.lY.Type.mutedAlertSuccessDismissed,id:e.id,categoryId:n.id}))))}));const r=i.useContext(v.m.Context).card.mutedAlertCard;return i.createElement(O.Z,{onFocus:()=>t.next({type:b.lY.Type.mutedAlertSuccessShow}),theme:(0,U.G)(e.renderOptions),visualState:e.visualState,body:i.createElement(i.Fragment,null,i.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(_.XY,null,r.description((0,s.pipe)(e.muteCategory,g.fold((()=>""),(e=>e.description)))))),mainActions:i.createElement(i.Fragment,null),footer:i.createElement("div",{className:Y},i.createElement(w.zx.Primary,{name:"gotIt",className:V,onClick:()=>L.hz((()=>t.next({type:b.lY.Type.switchToNext})))()},r.successButtonLabel),i.createElement(w.zx.Ghost,{name:"turnBackOn",onClick:L.hz((()=>{n.current.set(!0),(0,s.pipe)(e.muteCategory,g.map((n=>t.next({type:b.lY.Type.undoMuteAlertCategory,categoryId:n.id,id:e.id}))))}))},r.undoButtonLabel,i.createElement(H.JO.Undo,{color:S.Il.CoreBlue50,className:q}))),subActions:i.createElement(w.zx.Tertiary,{name:"manageOptionalSuggestions",onClick:()=>t.next({type:b.lY.Type.mutedAlertSuggestionManagementClick})},r.settingsLabel,i.createElement(H.JO.OuterLink,null))})};var X=n(66346),J=n(2834);const K=({onLeftClick:e,onRightClick:t,currentMatch:n,totalMatch:r,replaceOneMatch:a=!0,disableOnEnd:s=!0,style:o})=>{const l=i.useContext(v.m.Context).card.matchesNavigation;return 0===r?null:1===r&&a?i.createElement("div",Object.assign({},(0,C.Sh)(te.matchesRow,o.matchesRow||!1)),i.createElement(_.ck,Object.assign({},(0,C.Sh)(te.matchesCount,o.matchesCount||!1)),l.numberOfMatches(r))):i.createElement("div",Object.assign({},(0,C.Sh)(te.matchesRow,o.matchesRow||!1)),i.createElement(w.zx.Ghost,{disabled:s&&0===n,name:"left",title:l.prev,onClick:e},i.createElement(H.JO.Arrow,Object.assign({},(0,C.Sh)(te.leftButtonIcon,o.leftButtonIcon||!1)))),i.createElement(_.ck,Object.assign({},(0,C.Sh)(te.matchesCount,o.matchesCount||!1)),l.currentMatchPosition(n+1,r)),i.createElement(w.zx.Ghost,{disabled:s&&n===r-1,name:"right",title:l.next,onClick:t},i.createElement(H.JO.Arrow,Object.assign({},(0,C.Sh)(te.rightButtonIcon,o.rightButtonIcon||!1)))))},Q={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:I.u.rem(.25)}}},ee={textTransform:"uppercase",letterSpacing:I.u.px(.8),lineHeight:I.u.rem(2)},te=I.u.stylesheet({matchesRow:[Q],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[ee]});function ne(e,t,n){const{activeAlert:r,activeHighlightIndex:i}=t,a=r.getHighlightRanges(),s=(i+("left"===e?a.length-1:1))%a.length;n.next({type:b.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:s},direction:e})}const re=({card:e,actions:t,selectedLabelIndex:n,isChecking:r})=>{const a=i.useContext(v.m.Context),s=h.h.create(!1);return z.P.useSubscriptionTo(r.pipe(J.b((e=>s.set(e))))),i.createElement(R.Nm,{applyMessage:e.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(e.activeAlert.todoAction),checkingInProgress:s,onClick:()=>{t.next({type:b.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n.get(),cardType:b.lY.getCardType(e)})}})},ie=({card:e,actions:t})=>i.createElement(K,{onLeftClick:()=>ne("left",e,t),onRightClick:()=>ne("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var ae=n(26662);const se=({activeAlert:e,selectedLabelIndex:t,actions:n})=>{const a=i.useContext(v.m.Context);return i.createElement("div",{className:ae.V.optionsContainer},e.labels.map(((e,s)=>i.createElement(i.Fragment,{key:`option-${s}`},i.createElement(r.Item,{className:ae.V.optionLabel,onChange:()=>{t.set(s),n.next({type:b.lY.Type.alternativeReplacementRadioButtonClick,index:s})},checked:t.view((e=>e===s))},i.createElement(_.XY,{className:ae.V.optionRadio},e.label)),i.createElement(_.x4,{className:ae.V.optionExample},e.replacementTexts.join("; ")),i.createElement(_.x4,{className:ae.V.optionSecondaryAttribute},a.card.matchesNavigation.numberOfMatches(e.matches))))))},oe=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const a=h.h.create(0);return i.createElement(O.Z,{visualState:e.visualState,onFocus:()=>t.next({type:b.lY.Type.alertCardShow,cardType:b.lY.getCardType(e),alertId:e.activeAlert.id}),theme:Object.assign({wrapper:ae.V.superWrapper,content:r.pipe(p.U((0,f.RN)(ae.V.loadingWrapperInvisible,ae.V.loadingWrapper)))},(0,U.f)(e.renderOptions.layoutDensity)),extra:i.createElement(R.o,{isChecking:r}),body:i.createElement(i.Fragment,null,i.createElement(R.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(R.Ot,{alert:e.activeAlert}),i.createElement(R.ko,{card:e,isChecking:n}),i.createElement(R.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),i.createElement(se,{activeAlert:e.activeAlert,selectedLabelIndex:a,actions:t})),mainActions:i.createElement(R.Kg,{card:e,feedbackActions:t}),footer:i.createElement(i.Fragment,null,i.createElement(R.lJ,{card:e}),i.createElement(re,{selectedLabelIndex:a,card:e,actions:t,isChecking:n})),navigation:i.createElement(ie,{card:e,actions:t}),subActions:i.createElement(X.Vh,{actions:t,card:e,mode:"mini"})})};var le;!function(e){e.Full=({card:e,actions:t})=>{const{isChecking:n,isCheckingGlobal:r,transform:s}=l.X.useCardStates(e),c=e=>i.createElement(W.J,{card:e,actions:t,isChecking:n,transform:s,isCheckingGlobal:r});return i.createElement(o.F.Fragment,null,e.pipe(d.x(((e,t)=>e.hashCode()===t.hashCode())),p.U((0,a.ls)(l.X.match({super:e=>i.createElement(oe,{card:e,actions:t,isChecking:n,isCheckingGlobal:r}),smartPhrases:c,takeaway:c,sentenceLevelBrandTones:c,synfony:c,shortenIt:c,default:c}),l.X.foldCard))))},e.Mini=({card:t,actions:n})=>i.createElement(o.F.Fragment,null,t.pipe(p.U((t=>u.j.Density.matchL((()=>i.createElement(e.MiniSingleLined,{card:t,actions:n})),(()=>i.createElement(e.MiniTwoLined,{card:t,actions:n})),(()=>i.createElement(e.MiniTwoLined,{card:t,actions:n})))(t.renderOptions.layoutDensity))))),e.MiniSingleLined=({card:e,actions:t})=>{function n(e){return i.createElement(G.P.Standard,{card:e,actions:t})}return(0,s.pipe)(e,l.X.match({smartPhrases:n,super:n,takeaway:n,sentenceLevelBrandTones:n,synfony:n,shortenIt:n,default:n}),l.X.foldCard)},e.MiniTwoLined=({card:e,actions:t})=>{function n(e){return i.createElement(G.P.TwoLined,{card:e,actions:t})}return(0,s.pipe)(e,l.X.match({smartPhrases:n,super:n,takeaway:n,sentenceLevelBrandTones:n,synfony:n,shortenIt:n,default:n}),l.X.foldCard)},e.Success=m.b.Success,e.FeedbackForm=({cardData:e,actions:t})=>{function n(e){return i.createElement(j,{card:e,actions:t})}return(0,s.pipe)(e,c.C.match({smartPhrases:n,takeaway:n,default:n,sentenceLevelBrandTones:n,synfony:n,super:n,shortenIt:n}),l.X.foldCard)},e.MutedAlert=({cardData:e,actions:t})=>{function n(e){return i.createElement(Z,{card:e,actions:t})}return(0,s.pipe)(e,c.C.match({smartPhrases:n,takeaway:n,default:n,sentenceLevelBrandTones:n,synfony:n,super:n,shortenIt:n}),l.X.foldCard)}}(le||(le={}))},26662:(e,t,n)=>{n.d(t,{V:()=>v});var r=n(90351),i=n(63969),a=n(40219);const s=(e,t,n,a,s,o)=>Object.assign({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:i.u.rem(2),borderRadius:s,backgroundColor:r.Il.CoreNeutral0,boxShadow:a,content:"' '"},o&&"bottom"!==o?{top:n}:{bottom:n}),o=`0 ${i.u.rem(.25)} ${i.u.rem(1.625)} 0 rgba(198, 203, 222, .25)`,l={marginRight:i.u.rem(1),flexShrink:0,maxWidth:i.u.percent(100)},c={padding:`0 ${i.u.rem(1)}`},u={padding:`0 ${i.u.rem(1.9)} 0 ${i.u.rem(1)}`},d={position:"absolute",top:i.u.rem(.27),right:i.u.rem(.5)},p={display:"grid",width:i.u.percent(100),gridGap:i.u.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},m={minWidth:i.u.rem(7)},h={marginLeft:i.u.rem(.5)},f={color:r.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:i.u.rem(1.5)},g={$nest:{"&:before":s(i.u.rem(.5),-10,i.u.rem(-.5),o,i.u.rem(a.Jr)),"&:after":s(i.u.rem(1),-20,i.u.rem(-1),o,i.u.rem(a.Jr))}},y={transition:"opacity .2s"},v=i.u.prefixedStylesheet("super",{updateAllBtnCommon:[l],updateAllBtn:[l,c],updateAllBtnLoading:[l,u],updateBtnSpinner:[d],optionsContainer:[p],optionLabel:[m],optionRadio:[h],optionSecondaryAttribute:[f],optionExample:[f,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[g],loadingWrapper:[y],loadingWrapperInvisible:[y,{opacity:0,pointerEvents:"none"}]})},76720:(e,t,n)=>{n.d(t,{o:()=>E});var r=n(27378),i=n(40327),a=n(83078),s=n(5114),o=n(63969),l=n(30763),c=n(40018),u=n(15646),d=n(4890),p=n(7046),m=n(28706),h=n(66346),f=n(1883),g=n(55636),y=n(19025),v=n(57050),b=n(26027),w=n(94793);const C=({card:e,actions:t,hasHeader:n})=>{const o=r.useContext(l.m.Context),u=s.isNone(e.activeAlert.takeawayFeedback)?o.card.takeaway.defaultTitle:e.activeAlert.title,p=s.fromNullable(e.activeAlert.highlightTexts[0]),m=(0,i.pipe)(e.activeAlert,s.fromPredicate((e=>!e.takeawayIsLikelyToBeRead&&(a.FX(c.TO.correctlyDetected)(e.takeawayFeedback)||a.FX(c.TO.correctlyDetectedAndDone)(e.takeawayFeedback)))),s.map((()=>e.meta.explanation)));return r.createElement(r.Fragment,null,!n&&(0,i.pipe)(e.renderOptions.layoutDensity,d.j.Density.matchOrDefault(d.j.Density.minimal)((()=>r.createElement(g.__,{alert:e.activeAlert,options:e.renderOptions},r.createElement(g.jg,{text:b.X.miniTitle(e,o)}))),(()=>r.createElement(r.Fragment,null,r.createElement(g.__,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(g.Dx,{text:u}))))),(0,i.pipe)(p,s.fold(v.gn,(t=>r.createElement(g.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity})))),(0,i.pipe)(m,s.fold(v.gn,(n=>r.createElement(g.dk,{description:n,actions:t,layoutDensity:e.renderOptions.layoutDensity})))))},S=({card:e,feedbackActions:t})=>r.createElement(r.Fragment,null,r.createElement(p.zx.Ghost,{name:"takeaway-like",onClick:m.hz((()=>{var n;return t.next({type:u.lY.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(n=e.activeAlert.highlightTexts[0])&&void 0!==n?n:""})}))},r.createElement(w.JO.YesCircle,null)," Yes"),r.createElement(p.zx.Ghost,{name:"takeaway-dislike",onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id})))},r.createElement(w.JO.NoCircle,null)," No")),I=({card:e,feedbackActions:t})=>{const n=r.useContext(l.m.Context);return r.createElement(r.Fragment,null,r.createElement(p.zx.Ghost,{name:"resolve",title:n.resolve,onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},r.createElement(w.JO.YesCircle,null)),r.createElement(p.zx.Ghost,{name:"ignore",title:n.dismiss,onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},r.createElement(w.JO.Ignore,null)))};function x(e,t){const n=a.FX(c.TO.correctlyDetected)(e.activeAlert.takeawayFeedback);return e.activeAlert.takeawayIsLikelyToBeRead&&n&&t}function k(e){return!s.isNone(e.takeawayFeedback)&&!(!s.isSome(e.examples)&&!s.isSome(e.details))}var E;!function(e){e.Full=({card:e,actions:t,cardHeader:n,isChecklistItem:o,isChecklistBundleItem:v})=>{const b=r.useContext(l.m.Context);return r.createElement(f.Z,{visualState:e.visualState,onFocus:()=>t.next({type:u.lY.Type.alertCardShow,cardType:u.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(A=e.renderOptions,T=!!n,Object.assign(Object.assign({},(0,y.f)(A.layoutDensity)),{wrapper:(0,i.pipe)(A.layoutDensity,d.j.Density.matchOrDefault(d.j.Density.minimal)((()=>T?_.minimalCardWrapperWithHeader:_.minimalCardWrapper),(()=>{})))})),body:r.createElement(C,{card:e,actions:t,hasHeader:!!n}),mainActions:s.isNone(e.activeAlert.takeawayFeedback)?r.createElement(S,{card:e,feedbackActions:t}):x(e,!!v)?r.createElement(p.zx.Ghost,{name:"takeaway-correctly-detected-and-done",onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayCorrectlyDetectedAndDone,id:e.id,alertId:e.activeAlert.id})))},b.done):(w=e,E=!!o&&!v,(a.FX(c.TO.correctlyDetected)(w.activeAlert.takeawayFeedback)||a.FX(c.TO.correctlyDetectedAndDone)(w.activeAlert.takeawayFeedback))&&w.activeAlert.takeawayIsLikelyToBeRead&&E?null:r.createElement(I,{card:e,feedbackActions:t})),header:n,footer:k(e.activeAlert)?r.createElement(g.lJ,{card:e}):null,subActions:k(e.activeAlert)?r.createElement(h.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null});var w,E,A,T}}(E||(E={}));const A={padding:`${o.u.rem(.75)} ${o.u.rem(.5)} ${o.u.rem(.5)} ${o.u.rem(1)}`},T={padding:`0 ${o.u.rem(.5)} ${o.u.rem(.5)} ${o.u.rem(1)}`},_=o.u.stylesheet({minimalCardWrapper:[A],minimalCardWrapperWithHeader:[T]})},18955:(e,t,n)=>{n.d(t,{d:()=>A});var r=n(27378),i=n(5739),a=n(38983),s=n(5114),o=n(19962),l=n(81531),c=n(46680),u=n(74238),d=n(45586),p=n(77176),m=n(24209),h=n(18625),f=n(66310),g=n(40151),y=n(85089),v=n(2834),b=n(49708),w=n(93508),C=n(17343),S=n(98403),I=n(76974),x=n(19751),k=n(67434),E=n(57091);class A extends r.Component{constructor(){super(...arguments),this._log=l.C8.Logging.getLogger("CardsListConnectorView",c.i.DEBUG),this._subs=new d.w.Keeper}componentDidMount(){this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:n}=this.props;return r.createElement(i.F.div,{"data-purpose":"card-list-connector",style:n.pipe(p.U((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}}!function(e){let t;!function(e){e.create=()=>a.h.create({scrollProvider:s.none,scrollConsumer:s.none,viewport:s.none,title:s.none})}(t=e.Elements||(e.Elements={})),e.boundedScrollListener=(e,t)=>m.T(h.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(f.w(s.fold((()=>g.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(f.w(s.fold((()=>g.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),C.h(S.PU)))))),t.view("title").pipe(f.w(s.fold((()=>I.of(o.UL.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),x.d({bufferSize:1,refCount:!0}),v.b((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(f.w(s.fold((()=>g.E),(t=>e.scrollOffset.pipe(v.b((e=>{t.scrollTop+=e})))))))).pipe(C.h(void 0)),e.superScrollListener=(e,t)=>{const n=t.view("title").pipe(f.w(s.fold((()=>I.of(o.UL.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),x.d({bufferSize:1,refCount:!0}));return m.T(h.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(f.w(s.fold((()=>g.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(f.w(s.fold((()=>g.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),C.h(S.PU)))))),t.view("scrollConsumer").pipe(f.w(s.fold((()=>g.E),(t=>e.scrollOffset.pipe(k.R(((e,t)=>e-t),0),v.b((e=>{t.style.transform=`translateY(${e}px)`})))))),E.a(n),v.b((([t,n])=>e.paddingTop.set(t+n))))).pipe(C.h(void 0))}}(A||(A={}))},4948:(e,t,n)=>{n.d(t,{J:()=>l});var r=n(27378),i=n(90351),a=n(63969),s=n(40219);if(75==n.j)var o=n(7046);const l=e=>r.createElement(o.zx.Animated,Object.assign({},(0,o.L_)(e,d.gray))),c={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},u={overflow:"hidden",padding:`0 ${a.u.rem(.5)}`,borderRadius:a.u.rem(s.fx),backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral0,textTransform:"none",letterSpacing:a.u.rem(i.xv.ButtonLetterSpacing),fontSize:a.u.rem(i.xv.ButtonSize),lineHeight:a.u.rem(i.xv.ButtonLineHeight),transitionDuration:a.u.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral50},".groupSticky &":{padding:`0 ${a.u.rem(.5)}`,borderRight:`2px solid ${i.Il.CoreNeutral0}`,borderRadius:0,backgroundColor:i.Il.CoreNeutral20,$nest:{"&:first-child":{borderRadius:`${a.u.rem(s.fx)} 0 0 ${a.u.rem(s.fx)}`},"&:last-child":{borderRight:"none",borderRadius:`0 ${a.u.rem(s.fx)} ${a.u.rem(s.fx)} 0`}}}}},d=a.u.stylesheet({button:[c],gray:[c,u]})},95403:(e,t,n)=>{n.d(t,{s:()=>Se});var r,i=n(27378),a=n(5739),s=n(22232),o=n(90351),l=n(35407),c=n(88056),u=n(76024),d=n(19429),p=n(59312),m=n(95195),h=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},g=m.t$,y=function(e,t,n){return g([{value:e,context:t,message:n}])},v=m.F2,b=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,n){var r=this;return void 0===n&&(n="pipe("+this.name+", "+t.name+")"),new e(n,t.is,(function(e,n){var i=r.validate(e,n);return(0,m.nM)(i)?i:t.validate(i.right,n)}),this.encode===w&&t.encode===w?w:function(e){return r.encode(t.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}(),w=function(e){return e};function C(e,t,n,r){for(var i=e.length,a=Array(i+1),s=0;s<i;s++)a[s]=e[s];return a[i]={key:t,type:n,actual:r},a}function S(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])}var I=Object.prototype.hasOwnProperty;function x(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")}function k(e){for(var t=0;t<e.length;t++)if(e[t].encode!==w)return!1;return!0}function E(e){return"{ "+x(e)+" }"}function A(e){return"Partial<"+e+">"}function T(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"}var _={};function L(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];-1!==t.indexOf(a)&&n.push(a)}return n}function O(e){return"LiteralType"===e._tag}function R(e){return"InterfaceType"===e._tag}function P(e){return"UnionType"===e._tag}var M=[];function F(e){if(-1!==M.indexOf(e))return _;if(R(e)||function(e){return"StrictType"===e._tag}(e)){var t=_;for(var n in e.props){var r=e.props[n];O(r)&&(t===_&&(t={}),t[n]=[r.value])}return t}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return F(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,t){return function(e,t){if(e===_)return t;if(t===_)return e;var n=Object.assign({},e);for(var r in t)if(e.hasOwnProperty(r)){var i=L(e[r],t[r]);if(!(i.length>0)){n=_;break}n[r]=i}else n[r]=t[r];return n}(e,F(t))}),_);if(P(e))return e.types.slice(1).reduce((function(e,t){return function(e,t){if(e===_||t===_)return _;var n=_;for(var r in e)t.hasOwnProperty(r)&&0===L(e[r],t[r]).length&&(n===_&&(n={}),n[r]=e[r].concat(t[r]));return n}(e,F(t))}),F(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){M.push(e);var i=F(e.type);return M.pop(),i}return _}new(function(e){function t(){var t=e.call(this,"null",(function(e){return null===e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="NullType",t}return h(t,e),t}(b));var N=new(function(e){function t(){var t=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="UndefinedType",t}return h(t,e),t}(b)),D=(new(function(e){function t(){var t=e.call(this,"void",N.is,N.validate,w)||this;return t._tag="VoidType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),v,w)||this;return t._tag="UnknownType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="StringType",t}return h(t,e),t}(b))),$=new(function(e){function t(){var t=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="NumberType",t}return h(t,e),t}(b)),B=(new(function(e){function t(){var t=e.call(this,"bigint",(function(e){return"bigint"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="BigIntType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="BooleanType",t}return h(t,e),t}(b))),U=new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="AnyArrayType",t}return h(t,e),t}(b)),j=new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Window]"===t}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="AnyDictionaryType",t}return h(t,e),t}(b)),W=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.value=a,s._tag="LiteralType",s}return h(t,e),t}(b);function G(e,t){void 0===t&&(t=JSON.stringify(e));var n=function(t){return t===e};return new W(t,n,(function(t,r){return n(t)?v(e):y(t,r)}),w,e)}var H=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.keys=a,s._tag="KeyofType",s}return h(t,e),t}(b);function z(e,t){void 0===t&&(t=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var n=function(t){return D.is(t)&&I.call(e,t)};return new H(t,n,(function(e,t){return n(e)?v(e):y(e,t)}),w,e)}var Y=function(e){function t(t,n,r,i,a,s){var o=e.call(this,t,n,r,i)||this;return o.type=a,o.predicate=s,o._tag="RefinementType",o}return h(t,e),t}(b);re($,(function(e){return Number.isInteger(e)}),"Int");var V=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.runDefinition=a,s._tag="RecursiveType",s}return h(t,e),t}(b);Object.defineProperty(V.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var q=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ArrayType",s}return h(t,e),t}(b);function Z(e,t){return void 0===t&&(t="Array<"+e.name+">"),new q(t,(function(t){return U.is(t)&&t.every(e.is)}),(function(t,n){var r=U.validate(t,n);if((0,m.nM)(r))return r;for(var i=r.right,a=i.length,s=i,o=[],l=0;l<a;l++){var c=i[l],u=e.validate(c,C(n,String(l),e,c));if((0,m.nM)(u))S(o,u.left);else{var d=u.right;d!==c&&(s===i&&(s=i.slice()),s[l]=d)}}return o.length>0?g(o):v(s)}),e.encode===w?w:function(t){return t.map(e.encode)},e)}var X=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.props=a,s._tag="InterfaceType",s}return h(t,e),t}(b);function J(e,t){void 0===t&&(t=E(e));var n=Object.keys(e),r=n.map((function(t){return e[t]})),i=n.length;return new X(t,(function(e){if(j.is(e)){for(var t=0;t<i;t++){var a=n[t],s=e[a];if(void 0===s&&!I.call(e,a)||!r[t].is(s))return!1}return!0}return!1}),(function(e,t){var a=j.validate(e,t);if((0,m.nM)(a))return a;for(var s=a.right,o=s,l=[],c=0;c<i;c++){var u=n[c],d=o[u],p=r[c],h=p.validate(d,C(t,u,p,d));if((0,m.nM)(h))S(l,h.left);else{var y=h.right;(y!==d||void 0===y&&!I.call(o,u))&&(o===s&&(o=f({},s)),o[u]=y)}}return l.length>0?g(l):v(o)}),k(r)?w:function(e){for(var t=f({},e),a=0;a<i;a++){var s=n[a],o=r[a].encode;o!==w&&(t[s]=o(e[s]))}return t},e)}var K=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.props=a,s._tag="PartialType",s}return h(t,e),t}(b);function Q(e,t){void 0===t&&(t=A(E(e)));var n=Object.keys(e),r=n.map((function(t){return e[t]})),i=n.length;return new K(t,(function(t){if(j.is(t)){for(var r=0;r<i;r++){var a=n[r],s=t[a];if(void 0!==s&&!e[a].is(s))return!1}return!0}return!1}),(function(t,r){var a=j.validate(t,r);if((0,m.nM)(a))return a;for(var s=a.right,o=s,l=[],c=0;c<i;c++){var u=n[c],d=o[u],p=e[u],h=p.validate(d,C(r,u,p,d));if((0,m.nM)(h))void 0!==d&&S(l,h.left);else{var y=h.right;y!==d&&(o===s&&(o=f({},s)),o[u]=y)}}return l.length>0?g(l):v(o)}),k(r)?w:function(e){for(var t=f({},e),a=0;a<i;a++){var s=n[a],o=e[s];void 0!==o&&(t[s]=r[a].encode(o))}return t},e)}!function(e){function t(t,n,r,i,a,s){var o=e.call(this,t,n,r,i)||this;return o.domain=a,o.codomain=s,o._tag="DictionaryType",o}h(t,e)}(b);var ee=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.types=a,s._tag="UnionType",s}return h(t,e),t}(b);function te(e,t){void 0===t&&(t=T(e));var n=function(e){var t=F(e[0]),n=Object.keys(t),r=e.length,i=function(n){for(var i=t[n].slice(),a=[t[n]],s=1;s<r;s++){var o=F(e[s])[n];if(void 0===o)return"continue-keys";if(o.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,o),a.push(o)}return{value:[n,a]}};e:for(var a=0,s=n;a<s.length;a++){var o=i(s[a]);if("object"==typeof o)return o.value;switch(o){case"continue-keys":continue e}}}(e);if(void 0!==n&&e.length>0){var r=n[0],i=n[1],a=i.length,s=function(e){for(var t=0;t<a;t++)if(-1!==i[t].indexOf(e))return t};return new ne(t,(function(t){if(j.is(t)){var n=s(t[r]);return void 0!==n&&e[n].is(t)}return!1}),(function(t,n){var i=j.validate(t,n);if((0,m.nM)(i))return i;var a=i.right,o=s(a[r]);if(void 0===o)return y(t,n);var l=e[o];return l.validate(a,C(n,String(o),l,a))}),k(e)?w:function(n){var i=s(n[r]);if(void 0===i)throw new Error("no codec found to encode value in union codec "+t);return e[i].encode(n)},e,r)}return new ee(t,(function(t){return e.some((function(e){return e.is(t)}))}),(function(t,n){for(var r=[],i=0;i<e.length;i++){var a=e[i],s=a.validate(t,C(n,String(i),a,t));if(!(0,m.nM)(s))return v(s.right);S(r,s.left)}return g(r)}),k(e)?w:function(n){for(var r=0,i=e;r<i.length;r++){var a=i[r];if(a.is(n))return a.encode(n)}throw new Error("no codec found to encode value in union type "+t)},e)}!function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.types=a,s._tag="IntersectionType",s}h(t,e)}(b);!function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.types=a,s._tag="TupleType",s}h(t,e)}(b);!function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ReadonlyType",s}h(t,e)}(b);!function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ReadonlyArrayType",s}h(t,e)}(b);!function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ExactType",s}h(t,e)}(b);new(function(e){function t(){var t=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="FunctionType",t}return h(t,e),t}(b));var ne=function(e){function t(t,n,r,i,a,s){var o=e.call(this,t,n,r,i,a)||this;return o.tag=s,o}return h(t,e),t}(ee);new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(e,t){return y(e,t)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),v,w)||this;return t._tag="AnyType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="ObjectType",t}return h(t,e),t}(b));function re(e,t,n){var r;return void 0===n&&(n="("+e.name+" | "+(((r=t).displayName||r.name||"<function"+r.length+">")+")")),new Y(n,(function(n){return e.is(n)&&t(n)}),(function(n,r){var i=e.validate(n,r);if((0,m.nM)(i))return i;var a=i.right;return t(a)?v(a):y(a,r)}),e.encode,e,t)}re($,Number.isInteger,"Integer"),function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.props=a,s._tag="StrictType",s}h(t,e)}(b);var ie,ae,se=n(55485);!function(e){e.prod="prod",e.preprod="preprod",e.qa="qa",e.fb="fb",e.dev="dev"}(ie||(ie={})),function(e){e.american="american",e.british="british",e.canadian="canadian",e.australian="australian"}(ae||(ae={}));var oe,le=z({".grammarly.com":null,".ppgr.io":null,".qagr.io":null}),ce=(0,p.pr)(Object.keys(le.keys),["grammarly.io","sumologic.com","microsoft.com","office.com","apple.com","google.com","mozilla.org","mozilla.net"]).map((function(e){return e.startsWith(".")?e.slice(1):e})),ue=te([J({state:G("disabled")}),J({state:G("enabled")}),J({state:G("test")})]),de=(J({version:D}),new b("HttpString",D.is,(function(e,t){return m.wE.chain(D.validate(e,t),(function(n){return/^(https?|wss?):\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(n)?v(n):y(e,t,"URL parsing failed ("+n+")")}))}),String)),pe=new b("MsStoreUrlString",D.is,(function(e,t){return m.wE.chain(D.validate(e,t),(function(n){return/ms-windows-store:\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(n)?v(n):y(e,t,"Edge URL parsing failed ("+n+")")}))}),String),me=new b("AllowedHttpString",de.is,(function(e,t){return m.wE.chain(de.validate(e,t),(function(n){for(var r=n.split("//")[1].split("/")[0].split(":")[0],i=0,a=ce;i<a.length;i++){var s=a[i];if(r.endsWith(s))return v(n)}var o="Domain ("+r+") is not allowed in "+ce.join(", ");return y(e,t,o)}))}),de.encode),he=z({TRACE:null,DEBUG:null,INFO:null,WARN:null,ERROR:null,FATAL:null,OFF:null}),fe=(Q({env:se.D.createStringEnum(ie,"Environment"),logLevel:he,accumulateCrashLogLevel:he,sendCrashOnLogLevel:he,collectLogs:B,collectCrashLogs:B,copyLogsToConsole:B,crashLogsCacheSize:$,debugLogsCacheSize:$,tracking:ue,alertCache:Q({prefix:D,version:D}),mutedCategoriesCache:Q({prefix:D,version:D}),outcomeScoreCache:Q({prefix:D,version:D}),userSettingsPrefix:D,userSettingsVersion:D,defaultDialect:se.D.createStringEnum(ae,"DialectEnum"),notificationShowTimeMs:$,maxNotificationsOnTheScreen:$,selfUpdate:Q({versionCheckInterval:$,selfUpdateDelay:$,canReloadCheckInterval:$,blockingModalAutoReloadDelay:$,retryFailedVersionCheckInterval:$,retryFailedVersionCheckLimit:$,debugBuildVersion:D,versionFilePath:D}),pingMaybeGnarDelay:$,domains:Q({cookie:le,localServer:D}),api:Q({authUrl:me,institutionUrl:me,snippetsUrl:me,institutionAdminUrl:me,institutionVoxUrl:me,institutionStyleGuideUrl:me,institutionStatisticsUrl:me,institutionSuggestionsUrl:me,institutionTonesUrl:me,tonesUrl:me,dapiUrl:me,doxUrl:me,irbisUrl:me,subscriptionUrl:me,discountUrl:me,capiWsUrl:me,capiApiUrl:me,gnarApi:Q({url:me}),felogUrl:me,felogDebugUrl:me,sumoUrl:me,crashLogUrl:me,onlineTestUrl:D,wsTest:me,proofitResultUrl:me,redirect:me,mailApiUrl:me,ssoUrl:me}),app:Q({nameWeb:D,nameDesktop:D}),urls:Q({free:D,account:me}),onlineEditor:Q({docId:me}),funnel:Q({base:me,resetPassword:me,accountDeleted:me,businessLanding:me,businessStyleguideLanding:me,businessUpgradeLanding:me,subscribe:me,upgrade:me,plans:me,signin:me,socialSignin:me,signup:me,mainPage:me,deleteSocialAccount:me,subscriptionCancellationSurvey:me,keyboardInstall:me,desktopAppInstall:me,claimedUserJoinFallback:me}),officeAddin:Q({installURL:me,infoURL:me}),crossPlatformOfficeAddin:Q({installURL:me,infoURL:me}),desktop:Q({windows:Q({installURL:me,infoURL:me}),mac:Q({installURL:me,infoURL:me})}),extension:Q({chrome:Q({installURL:me,infoURL:me}),firefox:Q({installURL:me,iconURL:me,infoURL:me}),safari:Q({installURL:me}),edge:Q({installURL:pe,infoURL:me}),edgeChromium:Q({installURL:me})}),edu:Q({adminPanelURL:me}),support:Q({login:me,email:D,mainPage:me,newRequest:me,contact:me,connectionTroubleshooting:me,emailExistsKBUrl:me,safariDownloadFilesKBUrl:me,rtfCompatibilityUrl:me,diagnosticTestPath:D,documentAcceptTrackedChanges:me}),privacyPolicy:me,termsOfService:me,account:Q({customize:me,subscription:me,adminSubscription:me,members:me,styleGuide:me,suggestions:me}),preconnectLinks:Z(de)}),d.VF((function(){return{env:ie.prod,logLevel:"INFO",accumulateCrashLogLevel:"DEBUG",sendCrashOnLogLevel:"ERROR",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,crashLogsCacheSize:100,debugLogsCacheSize:100,tracking:{state:"enabled"},alertCache:{prefix:"editorTsAlertCache",version:"4"},mutedCategoriesCache:{prefix:"mutedCategoriesCache",version:"0"},outcomeScoreCache:{prefix:"scoreCache",version:"0"},userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:ae.american,notificationShowTimeMs:7e3,maxNotificationsOnTheScreen:3,selfUpdate:{versionCheckInterval:59*u.wn,selfUpdateDelay:12*u.p7,canReloadCheckInterval:5*u.cK,blockingModalAutoReloadDelay:1*u.wn,retryFailedVersionCheckInterval:5*u.wn,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*u.p7,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://institution.grammarly.com/api/institution",snippetsUrl:"https://institution.ppgr.io/api/snippets",institutionAdminUrl:"https://institution.grammarly.com/api/institution/admin",institutionVoxUrl:"https://institution.grammarly.com/api/institution/vox",institutionStyleGuideUrl:"https://institution.grammarly.com/public/api/styleguides",institutionStatisticsUrl:"https://institution.grammarly.com/api/institution/statistics",institutionSuggestionsUrl:"https://institution.grammarly.com/api/institution/settings/suggestions",institutionTonesUrl:"https://institution.grammarly.com/api/institution/settings/tones",tonesUrl:"https://institution.ppgr.io/api/tones",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",discountUrl:"https://irbis.grammarly.com/api/discounts",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},felogUrl:"https://f-log-editor.grammarly.io",felogDebugUrl:"https://f-log-editor-debug.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect",mailApiUrl:"https://g-mail.grammarly.com",ssoUrl:"https://sso.grammarly.com"},app:{nameWeb:"editor",nameDesktop:"desktopEditor"},urls:{free:"/free",account:"https://account.grammarly.com"},onlineEditor:{docId:"https://app.grammarly.com/ddocs/"},funnel:{base:"https://www.grammarly.com",resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",businessLanding:"https://www.grammarly.com/business/e",businessStyleguideLanding:"https://www.grammarly.com/business/styleguide",businessUpgradeLanding:"https://www.grammarly.com/upgrade/business/try",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",plans:"https://www.grammarly.com/plans",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/signin/app/desktop-editor",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account",subscriptionCancellationSurvey:"https://www.grammarly.com/subscription-cancellation-survey",keyboardInstall:"https://www.grammarly.com/keyboard",desktopAppInstall:"https://www.grammarly.com/native",claimedUserJoinFallback:"https://redirect.grammarly.com/redirect?business_join=1"},officeAddin:{installURL:"https://download-office.grammarly.com/latest/GrammarlyAddInSetup.exe",infoURL:"https://www.grammarly.com/office-addin/windows"},crossPlatformOfficeAddin:{installURL:"https://appsource.microsoft.com/en-us/product/office/WA200001011?tab=Overview",infoURL:"https://www.grammarly.com/office-addin/mac"},desktop:{windows:{installURL:"https://download-editor.grammarly.com/windows/GrammarlySetup.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"https://download-editor.grammarly.com/osx/Grammarly.dmg",infoURL:"https://www.grammarly.com/native/mac"}},extension:{chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",iconURL:"https://addons.cdn.mozilla.net/user-media/addon_icons/566/566314-32.png",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://apps.apple.com/us/app/grammarly-for-safari/id1462114288?ls=1&mt=12"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"},edgeChromium:{installURL:"https://microsoftedge.microsoft.com/addons/detail/grammarly-for-microsoft-e/cnlefmmeadmemmdciolhbnfeacpdfbkd"}},edu:{adminPanelURL:"https://account.grammarly.com/admin"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",rtfCompatibilityUrl:"https://support.grammarly.com/hc/en-us/articles/115000091512-Preserve-text-formatting",diagnosticTestPath:"/diagnostic-test?origin=editor",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc"},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfService:"https://www.grammarly.com/terms",account:{customize:"https://redirect.grammarly.com/redirect?profile_dictionary=1",subscription:"https://account.grammarly.com/subscription",adminSubscription:"https://account.grammarly.com/admin/subscription",members:"https://account.grammarly.com/admin/members",styleGuide:"https://account.grammarly.com/admin/style-guide",suggestions:"https://redirect.grammarly.com/redirect?profile_suggestions=1"},preconnectLinks:["https://data.grammarly.com","https://gnar.grammarly.com","https://subscription.grammarly.com","https://auth.grammarly.com","https://f-log-editor.grammarly.com","https://static.institution.grammarly.com","https://fonts.gstatic.com"]}})));!function(e){e.createFromPlatformConfig=l.Pj(fe),e.Context=i.createContext(c.Y.invariantContent("PlatformConfig"))}(oe||(oe={}));var ge=n(81531),ye=n(63969),ve=n(30763),be=n(7046),we=n(50790),Ce=n(4948);var Se;!function(e){e.UnauthorizedError=({action:e})=>i.createElement(we.DI.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",i.createElement("br",null),i.createElement(Ce.J,{name:"login",className:ke.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>i.createElement(we.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. We’ll try to reconnect you in"," ",i.createElement(a.F.span,null,t.view((e=>e)))," seconds.",i.createElement("br",null),i.createElement(Ce.J,{name:"reconnect",className:ke.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const t=e.withReload(Ce.J,"UnknownConnectionError");return i.createElement(we.DI.TitledContent,{title:"Sorry, Unexpected Issue"},"A small error has occurred, causing an interruption of service.",i.createElement("br",null),i.createElement(t,{name:"reload-page",className:ke.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=i.useContext(oe.Context);return i.createElement(we.DI.TitledContent,{title:"Can’t Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",i.createElement("br",null),i.createElement(Ce.J,{name:"troubleshoot",className:ke.footerLink,href:e.support.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const t=e.withReload(Ce.J,"ClientConnectionErrorNotification");return i.createElement(we.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Please check your network stability and then reload this page.",i.createElement("br",null),i.createElement(t,{name:"reload-page",className:ke.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>i.createElement(we.DI.TitledContent,{title:"Can’t find this document"},"It looks like this document was removed or URL is incorrect.",i.createElement("br",null),i.createElement(Ce.J,{name:"goto-docs",className:ke.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const t=i.useContext(ve.m.Context),n=e.withReload(be.zx,"SelfUpdateBlocker");return i.createElement(we.DI.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",i.createElement(n,{name:"reload-page",className:ke.link},"reload")," ","the page ",t.hotkeyLabelR,".")},e.DesktopHardUpdate=({reloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.hardTitle},t.hard,i.createElement("br",null),i.createElement(Ce.J,{name:"reload-desktop",className:ke.footerLink,onClick:e},t.reload))},e.DesktopHardDownload=({downloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.hardTitle},t.hard,i.createElement("br",null),i.createElement(Ce.J,{name:"download-desktop",className:ke.footerLink,onClick:e},t.download))},e.SlowNetworkError=()=>i.createElement(we.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Grammarly may work slower than normal."),e.CheckingIsDownError=()=>i.createElement(we.DI.TitledContent,{title:"Text Checking Is Temporarily Unavailable"},"Grammarly is unable to check your text for errors at this time. We’re working to resolve the issue. Please check back soon."),e.Error=()=>{const e=i.useContext(oe.Context);return i.createElement(we.DI.TitledContent,{title:"Sorry, Something Went Wrong"},"Please try again later or"," ",i.createElement(be.zx,{name:"support",className:ke.link,href:e.support.login,target:"_blank"},"contact support")," ","now to report the issue.")},e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const n=i.useContext(ve.m.Context).proofitPayment,r=function(e,t,n){switch(e){case"creditCard":return t;case"payPal":return n;default:const r=`Unknown payment method: ${e}`;throw ge.C8.Logging.getLogger("ProofitView").warn(r),new Error(r)}}(e,n.creditCard,n.payPal);return i.createElement(we.DI.TitledContent,{title:"Order can not be processed"},i.createElement("div",null,r),"Please update your credit card information in the Manage Subscription section.",i.createElement("br",null),i.createElement(Ce.J,{name:"manage-subscription",className:ke.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=i.useContext(ve.m.Context).proofitOrderModal.card.paymentSuccess;return i.createElement(we.DI.TitledContent,{title:e.title},i.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=i.useContext(ve.m.Context).proofitOrderModal.card.paymentError,t=i.useContext(oe.Context);return i.createElement(we.DI.TitledContent,{title:e.title},i.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>i.createElement(we.DI.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>i.createElement(we.DI.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",i.createElement("br",null),i.createElement(Ce.J,{name:"goto-docs",className:ke.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>i.createElement(we.DI.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading has complex internal structure. Please edit your text (e.g., remove significantly long tables) or select another document.",i.createElement("br",null),i.createElement(Ce.J,{name:"goto-docs",className:ke.footerLink,onClick:e},"Go to your documents")),e.withReload=(e,t)=>class extends i.Component{render(){return i.createElement(e,Object.assign({},this.props,{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:window.location.href,timestamp:Date.now()}))}catch(e){}window.location.reload()}}))}},e.CopyToClipboardError=()=>{const e=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=i.useContext(oe.Context);return i.createElement(we.DI.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",i.createElement(Ce.J,{name:"support",className:ke.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:n})=>i.createElement(we.DI.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreaders’ marks has been emailed to you at ",n," in .docx format.",i.createElement("br",null),i.createElement(Ce.J,{name:"download",className:ke.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=i.useContext(ve.m.Context),t=i.useContext(oe.Context);return i.createElement(we.DI.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your document’s formatting, Grammarly’s formatting tools are temporarily disabled.",i.createElement("br",null),i.createElement(Ce.J,{name:"support",className:ke.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{title:t.title},t.text," ",i.createElement(be.zx,{name:"goto-docs",className:ke.link,onClick:e},t.link))},e.AlertsNothingFound=()=>i.createElement(we.DI.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DesktopSoftUpdate=({reloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.softTitle},t.soft,i.createElement("br",null),i.createElement(Ce.J,{name:"reload-desktop",className:ke.footerLink,onClick:e},t.reload))},e.DesktopSoftDownload=({downloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.softTitle},t.soft,i.createElement("br",null),i.createElement(Ce.J,{name:"download-desktop",className:ke.footerLink,onClick:e},t.download))},e.ThanksForFeedbackNotification=()=>i.createElement(we.DI.TitledContent,{title:"Your feedback has been sent"},"Thank you for helping make Grammarly better!"),e.DownloadDocumentNotFoundError=()=>{const e=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=i.useContext(ve.m.Context);return i.createElement(we.DI.Content,null,t.hotkeyUnsupported,i.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const n=i.useContext(ve.m.Context).fileSizeExceededNotification;return i.createElement(we.DI.TitledContent,{title:n.title},n.body,"windows"===e&&i.createElement(Ce.J,{name:"officeAddin",className:ke.footerLink,href:t,target:"_blank"},n.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=i.useContext(ve.m.Context).documentUploaded;return i.createElement(we.DI.Content,null,t.message,i.createElement("br",null),i.createElement(Ce.J,{name:"goto-doc",className:ke.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=i.useContext(ve.m.Context);return i.createElement(we.DI.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>i.createElement(we.DI.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",i.createElement(be.zx,{name:"document-accept-tracked-changes",className:ke.link,href:e,target:"_blank"},"here")," ","for details.");const t=(e,t)=>{switch(e){case Ee.switchToDenali:return t.switchToDenali;case Ee.feedbackSend:return t.feedbackSend;case Ee.statisticsError:return t.statisticsError;case Ee.referenceCopied:return t.referenceCopied;case Ee.documentCopied:return t.documentCopied;case Ee.isTemporaryDownloadError:return t.isTemporaryDownloadError;case Ee.documentUploadGeneralError:return t.documentUploadGeneralError;case Ee.documentIsEmpty:return t.documentIsEmpty;case Ee.noFileToUpload:return t.noFileToUpload;case Ee.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return(0,s.vE)(e)}};e.Generic=({type:e})=>{const n=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{title:t(e,n)})}}(Se||(Se={}));const Ie={display:"inline-flex",overflow:"unset",color:o.Il.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},xe={marginTop:ye.u.rem(.5),textDecoration:"none"},ke=ye.u.stylesheet({link:[Ie],footerLink:[Ie,xe]});var Ee;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(Ee||(Ee={}))},32380:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(27378),i=n(18208),a=n(90351),s=n(63969),o=n(30763),l=n(94793),c=n(50790),u=n(4948);const d=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return r.createElement(r.Fragment,null,r.createElement("span",null,e.alerts)," ",i._6(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return r.createElement(r.Fragment,null,e.transform);case"addToDictionary":return r.createElement(r.Fragment,null,r.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as “Will address”";case"markAsNotHelpful":return"Marked as “Not helpful”";default:return""}},p={display:"flex",marginTop:s.u.rem(-1.1),marginBottom:s.u.rem(-.5),alignItems:"center",justifyContent:"space-between"},m={marginTop:s.u.rem(.6),marginRight:s.u.rem(1),color:a.Il.CoreNeutral0,flexGrow:0,flexShrink:0},h={marginTop:s.u.rem(-.25),paddingRight:s.u.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},f={marginTop:s.u.rem(.6),maxWidth:s.u.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},g={marginRight:s.u.rem(1.4)},y=s.u.stylesheet({alertUndoWrapper:[p],alertUndoWrapperFlexible:[p,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[p,{flexWrap:"wrap"}],alertUndoBtn:[m],alertUndoIcon:[h],alertUndoContent:[f],alertUndoContentFlexible:[f,g],addToDictionary:[{wordBreak:"break-all"}]});var v;!function(e){const t={wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContent,icon:y.alertUndoIcon,button:y.alertUndoBtn};e.Standard=({action:n,params:i})=>r.createElement(c.DI.Content,null,r.createElement(e.Content,{action:n,content:d(i),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFullWidth})})),e.Flexible=({notification:n,onClose:i,action:a,params:s})=>r.createElement(c.SJ.Wrapper,{notification:n,onClose:i},r.createElement(c.DI.Content,null,r.createElement(e.Content,{action:a,content:d(s,{addToDictionary:y.addToDictionary}),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContentFlexible})}))),e.Content=({action:e,content:n,theme:i=t})=>{const a=r.useContext(o.m.Context);return r.createElement("div",{className:i.wrapper},r.createElement("div",{className:i.content},n),r.createElement(u.J,{name:"alertUndoButton",className:i.button,onClick:e},r.createElement(l.JO.Undo,{className:i.icon}),a.undo))}}(v||(v={}))},8313:(e,t,n)=>{n.d(t,{E2:()=>re,TG:()=>ie});var r,i=n(59312),a=n(27378),s=n(57050),o=n(40327),l=n(49524),c=n(5739),u=n(12187),d=n(38983),p=n(22232),m=n(19962),h=n(83078),f=n(5114),g=n(41046),y=n(41488),v=n(8125),b=n(81531);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(r||(r={}));class w{constructor(){this.completionTrigger=d.h.create(!1),this._steps={},this.cpuAndAnimationOptsExperiment=!1}isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){b.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=d.h.create(r.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:v.ZT,dotClicked:()=>t.set(r.Popup),popupClosed:()=>t.set(r.Passed),popupIgnored:()=>t.set(r.Hidden),actionTaken:()=>t.set(r.Passed)})}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}}var C=n(98403),S=n(77176),I=n(24209),x=n(85985),k=n(13444),E=n(41398),A=n(66310),T=n(76974),_=n(40151),L=n(90351),O=n(63969),R=n(24588),P=n(40219);const M=L.Il.BackgroundTooltip,F=O.u.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${O.u.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),N={width:O.u.rem(1),height:O.u.rem(1),borderRadius:O.u.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${F} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},D=O.u.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),$={width:O.u.rem(1),height:O.u.rem(1),borderRadius:O.u.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:O.u.rem(1),height:O.u.rem(1),borderRadius:O.u.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${D} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},B={margin:`${O.u.rem(-1.5)} 0 0 ${O.u.rem(-1.5)}`,padding:O.u.rem(1),borderRadius:O.u.percent(50),cursor:"pointer",pointerEvents:"all"},U={margin:`0 0 ${O.u.rem(.5)}`,color:L.Il.CoreNeutral0,fontWeight:"bold"},j={color:L.Il.CoreNeutral0,lineHeight:O.u.rem(1.25)},W={display:"flex",padding:`${O.u.rem(1)} ${O.u.rem(1.5)} ${O.u.rem(1.25)} ${O.u.rem(2)}`,width:O.u.rem(23),borderRadius:O.u.rem(P.fx),background:M,color:L.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},G={marginRight:O.u.rem(2),width:O.u.rem(2),flexShrink:0,alignSelf:"center"},H={stroke:R.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:L.Il.CoreNeutral0,fill:L.Il.CoreNeutral0}}},z={position:"absolute",top:O.u.percent(50),left:O.u.percent(50),zIndex:P.I3},Y={position:"relative",zIndex:P.VN},V={zIndex:P.w$},q={position:"absolute",zIndex:P.w$},Z=O.u.prefixedStylesheet("onboarding",{pulse:[N],pulseWrapper:[B],header:[U],description:[j],stepWrapper:[W],content:[{display:"inline-block"}],alertIcon:[G],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[H],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[z],containerDiv:[{}],editor:[Y],onboardingPopup:[V],notificationContainer:[q],pulseOptimized:[$]});var X=n(7046),J=n(94793),K=n(70920),Q=n(3656);const ee=({alignment:e,rect:t,onClose:n,className:r,children:i,icon:s,pinTargetRect:l,hideCloseButton:d,onMount:p})=>a.createElement(K.t.ByRelativeRect,Object.assign({rect:t,className:Z.notificationContainer},K.t.Alignment.toSelector(e),{pinTargetRect:l,withPin:!0}),a.createElement(c.F.div,Object.assign({},(0,u.Sh)(Z.stepWrapper,r),{mount:p}),(0,o.pipe)(s,f.fold((()=>a.createElement(J.JO.Grammarly,{className:Z.alertIcon})),(e=>a.createElement(e,{className:Z.alertIcon})))),i,!d&&a.createElement(X.zx,{name:"onboard-close",className:Z.closeIconWrapper,onClick:()=>n&&n()},a.createElement(J.JO.Close,{className:Z.closeIcon,width:12})))),te=e=>{var{title:t,description:n}=e,r=(0,i._T)(e,["title","description"]);return a.createElement(ee,Object.assign({},r),a.createElement("span",{className:Z.content},t&&a.createElement(Q.P1,{className:Z.header},t),a.createElement(Q.XY,{className:Z.description},n)))},ne=({className:e,onClick:t,customStyle:n,enableOptimizations:r})=>a.createElement(c.F.div,Object.assign({},(0,u.Sh)(Z.pulseWrapper,e),{style:n,onClick:()=>t&&t()}),a.createElement("div",{className:r?Z.pulseOptimized:Z.pulse}));var re;function ie(e){const t=a.useContext(ie.Context),{stepId:n,onboardingViewModel:r}=e,s=(0,i._T)(e,["stepId","onboardingViewModel"]),l=r||t,c=ae(n,l),u=a.useContext(y.l.Context).pipe(S.U((e=>e.rect)));return(0,o.pipe)(c,f.fold((()=>a.Children.only(e.children)),(e=>a.createElement(se,Object.assign({},s,{onboardingStep:e,enableOptimizations:l.cpuAndAnimationOptsExperiment,viewportRect:u})))))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(re||(re={}));const ae=(e,t)=>((0,p.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?f.some(t.subscribeForStep(e)):f.none);class se extends a.Component{constructor(){super(...arguments),this._subs=[],this._wrapperElement=d.h.create(f.none),this._containerElement=d.h.create(f.none),this._exactTargetRect=d.h.create(f.none),this._visibilityState=d.h.create(!1),this._spotStyle=d.h.create({}),this._onEventActionTaken=(e,t=!0)=>n=>{var r;const i=e.state.get();if("popup"===i||t&&"dot"===i){const i=n.target;if(m.pK(i))return;const a=t||m.q_(i,Z.containerDiv);if("findFirstButton"===(null===(r=this.props.dotPosition)||void 0===r?void 0:r.kind)&&!m.q2(i,"role","button"))return;a&&e.actionTaken()}else"dot"===i&&(n.preventDefault(),n.stopPropagation())}}componentWillUnmount(){const e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((e=>e.unsubscribe()))}componentDidMount(){const e=this.props.dotPosition;e?this._subs.push(I.T(this.context,this.props.onboardingStep.state.pipe(x.h((e=>"dot"===e||"popup"===e)))).pipe(k.g(500),E.M(this._wrapperElement,this._containerElement),A.w((([t,n,r])=>(0,o.pipe)((0,s.bc)(n,r),(0,s.og)(h.vB(((t,n)=>{switch(e.kind){case"findFirstButton":return C.Dx(e.buttonOrder).pipe(A.w((r=>T.of(void 0).pipe(k.g(500),S.U((()=>{const[i,a]=ce(t,n,e.position,r);return this._exactTargetRect.set(a),i}))))));case"dotAtPosition":return T.of(oe(e.position));default:return(0,p.vE)(e)}}))),f.fold((()=>_.E),l.y))))).subscribe((e=>{this._spotStyle.set(e),this._visibilityState.set(!0)}))):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return a.createElement(c.F.div,Object.assign({key:"onboarding-wrapper"},(0,u.Sh)(Z.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:e=>this._wrapperElement.set(f.fromNullable(e))}),a.createElement("div",Object.assign({key:"container",ref:e=>this._containerElement.set(f.fromNullable(e))},(0,u.Sh)(Z.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),d.h.combine(e.state,this._visibilityState,((t,n)=>{if(!n)return null;switch(t){case"dot":const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),a.createElement(ne,Object.assign({customStyle:this._spotStyle,key:"spot",enableOptimizations:this.props.enableOptimizations},(0,u.Sh)(Z.onboardingSpot,t),{onClick:()=>e.dotClicked()}));case"popup":return a.createElement(te,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(f.fold((()=>m.UL.empty),m.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:f.fromNullable(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(h.Fc)});default:return null}})))}}se.contextType=g.u.Context,se.defaultProps={alignment:"left"};const oe=e=>{switch(e){case re.leftTop:return{top:0,left:0};case re.leftCenter:return{top:"50%",left:0};case re.leftBottom:return{top:"100%",left:0};case re.rightTop:return{top:0,left:"100%"};case re.rightCenter:return{top:"50%",left:"100%"};case re.rightBottom:return{top:"100%",left:"100%"};case re.center:return{top:"50%",left:"50%"};default:return(0,p.vE)(e)}},le=(e,t,n)=>{switch(n){case re.rightTop:return{top:0,left:e.left-t.left+e.width};case re.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return(0,p.vE)(n)}},ce=(e,t,n,r)=>{const i=t.querySelectorAll('[role="button"]'),a=i.length>0&&(void 0===r?i[i.length-1]:i[r]);if(a){const t=m.UL.fromEl((0,s.MZ)(a)),r=m.UL.fromEl(e);return[le(t,r,n),f.some(t)]}return[{top:"50%",left:"50%"},f.none]};!function(e){e.Context=a.createContext(null),e.ContextMock=({children:t})=>a.createElement(e.Context.Provider,{value:new w,children:t})}(ie||(ie={}))},25781:(e,t,n)=>{var r,i;n.d(t,{R:()=>r}),function(e){e.ESC_CODE=27}(r||(r={})),function(e){e.isLeftMouseButtom=function(e){return 1===e.which||0===e.button}}(i||(i={}))},92843:(e,t,n)=>{n.d(t,{v:()=>r,u:()=>i});var r,i,a=n(90329),s=n(57050),o=n(40327),l=n(64681),c=n(5114),u=n(93756),d=n(1065);!function(e){function t(t,n,r){return function(i){return e.fromMutation((function(a){(0,o.pipe)(i,e.forEach((function(e,n){return a.set(n,u.t$(t(n,e)))}),(function(e,t,r){return(0,o.pipe)(n(r,e,t),(function(e){var t=e[0],n=e[1];return a.set(r,u.Hk(t,n))}))}),(function(e,t){return a.set(t,u.F2(r(t,e)))})))}))}}function n(t,n,r){return function(i){return e.fromMutation((function(a){(0,o.pipe)(i,e.forEach((function(e,n){return t(n,e)&&a.set(n,u.t$(e))}),(function(e,t,r){return n(r,e,t)&&a.set(r,u.Hk(e,t))}),(function(e,t){return r(t,e)&&a.set(t,u.F2(e))})))}))}}function r(e){return function(t,n,r){return function(a){var s=i.iso().unwrap(a),o=e.empty;return s.forEach((function(i,a){o=e.concat(o,u.g_((function(e){return t(a,e)}),(function(e){return r(a,e)}),(function(e,t){return n(a,e,t)}))(i))})),o}}}e.reduce=function(e,t,n,r){return function(a){var s=i.iso().unwrap(a),o=e;return s.forEach((function(e,i){o=u.g_((function(e){return t(o,e,i)}),(function(e){return r(o,e,i)}),(function(e,t){return n(o,e,t,i)}))(e)})),o}},e.mapWithIndex=t,e.map=function(e,n,r){return t((function(t,n){return e(n)}),(function(e,t,r){return n(t,r)}),(function(e,t){return r(t)}))},e.filterWithIndex=n,e.filter=function(e,t,r){return n((function(t,n){return e(n)}),(function(e,n,r){return t(n,r)}),(function(e,t){return r(t)}))},e.foldMapWithIndex=r,e.foldMap=function(e){return function(t,n,i){return r(e)((function(e,n){return t(n)}),(function(e,t,r){return n(t,r)}),(function(e,t){return i(t)}))}},e.forEach=function(e,t,n){return function(r){i.iso().unwrap(r).forEach((function(r,i){u.g_((function(t){return e(t,i)}),(function(e){return n(e,i)}),(function(e,n){return t(e,n,i)}))(r)}))}},e.fromMutation=function(e){var t=i.empty();return e(t),i.iso().wrap(t)},e.empty=function(){return i.iso().wrap(i.empty())},e.concat=function(e,t,n){var r=i.iso();return r.wrap(i.concat(e,r.unwrap(t),r.unwrap(n)))},e.inverse=function(e){var t=i.iso();return(0,o.pipe)(t.unwrap(e),a.UI(d.LF),t.wrap)},e.getEq=function(e,t){return l.Eh(i.getEq(e,t))},e.toJSON=function(e){return Array.from(i.iso().unwrap(e))},e.getShow=function(e,t){return i.getShow(e,t)},e.isEmpty=function(e){return 0===i.iso().unwrap(e).size}}(r||(r={})),function(e){e.iso=function(){return l.k4()},e.empty=function(){return new Map};e.concat=function(e,t,n){var r=new Map(t);return n.forEach((function(t,n){r.has(n)?(0,o.pipe)(function(e,t,n){return u.Eh(e,e).equals(t,n)?c.some(n):u.Eh(e,e).equals(t,d.LF(n))?c.none:u.nM(t)?u.g_((function(){return c.some(u.t$(t.left))}),(function(e){return c.some(u.Hk(t.left,e))}),(function(n,r){return e.equals(t.left,r)?c.none:c.some(u.Hk(t.left,r))}))(n):u.tO(t)?u.g_((function(){return c.none}),(0,s.ls)(u.F2,c.some),(function(e,t){return c.some(u.F2(t))}))(n):u.g_((function(){return c.some(u.t$(t.left))}),(0,s.ls)(u.F2,c.some),(function(n,r){return e.equals(t.left,r)?c.none:c.some(u.Hk(t.left,r))}))(n)}(e,r.get(n),t),c.fold((function(){r.delete(n)}),(function(e){return r.set(n,e)}))):r.set(n,t)})),r},e.inverse=a.UI(d.LF),e.getEq=function(e,t){return a.Eh(e,u.Eh(t,t))},e.getShow=function(e,t){return a.ZN(e,u.ZN(t,t))}}(i||(i={}))},43675:(e,t,n)=>{n.d(t,{yi:()=>p,QT:()=>h,kH:()=>m,uz:()=>g});var r=n(90329),i=n(57050),a=n(40327),s=n(92843),o=n(95195),l=n(5114),c=n(83078),u=n(93756),d=n(1065);function p(e){return function(t,n){return s.v.fromMutation((function(r){return t.forEach((function(t,i){if(n.has(i)){var a=n.get(i);e.equals(t,a)||r.set(i,u.Hk(t,a))}else r.set(i,u.t$(t))})),n.forEach((function(n,i){if(t.has(i)){var a=t.get(i);e.equals(a,n)||r.set(i,u.Hk(a,n))}else r.set(i,u.F2(n))})),r}))}}var m,h=f(i.yR);f(d.LF);function f(e){return function(t,n,r){var i=new Map(n),c=new Map;return s.u.iso().unwrap(r).forEach((function(n,r){(0,a.pipe)(n,e,t(l.fromNullable(i.get(r))),u.Pd((function(e){return c.set(r,e)}),l.fold((function(){i.delete(r)}),(function(e){return i.set(r,e)}))))})),c.size>0?o.t$({recovered:i,rejected:c}):o.F2(i)}}function g(e){return function(t,n){var i=[],s=new Map(t);return n.forEach((function(t,n){(0,a.pipe)(r.FP(e)(n,s),c.ew((function(){return i.push(n)})))})),i}}!function(e){e.createStrict=function(e){return function(t){return u.g_((function(n){return l.isNone(t)?u.t$("can not remove non existent entry: left("+e.show(n)+")"):e.equals(t.value,n)?u.F2(l.none):u.t$("can not remove non equal entry: target("+e.show(t.value)+") left("+e.show(n)+")")}),(function(n){return l.isSome(t)?u.t$("can not add existent entry: target("+e.show(t.value)+") right("+e.show(n)+")"):u.F2(l.some(n))}),(function(n,r){return e.equals(n,r)?u.t$("can not apply update with equals parts: left("+e.show(n)+") right("+e.show(r)+")"):l.isNone(t)?u.t$("can not update non existent entry: left("+e.show(n)+") right("+e.show(r)+")"):e.equals(t.value,n)?u.F2(l.some(r)):u.t$("can not apply update on non equal entry: target("+e.show(t.value)+") left("+e.show(n)+") right("+e.show(r)+")")}))}},e.createLoose=function(e){return function(t){return u.g_((function(n){return l.isNone(t)?u.t$("can not remove non existent entry: left("+e.show(n)+")"):e.equals(t.value,n)?u.F2(l.none):u.Hk("removed non equal entry: target("+e.show(t.value)+") left("+e.show(n)+")",l.none)}),(function(n){return l.isSome(t)?u.Hk("existent entry was overwritten: target("+e.show(t.value)+") right("+e.show(n)+")",l.some(n)):u.F2(l.some(n))}),(function(n,r){var i=e.equals(n,r)?l.some("unexpected equal parts in provided update"):l.none;return l.isNone(t)?u.Hk((0,a.pipe)(i,l.map((function(e){return e+", "})),l.getOrElse((function(){return""})))+"update applied on non existent entry: left("+e.show(n)+") right("+e.show(r)+")",l.some(r)):e.equals(t.value,n)?(0,a.pipe)(i,l.map((function(t){return t+": left("+e.show(n)+") right("+e.show(r)+")"})),l.fold((function(){return u.F2(l.some(r))}),(function(e){return u.Hk(e,l.some(r))}))):u.Hk((0,a.pipe)(i,l.map((function(e){return e+", "})),l.getOrElse((function(){return""})))+"update applied on non equal entry: target("+e.show(t.value)+") left("+e.show(n)+") right("+e.show(r)+")",l.some(r))}))}}}(m||(m={}))},35407:(e,t,n)=>{n.d(t,{Pj:()=>s,GG:()=>o});var r=n(17771),i=n(19429),a=n(55415),s=function(e){return function(t){return i.r1.map((0,r.g)(i.r1)(e,t),(function(e){var t=e[0],n=e[1];return(0,a.Fx)(t,n)}))}},o=(0,r.Y)(i.r1)},51072:(e,t,n)=>{n.d(t,{Vi:()=>i});var r=n(95574);function i(e){return e().then(r.MH)}},1065:(e,t,n)=>{n.d(t,{LF:()=>a});var r=n(95195),i=n(93756);function a(e){return(0,i.WP)(e)?(0,i.Hk)(e.right,e.left):(0,r.LF)(e)}},84347:(e,t,n)=>{e.exports=n(87612)},17123:e=>{var t={};t.create=function(e,t){var n=document.createElement(e);return n.className=t,n},t.appendTo=function(e,t){return t.appendChild(e),e},t.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},t.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},t.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},t.queryChildren=function(e,n){return Array.prototype.filter.call(e.childNodes,(function(e){return t.matches(e,n)}))},e.exports=t},97490:e=>{var t=function(e){this.element=e,this.events={}};t.prototype.bind=function(e,t,n){void 0===this.events[e]&&(this.events[e]=[]);var r={capture:!1};this.events[e].push(t),this.element.addEventListener(e,t,n?Object.assign({},r,n):r)},t.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},t.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var n=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===n&&(n=new t(e),this.eventElements.push(n)),n},n.prototype.bind=function(e,t,n,r){this.eventElement(e).bind(t,n,r)},n.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=n},48928:e=>{e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},95889:(e,t,n)=>{var r=n(17123),i=t.toInt=function(e){return parseInt(e,10)||0};function a(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},t.outerWidth=function(e){return i(r.css(e,"width"))+i(r.css(e,"paddingLeft"))+i(r.css(e,"paddingRight"))+i(r.css(e,"borderLeftWidth"))+i(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.add(n[r])},t.stopScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.remove(n[r])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},87612:(e,t,n)=>{var r=n(81489),i=n(41835),a=n(64114);e.exports={initialize:i,update:a,destroy:r}},48300:e=>{e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},81489:(e,t,n)=>{var r=n(95889),i=n(17123),a=n(6109);e.exports=function(e){var t=a.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),a.remove(e))}},3708:(e,t,n)=>{var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var s=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;a(e,"top",e.scrollTop+s*t.containerHeight),i(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var s=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;a(e,"left",e.scrollLeft+s*t.containerWidth),i(e),r.stopPropagation()}))}(e,r.get(e))}},35672:(e,t,n)=>{var r=n(95889),i=n(17123),a=n(6109),s=n(86057),o=n(21459);function l(e,t){var n=null,a=null;var l=function(i){!function(i){var a=n+i*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=a<0?0:a>s?s:a;var l=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;o(e,"left",l)}(i.pageX-a),s(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarX,"mousedown",(function(s){a=s.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),s.stopPropagation(),s.preventDefault()}))}function c(e,t){var n=null,a=null;var l=function(i){!function(i){var a=n+i*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=a<0?0:a>s?s:a;var l=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));o(e,"top",l)}(i.pageY-a),s(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarY,"mousedown",(function(s){a=s.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),s.stopPropagation(),s.preventDefault()}))}e.exports=function(e){var t=a.get(e);l(e,t),c(e,t)}},94742:(e,t,n)=>{var r=n(95889),i=n(17123),a=n(6109),s=n(86057),o=n(21459);function l(e,t){var n=!1;t.event.bind(e,"mouseenter",(function(){n=!0})),t.event.bind(e,"mouseleave",(function(){n=!1}));t.event.bind(t.ownerDocument,"keydown",(function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)){var l=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||l){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(r.isEditable(c))return}var u=0,d=0;switch(a.which){case 37:u=a.metaKey?-t.contentWidth:a.altKey?-t.containerWidth:-30;break;case 38:d=a.metaKey?t.contentHeight:a.altKey?t.containerHeight:30;break;case 39:u=a.metaKey?t.contentWidth:a.altKey?t.containerWidth:30;break;case 40:d=a.metaKey?-t.contentHeight:a.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=a.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=a.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=a.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}o(e,"top",e.scrollTop-d),o(e,"left",e.scrollLeft+u),s(e),function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(u,d)&&a.preventDefault()}}}))}e.exports=function(e){l(e,a.get(e))}},83476:(e,t,n)=>{var r=n(6109),i=n(86057),a=n(21459);function s(e,t){var n=!1;function r(r){var s=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),o=s[0],l=s[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=window.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var a=r.scrollHeight-r.clientHeight;if(a>0&&!(0===r.scrollTop&&n>0||r.scrollTop===a&&n<0))return!0;var s=r.scrollLeft-r.clientWidth;if(s>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===s&&t>0))return!0}return!1})(o,l)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a(e,"top",l?e.scrollTop-l*t.settings.wheelSpeed:e.scrollTop+o*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a(e,"left",o?e.scrollLeft+o*t.settings.wheelSpeed:e.scrollLeft-l*t.settings.wheelSpeed),n=!0):(a(e,"top",e.scrollTop-l*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+o*t.settings.wheelSpeed)),i(e),(n=n||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(o,l))&&(r.stopPropagation(),r.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r)}e.exports=function(e){s(e,r.get(e))}},15335:(e,t,n)=>{var r=n(6109),i=n(86057);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,r.get(e))}},23405:(e,t,n)=>{var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),s=r[0],o=r[1];t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?a(e,"top",o?e.scrollTop-o*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed):t.scrollbarXActive&&!t.scrollbarYActive&&a(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-o*t.settings.wheelSpeed):(a(e,"top",e.scrollTop-o*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e)}void 0!==window.onwheel?t.event.bind(e,"wheel",n,{passive:!0}):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n,{passive:!0})}(e,r.get(e))}},19539:(e,t,n)=>{var r=n(95889),i=n(6109),a=n(86057),s=n(21459);function o(e,t){var n=null,o={top:0,left:0};function l(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var c=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?c=!0:(c=!1,l())})),t.event.bind(window,"mouseup",(function(){c&&(c=!1,l())})),t.event.bind(window,"keyup",(function(){c&&(c=!1,l())})),t.event.bind(window,"mousemove",(function(t){if(c){var u={x:t.pageX,y:t.pageY},d={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<d.left+3?(o.left=-5,r.startScrolling(e,"x")):u.x>d.right-3?(o.left=5,r.startScrolling(e,"x")):o.left=0,u.y<d.top+3?(o.top=d.top+3-u.y<5?-5:-20,r.startScrolling(e,"y")):u.y>d.bottom-3?(o.top=u.y-d.bottom+3<5?5:20,r.startScrolling(e,"y")):o.top=0,0===o.top&&0===o.left?l():n||(n=setInterval((function(){i.get(e)?(s(e,"top",e.scrollTop+o.top),s(e,"left",e.scrollLeft+o.left),a(e)):clearInterval(n)}),50))}}))}e.exports=function(e){o(e,i.get(e))}},76905:(e,t,n)=>{var r=n(95889),i=n(6109),a=n(86057),s=n(21459);function o(e,t,n,r){function o(t,n){s(e,"top",e.scrollTop-n),s(e,"left",e.scrollLeft-t),a(e)}var l={},c=0,u={},d=null,p=!1,m=!1;function h(){p=!0}function f(){p=!1}function g(e){return e.targetTouches?e.targetTouches[0]:e}function y(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function v(e){if(y(e)){m=!0;var t=g(e);l.pageX=t.pageX,l.pageY=t.pageY,c=(new Date).getTime(),null!==d&&clearInterval(d),e.stopPropagation()}}function b(n){if(!m&&t.settings.swipePropagation&&v(n),!p&&m&&y(n)){var r=g(n),i={pageX:r.pageX,pageY:r.pageY},a=i.pageX-l.pageX,s=i.pageY-l.pageY;o(a,s),l=i;var d=(new Date).getTime(),h=d-c;h>0&&(u.x=a/h,u.y=s/h,c=d),function(n,r){var i=e.scrollTop,a=e.scrollLeft,s=Math.abs(n),o=Math.abs(r);if(o>s){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(s>o&&(n<0&&a===t.contentWidth-t.containerWidth||n>0&&0===a))return!t.settings.swipePropagation;return!0}(a,s)&&(n.stopPropagation(),n.preventDefault())}}function w(){!p&&m&&(m=!1,t.settings.swipeEasing&&(clearInterval(d),d=setInterval((function(){i.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(d):(o(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(d)}),10)))}n?(t.event.bind(window,"touchstart",h),t.event.bind(window,"touchend",f),t.event.bind(e,"touchstart",v),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",w)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",h),t.event.bind(window,"pointerup",f),t.event.bind(e,"pointerdown",v),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",w)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",h),t.event.bind(window,"MSPointerUp",f),t.event.bind(e,"MSPointerDown",v),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",w)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&o(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},41835:(e,t,n)=>{var r=n(6109),i=n(86057),a={"click-rail":n(3708),"drag-scrollbar":n(35672),keyboard:n(94742),wheel:n(83476),passiveWheel:n(23405),touch:n(76905),selection:n(19539)},s=n(15335);e.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach((function(t){a[t](e)})),s(e),i(e)}},6109:(e,t,n)=>{var r=n(95889),i=n(48300),a=n(17123),s=n(97490),o=n(48928),l={};function c(e,t){var n,o,l=this;for(var c in l.settings=i(),t)l.settings[c]=t[c];function u(){e.classList.add("ps--focus")}function d(){e.classList.remove("ps--focus")}l.containerWidth=null,l.containerHeight=null,l.contentWidth=null,l.contentHeight=null,l.isRtl="rtl"===a.css(e,"direction"),l.isNegativeScroll=(o=e.scrollLeft,e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=o,n),l.negativeScrollAdjustment=l.isNegativeScroll?e.scrollWidth-e.clientWidth:0,l.event=new s,l.ownerDocument=e.ownerDocument||document,l.scrollbarXRail=a.appendTo(a.create("div","ps__scrollbar-x-rail"),e),l.scrollbarX=a.appendTo(a.create("div","ps__scrollbar-x"),l.scrollbarXRail),l.scrollbarX.setAttribute("tabindex",0),l.event.bind(l.scrollbarX,"focus",u),l.event.bind(l.scrollbarX,"blur",d),l.scrollbarXActive=null,l.scrollbarXWidth=null,l.scrollbarXLeft=null,l.scrollbarXBottom=r.toInt(a.css(l.scrollbarXRail,"bottom")),l.isScrollbarXUsingBottom=l.scrollbarXBottom==l.scrollbarXBottom,l.scrollbarXTop=l.isScrollbarXUsingBottom?null:r.toInt(a.css(l.scrollbarXRail,"top")),l.railBorderXWidth=r.toInt(a.css(l.scrollbarXRail,"borderLeftWidth"))+r.toInt(a.css(l.scrollbarXRail,"borderRightWidth")),a.css(l.scrollbarXRail,"display","block"),l.railXMarginWidth=r.toInt(a.css(l.scrollbarXRail,"marginLeft"))+r.toInt(a.css(l.scrollbarXRail,"marginRight")),a.css(l.scrollbarXRail,"display",""),l.railXWidth=null,l.railXRatio=null,l.scrollbarYRail=a.appendTo(a.create("div","ps__scrollbar-y-rail"),e),l.scrollbarY=a.appendTo(a.create("div","ps__scrollbar-y"),l.scrollbarYRail),l.scrollbarY.setAttribute("tabindex",0),l.event.bind(l.scrollbarY,"focus",u),l.event.bind(l.scrollbarY,"blur",d),l.scrollbarYActive=null,l.scrollbarYHeight=null,l.scrollbarYTop=null,l.scrollbarYRight=r.toInt(a.css(l.scrollbarYRail,"right")),l.isScrollbarYUsingRight=l.scrollbarYRight==l.scrollbarYRight,l.scrollbarYLeft=l.isScrollbarYUsingRight?null:r.toInt(a.css(l.scrollbarYRail,"left")),l.scrollbarYOuterWidth=l.isRtl?r.outerWidth(l.scrollbarY):null,l.railBorderYWidth=r.toInt(a.css(l.scrollbarYRail,"borderTopWidth"))+r.toInt(a.css(l.scrollbarYRail,"borderBottomWidth")),a.css(l.scrollbarYRail,"display","block"),l.railYMarginHeight=r.toInt(a.css(l.scrollbarYRail,"marginTop"))+r.toInt(a.css(l.scrollbarYRail,"marginBottom")),a.css(l.scrollbarYRail,"display",""),l.railYHeight=null,l.railYRatio=null}function u(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var n=o();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),l[n]=new c(e,t),l[n]},t.remove=function(e){delete l[u(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return l[u(e)]}},86057:(e,t,n)=>{var r=n(95889),i=n(17123),a=n(6109),s=n(21459);function o(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=a.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=o(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=o(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,r),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,s(e,"left",0)),n.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,s(e,"top",0))}},21459:(e,t,n)=>{var r=n(6109),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var a=r.get(e);"top"===t&&n>=a.contentHeight-a.containerHeight&&((n=a.contentHeight-a.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=a.contentWidth-a.containerWidth&&((n=a.contentWidth-a.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===a.lastTop&&(a.lastTop=e.scrollTop),void 0===a.lastLeft&&(a.lastLeft=e.scrollLeft),"top"===t&&n<a.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>a.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<a.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>a.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==a.lastTop&&(e.scrollTop=a.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==a.lastLeft&&(e.scrollLeft=a.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},64114:(e,t,n)=>{var r=n(95889),i=n(17123),a=n(6109),s=n(86057),o=n(21459);e.exports=function(e){var t=a.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),s(e),o(e,"top",e.scrollTop),o(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},86474:(e,t,n)=>{n.d(t,{Z:()=>a,UI:()=>Xn});var r={};n.r(r),n.d(r,{audit:()=>M.U,auditTime:()=>F.e,buffer:()=>N.f,bufferCount:()=>$,bufferTime:()=>W.e,bufferToggle:()=>Y,bufferWhen:()=>Z.R,catchError:()=>X.K,combineAll:()=>J,combineLatest:()=>K.a,concat:()=>Q.z,concatAll:()=>ee.u,concatMap:()=>te.b,concatMapTo:()=>ne,count:()=>re,debounce:()=>se.D,debounceTime:()=>k.b,defaultIfEmpty:()=>oe.d,delay:()=>A.g,delayWhen:()=>le.j,dematerialize:()=>ce.D,distinct:()=>de,distinctUntilChanged:()=>he.x,distinctUntilKeyChanged:()=>fe,elementAt:()=>be,endWith:()=>we.l,every:()=>Ce,exhaust:()=>xe,exhaustMap:()=>Ae.z,expand:()=>Te,filter:()=>w.h,finalize:()=>Oe.x,find:()=>Re,findIndex:()=>Fe,first:()=>T.P,flatMap:()=>Ke.VS,groupBy:()=>Ne.v,ignoreElements:()=>De,isEmpty:()=>Ue,last:()=>Ye,map:()=>C.U,mapTo:()=>x.h,materialize:()=>Ve.i,max:()=>Ze,merge:()=>Xe.T,mergeAll:()=>Je.J,mergeMap:()=>Ke.zg,mergeMapTo:()=>Qe,mergeScan:()=>et,min:()=>rt,multicast:()=>it.O,observeOn:()=>at.QV,onErrorResumeNext:()=>ot,pairwise:()=>ut.G,partition:()=>pt,pluck:()=>S.j,publish:()=>mt.n,publishBehavior:()=>ft,publishLast:()=>yt,publishReplay:()=>L._,race:()=>bt,reduce:()=>qe.u,refCount:()=>O.x,repeat:()=>wt.r,repeatWhen:()=>Ct,retry:()=>xt,retryWhen:()=>At,sample:()=>Lt.U,sampleTime:()=>Rt,scan:()=>I.R,sequenceEqual:()=>Nt,share:()=>Ut.B,shareReplay:()=>jt.d,single:()=>Wt,skip:()=>zt.T,skipLast:()=>Yt,skipUntil:()=>Zt.u,skipWhile:()=>Xt.n,startWith:()=>E.O,subscribeOn:()=>Jt.R,switchAll:()=>Kt.B,switchMap:()=>b.w,switchMapTo:()=>Qt.c,take:()=>ve.q,takeLast:()=>He.h,takeUntil:()=>en.R,takeWhile:()=>tn.o,tap:()=>v.b,throttle:()=>nn.P,throttleTime:()=>rn.p,throwIfEmpty:()=>ye.T,timeInterval:()=>sn,timeout:()=>ln.V,timeoutWith:()=>cn.L,timestamp:()=>un,toArray:()=>mn,window:()=>hn,windowCount:()=>yn,windowTime:()=>Sn,windowToggle:()=>_n,windowWhen:()=>Rn,withLatestFrom:()=>Fn.M,zip:()=>Hn,zipAll:()=>zn});var i,a,s=n(59312),o=n(5114),l=n(19429),c=n(45614),u=n(93756),d=n(57050),p=n(24209),m=n(83401),h=n(2844),f=n(40151),g=n(76974),y=n(44586),v=n(2834),b=n(66310),w=n(85985),C=n(77176),S=n(24713),I=n(67434),x=n(17343),k=n(78674),E=n(93508),A=n(13444),T=n(50628),_=n(40327),L=n(48403),O=n(95343);!function(e){e.split=function(e){var t=(0,_.pipe)(e,L._(1),O.x());return{animation:(0,_.pipe)(t,w.h((function(e){return"root"===e.action.key})),C.U((function(e){return{key:e.key,action:e.action.action}}))),action:(0,_.pipe)(t,w.h((function(e){return"children"===e.action.key})),C.U((function(e){return{key:e.key,action:e.action.action}})))}}}(i||(i={})),function(e){function t(e){return l.UI(e)}function n(e){return l.I_(e)}function r(e,t){return function(n){return(0,d.zG)(e,w.h((function(e){return e.key===t&&e.action.animationType===n})),C.U((function(e){return e.action})),E.O({kind:"init"}),b.w((function(e){return"end"===e.kind?(0,g.of)(e):(0,d.zG)((0,g.of)({kind:"end",animationType:n}),A.g("start"===e.kind?L:_))})),T.P())}}e.fromSideEffect=function(e,t){return function(n){return(0,p.T)(n.pipe(v.b(e),b.w((function(){return m.C}))),(r=t)instanceof y.y?r:(0,g.of)(r));var r}},e.patchState=t,e.extendActions=n,e.patch=function(e,r){return(0,d.ls)(n(e),t(r))},e.replaceActions=function(e){return l.I_((0,d.ls)(e,b.w((function(){return m.C}))))},e.composeKnot=function(e){return l.VF((function(t){return(0,h.aj)(Object.keys(e).map((function(n){return e[n](t.pipe(w.h((function(e){return e.key===n})),C.U((function(e){return e.action})))).pipe(C.U((function(e){var t;return(t={})[n]=e,t})))}))).pipe(C.U((function(e){return e.reduce((function(e,t){return(0,s.pi)((0,s.pi)({},e),t)}))})))}))},e.composeUnion=function(e,t){return l.VF((function(n){return(0,d.zG)(t(n),b.w((function(t){var r=Object.entries(t)[0],i=r[0],a=r[1];return(0,d.zG)(n,w.h((function(e){return e.key===a})),C.U((function(e){return e.action})),e[a],C.U((function(e){var t;return(0,s.pi)((0,s.pi)({},e),((t={})[i]=a,t))})))})))}))},e.animatingFlow=function(e,t){return function(n){var l=i.split(n),m=l.action,h=l.animation,g=0;return(0,d.zG)(m,w.h((function(e){return e.key===String(g)})),S.j("action"),e,I.R(function(e,t){return function(n,r){var i,a,s=t(),l=o.fromNullable(n[s]),c=(0,d.zG)(l,o.map((function(e){return e.children}))),p=e(c,r);if(o.isNone(p))return(i={})[s]={root:o.none,children:r},i;var m=((a={})[s+1]={root:u.EK(p.value),children:r},a),h=u.IS(p.value);return o.isSome(h)&&o.isSome(c)&&(m[s]={root:h,children:c.value}),m}}(t,(function(){return g})),{}),v.b((function(e){return g=Number(Object.keys(e).pop())})),b.w(function(e,t){return function(n){var i=String(t()-1),l=String(t()),u=(0,d.zG)(o.fromNullable(n[i]),o.chain((function(e){return e.root})),o.map(r(e,i)),o.getOrElse((function(){return f.E})),x.h(c.EG(i))),m=(0,d.zG)(n[l].root,o.map(r(e,l)),o.getOrElse((function(){return f.E})),x.h((function(e){var t=(0,s.pi)({},e);return t[l]=(0,s.pi)((0,s.pi)({},t[l]),{root:o.none}),t})));return(0,d.zG)((0,p.T)(u,m),I.R((function(e,t){return t(e)}),n),k.b(a),E.O(n))}}(h,(function(){return g}))))}};var a=100,_=500,L=10*_}(a||(a={}));var R=n(27378),P=n(32952),M=n(50133),F=n(66081),N=n(36919),D=n(98036);function $(e,t){return void 0===t&&(t=null),function(n){return n.lift(new B(e,t))}}var B=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?j:U}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),U=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bufferSize=n,r.buffer=[],r}return s.ZT(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(D.L),j=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return s.ZT(t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,r=t.startBufferEvery,i=t.buffers,a=t.count;this.count++,a%r==0&&i.push([]);for(var s=i.length;s--;){var o=i[s];o.push(e),o.length===n&&(i.splice(s,1),this.destination.next(o))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var r=t.shift();r.length>0&&n.next(r)}e.prototype._complete.call(this)},t}(D.L),W=n(17160),G=n(14601),H=n(72500),z=n(57655);function Y(e,t){return function(n){return n.lift(new V(e,t))}}var V=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new q(e,this.openings,this.closingSelector))},e}(),q=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.closingSelector=r,i.contexts=[],i.add((0,H.D)(i,n)),i}return s.ZT(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new G.w,r={buffer:[],subscription:n};t.push(r);var i=(0,H.D)(this,e,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},t}(z.L),Z=n(77150),X=n(91224);function J(e){return function(t){return t.lift(new h.Ms(e))}}var K=n(57091),Q=n(94123),ee=n(44212),te=n(71032);function ne(e,t){return(0,te.b)((function(){return e}),t)}function re(e){return function(t){return t.lift(new ie(e,t))}}var ie=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new ae(e,this.predicate,this.source))},e}(),ae=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return s.ZT(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(D.L),se=n(87847),oe=n(31524),le=n(87938),ce=n(15789),ue=n(46601);function de(e,t){return function(n){return n.lift(new pe(e,t))}}var pe=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new me(e,this.keySelector,this.flushes))},e}(),me=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=n,i.values=new Set,r&&i.add((0,ue.ft)(r,new ue.IY(i))),i}return s.ZT(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(e){return void n.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(ue.Ds),he=n(28043);function fe(e,t){return(0,he.x)((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}var ge=n(2270),ye=n(4750),ve=n(23063);function be(e,t){if(e<0)throw new ge.W;var n=arguments.length>=2;return function(r){return r.pipe((0,w.h)((function(t,n){return n===e})),(0,ve.q)(1),n?(0,oe.d)(t):(0,ye.T)((function(){return new ge.W})))}}var we=n(39719);function Ce(e,t){return function(n){return n.lift(new Se(e,t,n))}}var Se=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new Ie(e,this.predicate,this.thisArg,this.source))},e}(),Ie=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.predicate=n,a.thisArg=r,a.source=i,a.index=0,a.thisArg=r||a,a}return s.ZT(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(D.L);function xe(){return function(e){return e.lift(new ke)}}var ke=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Ee(e))},e}(),Ee=function(e){function t(t){var n=e.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return s.ZT(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add((0,ue.ft)(e,new ue.IY(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(ue.Ds),Ae=n(97884);function Te(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new _e(e,t,n))}}var _e=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new Le(e,this.project,this.concurrent,this.scheduler))},e}(),Le=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.project=n,a.concurrent=r,a.scheduler=i,a.index=0,a.active=0,a.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(a.buffer=[]),a}return s.ZT(t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,i=e.index;t.subscribeToProjection(n,r,i)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(e);try{var i=(0,this.project)(e,r);if(this.scheduler){var a={subscriber:this,result:i,value:e,index:r};this.destination.add(this.scheduler.schedule(t.dispatch,0,a))}else this.subscribeToProjection(i,e,r)}catch(e){n.error(e)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.destination.add((0,ue.ft)(e,new ue.IY(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(ue.Ds),Oe=n(9223);function Re(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Pe(e,n,!1,t))}}var Pe=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new Me(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),Me=function(e){function t(t,n,r,i,a){var s=e.call(this,t)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=a,s.index=0,s}return s.ZT(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,r=this.index++;try{t.call(n||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(D.L);function Fe(e,t){return function(n){return n.lift(new Pe(e,n,!0,t))}}var Ne=n(78146);function De(){return function(e){return e.lift(new $e)}}var $e=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Be(e))},e}(),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.ZT(t,e),t.prototype._next=function(e){},t}(D.L);function Ue(){return function(e){return e.lift(new je)}}var je=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new We(e))},e}(),We=function(e){function t(t){return e.call(this,t)||this}return s.ZT(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(D.L),Ge=n(33346),He=n(51639),ze=n(49524);function Ye(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?(0,w.h)((function(t,n){return e(t,n,r)})):ze.y,(0,He.h)(1),n?(0,oe.d)(t):(0,ye.T)((function(){return new Ge.K})))}}var Ve=n(83840),qe=n(38934);function Ze(e){var t="function"==typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t};return(0,qe.u)(t)}var Xe=n(95093),Je=n(68425),Ke=n(85321);function Qe(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?(0,Ke.zg)((function(){return e}),t,n):("number"==typeof t&&(n=t),(0,Ke.zg)((function(){return e}),n))}function et(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new tt(e,t,n))}}var tt=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new nt(e,this.accumulator,this.seed,this.concurrent))},e}(),nt=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.accumulator=n,a.acc=r,a.concurrent=i,a.hasValue=!1,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return s.ZT(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,e,t)}catch(e){return n.error(e)}this.active++,this._innerSub(r)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var t=new ue.IY(this),n=this.destination;n.add(t);var r=(0,ue.ft)(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(ue.Ds);function rt(e){var t="function"==typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t};return(0,qe.u)(t)}var it=n(24755),at=n(80544),st=n(17733);function ot(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&(0,st.k)(e[0])&&(e=e[0]),function(t){return t.lift(new lt(e))}}var lt=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new ct(e,this.nextSources))},e}(),ct=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=n,r}return s.ZT(t,e),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new ue.IY(this),n=this.destination;n.add(t);var r=(0,ue.ft)(e,t);r!==t&&n.add(r)}else this.destination.complete()},t}(ue.Ds),ut=n(16118);function dt(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function pt(e,t){return function(n){return[(0,w.h)(e,t)(n),(0,w.h)(dt(e,t))(n)]}}var mt=n(62962),ht=n(95300);function ft(e){return function(t){return(0,it.O)(new ht.X(e))(t)}}var gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return s.ZT(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),G.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),G.w.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(P.xQ);function yt(){return function(e){return(0,it.O)(new gt)(e)}}var vt=n(38062);function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&(0,st.k)(e[0])&&(e=e[0]),t.lift.call(vt.S3.apply(void 0,[t].concat(e)))}}var wt=n(36303);function Ct(e){return function(t){return t.lift(new St(e))}}var St=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new It(e,this.notifier,t))},e}(),It=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return s.ZT(t,e),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new P.xQ;try{t=(0,this.notifier)(this.notifications)}catch(t){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=(0,ue.ft)(t,new ue.IY(this))},t}(ue.Ds);function xt(e){return void 0===e&&(e=-1),function(t){return t.lift(new kt(e,t))}}var kt=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Et(e,this.count,this.source))},e}(),Et=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return s.ZT(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(D.L);function At(e){return function(t){return t.lift(new Tt(e,t))}}var Tt=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new _t(e,this.notifier,this.source))},e}(),_t=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i}return s.ZT(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new P.xQ;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=(0,ue.ft)(r,new ue.IY(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(ue.Ds),Lt=n(13718),Ot=n(82506);function Rt(e,t){return void 0===t&&(t=Ot.P),function(n){return n.lift(new Pt(e,t))}}var Pt=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Mt(e,this.period,this.scheduler))},e}(),Mt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(Ft,n,{subscriber:i,period:n})),i}return s.ZT(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(D.L);function Ft(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}function Nt(e,t){return function(n){return n.lift(new Dt(e,t))}}var Dt=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new $t(e,this.compareTo,this.comparator))},e}(),$t=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new Bt(t,i))),i}return s.ZT(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,t=e._a,n=e._b,r=e.comparator;t.length>0&&n.length>0;){var i=t.shift(),a=n.shift(),s=!1;try{s=r?r(i,a):i===a}catch(e){this.destination.error(e)}s||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(D.L),Bt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.parent=n,r}return s.ZT(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(D.L),Ut=n(38194),jt=n(34891);function Wt(e){return function(t){return t.lift(new Gt(e,t))}}var Gt=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Ht(e,this.predicate,this.source))},e}(),Ht=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return s.ZT(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new Ge.K)},t}(D.L),zt=n(55935);function Yt(e){return function(t){return t.lift(new Vt(e))}}var Vt=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new ge.W}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new D.L(e)):t.subscribe(new qt(e,this._skipCount))},e}(),qt=function(e){function t(t,n){var r=e.call(this,t)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return s.ZT(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,i=this._ring,a=i[r];i[r]=e,this.destination.next(a)}},t}(D.L),Zt=n(42833),Xt=n(93497),Jt=n(92403),Kt=n(69935),Qt=n(598),en=n(2768),tn=n(8473),nn=n(25031),rn=n(55721),an=n(18625);function sn(e){return void 0===e&&(e=Ot.P),function(t){return(0,an.P)((function(){return t.pipe((0,I.R)((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),(0,C.U)((function(e){var t=e.current,n=e.last,r=e.value;return new on(r,t-n)})))}))}}var on=function(){return function(e,t){this.value=e,this.interval=t}}(),ln=n(52342),cn=n(97425);function un(e){return void 0===e&&(e=Ot.P),(0,C.U)((function(t){return new dn(t,e.now())}))}var dn=function(){return function(e,t){this.value=e,this.timestamp=t}}();function pn(e,t,n){return 0===n?[t]:(e.push(t),e)}function mn(){return(0,qe.u)(pn,[])}function hn(e){return function(t){return t.lift(new fn(e))}}var fn=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new gn(e),r=t.subscribe(n);return r.closed||n.add((0,ue.ft)(this.windowBoundaries,new ue.IY(n))),r},e}(),gn=function(e){function t(t){var n=e.call(this,t)||this;return n.window=new P.xQ,t.next(n.window),n}return s.ZT(t,e),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new P.xQ;t.next(n)},t}(ue.Ds);function yn(e,t){return void 0===t&&(t=0),function(n){return n.lift(new vn(e,t))}}var vn=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new bn(e,this.windowSize,this.startWindowEvery))},e}(),bn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.destination=t,i.windowSize=n,i.startWindowEvery=r,i.windows=[new P.xQ],i.count=0,t.next(i.windows[0]),i}return s.ZT(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,a=i.length,s=0;s<a&&!this.closed;s++)i[s].next(e);var o=this.count-r+1;if(o>=0&&o%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var l=new P.xQ;i.push(l),n.next(l)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(D.L),wn=n(44362),Cn=n(67827);function Sn(e){var t=Ot.P,n=null,r=Number.POSITIVE_INFINITY;return(0,Cn.K)(arguments[3])&&(t=arguments[3]),(0,Cn.K)(arguments[2])?t=arguments[2]:(0,wn.k)(arguments[2])&&(r=Number(arguments[2])),(0,Cn.K)(arguments[1])?t=arguments[1]:(0,wn.k)(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new In(e,n,r,t))}}var In=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new kn(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),xn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return s.ZT(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(P.xQ),kn=function(e){function t(t,n,r,i,a){var s=e.call(this,t)||this;s.destination=t,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=a,s.windows=[];var o=s.openWindow();if(null!==r&&r>=0){var l={subscriber:s,window:o,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:a};s.add(a.schedule(Tn,n,l)),s.add(a.schedule(An,r,c))}else{var u={subscriber:s,window:o,windowTimeSpan:n};s.add(a.schedule(En,n,u))}return s}return s.ZT(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var i=t[r];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new xn;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(D.L);function En(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function An(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,i=e.windowCreationInterval,a=n.openWindow(),s=this,o={action:s,subscription:null},l={subscriber:n,window:a,context:o};o.subscription=r.schedule(Tn,t,l),s.add(o.subscription),s.schedule(e,i)}function Tn(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}function _n(e,t){return function(n){return n.lift(new Ln(e,t))}}var Ln=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new On(e,this.openings,this.closingSelector))},e}(),On=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=(0,H.D)(i,n,n)),i}return s.ZT(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var a=n[i];a.window.error(t),a.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,r=-1;++r<n;){var i=t[r];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,n,r,i){if(e===this.openings){var a=void 0;try{a=(0,this.closingSelector)(t)}catch(e){return this.error(e)}var s=new P.xQ,o=new G.w,l={window:s,subscription:o};this.contexts.push(l);var c=(0,H.D)(this,a,l);c.closed?this.closeWindow(this.contexts.length-1):(c.context=l,o.add(c)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,i=n.subscription;t.splice(e,1),r.complete(),i.unsubscribe()}},t}(z.L);function Rn(e){return function(t){return t.lift(new Pn(e))}}var Pn=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Mn(e,this.closingSelector))},e}(),Mn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=n,r.openWindow(),r}return s.ZT(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow(i)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,r=this.window=new P.xQ;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=(0,H.D)(this,n))},t}(z.L),Fn=n(41398),Nn=n(81967),Dn=n(85451);function $n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),(0,Nn.n)(e,void 0).lift(new Bn(n))}var Bn=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Un(e,this.resultSelector))},e}(),Un=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:void 0,i}return s.ZT(t,e),t.prototype._next=function(e){var t=this.iterators;(0,st.k)(e)?t.push(new Wn(e)):"function"==typeof e[Dn.hZ]?t.push(new jn(e[Dn.hZ]())):t.push(new Gn(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe());else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return}var i=!1,a=[];for(r=0;r<t;r++){var s,o=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),o.done)return void n.complete();a.push(o.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(D.L),jn=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),Wn=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Dn.hZ]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Gn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return s.ZT(t,e),t.prototype[Dn.hZ]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return(0,ue.ft)(this.observable,new ue.IY(this))},t}(ue.Ds);function Hn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call($n.apply(void 0,[t].concat(e)))}}function zn(e){return function(t){return t.lift(new Bn(e))}}var Yn=n(5739),Vn="root",qn=n(73975);function Zn(e){return(0,d.ls)(he.x(),I.R((function(t,n){return e.reduceWithIndex(n,new Map,(function(e,n,r){var i=t.get(e);return void 0!==i?(n.set(e,i),i.next(r)):n.set(e,new ht.X(r)),n}))}),new Map),he.x((t=qn.f7((function(){return!0})),{equals:function(e,n){if(e===n)return!0;if(e.size===n.size){for(var r=e.keys(),i=void 0;!(i=r.next()).done;)if(!n.has(i.value)||!t.equals(e.get(i.value),n.get(i.value)))return!1;return!0}return!1}}).equals));var t}var Xn,Jn=function(){function e(e){this._keySelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Kn(e,this._keySelector))},e}(),Kn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r._keySelector=n,r.attemptedToUnsubscribe=!1,r.count=0,r._currentGroup=o.none,r}return(0,s.ZT)(t,e),t.prototype._next=function(e){var t=this,n=this._keySelector(e);(0,_.pipe)(this._currentGroup,o.fold((function(){return t._createGroup(n,e)}),(function(r){var i=r.key,a=r.group;i!==n?(a.complete(),t._currentGroup=o.none,t._createGroup(n,e)):a.closed||a.next(e)})))},t.prototype._createGroup=function(e,t){var n=new ht.X(t);this._currentGroup=o.some({key:e,group:n}),this.destination.next(new Ne.T(e,n,this))},t.prototype._error=function(e){(0,_.pipe)(this._currentGroup,o.map((function(t){return t.group.error(e)}))),this._currentGroup=o.none,this.destination.error(e)},t.prototype._complete=function(){(0,_.pipe)(this._currentGroup,o.map((function(e){return e.group.complete()}))),this._currentGroup=o.none,this.destination.complete()},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(D.L);function Qn(e,t){return(0,_.pipe)(t,Xn.mapAction((function(t){return{key:e,action:t}})),l.UI((function(t){return null===t?t:R.cloneElement(t,{key:e})})))}function er(e,t,n){var r,i;if(nr(e)&&t.length>0)return{grid:e.grid,child:er(e.child,t,n)};if(tr(e)&&t.length>0){var a=t[0],o=t.slice(1);return{grid:e.grid,children:(0,s.pi)((0,s.pi)({},e.children),(r={},r[a]=er(e.children[a],o,n),r))}}if(rr(e)&&t.length>0)return{foldable:e.foldable,of:er(e.of,t,n)};if(ir(e)&&t.length>0){a=t[0],o=t.slice(1);return{tag:e.tag,members:(0,s.pi)((0,s.pi)({},e.members),(i={},i[a]=er(e.members[a],o,n),i))}}return n(e)}function tr(e){return"children"in e}function nr(e){return"child"in e}function rr(e){return"foldable"in e}function ir(e){return"members"in e}function ar(e){return R.createElement(Yn.F.Fragment,{children:e})}!function(e){function t(e){return nr(e)?function(n){var r=new Proxy({},{get:function(){return t(e.child)({children:null,notify:n.notify,state:n.state||f.E})}});return e.grid({children:r,state:f.E,notify:d.Q1})}:tr(e)?function(n){return(0,_.pipe)(n.state,Zn(c.IM),C.U((function(r){var i=(0,_.pipe)(e.children,c.Su((function(e,i){return Qn(e,t(i))({children:null,notify:n.notify,state:r.get(e)||f.E})})));return e.grid({children:i,state:r.get(Vn)||f.E,notify:function(e){return n.notify({key:Vn,action:e})}})})),ar)}:rr(e)?function(n){return(0,_.pipe)(n.state,Zn(e.foldable),I.R((function(r,i){var a=new Map;return i.forEach((function(i,s){var o=r.get(s);if(void 0!==o)a.set(s,o);else{var l=Qn(s,t(e.of));a.set(s,l({children:null,notify:n.notify,state:i}))}})),a}),new Map),C.U((function(e){var t=new Array;return e.forEach((function(e){return t.push(e)})),t})),ar)}:ir(e)?function(n){return(0,_.pipe)(n.state,(r=e.tag,function(e){return e.pipe((function(e){return e.lift(new Jn((function(e){return e[r]})))}))}),C.U((function(r){return Qn(r.key,t(e.members[r.key]))({children:null,notify:n.notify,state:r})})),ar);var r}:e}function n(e,t,r){return tr(e)?{grid:n(e.grid,t,r),children:e.children}:rr(e)?{foldable:e.foldable,of:n(e.of,t,r)}:function(n){return e({children:n.children,notify:(0,_.pipe)(n.notify,l.I_(r)),state:(0,_.pipe)(n.state,C.U(t))})}}!function(t){t.empty=function(){return null},t.make=function(t){return e.Grid.make(t)}}(e.Node||(e.Node={})),function(e){e.make=function(e){return function(t){var n=t.children,i=t.state,a=t.notify;return R.createElement(e,{slots:n,state:i,notify:function(e){return function(){return a(e)}},view:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,_.pipe)(i,S.j.apply(r,e),he.x())}})}}}(e.Grid||(e.Grid={})),function(e){e.make=function(e,t){return{grid:e,child:t}}}(e.Composite||(e.Composite={})),function(e){e.make=function(e,t){return{grid:e,children:t}}}(e.Knot||(e.Knot={})),function(e){e.make=function(e){return{grid:function(e){return ar((0,_.pipe)(e.children,c.KM((function(e,t){return t}))))},children:e}}}(e.Group||(e.Group={})),function(e){e.make=function(e,t){return{foldable:e,of:t}}}(e.List||(e.List={})),function(t){t.make=function(e,t){return{tag:e,members:t}},t.asOption=function(t){return{tag:"_tag",members:{Some:e.Group.make({value:t}),None:e.Node.empty}}}}(e.Union||(e.Union={})),function(e){e.make=function(e,t){return function(n){var r;return R.createElement(Yn.F.div,((r={})["data-purpose"]="animation-wrapper",r.children=n.children.children,r.className=(0,_.pipe)(n.state,C.U((0,d.ls)(o.map((function(n){return e[n]||t[n]})),o.toUndefined)),he.x()),r.onAnimationStart=(0,_.pipe)(n.state,C.U(o.fold((function(){return d.Q1}),(function(e){return function(){return n.notify({kind:"start",animationType:e})}})))),r.onAnimationEnd=(0,_.pipe)(n.state,C.U(o.fold((function(){return d.Q1}),(function(e){return function(){return n.notify({kind:"end",animationType:e})}})))),r))}}}(e.Transition||(e.Transition={})),function(t){t.make=function(t,n){return e.List.make(c.IM,e.Knot.make(t,{children:n}))}}(e.Animated||(e.Animated={})),e.mount=function(e,n){var r=new P.xQ;return t(e)({children:null,notify:function(e){return r.next(e)},state:(0,_.pipe)(n(r),L._(1),O.x())})},e.patch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return function(n){return er(n,e,t)}}},e.mapAction=function(e){return function(t){return n(t,d.yR,e)}},e.contramapState=function(e){return function(t){return n(t,e,d.yR)}},e.squash=t,e.promap=n}(Xn||(Xn={}))},90329:(e,t,n)=>{n.d(t,{hX:()=>k,DZ:()=>E,Eh:()=>I,uZ:()=>x,ZN:()=>g,ZQ:()=>b,xb:()=>y,P5:()=>S,FP:()=>C,UI:()=>A,cq:()=>w,VO:()=>v});n(95195);var r=n(73975),i=n(57050),a=n(5114);function s(e){return function(t,n){if(void 0===n){var r=s(e);return function(e){return r(t,e)}}for(var i,o=n.entries();!(i=o.next()).done;){var l=i.value,c=l[0],u=l[1];if(e.equals(c,t))return a.some([c,u])}return a.none}}function o(e){var t=s(e);return function(n,r){if(void 0===r){var s=o(e);return function(e){return s(n,e)}}return(0,i.zG)(t(n,r),a.map((function(e){e[0];return e[1]})))}}function l(e,t){var n=s(e);return function(r,i){if(void 0===i){var s=l(e,t);return function(e){return s(e,r)}}for(var o,c=r.entries();!(o=c.next()).done;){var u=o.value,d=u[0],p=u[1],m=n(d,i);if(a.isNone(m)||!e.equals(d,m.value[0])||!t.equals(p,m.value[1]))return!1}return!0}}var c=new Map;var u=function(e,t){for(var n,r=new Map,i=e.entries();!(n=i.next()).done;){var a=n.value,s=a[0],o=a[1];r.set(s,t(s,o))}return r},d=function(e,t){for(var n,r=new Map,i=e.entries();!(n=i.next()).done;){var s=n.value,o=s[0],l=t(o,s[1]);a.isSome(l)&&r.set(o,l.value)}return r},p=function(e,t){for(var n,r=new Map,i=e.entries();!(n=i.next()).done;){var a=n.value,s=a[0],o=a[1];t(s,o)&&r.set(s,o)}return r},m=function(e,t){return u(e,(function(e,n){return t(n)}))},h=function(e,t){return p(e,(function(e,n){return t(n)}))},f=function(e,t){return d(e,(function(e,n){return t(n)}))};var g=function(e,t){return{show:function(n){var r="";return n.forEach((function(n,i){r+="["+e.show(i)+", "+t.show(n)+"], "})),""!==r&&(r=r.substring(0,r.length-2)),"new Map(["+r+"])"}}},y=function(e){return 0===e.size},v=function(e){return function(t){return Array.from(t.values()).sort(e.compare)}};var b=function(e){var t=s(e);return function(e,n){return function(r){var i,s=t(e,r);return a.isNone(s)?((i=new Map(r)).set(e,n),i):s.value[1]!==n?((i=new Map(r)).set(s.value[0],n),i):r}}},w=function(e){var t=s(e);return function(e,n){return function(r){var i=t(e,r);if(a.isNone(i))return a.none;var s=new Map(r);return s.set(i.value[0],n(i.value[1])),a.some(s)}}},C=s,S=o,I=(new Map,function(e,t){var n=l(e,t);return(0,r.f7)((function(e,t){return n(e,t)&&n(t,e)}))}),x=function(e,t){var n=s(e);return{concat:function(e,r){if(e===c)return r;if(r===c)return e;for(var i,s=new Map(e),o=r.entries();!(i=o.next()).done;){var l=i.value,u=l[0],d=l[1],p=n(u,e);a.isSome(p)?s.set(p.value[0],t.concat(p.value[1],d)):s.set(u,d)}return s},empty:c}};var k=function(e){return function(t){return h(t,e)}},E=function(e){return function(t){return f(t,e)}},A=function(e){return function(t){return m(t,e)}}},18756:(e,t,n)=>{function r(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!r(e)||!e.equals(t))}n.d(t,{AC:()=>s});function a(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return a(t)}return r(e)?e.hashCode():s(String(e))}function s(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}class o extends Error{constructor(e){let t="";for(const n of e.slice(0,2)){let e="";e=n instanceof Error?`${n.name}(${n.message})`:`${n}`,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=o,this.__proto__=o.prototype}errors(){return this.errorsRef.slice()}}Error;class l extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=l,this.__proto__=l.prototype}}Error;class c extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=c,this.__proto__=c.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function m(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function h(e,t,n){const r=e,i=r.prototype,a="fantasy-land/",s="equals",o=a+s,l="map",c=a+l,u="ap",d=a+u,p=a+"of",h="chain",f=a+h,g="chainRec",y=a+g;i.equals?i[o]=i.equals:n&&(i[o]=m(n.equals)),i.map?i[c]=i.map:t&&(i[c]=m(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=m(t.ap)),r.pure?r[p]=r.pure:t&&(r[p]=t.of),i.chain?i[f]=i.chain:t&&(i[f]=m(t.chain)),r.chainRec?r[y]=r.chainRec:t&&(r[y]=t.chainRec)}class f{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:y(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new l("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?y(this.value):b(this.value)}toOption(){return this._isRight?I(this.value):x}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?a(this.value)<<2:a(this.value)<<3}static pure(e){return new v(e)}static left(e){return y(e)}static right(e){return b(e)}static map2(e,t,n){return e.isLeft()?e:t.isLeft()?t:b(n(e.value,t.value))}static map3(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:b(r(e.value,t.value,n.value))}static map4(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:b(i(e.value,t.value,n.value,r.value))}static map5(e,t,n,r,i,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:b(a(e.value,t.value,n.value,r.value,i.value))}static map6(e,t,n,r,i,a,s){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:a.isLeft()?a:b(s(e.value,t.value,n.value,r.value,i.value,a.value))}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.isRight())return e;const r=e.value;if(r.isRight())return b(r.value);n=r.value}}}class g extends f{constructor(e){super(e,"left")}}function y(e){return new g(e)}class v extends f{constructor(e){super(e,"right")}}function b(e){return new v(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:f.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>f.tailRecM(t,(t=>e(f.left,f.right,t)))};h(f,w,w);class C{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new l("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?x:I(e(this.value))}flatMap(e){return this._isEmpty?x:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?x:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:a(this.value)<<2}static of(e){return null!=e?I(e):x}static some(e){return new C(e,!1)}static none(){return x}static empty(){return x}static pure(e){return I(e)}static map2(e,t,n){return e.nonEmpty()&&t.nonEmpty()?I(n(e.value,t.value)):x}static map3(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?I(r(e.value,t.value,n.value)):x}static map4(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?I(i(e.value,t.value,n.value,r.value)):x}static map5(e,t,n,r,i,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?I(a(e.value,t.value,n.value,r.value,i.value)):x}static map6(e,t,n,r,i,a,s){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?I(s(e.value,t.value,n.value,r.value,i.value,a.value)):x}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.nonEmpty())return x;{const t=e.value;if(t.isRight())return I(t.value);n=t.value}}}}class S extends C{constructor(e){super(e,!1)}}function I(e){return new S(e)}const x=new class extends C{constructor(){super(void 0,!0)}},k={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:C.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>C.tailRecM(t,(t=>e(f.left,f.right,t)))};h(C,k,k);class E{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?L(new l("try.failed()")):T(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:L(new l(`Predicate does not hold for ${this.value}`))}catch(e){return L(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return L(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?E.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:E.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return L(e)}}toOption(){return this._isSuccess?I(this.value):x}toEither(){return this._isSuccess?b(this.value):y(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,a(this.value)}static of(e){try{return T(e())}catch(e){return L(e)}}static pure(e){return E.success(e)}static unit(){return R}static success(e){return T(e)}static failure(e){return L(e)}static raise(e){return L(e)}static map2(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return T(n(e.value,t.value))}catch(e){return L(e)}}static map3(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return T(r(e.value,t.value,n.value))}catch(e){return L(e)}}static map4(e,t,n,r,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return T(i(e.value,t.value,n.value,r.value))}catch(e){return L(e)}}static map5(e,t,n,r,i,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return T(a(e.value,t.value,n.value,r.value,i.value))}catch(e){return L(e)}}static map6(e,t,n,r,i,a,s){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(a.isFailure())return a;try{return T(s(e.value,t.value,n.value,r.value,i.value,a.value))}catch(e){return L(e)}}static tailRecM(e,t){let n=e;for(;;)try{const e=t(n);if(e.isFailure())return e;const r=e.get();if(r.isRight())return T(r.value);n=r.value}catch(e){return L(e)}}}class A extends E{constructor(e){super(e,"success")}}function T(e){return new A(e)}class _ extends E{constructor(e){super(e,"failure")}}function L(e){return new _(e)}const O={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:E.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>E.tailRecM(t,(t=>e(f.left,f.right,t)))};h(E,O,O);const R=T(void 0);class P{static of(e){return new M(e)}static empty(){return N}static collection(...e){return new $(e)}static cancelAll(e){let t=null;for(const n of e)try{n.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new o(t)}}class M extends P{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class F{constructor(){this._funIsDummy=!0}cancel(){}}const N=new F;class D{static of(e){return new B(e)}static empty(){return new U}static alreadyCanceled(){return j}static collection(...e){return new $(e)}}class $ extends D{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{P.cancelAll(this._refs)}finally{delete this._refs}}}class B extends M{isCanceled(){return null===this.thunk}}class U extends D{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const j=new class extends F{isCanceled(){return!0}};new class extends F{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class W{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof W){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new W}static of(e){return new W(P.of(e))}}class G{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{P.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||P.empty()}static empty(){return new G}static collection(...e){return new G(e)}}class H{constructor(e){this._underlying=e||N,this._chained=!1}update(e){if(!e)throw new u("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=N,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new u("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,n=!0;for(;t&&n;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,n=!!e}else t._underlying||(t=void 0),n=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof F||t.update(e)}else this.cancel();return this}static empty(){return new H}}class z{toString(){return this.label.toUpperCase()}}const Y=1e3,V=1e6,q=1e3*V,Z=60*q,X=60*Z,J=24*X,K=9007199254740992,Q=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,n){return e>n?K:e<-n?-9007199254740992:e*t}const te=new class extends z{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return Q(e/1e3)}toMillis(e){return Q(e/(V/1))}toSeconds(e){return Q(e/(q/1))}toMinutes(e){return Q(e/(Z/1))}toHours(e){return Q(e/(X/1))}toDays(e){return Q(e/(J/1))}};const ne=new class extends z{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,Q(K/1e3))}toMicros(e){return e}toMillis(e){return Q(e/1e3)}toSeconds(e){return Q(e/(q/Y))}toMinutes(e){return Q(e/(Z/Y))}toHours(e){return Q(e/(X/Y))}toDays(e){return Q(e/(J/Y))}};const re=new class extends z{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,V/1,Q(K/(V/1)))}toMicros(e){return ee(e,1e3,Q(K/1e3))}toMillis(e){return e}toSeconds(e){return Q(e/1e3)}toMinutes(e){return Q(e/6e4)}toHours(e){return Q(e/(X/V))}toDays(e){return Q(e/(J/V))}};const ie=new class extends z{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,q/1,Q(K/(q/1)))}toMicros(e){return ee(e,q/Y,Q(K/(q/Y)))}toMillis(e){return ee(e,1e3,Q(K/1e3))}toSeconds(e){return e}toMinutes(e){return Q(e/60)}toHours(e){return Q(e/3600)}toDays(e){return Q(e/86400)}};const ae=new class extends z{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,Z/1,Q(K/(Z/1)))}toMicros(e){return ee(e,Z/Y,Q(K/(Z/Y)))}toMillis(e){return ee(e,6e4,Q(K/6e4))}toSeconds(e){return ee(e,60,Q(K/60))}toMinutes(e){return e}toHours(e){return Q(e/60)}toDays(e){return Q(e/1440)}};const se=new class extends z{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,X/1,Q(K/(X/1)))}toMicros(e){return ee(e,X/Y,Q(K/(X/Y)))}toMillis(e){return ee(e,X/V,Q(K/(X/V)))}toSeconds(e){return ee(e,3600,Q(K/3600))}toMinutes(e){return ee(e,60,Q(K/60))}toHours(e){return e}toDays(e){return Q(e/24)}};const oe=new class extends z{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,J/1,Q(K/(J/1)))}toMicros(e){return ee(e,J/Y,Q(K/(J/Y)))}toMillis(e){return ee(e,J/V,Q(K/(J/V)))}toSeconds(e){return ee(e,86400,Q(K/86400))}toMinutes(e){return ee(e,1440,Q(K/1440))}toHours(e){return ee(e,24,Q(K/24))}toDays(e){return e}};class le{constructor(e,t){if(isNaN(e))throw new u("NaN is not supported for a Duration");this.duration=Q(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return ne.convert(this.duration,this.unit)}toMillis(){return re.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return ae.convert(this.duration,this.unit)}toHours(){return se.convert(this.duration,this.unit)}toDays(){return oe.convert(this.duration,this.unit)}convertTo(e){return new le(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return le.negInf();case-1/0:return le.inf();default:return new le(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new u("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,n=e;return n.unit.ord<t.unit.ord&&(t=e,n=this),n=n.convertTo(t.unit),new le(t.duration+n.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?le.millis(e):e}static zero(){return new le(0,oe)}static inf(){return new le(1/0,oe)}static negInf(){return new le(-1/0,oe)}static nanos(e){return new le(e,te)}static micros(e){return new le(e,ne)}static millis(e){return new le(e,re)}static seconds(e){return new le(e,ie)}static minutes(e){return new le(e,ae)}static hours(e){return new le(e,se)}static days(e){return new le(e,oe)}}class ce{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const n=this.get,r=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=n,i._previous=r}}static of(e){return new ce(e)}}function ue(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),n=[];for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)return n}}const de=Math.log(2);function pe(e){if(e<0)throw new u("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class me{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const n=this.batchIndex+1&t;return n?(this.batchIndex=n,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,n){const r=(e,i,a)=>i.update(e.scheduleOnce(a,(()=>{n(),r(e,i,t)}))),i=W.empty();return r(this,i,e)}scheduleAtFixedRate(e,t,n){const r=(e,t,i,a)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();n();const s=e.currentTimeMillis()-i,o=Math.max(0,a-s);r(e,t,a,o)}))),i=W.empty();return r(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}me.global=ce.of((()=>ye));class he{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*s(this.type)+this.recommendedBatchSize}static synchronous(){return new he("synchronous")}static alwaysAsync(){return new he("alwaysAsync")}static batched(e){return new he("batched",e)}}he.global=ce.of((()=>he.batched()));class fe{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class ge extends me{constructor(e=!1,t=he.global.get(),n){super(t),n&&(this.reportFailure=n),this._trampoline=new fe(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ve(e,this.reportFailure)):e=>setTimeout(ve(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const n=Math.max(0,le.of(e).toMillis()),r=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),n);return P.of((()=>clearTimeout(r)))}withExecutionModel(e){return new ge(this._useSetImmediate,e)}}const ye=new ge(!0);function ve(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(y,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const n=this._scheduler;return this.transformWith(Ee(t,(e=>be.raise(e,n)),n),Ee(e,(e=>be.pure(e,n)),n))}toPromise(){return new Promise(((e,t)=>{this.onComplete((n=>n.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(le.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const n=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(n,this._scheduler)}static of(e,t=me.global.get()){const n=xe.empty(t);return t.executeAsync((()=>n.tryComplete(E.of(e)))),n.future()}static pure(e,t=me.global.get()){return new we(T(e),t)}static raise(e,t=me.global.get()){return new we(L(e),t)}static create(e,t=me.global.get()){const n=xe.empty(t);try{const t=e(n.complete);return n.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=me.global.get()){const t=e;let n=t._funCache&&t._funCache.futureUnit;return n||(n=new we(T(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=n),n}static delayedTick(e,t=me.global.get()){return be.create((n=>t.scheduleOnce(e,(()=>n(T(void 0))))),t)}static tailRecM(e,t,n=me.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),n):be.tailRecM(e.swap().get(),t,n)))}static fromPromise(e,t=me.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(T(e))),(e=>t(L(e))))}),t)}static fromTry(e,t=me.global.get()){return new we(e,t)}static firstCompletedOf(e,t=me.global.get()){return function(e,t){return be.create((n=>{try{const r=Te(e,t);if(0===r.length)return n(L(new u("empty list of futures")));let i=!1;for(let e=0;e<r.length;e++){const a=e;r[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,Ae(r,t,a),n(e))}))}return P.of((()=>Ae(r,t)))}catch(e){n(L(e))}}),t)}(e,t)}static traverse(e,t=1/0,n=me.global.get()){return r=>function(e,t,n,r){if(n<=0)throw new u("parallelism <= 0");return be.of((()=>ue(e)),r).flatMap((e=>_e(e,t,n,r,0,[])))}(e,r,t,n)}static sequence(e,t=me.global.get()){return function(e,t){return be.create((n=>{try{const r=Te(e,t);if(0===r.length)return n(T([]));const i=P.of((()=>Ae(r,t)));let a=!1,s=0,o=[];for(let e=0;e<r.length;e++){const l=e;r[e].onComplete((e=>{s+=1,e.isSuccess()?a||(o[l]=e.get(),a=s===r.length,a&&n(T(o))):a?t.reportFailure(e.failed().get()):(a=!0,i.cancel(),n(e))}))}return i}catch(e){n(L(e))}}),t)}(e,t)}static map2(e,t,n,r=me.global.get()){return be.sequence([e,t],r).map((e=>n(e[0],e[1])))}static map3(e,t,n,r,i=me.global.get()){return be.sequence([e,t,n],i).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i,a=me.global.get()){return be.sequence([e,t,n,r],a).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a,s=me.global.get()){return be.sequence([e,t,n,r,i],s).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,s,o=me.global.get()){return be.sequence([e,t,n,r,i,a],o).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return I(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return ke(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class Ce{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return x;case"complete":return I(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const n=this.ref;if(this.ref=e,this.id="complete",n)for(let r=0;r<n.length;r++)t.executeBatched((()=>n[r](e)));return!0;case"complete":return!1;case"chained":const r=this.ref.compressedRoot(),i=r.tryComplete(e,t);return this.id="complete",this.ref=i?e:r.value().get(),i}}chainTo(e,t){switch(this.id){case null:const n=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),n&&n.length>0)for(let r=0;r<n.length;r++)e.onComplete(n[r],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const Se={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(f.left,f.right,t)))};h(be,Se);class Ie extends be{constructor(e,t,n){super(),this._state=e,this._scheduler=n,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Ie(this._state,this._cancelable,e)}transformWith(e,t){return ke(this,e,t,this._scheduler,this._cancelable)}}class xe{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new c("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(T(e))}success(e){return this.complete(T(e))}tryFailure(e){return this.tryComplete(L(e))}failure(e){return this.complete(L(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){switch(this._state.id){case"complete":return new we(this._state.ref,this._scheduler);default:return new Ie(this._state,e,this._scheduler)}}withScheduler(e){return this._scheduler===e?this:new xe(this._state,e)}static empty(e=me.global.get()){return new xe(new Ce,e)}static completed(e,t=me.global.get()){const n=new Ce;return n.id="complete",n.ref=e,new xe(n,t)}}function ke(e,t,n,r,i){const a=xe.empty(r),s=new H(i);return e.onComplete((e=>{let i;try{i=e.fold(t,n)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof H?e.chainTo(s):!e||e instanceof F||s.update(e)}else s.clear();i instanceof Ie?i._state.chainTo(a._state,r):i.onComplete(a.tryComplete)})),a.future(s)}function Ee(e,t,n){return r=>{if("function"!=typeof e)return t(r);const i=e(r);return i?"function"==typeof i.then?be.fromPromise(i,n):be.pure(i,n):be.pure(r,n)}}function Ae(e,t,n=-1){const r=[];for(let t=0;t<e.length;t++)if(t!==n)try{e[t].cancel()}catch(e){r.push(e)}if(r.length>0)for(const e of r)t.reportFailure(e)}function Te(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const n=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)break}return n}catch(e){throw Ae(n,t),e}}function _e(e,t,n,r,i,a){if(i>=e.length)return be.pure(a,r);let s=[],o=0;try{for(;i<e.length&&o<n;)s.push(t(e[i++])),o+=1;const l=be.sequence(s,r).map((e=>{for(let t=0;t<e.length;t++)a.push(e[t])}));return i>=e.length?l.map((()=>a)):l.flatMap((()=>_e(e,t,n,r,i,a)))}catch(e){return Ae(s,r),be.raise(e)}}const Le={next:()=>({done:!0})};function Oe(e){if(!e)return Le;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Le;let n=0;return{next:()=>{const e=t[n++];return{done:n>=t.length,value:e}}}}class Re{get(){return function(e){let t=e,n=null,r=null;for(;;)switch(t._tag){case"now":const e=t,i=Ue(n,r);if(!i)return e.value;n=null,t=i(e.value);break;case"always":case"once":t=new Pe(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":n&&(r||(r=[]),r.push(n));const a=t;n=a.f,t=a.source}}(this)}map(e){return new $e(this,(t=>Re.now(e(t))))}flatMap(e){return new $e(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Fe(this.get);default:return new Fe((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Re.always(e)}static pure(e){return Re.now(e)}static now(e){return new Pe(e)}static unit(){return Me}static always(e){return new Ne(e)}static once(e){return new Fe(e)}static suspend(e){return new De(e)}static defer(e){return Re.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Re.now(e.get()):Re.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Re.of((()=>Oe(e))).flatMap((e=>je([],e)))}(e)}static map2(e,t,n){return Re.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return Re.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return Re.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return Re.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,s){return Re.sequence([e,t,n,r,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Pe extends Re{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Me=new Pe(void 0);class Fe extends Re{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class Ne extends Re{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class De extends Re{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class $e extends Re{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const Be={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Re.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Re.tailRecM(t,(t=>e(f.left,f.right,t)))};function Ue(e,t){return e||(t&&t.length>0?t.pop():null)}function je(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?Re.pure(e):je(e,t))))}if(r)return Re.pure(e)}}h(Re,Be);class We{run(e=me.global.get()){return function(e,t){let n=e,r=null,i=null;const a=t.executionModel.recommendedBatchSize-1;let s=t.batchIndex;for(;;)if(n instanceof E){if(n.isSuccess()){const e=et(r,i);if(!e)return t.batchIndex=s,be.pure(n.get());try{n=e(n.get())}catch(e){n=new Ge(E.failure(e))}}else{const e=n.failed().get(),a=tt(r,i);if(!a)return t.batchIndex=s,be.raise(e);try{n=a(e)}catch(e){n=new Ge(E.failure(e))}}r=null;const e=s+1&a;if(!e)return st(n,t,r,i,!0);s=e}else switch(n._tag){case"pure":n=n.value;break;case"always":n=E.of(n.thunk);break;case"once":n=n.runTry();break;case"flatMap":const e=n;r&&(i||(i=[]),i.push(r)),r=e.g?[e.f,e.g]:e.f,n=e.source;break;case"async":case"memoize":return st(n,t,r,i,!1)}}(this,e)}runOnComplete(e,t=me.global.get()){return at(this,t,null,e,null,null,null)||P.empty()}attempt(){return this.transform((e=>f.left(e)),f.right)}asyncBoundary(e){return this.flatMap((t=>We.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return We.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>We.delayedTick(e).flatMap((()=>We.raise(t)))),(t=>We.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(I(t)).flatMap((()=>We.raise(t)))),(t=>e(x).map((()=>t))))}doOnCancel(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler;r.trampoline((()=>{const i=t.connection;i.push(P.of((()=>e.run(r)))),We.unsafeStart(this,t,ot(r,i,n))}))}))}executeForked(e){return We.fork(this,e)}executeWithModel(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler.withExecutionModel(e),i=new Xe(r,t.connection,t.options);r.trampoline((()=>We.unsafeStart(this,i,n)))}))}executeWithOptions(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=new Xe(r,t.connection,e);r.trampoline((()=>We.unsafeStart(this,i,n)))}))}flatMap(e){return new Ve(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new Ve(this,(t=>We.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new ze(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new Ze(this,!1):e;default:return new Ze(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new ze(this.thunk,!0);default:return new Ze(this,!0)}}recover(e){return this.recoverWith((t=>We.now(e(t))))}recoverWith(e){return this.transformWith(e,We.now)}timeout(e){const t=We.raise(new p(le.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const n=[this,We.delayedTick(e).flatMap((()=>t))];return We.firstCompletedOf(n)}transform(e,t){return this.transformWith((t=>We.now(e(t))),(e=>We.now(t(e))))}transformWith(e,t){return new Ve(this,t,e)}static always(e){return new Ye(e)}static async(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=t.connection;r.trampoline((()=>{const t=ot(r,i,n);try{const n=e(r,t);i.push(n||P.empty())}catch(e){t(L(e))}}))}))}static asyncUnsafe(e){return new qe(e)}static defer(e){return We.unit().flatMap((()=>e()))}static deferAction(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler;let i;try{i=e(r)}catch(e){i=We.raise(e)}r.trampoline((()=>We.unsafeStart(i,t,n)))}))}static deferFuture(e){return We.suspend((()=>We.fromFuture(e())))}static deferFutureAction(e){return We.deferAction((t=>We.fromFuture(e(t))))}static delayedTick(e){return We.asyncUnsafe(((t,n)=>{const r=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{r.pop(),n(E.unit())}));r.push(i)}))}static firstCompletedOf(e){return ut(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?We.asyncUnsafe(((t,n)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),n(e)}))})):We.fromTry(e.value().get())}static fromTry(e){return new Ge(e)}static fork(e,t){return We.shift(t).flatMap((()=>e))}static map2(e,t,n){return We.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return We.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return We.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return We.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,s){return We.sequence([e,t,n,r,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new Ge(T(e))}static of(e){return We.always(e)}static once(e){return new ze(e,!1)}static parMap2(e,t,n){return We.gather([e,t]).map((e=>n(e[0],e[1])))}static parMap3(e,t,n,r){return We.gather([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static parMap4(e,t,n,r,i){return We.gather([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,n,r,i,a){return We.gather([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,n,r,i,a,s){return We.gather([e,t,n,r,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return We.now(e)}static raise(e){return new Ge(L(e))}static sequence(e){return function(e){return We.of((()=>Oe(e))).flatMap((e=>ct([],e)))}(e)}static gather(e){return ut(e,be.sequence)}static shift(e){return e?Ke(e):Qe}static suspend(e){return We.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?We.now(e.get()):We.tailRecM(e.swap().get(),t)))}catch(e){return We.raise(e)}}static unit(){return He}static unsafeStart(e,t,n){return at(e,t.scheduler,t,n,null,null,null)}}class Ge extends We{constructor(e){super(),this.value=e,this._tag="pure"}}const He=new Ge(E.unit());class ze extends We{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new ze(this._thunk,!1):this}runTry(){if(this._thunk){const e=E.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class Ye extends We{constructor(e){super(),this.thunk=e,this._tag="always"}}class Ve extends We{constructor(e,t,n){super(),this.source=e,this.f=t,this.g=n,this._tag="flatMap"}}class qe extends We{constructor(e){super(),this.register=e,this._tag="async"}}class Ze extends We{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class Xe{constructor(e,t=new G,n={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=n,this.connection=t,n.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:We.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>We.tailRecM(t,(t=>e(f.left,f.right,t)))};function Ke(e){return We.asyncUnsafe(((t,n)=>{(e||t.scheduler).executeAsync((()=>n(E.unit())))}))}h(We,Je);const Qe=Ke();function et(e,t){let n;return e?n=e:t&&t.length>0&&(n=t.pop()),n?"function"==typeof n?n:n[0]:null}function tt(e,t){let n=e;do{if(n&&"function"!=typeof n)return n[1];n=t?t.pop():null}while(n);return null}class nt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,at(new Ge(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function rt(e,t,n,r,i,a,s){if(!t.shouldCancel()){t.scheduler.batchIndex=s;const o=r||new nt(t,n);o.prepare(i,a),e(t,o.asFunction)}}function it(e,t,n,r,i,a){t.shouldCancel()||t.scheduler.executeAsync((()=>{at(e,t.scheduler,t,n,r,i,a)}))}function at(e,t,n,r,i,a,s){let o=e,l=a,c=s;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(o instanceof E){if(o.isSuccess()){const e=et(l,c);if(!e)return t.batchIndex=d,r(o);try{o=e(o.get())}catch(e){o=E.failure(e)}}else{const e=tt(l,c);if(!e)return t.batchIndex=d,r(o);try{o=e(o.failed().get())}catch(e){o=E.failure(e)}}l=null;const e=d+1&u;if(!e){const e=n||new Xe(t);return it(o instanceof E?new Ge(o):o,e,r,i,l,c),e.connection}d=e}else switch(o._tag){case"pure":o=o.value;break;case"always":o=E.of(o.thunk);break;case"once":o=o.runTry();break;case"flatMap":const e=o;l&&(c||(c=[]),c.push(l)),l=e.g?[e.f,e.g]:e.f,o=e.source;break;case"async":const a=o,s=n||new Xe(t);return rt(a.register,s,r,i,l,c,d),s.connection;case"memoize":return lt(o,t,n,r,l,c,d)}}function st(e,t,n,r,i){return be.create((a=>{const s=new Xe(t);return i?it(e,s,a,null,n,r):at(e,t,s,a,null,n,r),s.connection}))}function ot(e,t,n){let r=!1;return i=>{r?i.isFailure()&&e.reportFailure(i.failed().get()):(r=!0,e.trampoline((()=>{t.pop(),n(i)})))}}function lt(e,t,n,r,i,a,s){let o;if(t.batchIndex=s,e.result)o=e.result;else{const n=st(e.source,t,null,null,!1);n.value().isEmpty()?(e.result=n,o=n,n.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(o=n.value().get(),!o.isSuccess()&&e.onlySuccess||(e.result=o))}at(o instanceof E?new Ge(o):We.fromFuture(o),t,n,r,null,i,a)}function ct(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?We.pure(e):ct(e,t))))}if(r)return We.pure(e)}}function ut(e,t){return We.asyncUnsafe(((n,r)=>{n.scheduler.trampoline((()=>{let i=!0;try{const a=[],s=ue(e);i=!1;for(let e=0;e<s.length;e++){const t=s[e].run(n.scheduler);a.push(t)}const o=t(a,n.scheduler);n.connection.push(o),o.onComplete(ot(n.scheduler,n.connection,r))}catch(e){i?r(L(e)):n.scheduler.reportFailure(e)}}))}))}},77150:(e,t,n)=>{n.d(t,{R:()=>s});var r=n(59312),i=n(14601),a=n(46601);function s(e){return function(t){return t.lift(new o(e))}}var o=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.ZT(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new i.w,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add((0,a.ft)(t,new a.IY(this))),this.subscribing=!1},t}(a.Ds)},87938:(e,t,n)=>{n.d(t,{j:()=>l});var r=n(59312),i=n(98036),a=n(44586),s=n(57655),o=n(72500);function l(e,t){return t?function(n){return new d(n,t).lift(new c(e))}:function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.delayDurationSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.ZT(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=(0,o.D)(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(s.L),d=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return r.ZT(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new p(e,this.source))},t}(a.y),p=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return r.ZT(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i.L)},15789:(e,t,n)=>{n.d(t,{D:()=>a});var r=n(59312),i=n(98036);function a(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new o(e))},e}(),o=function(e){function t(t){return e.call(this,t)||this}return r.ZT(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i.L)},83840:(e,t,n)=>{n.d(t,{i:()=>s});var r=n(59312),i=n(98036),a=n(12834);function s(){return function(e){return e.lift(new o)}}var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}(),l=function(e){function t(t){return e.call(this,t)||this}return r.ZT(t,e),t.prototype._next=function(e){this.destination.next(a.P.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(a.P.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(a.P.createComplete()),e.complete()},t}(i.L)},62962:(e,t,n)=>{n.d(t,{n:()=>a});var r=n(32952),i=n(24755);function a(e){return e?(0,i.O)((function(){return new r.xQ}),e):(0,i.O)(new r.xQ)}},36303:(e,t,n)=>{n.d(t,{r:()=>s});var r=n(59312),i=n(98036),a=n(40151);function s(e){return void 0===e&&(e=-1),function(t){return 0===e?(0,a.c)():e<0?t.lift(new o(-1,t)):t.lift(new o(e-1,t))}}var o=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.count,this.source))},e}(),l=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r.ZT(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,n=this.count;if(0===n)return e.prototype.complete.call(this);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(i.L)},42833:(e,t,n)=>{n.d(t,{u:()=>a});var r=n(59312),i=n(46601);function a(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.notifier))},e}(),o=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var a=new i.IY(r);r.add(a),r.innerSubscription=a;var s=(0,i.ft)(n,a);return s!==a&&(r.add(s),r.innerSubscription=s),r}return r.ZT(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i.Ds)}}]);